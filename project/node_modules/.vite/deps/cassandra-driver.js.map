{
  "version": 3,
  "sources": ["browser-external:dns", "../../long/umd/index.js", "browser-external:net", "browser-external:events", "../../cassandra-driver/lib/errors.js", "../../cassandra-driver/lib/promise-utils.js", "../../cassandra-driver/lib/utils.js", "../../cassandra-driver/lib/policies/address-resolution.js", "../../cassandra-driver/lib/types/uuid.js", "../../cassandra-driver/lib/types/time-uuid.js", "../../cassandra-driver/lib/types/version-number.js", "../../cassandra-driver/lib/types/protocol-version.js", "../../cassandra-driver/lib/types/integer.js", "../../cassandra-driver/lib/types/big-decimal.js", "../../cassandra-driver/lib/types/duration.js", "../../cassandra-driver/lib/types/inet-address.js", "../../cassandra-driver/lib/types/local-date.js", "../../cassandra-driver/lib/types/local-time.js", "../../cassandra-driver/lib/types/result-set.js", "../../cassandra-driver/lib/types/result-stream.js", "../../cassandra-driver/lib/types/row.js", "../../cassandra-driver/lib/types/tuple.js", "browser-external:node:util", "../../cassandra-driver/lib/types/vector.js", "../../cassandra-driver/lib/types/index.js", "../../cassandra-driver/lib/policies/load-balancing.js", "../../cassandra-driver/lib/policies/reconnection.js", "../../cassandra-driver/lib/policies/retry.js", "../../cassandra-driver/lib/policies/speculative-execution.js", "../../cassandra-driver/lib/policies/timestamp-generation.js", "../../cassandra-driver/lib/policies/index.js", "../../cassandra-driver/lib/tracker/request-tracker.js", "../../cassandra-driver/lib/tracker/request-logger.js", "../../cassandra-driver/lib/tracker/index.js", "../../cassandra-driver/lib/metrics/client-metrics.js", "../../cassandra-driver/lib/metrics/default-metrics.js", "../../cassandra-driver/lib/metrics/index.js", "../../cassandra-driver/lib/auth/provider.js", "../../cassandra-driver/lib/auth/plain-text-auth-provider.js", "../../cassandra-driver/lib/auth/base-dse-authenticator.js", "../../cassandra-driver/lib/auth/gssapi-client.js", "../../cassandra-driver/lib/auth/dse-gssapi-auth-provider.js", "../../cassandra-driver/lib/auth/dse-plain-text-auth-provider.js", "../../cassandra-driver/lib/auth/no-auth-provider.js", "../../cassandra-driver/lib/auth/index.js", "../../cassandra-driver/lib/client-options.js", "../../cassandra-driver/lib/execution-profile.js", "../../cassandra-driver/lib/writers.js", "../../cassandra-driver/lib/execution-options.js", "../../cassandra-driver/package.json", "../../cassandra-driver/lib/requests.js", "../../cassandra-driver/lib/metadata/client-state.js", "browser-external:tls", "../../cassandra-driver/lib/types/mutable-long.js", "../../cassandra-driver/lib/token.js", "../../cassandra-driver/lib/datastax/search/date-range.js", "../../cassandra-driver/lib/datastax/search/index.js", "../../cassandra-driver/lib/geometry/geometry.js", "../../cassandra-driver/lib/geometry/point.js", "../../cassandra-driver/lib/geometry/line-string.js", "../../cassandra-driver/lib/geometry/polygon.js", "../../cassandra-driver/lib/geometry/index.js", "../../cassandra-driver/lib/encoder.js", "../../cassandra-driver/lib/readers.js", "../../cassandra-driver/lib/streams.js", "../../cassandra-driver/lib/stream-id-stack.js", "../../cassandra-driver/lib/operation-state.js", "../../cassandra-driver/lib/connection.js", "../../cassandra-driver/lib/host-connection-pool.js", "../../cassandra-driver/lib/prepare-handler.js", "../../cassandra-driver/lib/host.js", "../../cassandra-driver/lib/tokenizer.js", "../../cassandra-driver/lib/metadata/data-collection.js", "../../cassandra-driver/lib/metadata/table-metadata.js", "../../cassandra-driver/lib/metadata/aggregate.js", "../../cassandra-driver/lib/metadata/schema-function.js", "../../cassandra-driver/lib/metadata/schema-index.js", "../../cassandra-driver/lib/metadata/materialized-view.js", "../../cassandra-driver/lib/metadata/schema-parser.js", "../../cassandra-driver/lib/metadata/index.js", "../../cassandra-driver/lib/metadata/event-debouncer.js", "../../cassandra-driver/lib/control-connection.js", "../../cassandra-driver/lib/request-execution.js", "../../cassandra-driver/lib/request-handler.js", "../../cassandra-driver/lib/insights-client.js", "browser-external:https", "../../adm-zip/util/constants.js", "../../adm-zip/util/errors.js", "../../adm-zip/util/utils.js", "../../adm-zip/util/fattr.js", "../../adm-zip/util/decoder.js", "../../adm-zip/util/index.js", "../../adm-zip/headers/entryHeader.js", "../../adm-zip/headers/mainHeader.js", "../../adm-zip/headers/index.js", "browser-external:zlib", "../../adm-zip/methods/deflater.js", "../../adm-zip/methods/inflater.js", "../../adm-zip/methods/zipcrypto.js", "../../adm-zip/methods/index.js", "../../adm-zip/zipEntry.js", "../../adm-zip/zipFile.js", "../../adm-zip/adm-zip.js", "../../cassandra-driver/lib/datastax/cloud/index.js", "../../cassandra-driver/lib/datastax/graph/result-set.js", "../../cassandra-driver/lib/datastax/graph/wrappers.js", "../../cassandra-driver/lib/datastax/graph/complex-type-helper.js", "../../cassandra-driver/lib/datastax/graph/structure.js", "../../cassandra-driver/lib/datastax/graph/custom-type-serializers.js", "../../cassandra-driver/lib/datastax/graph/index.js", "../../cassandra-driver/lib/datastax/graph/type-serializers.js", "../../cassandra-driver/lib/datastax/graph/graph-serializer.js", "../../cassandra-driver/lib/datastax/graph/options.js", "../../cassandra-driver/lib/datastax/graph/graph-executor.js", "../../cassandra-driver/lib/client.js", "../../cassandra-driver/lib/mapping/tree.js", "../../cassandra-driver/lib/mapping/q.js", "../../cassandra-driver/lib/mapping/cache.js", "../../cassandra-driver/lib/mapping/model-batch-item.js", "../../cassandra-driver/lib/mapping/model-batch-mapper.js", "../../cassandra-driver/lib/mapping/model-mapper.js", "browser-external:vm", "../../cassandra-driver/lib/mapping/query-generator.js", "../../cassandra-driver/lib/mapping/result-mapper.js", "../../cassandra-driver/lib/mapping/result.js", "../../cassandra-driver/lib/mapping/object-selector.js", "../../cassandra-driver/lib/mapping/doc-info-adapter.js", "../../cassandra-driver/lib/mapping/mapping-handler.js", "../../cassandra-driver/lib/mapping/table-mappings.js", "../../cassandra-driver/lib/mapping/model-mapping-info.js", "../../cassandra-driver/lib/mapping/mapper.js", "../../cassandra-driver/lib/mapping/index.js", "../../cassandra-driver/lib/concurrent/index.js", "../../cassandra-driver/lib/datastax/index.js", "../../cassandra-driver/index.js"],
  "sourcesContent": ["module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"dns\" has been externalized for browser compatibility. Cannot access \"dns.${key}\" in client code. See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "// GENERATED FILE. DO NOT EDIT.\nvar Long = (function(exports) {\n  \"use strict\";\n  \n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  \n  /**\n   * @license\n   * Copyright 2009 The Closure Library Authors\n   * Copyright 2020 Daniel Wirtz / The long.js Authors.\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   *     http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   *\n   * SPDX-License-Identifier: Apache-2.0\n   */\n  // WebAssembly optimizations to do native i64 multiplication and divide\n  var wasm = null;\n  \n  try {\n    wasm = new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0, 1, 13, 2, 96, 0, 1, 127, 96, 4, 127, 127, 127, 127, 1, 127, 3, 7, 6, 0, 1, 1, 1, 1, 1, 6, 6, 1, 127, 1, 65, 0, 11, 7, 50, 6, 3, 109, 117, 108, 0, 1, 5, 100, 105, 118, 95, 115, 0, 2, 5, 100, 105, 118, 95, 117, 0, 3, 5, 114, 101, 109, 95, 115, 0, 4, 5, 114, 101, 109, 95, 117, 0, 5, 8, 103, 101, 116, 95, 104, 105, 103, 104, 0, 0, 10, 191, 1, 6, 4, 0, 35, 0, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 126, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 127, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 128, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 129, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 130, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11])), {}).exports;\n  } catch (e) {// no wasm support :(\n  }\n  /**\n   * Constructs a 64 bit two's-complement integer, given its low and high 32 bit values as *signed* integers.\n   *  See the from* functions below for more convenient ways of constructing Longs.\n   * @exports Long\n   * @class A Long class for representing a 64 bit two's-complement integer value.\n   * @param {number} low The low (signed) 32 bits of the long\n   * @param {number} high The high (signed) 32 bits of the long\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @constructor\n   */\n  \n  \n  function Long(low, high, unsigned) {\n    /**\n     * The low 32 bits as a signed value.\n     * @type {number}\n     */\n    this.low = low | 0;\n    /**\n     * The high 32 bits as a signed value.\n     * @type {number}\n     */\n  \n    this.high = high | 0;\n    /**\n     * Whether unsigned or not.\n     * @type {boolean}\n     */\n  \n    this.unsigned = !!unsigned;\n  } // The internal representation of a long is the two given signed, 32-bit values.\n  // We use 32-bit pieces because these are the size of integers on which\n  // Javascript performs bit-operations.  For operations like addition and\n  // multiplication, we split each number into 16 bit pieces, which can easily be\n  // multiplied within Javascript's floating-point representation without overflow\n  // or change in sign.\n  //\n  // In the algorithms below, we frequently reduce the negative case to the\n  // positive case by negating the input(s) and then post-processing the result.\n  // Note that we must ALWAYS check specially whether those values are MIN_VALUE\n  // (-2^63) because -MIN_VALUE == MIN_VALUE (since 2^63 cannot be represented as\n  // a positive number, it overflows back into a negative).  Not handling this\n  // case would often result in infinite recursion.\n  //\n  // Common constant values ZERO, ONE, NEG_ONE, etc. are defined below the from*\n  // methods on which they depend.\n  \n  /**\n   * An indicator used to reliably determine if an object is a Long or not.\n   * @type {boolean}\n   * @const\n   * @private\n   */\n  \n  \n  Long.prototype.__isLong__;\n  Object.defineProperty(Long.prototype, \"__isLong__\", {\n    value: true\n  });\n  /**\n   * @function\n   * @param {*} obj Object\n   * @returns {boolean}\n   * @inner\n   */\n  \n  function isLong(obj) {\n    return (obj && obj[\"__isLong__\"]) === true;\n  }\n  /**\n   * @function\n   * @param {*} value number\n   * @returns {number}\n   * @inner\n   */\n  \n  \n  function ctz32(value) {\n    var c = Math.clz32(value & -value);\n    return value ? 31 - c : c;\n  }\n  /**\n   * Tests if the specified object is a Long.\n   * @function\n   * @param {*} obj Object\n   * @returns {boolean}\n   */\n  \n  \n  Long.isLong = isLong;\n  /**\n   * A cache of the Long representations of small integer values.\n   * @type {!Object}\n   * @inner\n   */\n  \n  var INT_CACHE = {};\n  /**\n   * A cache of the Long representations of small unsigned integer values.\n   * @type {!Object}\n   * @inner\n   */\n  \n  var UINT_CACHE = {};\n  /**\n   * @param {number} value\n   * @param {boolean=} unsigned\n   * @returns {!Long}\n   * @inner\n   */\n  \n  function fromInt(value, unsigned) {\n    var obj, cachedObj, cache;\n  \n    if (unsigned) {\n      value >>>= 0;\n  \n      if (cache = 0 <= value && value < 256) {\n        cachedObj = UINT_CACHE[value];\n        if (cachedObj) return cachedObj;\n      }\n  \n      obj = fromBits(value, 0, true);\n      if (cache) UINT_CACHE[value] = obj;\n      return obj;\n    } else {\n      value |= 0;\n  \n      if (cache = -128 <= value && value < 128) {\n        cachedObj = INT_CACHE[value];\n        if (cachedObj) return cachedObj;\n      }\n  \n      obj = fromBits(value, value < 0 ? -1 : 0, false);\n      if (cache) INT_CACHE[value] = obj;\n      return obj;\n    }\n  }\n  /**\n   * Returns a Long representing the given 32 bit integer value.\n   * @function\n   * @param {number} value The 32 bit integer in question\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @returns {!Long} The corresponding Long value\n   */\n  \n  \n  Long.fromInt = fromInt;\n  /**\n   * @param {number} value\n   * @param {boolean=} unsigned\n   * @returns {!Long}\n   * @inner\n   */\n  \n  function fromNumber(value, unsigned) {\n    if (isNaN(value)) return unsigned ? UZERO : ZERO;\n  \n    if (unsigned) {\n      if (value < 0) return UZERO;\n      if (value >= TWO_PWR_64_DBL) return MAX_UNSIGNED_VALUE;\n    } else {\n      if (value <= -TWO_PWR_63_DBL) return MIN_VALUE;\n      if (value + 1 >= TWO_PWR_63_DBL) return MAX_VALUE;\n    }\n  \n    if (value < 0) return fromNumber(-value, unsigned).neg();\n    return fromBits(value % TWO_PWR_32_DBL | 0, value / TWO_PWR_32_DBL | 0, unsigned);\n  }\n  /**\n   * Returns a Long representing the given value, provided that it is a finite number. Otherwise, zero is returned.\n   * @function\n   * @param {number} value The number in question\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @returns {!Long} The corresponding Long value\n   */\n  \n  \n  Long.fromNumber = fromNumber;\n  /**\n   * @param {number} lowBits\n   * @param {number} highBits\n   * @param {boolean=} unsigned\n   * @returns {!Long}\n   * @inner\n   */\n  \n  function fromBits(lowBits, highBits, unsigned) {\n    return new Long(lowBits, highBits, unsigned);\n  }\n  /**\n   * Returns a Long representing the 64 bit integer that comes by concatenating the given low and high bits. Each is\n   *  assumed to use 32 bits.\n   * @function\n   * @param {number} lowBits The low 32 bits\n   * @param {number} highBits The high 32 bits\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @returns {!Long} The corresponding Long value\n   */\n  \n  \n  Long.fromBits = fromBits;\n  /**\n   * @function\n   * @param {number} base\n   * @param {number} exponent\n   * @returns {number}\n   * @inner\n   */\n  \n  var pow_dbl = Math.pow; // Used 4 times (4*8 to 15+4)\n  \n  /**\n   * @param {string} str\n   * @param {(boolean|number)=} unsigned\n   * @param {number=} radix\n   * @returns {!Long}\n   * @inner\n   */\n  \n  function fromString(str, unsigned, radix) {\n    if (str.length === 0) throw Error('empty string');\n  \n    if (typeof unsigned === 'number') {\n      // For goog.math.long compatibility\n      radix = unsigned;\n      unsigned = false;\n    } else {\n      unsigned = !!unsigned;\n    }\n  \n    if (str === \"NaN\" || str === \"Infinity\" || str === \"+Infinity\" || str === \"-Infinity\") return unsigned ? UZERO : ZERO;\n    radix = radix || 10;\n    if (radix < 2 || 36 < radix) throw RangeError('radix');\n    var p;\n    if ((p = str.indexOf('-')) > 0) throw Error('interior hyphen');else if (p === 0) {\n      return fromString(str.substring(1), unsigned, radix).neg();\n    } // Do several (8) digits each time through the loop, so as to\n    // minimize the calls to the very expensive emulated div.\n  \n    var radixToPower = fromNumber(pow_dbl(radix, 8));\n    var result = ZERO;\n  \n    for (var i = 0; i < str.length; i += 8) {\n      var size = Math.min(8, str.length - i),\n          value = parseInt(str.substring(i, i + size), radix);\n  \n      if (size < 8) {\n        var power = fromNumber(pow_dbl(radix, size));\n        result = result.mul(power).add(fromNumber(value));\n      } else {\n        result = result.mul(radixToPower);\n        result = result.add(fromNumber(value));\n      }\n    }\n  \n    result.unsigned = unsigned;\n    return result;\n  }\n  /**\n   * Returns a Long representation of the given string, written using the specified radix.\n   * @function\n   * @param {string} str The textual representation of the Long\n   * @param {(boolean|number)=} unsigned Whether unsigned or not, defaults to signed\n   * @param {number=} radix The radix in which the text is written (2-36), defaults to 10\n   * @returns {!Long} The corresponding Long value\n   */\n  \n  \n  Long.fromString = fromString;\n  /**\n   * @function\n   * @param {!Long|number|string|!{low: number, high: number, unsigned: boolean}} val\n   * @param {boolean=} unsigned\n   * @returns {!Long}\n   * @inner\n   */\n  \n  function fromValue(val, unsigned) {\n    if (typeof val === 'number') return fromNumber(val, unsigned);\n    if (typeof val === 'string') return fromString(val, unsigned); // Throws for non-objects, converts non-instanceof Long:\n  \n    return fromBits(val.low, val.high, typeof unsigned === 'boolean' ? unsigned : val.unsigned);\n  }\n  /**\n   * Converts the specified value to a Long using the appropriate from* function for its type.\n   * @function\n   * @param {!Long|number|string|!{low: number, high: number, unsigned: boolean}} val Value\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @returns {!Long}\n   */\n  \n  \n  Long.fromValue = fromValue; // NOTE: the compiler should inline these constant values below and then remove these variables, so there should be\n  // no runtime penalty for these.\n  \n  /**\n   * @type {number}\n   * @const\n   * @inner\n   */\n  \n  var TWO_PWR_16_DBL = 1 << 16;\n  /**\n   * @type {number}\n   * @const\n   * @inner\n   */\n  \n  var TWO_PWR_24_DBL = 1 << 24;\n  /**\n   * @type {number}\n   * @const\n   * @inner\n   */\n  \n  var TWO_PWR_32_DBL = TWO_PWR_16_DBL * TWO_PWR_16_DBL;\n  /**\n   * @type {number}\n   * @const\n   * @inner\n   */\n  \n  var TWO_PWR_64_DBL = TWO_PWR_32_DBL * TWO_PWR_32_DBL;\n  /**\n   * @type {number}\n   * @const\n   * @inner\n   */\n  \n  var TWO_PWR_63_DBL = TWO_PWR_64_DBL / 2;\n  /**\n   * @type {!Long}\n   * @const\n   * @inner\n   */\n  \n  var TWO_PWR_24 = fromInt(TWO_PWR_24_DBL);\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var ZERO = fromInt(0);\n  /**\n   * Signed zero.\n   * @type {!Long}\n   */\n  \n  Long.ZERO = ZERO;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var UZERO = fromInt(0, true);\n  /**\n   * Unsigned zero.\n   * @type {!Long}\n   */\n  \n  Long.UZERO = UZERO;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var ONE = fromInt(1);\n  /**\n   * Signed one.\n   * @type {!Long}\n   */\n  \n  Long.ONE = ONE;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var UONE = fromInt(1, true);\n  /**\n   * Unsigned one.\n   * @type {!Long}\n   */\n  \n  Long.UONE = UONE;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var NEG_ONE = fromInt(-1);\n  /**\n   * Signed negative one.\n   * @type {!Long}\n   */\n  \n  Long.NEG_ONE = NEG_ONE;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var MAX_VALUE = fromBits(0xFFFFFFFF | 0, 0x7FFFFFFF | 0, false);\n  /**\n   * Maximum signed value.\n   * @type {!Long}\n   */\n  \n  Long.MAX_VALUE = MAX_VALUE;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var MAX_UNSIGNED_VALUE = fromBits(0xFFFFFFFF | 0, 0xFFFFFFFF | 0, true);\n  /**\n   * Maximum unsigned value.\n   * @type {!Long}\n   */\n  \n  Long.MAX_UNSIGNED_VALUE = MAX_UNSIGNED_VALUE;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var MIN_VALUE = fromBits(0, 0x80000000 | 0, false);\n  /**\n   * Minimum signed value.\n   * @type {!Long}\n   */\n  \n  Long.MIN_VALUE = MIN_VALUE;\n  /**\n   * @alias Long.prototype\n   * @inner\n   */\n  \n  var LongPrototype = Long.prototype;\n  /**\n   * Converts the Long to a 32 bit integer, assuming it is a 32 bit integer.\n   * @this {!Long}\n   * @returns {number}\n   */\n  \n  LongPrototype.toInt = function toInt() {\n    return this.unsigned ? this.low >>> 0 : this.low;\n  };\n  /**\n   * Converts the Long to a the nearest floating-point representation of this value (double, 53 bit mantissa).\n   * @this {!Long}\n   * @returns {number}\n   */\n  \n  \n  LongPrototype.toNumber = function toNumber() {\n    if (this.unsigned) return (this.high >>> 0) * TWO_PWR_32_DBL + (this.low >>> 0);\n    return this.high * TWO_PWR_32_DBL + (this.low >>> 0);\n  };\n  /**\n   * Converts the Long to a string written in the specified radix.\n   * @this {!Long}\n   * @param {number=} radix Radix (2-36), defaults to 10\n   * @returns {string}\n   * @override\n   * @throws {RangeError} If `radix` is out of range\n   */\n  \n  \n  LongPrototype.toString = function toString(radix) {\n    radix = radix || 10;\n    if (radix < 2 || 36 < radix) throw RangeError('radix');\n    if (this.isZero()) return '0';\n  \n    if (this.isNegative()) {\n      // Unsigned Longs are never negative\n      if (this.eq(MIN_VALUE)) {\n        // We need to change the Long value before it can be negated, so we remove\n        // the bottom-most digit in this base and then recurse to do the rest.\n        var radixLong = fromNumber(radix),\n            div = this.div(radixLong),\n            rem1 = div.mul(radixLong).sub(this);\n        return div.toString(radix) + rem1.toInt().toString(radix);\n      } else return '-' + this.neg().toString(radix);\n    } // Do several (6) digits each time through the loop, so as to\n    // minimize the calls to the very expensive emulated div.\n  \n  \n    var radixToPower = fromNumber(pow_dbl(radix, 6), this.unsigned),\n        rem = this;\n    var result = '';\n  \n    while (true) {\n      var remDiv = rem.div(radixToPower),\n          intval = rem.sub(remDiv.mul(radixToPower)).toInt() >>> 0,\n          digits = intval.toString(radix);\n      rem = remDiv;\n      if (rem.isZero()) return digits + result;else {\n        while (digits.length < 6) digits = '0' + digits;\n  \n        result = '' + digits + result;\n      }\n    }\n  };\n  /**\n   * Gets the high 32 bits as a signed integer.\n   * @this {!Long}\n   * @returns {number} Signed high bits\n   */\n  \n  \n  LongPrototype.getHighBits = function getHighBits() {\n    return this.high;\n  };\n  /**\n   * Gets the high 32 bits as an unsigned integer.\n   * @this {!Long}\n   * @returns {number} Unsigned high bits\n   */\n  \n  \n  LongPrototype.getHighBitsUnsigned = function getHighBitsUnsigned() {\n    return this.high >>> 0;\n  };\n  /**\n   * Gets the low 32 bits as a signed integer.\n   * @this {!Long}\n   * @returns {number} Signed low bits\n   */\n  \n  \n  LongPrototype.getLowBits = function getLowBits() {\n    return this.low;\n  };\n  /**\n   * Gets the low 32 bits as an unsigned integer.\n   * @this {!Long}\n   * @returns {number} Unsigned low bits\n   */\n  \n  \n  LongPrototype.getLowBitsUnsigned = function getLowBitsUnsigned() {\n    return this.low >>> 0;\n  };\n  /**\n   * Gets the number of bits needed to represent the absolute value of this Long.\n   * @this {!Long}\n   * @returns {number}\n   */\n  \n  \n  LongPrototype.getNumBitsAbs = function getNumBitsAbs() {\n    if (this.isNegative()) // Unsigned Longs are never negative\n      return this.eq(MIN_VALUE) ? 64 : this.neg().getNumBitsAbs();\n    var val = this.high != 0 ? this.high : this.low;\n  \n    for (var bit = 31; bit > 0; bit--) if ((val & 1 << bit) != 0) break;\n  \n    return this.high != 0 ? bit + 33 : bit + 1;\n  };\n  /**\n   * Tests if this Long's value equals zero.\n   * @this {!Long}\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.isZero = function isZero() {\n    return this.high === 0 && this.low === 0;\n  };\n  /**\n   * Tests if this Long's value equals zero. This is an alias of {@link Long#isZero}.\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.eqz = LongPrototype.isZero;\n  /**\n   * Tests if this Long's value is negative.\n   * @this {!Long}\n   * @returns {boolean}\n   */\n  \n  LongPrototype.isNegative = function isNegative() {\n    return !this.unsigned && this.high < 0;\n  };\n  /**\n   * Tests if this Long's value is positive or zero.\n   * @this {!Long}\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.isPositive = function isPositive() {\n    return this.unsigned || this.high >= 0;\n  };\n  /**\n   * Tests if this Long's value is odd.\n   * @this {!Long}\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.isOdd = function isOdd() {\n    return (this.low & 1) === 1;\n  };\n  /**\n   * Tests if this Long's value is even.\n   * @this {!Long}\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.isEven = function isEven() {\n    return (this.low & 1) === 0;\n  };\n  /**\n   * Tests if this Long's value equals the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.equals = function equals(other) {\n    if (!isLong(other)) other = fromValue(other);\n    if (this.unsigned !== other.unsigned && this.high >>> 31 === 1 && other.high >>> 31 === 1) return false;\n    return this.high === other.high && this.low === other.low;\n  };\n  /**\n   * Tests if this Long's value equals the specified's. This is an alias of {@link Long#equals}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.eq = LongPrototype.equals;\n  /**\n   * Tests if this Long's value differs from the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.notEquals = function notEquals(other) {\n    return !this.eq(\n    /* validates */\n    other);\n  };\n  /**\n   * Tests if this Long's value differs from the specified's. This is an alias of {@link Long#notEquals}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.neq = LongPrototype.notEquals;\n  /**\n   * Tests if this Long's value differs from the specified's. This is an alias of {@link Long#notEquals}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.ne = LongPrototype.notEquals;\n  /**\n   * Tests if this Long's value is less than the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.lessThan = function lessThan(other) {\n    return this.comp(\n    /* validates */\n    other) < 0;\n  };\n  /**\n   * Tests if this Long's value is less than the specified's. This is an alias of {@link Long#lessThan}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.lt = LongPrototype.lessThan;\n  /**\n   * Tests if this Long's value is less than or equal the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.lessThanOrEqual = function lessThanOrEqual(other) {\n    return this.comp(\n    /* validates */\n    other) <= 0;\n  };\n  /**\n   * Tests if this Long's value is less than or equal the specified's. This is an alias of {@link Long#lessThanOrEqual}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.lte = LongPrototype.lessThanOrEqual;\n  /**\n   * Tests if this Long's value is less than or equal the specified's. This is an alias of {@link Long#lessThanOrEqual}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.le = LongPrototype.lessThanOrEqual;\n  /**\n   * Tests if this Long's value is greater than the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.greaterThan = function greaterThan(other) {\n    return this.comp(\n    /* validates */\n    other) > 0;\n  };\n  /**\n   * Tests if this Long's value is greater than the specified's. This is an alias of {@link Long#greaterThan}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.gt = LongPrototype.greaterThan;\n  /**\n   * Tests if this Long's value is greater than or equal the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.greaterThanOrEqual = function greaterThanOrEqual(other) {\n    return this.comp(\n    /* validates */\n    other) >= 0;\n  };\n  /**\n   * Tests if this Long's value is greater than or equal the specified's. This is an alias of {@link Long#greaterThanOrEqual}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.gte = LongPrototype.greaterThanOrEqual;\n  /**\n   * Tests if this Long's value is greater than or equal the specified's. This is an alias of {@link Long#greaterThanOrEqual}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.ge = LongPrototype.greaterThanOrEqual;\n  /**\n   * Compares this Long's value with the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {number} 0 if they are the same, 1 if the this is greater and -1\n   *  if the given one is greater\n   */\n  \n  LongPrototype.compare = function compare(other) {\n    if (!isLong(other)) other = fromValue(other);\n    if (this.eq(other)) return 0;\n    var thisNeg = this.isNegative(),\n        otherNeg = other.isNegative();\n    if (thisNeg && !otherNeg) return -1;\n    if (!thisNeg && otherNeg) return 1; // At this point the sign bits are the same\n  \n    if (!this.unsigned) return this.sub(other).isNegative() ? -1 : 1; // Both are positive if at least one is unsigned\n  \n    return other.high >>> 0 > this.high >>> 0 || other.high === this.high && other.low >>> 0 > this.low >>> 0 ? -1 : 1;\n  };\n  /**\n   * Compares this Long's value with the specified's. This is an alias of {@link Long#compare}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {number} 0 if they are the same, 1 if the this is greater and -1\n   *  if the given one is greater\n   */\n  \n  \n  LongPrototype.comp = LongPrototype.compare;\n  /**\n   * Negates this Long's value.\n   * @this {!Long}\n   * @returns {!Long} Negated Long\n   */\n  \n  LongPrototype.negate = function negate() {\n    if (!this.unsigned && this.eq(MIN_VALUE)) return MIN_VALUE;\n    return this.not().add(ONE);\n  };\n  /**\n   * Negates this Long's value. This is an alias of {@link Long#negate}.\n   * @function\n   * @returns {!Long} Negated Long\n   */\n  \n  \n  LongPrototype.neg = LongPrototype.negate;\n  /**\n   * Returns the sum of this and the specified Long.\n   * @this {!Long}\n   * @param {!Long|number|string} addend Addend\n   * @returns {!Long} Sum\n   */\n  \n  LongPrototype.add = function add(addend) {\n    if (!isLong(addend)) addend = fromValue(addend); // Divide each number into 4 chunks of 16 bits, and then sum the chunks.\n  \n    var a48 = this.high >>> 16;\n    var a32 = this.high & 0xFFFF;\n    var a16 = this.low >>> 16;\n    var a00 = this.low & 0xFFFF;\n    var b48 = addend.high >>> 16;\n    var b32 = addend.high & 0xFFFF;\n    var b16 = addend.low >>> 16;\n    var b00 = addend.low & 0xFFFF;\n    var c48 = 0,\n        c32 = 0,\n        c16 = 0,\n        c00 = 0;\n    c00 += a00 + b00;\n    c16 += c00 >>> 16;\n    c00 &= 0xFFFF;\n    c16 += a16 + b16;\n    c32 += c16 >>> 16;\n    c16 &= 0xFFFF;\n    c32 += a32 + b32;\n    c48 += c32 >>> 16;\n    c32 &= 0xFFFF;\n    c48 += a48 + b48;\n    c48 &= 0xFFFF;\n    return fromBits(c16 << 16 | c00, c48 << 16 | c32, this.unsigned);\n  };\n  /**\n   * Returns the difference of this and the specified Long.\n   * @this {!Long}\n   * @param {!Long|number|string} subtrahend Subtrahend\n   * @returns {!Long} Difference\n   */\n  \n  \n  LongPrototype.subtract = function subtract(subtrahend) {\n    if (!isLong(subtrahend)) subtrahend = fromValue(subtrahend);\n    return this.add(subtrahend.neg());\n  };\n  /**\n   * Returns the difference of this and the specified Long. This is an alias of {@link Long#subtract}.\n   * @function\n   * @param {!Long|number|string} subtrahend Subtrahend\n   * @returns {!Long} Difference\n   */\n  \n  \n  LongPrototype.sub = LongPrototype.subtract;\n  /**\n   * Returns the product of this and the specified Long.\n   * @this {!Long}\n   * @param {!Long|number|string} multiplier Multiplier\n   * @returns {!Long} Product\n   */\n  \n  LongPrototype.multiply = function multiply(multiplier) {\n    if (this.isZero()) return this;\n    if (!isLong(multiplier)) multiplier = fromValue(multiplier); // use wasm support if present\n  \n    if (wasm) {\n      var low = wasm[\"mul\"](this.low, this.high, multiplier.low, multiplier.high);\n      return fromBits(low, wasm[\"get_high\"](), this.unsigned);\n    }\n  \n    if (multiplier.isZero()) return this.unsigned ? UZERO : ZERO;\n    if (this.eq(MIN_VALUE)) return multiplier.isOdd() ? MIN_VALUE : ZERO;\n    if (multiplier.eq(MIN_VALUE)) return this.isOdd() ? MIN_VALUE : ZERO;\n  \n    if (this.isNegative()) {\n      if (multiplier.isNegative()) return this.neg().mul(multiplier.neg());else return this.neg().mul(multiplier).neg();\n    } else if (multiplier.isNegative()) return this.mul(multiplier.neg()).neg(); // If both longs are small, use float multiplication\n  \n  \n    if (this.lt(TWO_PWR_24) && multiplier.lt(TWO_PWR_24)) return fromNumber(this.toNumber() * multiplier.toNumber(), this.unsigned); // Divide each long into 4 chunks of 16 bits, and then add up 4x4 products.\n    // We can skip products that would overflow.\n  \n    var a48 = this.high >>> 16;\n    var a32 = this.high & 0xFFFF;\n    var a16 = this.low >>> 16;\n    var a00 = this.low & 0xFFFF;\n    var b48 = multiplier.high >>> 16;\n    var b32 = multiplier.high & 0xFFFF;\n    var b16 = multiplier.low >>> 16;\n    var b00 = multiplier.low & 0xFFFF;\n    var c48 = 0,\n        c32 = 0,\n        c16 = 0,\n        c00 = 0;\n    c00 += a00 * b00;\n    c16 += c00 >>> 16;\n    c00 &= 0xFFFF;\n    c16 += a16 * b00;\n    c32 += c16 >>> 16;\n    c16 &= 0xFFFF;\n    c16 += a00 * b16;\n    c32 += c16 >>> 16;\n    c16 &= 0xFFFF;\n    c32 += a32 * b00;\n    c48 += c32 >>> 16;\n    c32 &= 0xFFFF;\n    c32 += a16 * b16;\n    c48 += c32 >>> 16;\n    c32 &= 0xFFFF;\n    c32 += a00 * b32;\n    c48 += c32 >>> 16;\n    c32 &= 0xFFFF;\n    c48 += a48 * b00 + a32 * b16 + a16 * b32 + a00 * b48;\n    c48 &= 0xFFFF;\n    return fromBits(c16 << 16 | c00, c48 << 16 | c32, this.unsigned);\n  };\n  /**\n   * Returns the product of this and the specified Long. This is an alias of {@link Long#multiply}.\n   * @function\n   * @param {!Long|number|string} multiplier Multiplier\n   * @returns {!Long} Product\n   */\n  \n  \n  LongPrototype.mul = LongPrototype.multiply;\n  /**\n   * Returns this Long divided by the specified. The result is signed if this Long is signed or\n   *  unsigned if this Long is unsigned.\n   * @this {!Long}\n   * @param {!Long|number|string} divisor Divisor\n   * @returns {!Long} Quotient\n   */\n  \n  LongPrototype.divide = function divide(divisor) {\n    if (!isLong(divisor)) divisor = fromValue(divisor);\n    if (divisor.isZero()) throw Error('division by zero'); // use wasm support if present\n  \n    if (wasm) {\n      // guard against signed division overflow: the largest\n      // negative number / -1 would be 1 larger than the largest\n      // positive number, due to two's complement.\n      if (!this.unsigned && this.high === -0x80000000 && divisor.low === -1 && divisor.high === -1) {\n        // be consistent with non-wasm code path\n        return this;\n      }\n  \n      var low = (this.unsigned ? wasm[\"div_u\"] : wasm[\"div_s\"])(this.low, this.high, divisor.low, divisor.high);\n      return fromBits(low, wasm[\"get_high\"](), this.unsigned);\n    }\n  \n    if (this.isZero()) return this.unsigned ? UZERO : ZERO;\n    var approx, rem, res;\n  \n    if (!this.unsigned) {\n      // This section is only relevant for signed longs and is derived from the\n      // closure library as a whole.\n      if (this.eq(MIN_VALUE)) {\n        if (divisor.eq(ONE) || divisor.eq(NEG_ONE)) return MIN_VALUE; // recall that -MIN_VALUE == MIN_VALUE\n        else if (divisor.eq(MIN_VALUE)) return ONE;else {\n          // At this point, we have |other| >= 2, so |this/other| < |MIN_VALUE|.\n          var halfThis = this.shr(1);\n          approx = halfThis.div(divisor).shl(1);\n  \n          if (approx.eq(ZERO)) {\n            return divisor.isNegative() ? ONE : NEG_ONE;\n          } else {\n            rem = this.sub(divisor.mul(approx));\n            res = approx.add(rem.div(divisor));\n            return res;\n          }\n        }\n      } else if (divisor.eq(MIN_VALUE)) return this.unsigned ? UZERO : ZERO;\n  \n      if (this.isNegative()) {\n        if (divisor.isNegative()) return this.neg().div(divisor.neg());\n        return this.neg().div(divisor).neg();\n      } else if (divisor.isNegative()) return this.div(divisor.neg()).neg();\n  \n      res = ZERO;\n    } else {\n      // The algorithm below has not been made for unsigned longs. It's therefore\n      // required to take special care of the MSB prior to running it.\n      if (!divisor.unsigned) divisor = divisor.toUnsigned();\n      if (divisor.gt(this)) return UZERO;\n      if (divisor.gt(this.shru(1))) // 15 >>> 1 = 7 ; with divisor = 8 ; true\n        return UONE;\n      res = UZERO;\n    } // Repeat the following until the remainder is less than other:  find a\n    // floating-point that approximates remainder / other *from below*, add this\n    // into the result, and subtract it from the remainder.  It is critical that\n    // the approximate value is less than or equal to the real value so that the\n    // remainder never becomes negative.\n  \n  \n    rem = this;\n  \n    while (rem.gte(divisor)) {\n      // Approximate the result of division. This may be a little greater or\n      // smaller than the actual value.\n      approx = Math.max(1, Math.floor(rem.toNumber() / divisor.toNumber())); // We will tweak the approximate result by changing it in the 48-th digit or\n      // the smallest non-fractional digit, whichever is larger.\n  \n      var log2 = Math.ceil(Math.log(approx) / Math.LN2),\n          delta = log2 <= 48 ? 1 : pow_dbl(2, log2 - 48),\n          // Decrease the approximation until it is smaller than the remainder.  Note\n      // that if it is too large, the product overflows and is negative.\n      approxRes = fromNumber(approx),\n          approxRem = approxRes.mul(divisor);\n  \n      while (approxRem.isNegative() || approxRem.gt(rem)) {\n        approx -= delta;\n        approxRes = fromNumber(approx, this.unsigned);\n        approxRem = approxRes.mul(divisor);\n      } // We know the answer can't be zero... and actually, zero would cause\n      // infinite recursion since we would make no progress.\n  \n  \n      if (approxRes.isZero()) approxRes = ONE;\n      res = res.add(approxRes);\n      rem = rem.sub(approxRem);\n    }\n  \n    return res;\n  };\n  /**\n   * Returns this Long divided by the specified. This is an alias of {@link Long#divide}.\n   * @function\n   * @param {!Long|number|string} divisor Divisor\n   * @returns {!Long} Quotient\n   */\n  \n  \n  LongPrototype.div = LongPrototype.divide;\n  /**\n   * Returns this Long modulo the specified.\n   * @this {!Long}\n   * @param {!Long|number|string} divisor Divisor\n   * @returns {!Long} Remainder\n   */\n  \n  LongPrototype.modulo = function modulo(divisor) {\n    if (!isLong(divisor)) divisor = fromValue(divisor); // use wasm support if present\n  \n    if (wasm) {\n      var low = (this.unsigned ? wasm[\"rem_u\"] : wasm[\"rem_s\"])(this.low, this.high, divisor.low, divisor.high);\n      return fromBits(low, wasm[\"get_high\"](), this.unsigned);\n    }\n  \n    return this.sub(this.div(divisor).mul(divisor));\n  };\n  /**\n   * Returns this Long modulo the specified. This is an alias of {@link Long#modulo}.\n   * @function\n   * @param {!Long|number|string} divisor Divisor\n   * @returns {!Long} Remainder\n   */\n  \n  \n  LongPrototype.mod = LongPrototype.modulo;\n  /**\n   * Returns this Long modulo the specified. This is an alias of {@link Long#modulo}.\n   * @function\n   * @param {!Long|number|string} divisor Divisor\n   * @returns {!Long} Remainder\n   */\n  \n  LongPrototype.rem = LongPrototype.modulo;\n  /**\n   * Returns the bitwise NOT of this Long.\n   * @this {!Long}\n   * @returns {!Long}\n   */\n  \n  LongPrototype.not = function not() {\n    return fromBits(~this.low, ~this.high, this.unsigned);\n  };\n  /**\n   * Returns count leading zeros of this Long.\n   * @this {!Long}\n   * @returns {!number}\n   */\n  \n  \n  LongPrototype.countLeadingZeros = function countLeadingZeros() {\n    return this.high ? Math.clz32(this.high) : Math.clz32(this.low) + 32;\n  };\n  /**\n   * Returns count leading zeros. This is an alias of {@link Long#countLeadingZeros}.\n   * @function\n   * @param {!Long}\n   * @returns {!number}\n   */\n  \n  \n  LongPrototype.clz = LongPrototype.countLeadingZeros;\n  /**\n   * Returns count trailing zeros of this Long.\n   * @this {!Long}\n   * @returns {!number}\n   */\n  \n  LongPrototype.countTrailingZeros = function countTrailingZeros() {\n    return this.low ? ctz32(this.low) : ctz32(this.high) + 32;\n  };\n  /**\n   * Returns count trailing zeros. This is an alias of {@link Long#countTrailingZeros}.\n   * @function\n   * @param {!Long}\n   * @returns {!number}\n   */\n  \n  \n  LongPrototype.ctz = LongPrototype.countTrailingZeros;\n  /**\n   * Returns the bitwise AND of this Long and the specified.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other Long\n   * @returns {!Long}\n   */\n  \n  LongPrototype.and = function and(other) {\n    if (!isLong(other)) other = fromValue(other);\n    return fromBits(this.low & other.low, this.high & other.high, this.unsigned);\n  };\n  /**\n   * Returns the bitwise OR of this Long and the specified.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other Long\n   * @returns {!Long}\n   */\n  \n  \n  LongPrototype.or = function or(other) {\n    if (!isLong(other)) other = fromValue(other);\n    return fromBits(this.low | other.low, this.high | other.high, this.unsigned);\n  };\n  /**\n   * Returns the bitwise XOR of this Long and the given one.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other Long\n   * @returns {!Long}\n   */\n  \n  \n  LongPrototype.xor = function xor(other) {\n    if (!isLong(other)) other = fromValue(other);\n    return fromBits(this.low ^ other.low, this.high ^ other.high, this.unsigned);\n  };\n  /**\n   * Returns this Long with bits shifted to the left by the given amount.\n   * @this {!Long}\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  \n  LongPrototype.shiftLeft = function shiftLeft(numBits) {\n    if (isLong(numBits)) numBits = numBits.toInt();\n    if ((numBits &= 63) === 0) return this;else if (numBits < 32) return fromBits(this.low << numBits, this.high << numBits | this.low >>> 32 - numBits, this.unsigned);else return fromBits(0, this.low << numBits - 32, this.unsigned);\n  };\n  /**\n   * Returns this Long with bits shifted to the left by the given amount. This is an alias of {@link Long#shiftLeft}.\n   * @function\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  \n  LongPrototype.shl = LongPrototype.shiftLeft;\n  /**\n   * Returns this Long with bits arithmetically shifted to the right by the given amount.\n   * @this {!Long}\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  LongPrototype.shiftRight = function shiftRight(numBits) {\n    if (isLong(numBits)) numBits = numBits.toInt();\n    if ((numBits &= 63) === 0) return this;else if (numBits < 32) return fromBits(this.low >>> numBits | this.high << 32 - numBits, this.high >> numBits, this.unsigned);else return fromBits(this.high >> numBits - 32, this.high >= 0 ? 0 : -1, this.unsigned);\n  };\n  /**\n   * Returns this Long with bits arithmetically shifted to the right by the given amount. This is an alias of {@link Long#shiftRight}.\n   * @function\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  \n  LongPrototype.shr = LongPrototype.shiftRight;\n  /**\n   * Returns this Long with bits logically shifted to the right by the given amount.\n   * @this {!Long}\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  LongPrototype.shiftRightUnsigned = function shiftRightUnsigned(numBits) {\n    if (isLong(numBits)) numBits = numBits.toInt();\n    if ((numBits &= 63) === 0) return this;\n    if (numBits < 32) return fromBits(this.low >>> numBits | this.high << 32 - numBits, this.high >>> numBits, this.unsigned);\n    if (numBits === 32) return fromBits(this.high, 0, this.unsigned);\n    return fromBits(this.high >>> numBits - 32, 0, this.unsigned);\n  };\n  /**\n   * Returns this Long with bits logically shifted to the right by the given amount. This is an alias of {@link Long#shiftRightUnsigned}.\n   * @function\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  \n  LongPrototype.shru = LongPrototype.shiftRightUnsigned;\n  /**\n   * Returns this Long with bits logically shifted to the right by the given amount. This is an alias of {@link Long#shiftRightUnsigned}.\n   * @function\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  LongPrototype.shr_u = LongPrototype.shiftRightUnsigned;\n  /**\n   * Returns this Long with bits rotated to the left by the given amount.\n   * @this {!Long}\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Rotated Long\n   */\n  \n  LongPrototype.rotateLeft = function rotateLeft(numBits) {\n    var b;\n    if (isLong(numBits)) numBits = numBits.toInt();\n    if ((numBits &= 63) === 0) return this;\n    if (numBits === 32) return fromBits(this.high, this.low, this.unsigned);\n  \n    if (numBits < 32) {\n      b = 32 - numBits;\n      return fromBits(this.low << numBits | this.high >>> b, this.high << numBits | this.low >>> b, this.unsigned);\n    }\n  \n    numBits -= 32;\n    b = 32 - numBits;\n    return fromBits(this.high << numBits | this.low >>> b, this.low << numBits | this.high >>> b, this.unsigned);\n  };\n  /**\n   * Returns this Long with bits rotated to the left by the given amount. This is an alias of {@link Long#rotateLeft}.\n   * @function\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Rotated Long\n   */\n  \n  \n  LongPrototype.rotl = LongPrototype.rotateLeft;\n  /**\n   * Returns this Long with bits rotated to the right by the given amount.\n   * @this {!Long}\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Rotated Long\n   */\n  \n  LongPrototype.rotateRight = function rotateRight(numBits) {\n    var b;\n    if (isLong(numBits)) numBits = numBits.toInt();\n    if ((numBits &= 63) === 0) return this;\n    if (numBits === 32) return fromBits(this.high, this.low, this.unsigned);\n  \n    if (numBits < 32) {\n      b = 32 - numBits;\n      return fromBits(this.high << b | this.low >>> numBits, this.low << b | this.high >>> numBits, this.unsigned);\n    }\n  \n    numBits -= 32;\n    b = 32 - numBits;\n    return fromBits(this.low << b | this.high >>> numBits, this.high << b | this.low >>> numBits, this.unsigned);\n  };\n  /**\n   * Returns this Long with bits rotated to the right by the given amount. This is an alias of {@link Long#rotateRight}.\n   * @function\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Rotated Long\n   */\n  \n  \n  LongPrototype.rotr = LongPrototype.rotateRight;\n  /**\n   * Converts this Long to signed.\n   * @this {!Long}\n   * @returns {!Long} Signed long\n   */\n  \n  LongPrototype.toSigned = function toSigned() {\n    if (!this.unsigned) return this;\n    return fromBits(this.low, this.high, false);\n  };\n  /**\n   * Converts this Long to unsigned.\n   * @this {!Long}\n   * @returns {!Long} Unsigned long\n   */\n  \n  \n  LongPrototype.toUnsigned = function toUnsigned() {\n    if (this.unsigned) return this;\n    return fromBits(this.low, this.high, true);\n  };\n  /**\n   * Converts this Long to its byte representation.\n   * @param {boolean=} le Whether little or big endian, defaults to big endian\n   * @this {!Long}\n   * @returns {!Array.<number>} Byte representation\n   */\n  \n  \n  LongPrototype.toBytes = function toBytes(le) {\n    return le ? this.toBytesLE() : this.toBytesBE();\n  };\n  /**\n   * Converts this Long to its little endian byte representation.\n   * @this {!Long}\n   * @returns {!Array.<number>} Little endian byte representation\n   */\n  \n  \n  LongPrototype.toBytesLE = function toBytesLE() {\n    var hi = this.high,\n        lo = this.low;\n    return [lo & 0xff, lo >>> 8 & 0xff, lo >>> 16 & 0xff, lo >>> 24, hi & 0xff, hi >>> 8 & 0xff, hi >>> 16 & 0xff, hi >>> 24];\n  };\n  /**\n   * Converts this Long to its big endian byte representation.\n   * @this {!Long}\n   * @returns {!Array.<number>} Big endian byte representation\n   */\n  \n  \n  LongPrototype.toBytesBE = function toBytesBE() {\n    var hi = this.high,\n        lo = this.low;\n    return [hi >>> 24, hi >>> 16 & 0xff, hi >>> 8 & 0xff, hi & 0xff, lo >>> 24, lo >>> 16 & 0xff, lo >>> 8 & 0xff, lo & 0xff];\n  };\n  /**\n   * Creates a Long from its byte representation.\n   * @param {!Array.<number>} bytes Byte representation\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @param {boolean=} le Whether little or big endian, defaults to big endian\n   * @returns {Long} The corresponding Long value\n   */\n  \n  \n  Long.fromBytes = function fromBytes(bytes, unsigned, le) {\n    return le ? Long.fromBytesLE(bytes, unsigned) : Long.fromBytesBE(bytes, unsigned);\n  };\n  /**\n   * Creates a Long from its little endian byte representation.\n   * @param {!Array.<number>} bytes Little endian byte representation\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @returns {Long} The corresponding Long value\n   */\n  \n  \n  Long.fromBytesLE = function fromBytesLE(bytes, unsigned) {\n    return new Long(bytes[0] | bytes[1] << 8 | bytes[2] << 16 | bytes[3] << 24, bytes[4] | bytes[5] << 8 | bytes[6] << 16 | bytes[7] << 24, unsigned);\n  };\n  /**\n   * Creates a Long from its big endian byte representation.\n   * @param {!Array.<number>} bytes Big endian byte representation\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @returns {Long} The corresponding Long value\n   */\n  \n  \n  Long.fromBytesBE = function fromBytesBE(bytes, unsigned) {\n    return new Long(bytes[4] << 24 | bytes[5] << 16 | bytes[6] << 8 | bytes[7], bytes[0] << 24 | bytes[1] << 16 | bytes[2] << 8 | bytes[3], unsigned);\n  };\n  \n  var _default = Long;\n  exports.default = _default;\n  return \"default\" in exports ? exports.default : exports;\n})({});\nif (typeof define === 'function' && define.amd) define([], function() { return Long; });\nelse if (typeof module === 'object' && typeof exports === 'object') module.exports = Long;\n", "module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"net\" has been externalized for browser compatibility. Cannot access \"net.${key}\" in client code. See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"events\" has been externalized for browser compatibility. Cannot access \"events.${key}\" in client code. See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst util = require('util');\n/**\n * Contains the error classes exposed by the driver.\n * @module errors\n */\n\n/**\n * Base Error\n * @private\n */\nfunction DriverError (message) {\n  Error.call(this, message);\n  Error.captureStackTrace(this, this.constructor);\n  this.name = this.constructor.name;\n  this.info = 'Cassandra Driver Error';\n  // Explicitly set the message property as the Error.call() doesn't set the property on v8\n  this.message = message;\n}\n\nutil.inherits(DriverError, Error);\n\n/**\n * Represents an error when a query cannot be performed because no host is available or could be reached by the driver.\n * @param {Object} innerErrors An object map containing the error per host tried\n * @param {String} [message]\n * @constructor\n */\nfunction NoHostAvailableError(innerErrors, message) {\n  DriverError.call(this, message);\n  this.innerErrors = innerErrors;\n  this.info = 'Represents an error when a query cannot be performed because no host is available or could be reached by the driver.';\n  if (!message) {\n    this.message = 'All host(s) tried for query failed.';\n    if (innerErrors) {\n      const hostList = Object.keys(innerErrors);\n      if (hostList.length > 0) {\n        const host = hostList[0];\n        this.message += util.format(' First host tried, %s: %s. See innerErrors.', host, innerErrors[host]);\n      }\n    }\n  }\n}\n\nutil.inherits(NoHostAvailableError, DriverError);\n\n/**\n * Represents an error message from the server\n * @param {Number} code Cassandra exception code\n * @param {String} message\n * @constructor\n */\nfunction ResponseError(code, message) {\n  DriverError.call(this, message);\n  /**\n   * The error code as defined in [responseErrorCodes]{@link module:types~responseErrorCodes}.\n   * @type {Number}\n   */\n  this.code = code;\n  this.info = 'Represents an error message from the server';\n}\n\nutil.inherits(ResponseError, DriverError);\n\n/**\n * Represents a bug inside the driver or in a Cassandra host.\n * @param {String} message\n * @constructor\n */\nfunction DriverInternalError(message) {\n  DriverError.call(this, message);\n  this.info = 'Represents a bug inside the driver or in a Cassandra host.';\n}\n\nutil.inherits(DriverInternalError, DriverError);\n\n/**\n * Represents an error when trying to authenticate with auth-enabled host\n * @param {String} message\n * @constructor\n */\nfunction AuthenticationError(message) {\n  DriverError.call(this, message);\n  this.info = 'Represents an authentication error from the driver or from a Cassandra node.';\n}\n\nutil.inherits(AuthenticationError, DriverError);\n\n/**\n * Represents an error that is raised when one of the arguments provided to a method is not valid\n * @param {String} message\n * @constructor\n */\nfunction ArgumentError(message) {\n  DriverError.call(this, message);\n  this.info = 'Represents an error that is raised when one of the arguments provided to a method is not valid.';\n}\n\nutil.inherits(ArgumentError, DriverError);\n\n/**\n * Represents a client-side error that is raised when the client didn't hear back from the server within\n * {@link ClientOptions.socketOptions.readTimeout}.\n * @param {String} message The error message.\n * @param {String} [host] Address of the server host that caused the operation to time out.\n * @constructor\n */\nfunction OperationTimedOutError(message, host) {\n  DriverError.call(this, message, this.constructor);\n  this.info = 'Represents a client-side error that is raised when the client did not hear back from the server ' +\n    'within socketOptions.readTimeout';\n\n  /**\n   * When defined, it gets the address of the host that caused the operation to time out.\n   * @type {String|undefined}\n   */\n  this.host = host;\n}\n\nutil.inherits(OperationTimedOutError, DriverError);\n\n/**\n * Represents an error that is raised when a feature is not supported in the driver or in the current Cassandra version.\n * @param message\n * @constructor\n */\nfunction NotSupportedError(message) {\n  DriverError.call(this, message, this.constructor);\n  this.info = 'Represents a feature that is not supported in the driver or in the Cassandra version.';\n}\n\nutil.inherits(NotSupportedError, DriverError);\n\n/**\n * Represents a client-side error indicating that all connections to a certain host have reached\n * the maximum amount of in-flight requests supported.\n * @param {String} address\n * @param {Number} maxRequestsPerConnection\n * @param {Number} connectionLength\n * @constructor\n */\nfunction BusyConnectionError(address, maxRequestsPerConnection, connectionLength) {\n  const message = util.format('All connections to host %s are busy, %d requests are in-flight on %s',\n    address, maxRequestsPerConnection, connectionLength === 1 ? 'a single connection': 'each connection');\n  DriverError.call(this, message, this.constructor);\n  this.info = 'Represents a client-side error indicating that all connections to a certain host have reached ' +\n    'the maximum amount of in-flight requests supported (pooling.maxRequestsPerConnection)';\n}\n\nutil.inherits(BusyConnectionError, DriverError);\n\n/**\n * \n * @param {Long} long \n */\nfunction VIntOutOfRangeException(long){\n  const message = `Value ${long.toString} is out of range for a JavaScript Number`;\n  DriverError.call(this, message, this.constructor);\n  this.info = 'Represents a run-time exception when attempting to decode a vint and the JavaScript Number doesn\\'t have enough space to fit the value that was decoded';\n}\n\nutil.inherits(VIntOutOfRangeException, DriverError);\n\nexports.ArgumentError = ArgumentError;\nexports.AuthenticationError = AuthenticationError;\nexports.BusyConnectionError = BusyConnectionError;\nexports.DriverError = DriverError;\nexports.OperationTimedOutError = OperationTimedOutError;\nexports.DriverInternalError = DriverInternalError;\nexports.NoHostAvailableError = NoHostAvailableError;\nexports.NotSupportedError = NotSupportedError;\nexports.ResponseError = ResponseError;\nexports.VIntOutOfRangeException = VIntOutOfRangeException;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\n/**\n * Creates a non-clearable timer that resolves the promise once elapses.\n * @param {number} ms\n * @returns {Promise<void>}\n */\nfunction delay(ms) {\n  return new Promise(r => setTimeout(r, ms || 0));\n}\n\n/**\n * Creates a Promise that gets resolved or rejected based on an event.\n * @param {object} emitter\n * @param {string} eventName\n * @returns {Promise}\n */\nfunction fromEvent(emitter, eventName) {\n  return new Promise((resolve, reject) =>\n    emitter.once(eventName, (err, result) => {\n      if (err) {\n        reject(err);\n      } else {\n        resolve(result);\n      }\n    }));\n}\n\n/**\n * Creates a Promise from a callback based function.\n * @param {Function} fn\n * @returns {Promise}\n */\nfunction fromCallback(fn) {\n  return new Promise((resolve, reject) =>\n    fn((err, result) => {\n      if (err) {\n        reject(err);\n      } else {\n        resolve(result);\n      }\n    }));\n}\n\n/**\n * Gets a function that has the signature of a callback that invokes the appropriate promise handler parameters.\n * @param {Function} resolve\n * @param {Function} reject\n * @returns {Function}\n */\nfunction getCallback(resolve, reject) {\n  return function (err, result) {\n    if (err) {\n      reject(err);\n    } else {\n      resolve(result);\n    }\n  };\n}\n\nasync function invokeSequentially(info, length, fn) {\n  let index;\n  while ((index = info.counter++) < length) {\n    await fn(index);\n  }\n}\n\n/**\n * Invokes the new query plan of the load balancing policy and returns a Promise.\n * @param {LoadBalancingPolicy} lbp The load balancing policy.\n * @param {String} keyspace Name of currently logged keyspace at <code>Client</code> level.\n * @param {ExecutionOptions|null} executionOptions The information related to the execution of the request.\n * @returns {Promise<Iterator>}\n */\nfunction newQueryPlan(lbp, keyspace, executionOptions) {\n  return new Promise((resolve, reject) => {\n    lbp.newQueryPlan(keyspace, executionOptions, (err, iterator) => {\n      if (err) {\n        reject(err);\n      } else {\n        resolve(iterator);\n      }\n    });\n  });\n}\n\n/**\n * Method that handles optional callbacks (dual promise and callback support).\n * When callback is undefined it returns the promise.\n * When using a callback, it will use it as handlers of the continuation of the promise.\n * @param {Promise} promise\n * @param {Function?} callback\n * @returns {Promise|undefined}\n */\nfunction optionalCallback(promise, callback) {\n  if (!callback) {\n    return promise;\n  }\n\n  toCallback(promise, callback);\n}\n\n/**\n * Invokes the provided function multiple times, considering the concurrency level limit.\n * @param {Number} count\n * @param {Number} limit\n * @param {Function} fn\n * @returns {Promise}\n */\nfunction times(count, limit, fn) {\n  if (limit > count) {\n    limit = count;\n  }\n\n  const promises = new Array(limit);\n\n  const info = {\n    counter: 0\n  };\n\n  for (let i = 0; i < limit; i++) {\n    promises[i] = invokeSequentially(info, count, fn);\n  }\n\n  return Promise.all(promises);\n}\n\n/**\n * Deals with unexpected rejections in order to avoid the unhandled promise rejection warning or failure.\n * @param {Promise} promise\n * @returns {undefined}\n */\nfunction toBackground(promise) {\n  promise.catch(() => {});\n}\n\n/**\n * Invokes the callback once outside the promise chain the promise is resolved or rejected.\n * @param {Promise} promise\n * @param {Function?} callback\n * @returns {undefined}\n */\nfunction toCallback(promise, callback) {\n  promise\n    .then(\n      result => process.nextTick(() => callback(null, result)),\n      // Avoid marking the promise as rejected\n      err => process.nextTick(() => callback(err)));\n}\n\nmodule.exports = {\n  delay,\n  fromCallback,\n  fromEvent,\n  getCallback,\n  newQueryPlan,\n  optionalCallback,\n  times,\n  toBackground,\n  toCallback\n};", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst Long = require('long');\nconst util = require('util');\nconst net = require('net');\nconst { EventEmitter } = require('events');\n\nconst errors = require('./errors');\nconst promiseUtils = require('./promise-utils');\n\n/**\n * Max int that can be accurately represented with 64-bit Number (2^53)\n * @type {number}\n * @const\n */\nconst maxInt = 9007199254740992;\n\nconst maxInt32 = 0x7fffffff;\n\nconst emptyObject = Object.freeze({});\n\nconst emptyArray = Object.freeze([]);\n\nfunction noop() {}\n\n/**\n * Forward-compatible allocation of buffer, filled with zeros.\n * @type {Function}\n */\nconst allocBuffer = Buffer.alloc || allocBufferFillDeprecated;\n\n/**\n * Forward-compatible unsafe allocation of buffer.\n * @type {Function}\n */\nconst allocBufferUnsafe = Buffer.allocUnsafe || allocBufferDeprecated;\n\n/**\n * Forward-compatible allocation of buffer to contain a string.\n * @type {Function}\n */\nconst allocBufferFromString = (Int8Array.from !== Buffer.from && Buffer.from) || allocBufferFromStringDeprecated;\n\n/**\n * Forward-compatible allocation of buffer from an array of bytes\n * @type {Function}\n */\nconst allocBufferFromArray = (Int8Array.from !== Buffer.from && Buffer.from) || allocBufferFromArrayDeprecated;\n\nfunction allocBufferDeprecated(size) {\n  // eslint-disable-next-line\n  return new Buffer(size);\n}\n\nfunction allocBufferFillDeprecated(size) {\n  const b = allocBufferDeprecated(size);\n  b.fill(0);\n  return b;\n}\n\nfunction allocBufferFromStringDeprecated(text, encoding) {\n  if (typeof text !== 'string') {\n    throw new TypeError('Expected string, obtained ' + util.inspect(text));\n  }\n  // eslint-disable-next-line\n  return new Buffer(text, encoding);\n}\n\nfunction allocBufferFromArrayDeprecated(arr) {\n  if (!Array.isArray(arr)) {\n    throw new TypeError('Expected Array, obtained ' + util.inspect(arr));\n  }\n  // eslint-disable-next-line\n  return new Buffer(arr);\n}\n\n/**\n * @returns {Function} Returns a wrapper function that invokes the underlying callback only once.\n * @param {Function} callback\n */\nfunction callbackOnce(callback) {\n  let cb = callback;\n\n  return (function wrapperCallback(err, result) {\n    cb(err, result);\n    cb = noop;\n  });\n}\n\n/**\n * Creates a copy of a buffer\n */\nfunction copyBuffer(buf) {\n  const targetBuffer = allocBufferUnsafe(buf.length);\n  buf.copy(targetBuffer);\n  return targetBuffer;\n}\n\n/**\n * Appends the original stack trace to the error after a tick of the event loop\n */\nfunction fixStack(stackTrace, error) {\n  if (stackTrace) {\n    error.stack += '\\n  (event loop)\\n' + stackTrace.substr(stackTrace.indexOf(\"\\n\") + 1);\n  }\n  return error;\n}\n\n/**\n * Uses the logEmitter to emit log events\n * @param {String} type\n * @param {String} info\n * @param [furtherInfo]\n */\nfunction log(type, info, furtherInfo, options) {\n  if (!this.logEmitter) {\n    const effectiveOptions = options || this.options;\n    if (!effectiveOptions || !effectiveOptions.logEmitter) {\n      throw new Error('Log emitter not defined');\n    }\n    this.logEmitter = effectiveOptions.logEmitter;\n  }\n  this.logEmitter('log', type, this.constructor.name, info, furtherInfo || '');\n}\n\n/**\n * Gets the sum of the length of the items of an array\n */\nfunction totalLength (arr) {\n  if (arr.length === 1) {\n    return arr[0].length;\n  }\n  let total = 0;\n  arr.forEach(function (item) {\n    let length = item.length;\n    length = length ? length : 0;\n    total += length;\n  });\n  return total;\n}\n\n/**\n * Merge the contents of two or more objects together into the first object. Similar to jQuery.extend / Object.assign.\n * The main difference between this method is that declared properties with an <code>undefined</code> value are not set\n * to the target.\n */\nfunction extend(target) {\n  const sources = Array.prototype.slice.call(arguments, 1);\n  sources.forEach(function (source) {\n    if (!source) {\n      return;\n    }\n    const keys = Object.keys(source);\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      const value = source[key];\n      if (value === undefined) {\n        continue;\n      }\n      target[key] = value;\n    }\n  });\n  return target;\n}\n\n/**\n * Returns a new object with the property names set to lowercase.\n */\nfunction toLowerCaseProperties(obj) {\n  const keys = Object.keys(obj);\n  const result = {};\n  for (let i = 0; i < keys.length; i++) {\n    const k = keys[i];\n    result[k.toLowerCase()] = obj[k];\n  }\n  return result;\n}\n\n/**\n * Extends the target by the most inner props of sources\n * @param {Object} target\n * @returns {Object}\n */\nfunction deepExtend(target) {\n  const sources = Array.prototype.slice.call(arguments, 1);\n  sources.forEach(function (source) {\n    for (const prop in source) {\n      // eslint-disable-next-line no-prototype-builtins\n      if (!source.hasOwnProperty(prop)) {\n        continue;\n      }\n      const targetProp = target[prop];\n      const targetType = (typeof targetProp);\n      //target prop is\n      // a native single type\n      // or not existent\n      // or is not an anonymous object (not class instance)\n      if (!targetProp ||\n        targetType === 'number' ||\n        targetType === 'string' ||\n        Array.isArray(targetProp) ||\n        targetProp instanceof Date ||\n        targetProp.constructor.name !== 'Object') {\n        target[prop] = source[prop];\n      }\n      else {\n        //inner extend\n        target[prop] = deepExtend({}, targetProp, source[prop]);\n      }\n    }\n  });\n  return target;\n}\n\nfunction propCompare(propName) {\n  return function (a, b) {\n    if (a[propName] > b[propName]) {\n      return 1;\n    }\n    if (a[propName] < b[propName]) {\n      return -1;\n    }\n    return 0;\n  };\n}\n\nfunction funcCompare(name, argArray) {\n  return (function (a, b) {\n    if (typeof a[name] === 'undefined') {\n      return 0;\n    }\n    const valA = a[name].apply(a, argArray);\n    const valB = b[name].apply(b, argArray);\n    if (valA > valB) {\n      return 1;\n    }\n    if (valA < valB) {\n      return -1;\n    }\n    return 0;\n  });\n}\n/**\n * Uses the iterator protocol to go through the items of the Array\n * @param {Array} arr\n * @returns {Iterator}\n */\nfunction arrayIterator (arr) {\n  return arr[Symbol.iterator]();\n}\n\n/**\n * Convert the iterator values into an array\n * @param iterator\n * @returns {Array}\n */\nfunction iteratorToArray(iterator) {\n  const values = [];\n  let item = iterator.next();\n  while (!item.done) {\n    values.push(item.value);\n    item = iterator.next();\n  }\n  return values;\n}\n\n/**\n * Searches the specified Array for the provided key using the binary\n * search algorithm.  The Array must be sorted.\n * @param {Array} arr\n * @param key\n * @param {function} compareFunc\n * @returns {number} The position of the key in the Array, if it is found.\n * If it is not found, it returns a negative number which is the bitwise complement of the index of the first element that is larger than key.\n */\nfunction binarySearch(arr, key, compareFunc) {\n  let low = 0;\n  let high = arr.length-1;\n\n  while (low <= high) {\n    const mid = (low + high) >>> 1;\n    const midVal = arr[mid];\n    const cmp = compareFunc(midVal, key);\n    if (cmp < 0) {\n      low = mid + 1;\n    }\n    else if (cmp > 0) {\n      high = mid - 1;\n    }\n    else\n    {\n      //The key was found in the Array\n      return mid;\n    }\n  }\n  // key not found\n  return ~low;\n}\n\n/**\n * Inserts the value in the position determined by its natural order determined by the compare func\n * @param {Array} arr\n * @param item\n * @param {function} compareFunc\n */\nfunction insertSorted(arr, item, compareFunc) {\n  if (arr.length === 0) {\n    return arr.push(item);\n  }\n  let position = binarySearch(arr, item, compareFunc);\n  if (position < 0) {\n    position = ~position;\n  }\n  arr.splice(position, 0, item);\n}\n\n/**\n * Validates the provided parameter is of type function.\n * @param {Function} fn The instance to validate.\n * @param {String} [name] Name of the function to use in the error message. Defaults to 'callback'.\n * @returns {Function}\n */\nfunction validateFn(fn, name) {\n  if (typeof fn !== 'function') {\n    throw new errors.ArgumentError(util.format('%s is not a function', name || 'callback'));\n  }\n  return fn;\n}\n\n/**\n * Adapts the parameters based on the prepared metadata.\n * If the params are passed as an associative array (Object),\n * it adapts the object into an array with the same order as columns\n * @param {Array|Object} params\n * @param {Array} columns\n * @returns {Array} Returns an array of parameters.\n * @throws {Error} In case a parameter with a specific name is not defined\n */\nfunction adaptNamedParamsPrepared(params, columns) {\n  if (!params || Array.isArray(params) || !columns || columns.length === 0) {\n    // params is an array or there aren't parameters\n    return params;\n  }\n  const paramsArray = new Array(columns.length);\n  params = toLowerCaseProperties(params);\n  const keys = {};\n  for (let i = 0; i < columns.length; i++) {\n    const name = columns[i].name;\n    // eslint-disable-next-line no-prototype-builtins\n    if (!params.hasOwnProperty(name)) {\n      throw new errors.ArgumentError(util.format('Parameter \"%s\" not defined', name));\n    }\n    paramsArray[i] = params[name];\n    keys[name] = i;\n  }\n  return paramsArray;\n}\n\n/**\n * Adapts the associative-array of parameters and hints for simple statements\n * into Arrays based on the (arbitrary) position of the keys.\n * @param {Array|Object} params\n * @param {ExecutionOptions} execOptions\n * @returns {{ params: Array<{name, value}>, namedParameters: boolean, keyIndexes: object }} Returns an array of\n * parameters and the keys as an associative array.\n */\nfunction adaptNamedParamsWithHints(params, execOptions) {\n  if (!params || Array.isArray(params)) {\n    //The parameters is an Array or there isn't parameter\n    return { params: params, namedParameters: false, keyIndexes: null };\n  }\n\n  const keys = Object.keys(params);\n  const paramsArray = new Array(keys.length);\n  const hints = new Array(keys.length);\n  const userHints = execOptions.getHints() || emptyObject;\n  const keyIndexes = {};\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    // As lower cased identifiers\n    paramsArray[i] = { name: key.toLowerCase(), value: params[key]};\n    hints[i] = userHints[key];\n    keyIndexes[key] = i;\n  }\n\n  execOptions.setHints(hints);\n\n  return { params: paramsArray, namedParameters: true, keyIndexes };\n}\n\n/**\n * Returns a string with a value repeated n times\n * @param {String} val\n * @param {Number} times\n * @returns {String}\n */\nfunction stringRepeat(val, times) {\n  if (!times || times < 0) {\n    return null;\n  }\n  if (times === 1) {\n    return val;\n  }\n  return new Array(times + 1).join(val);\n}\n\n/**\n * Returns an array containing the values of the Object, similar to Object.values().\n * If obj is null or undefined, it will return an empty array.\n * @param {Object} obj\n * @returns {Array}\n */\nfunction objectValues(obj) {\n  if (!obj) {\n    return emptyArray;\n  }\n  const keys = Object.keys(obj);\n  const values = new Array(keys.length);\n  for (let i = 0; i < keys.length; i++) {\n    values[i] = obj[keys[i]];\n  }\n  return values;\n}\n\n/**\n * Wraps the callback-based method. When no originalCallback is not defined, it returns a Promise.\n * @param {ClientOptions} options\n * @param {Function} originalCallback\n * @param {Function} handler\n * @returns {Promise|undefined}\n */\nfunction promiseWrapper(options, originalCallback, handler) {\n  if (typeof originalCallback === 'function') {\n    // Callback-based invocation\n    handler.call(this, originalCallback);\n    return undefined;\n  }\n  const factory = options.promiseFactory || defaultPromiseFactory;\n  const self = this;\n  return factory(function handlerWrapper(callback) {\n    handler.call(self, callback);\n  });\n}\n\n/**\n * @param {Function} handler\n * @returns {Promise}\n */\nfunction defaultPromiseFactory(handler) {\n  return new Promise(function executor(resolve, reject) {\n    handler(function handlerCallback(err, result) {\n      if (err) {\n        return reject(err);\n      }\n      resolve(result);\n    });\n  });\n}\n\n/**\n * Returns the first not undefined param\n */\nfunction ifUndefined(v1, v2) {\n  return v1 !== undefined ? v1 : v2;\n}\n\n/**\n * Returns the first not undefined param\n */\nfunction ifUndefined3(v1, v2, v3) {\n  if (v1 !== undefined) {\n    return v1;\n  }\n  return v2 !== undefined ? v2 : v3;\n}\n\n/**\n * Shuffles an Array in-place.\n * @param {Array} arr\n * @returns {Array}\n * @private\n */\nfunction shuffleArray(arr) {\n  // FisherYates algorithm\n  for (let i = arr.length - 1; i > 0; i--) {\n    // Math.random() has an extremely short permutation cycle length but we don't care about collisions\n    const j = Math.floor(Math.random() * (i + 1));\n    const temp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = temp;\n  }\n\n  return arr;\n}\n\n// Classes\n\n/**\n * Represents a unique set of values.\n * @constructor\n */\nfunction HashSet() {\n  this.length = 0;\n  this.items = {};\n}\n\n/**\n * Adds a new item to the set.\n * @param {Object} key\n * @returns {boolean} Returns true if it was added to the set; false if the key is already present.\n */\nHashSet.prototype.add = function (key) {\n  if (this.contains(key)) {\n    return false;\n  }\n  this.items[key] = true;\n  this.length++;\n  return true;\n};\n\n/**\n * @returns {boolean} Returns true if the key is present in the set.\n */\nHashSet.prototype.contains = function (key) {\n  return this.length > 0 && this.items[key] === true;\n};\n\n/**\n * Removes the item from set.\n * @param key\n * @return {boolean} Returns true if the key existed and was removed, otherwise it returns false.\n */\nHashSet.prototype.remove = function (key) {\n  if (!this.contains(key)) {\n    return false;\n  }\n  delete this.items[key];\n  this.length--;\n};\n\n/**\n * Returns an array containing the set items.\n * @returns {Array}\n */\nHashSet.prototype.toArray = function () {\n  return Object.keys(this.items);\n};\n\n/**\n * Utility class that resolves host names into addresses.\n */\nclass AddressResolver {\n\n  /**\n   * Creates a new instance of the resolver.\n   * @param {Object} options\n   * @param {String} options.nameOrIp\n   * @param {Object} [options.dns]\n   */\n  constructor(options) {\n    if (!options || !options.nameOrIp || !options.dns) {\n      throw new Error('nameOrIp and dns lib must be provided as part of the options');\n    }\n\n    this._resolve4 = util.promisify(options.dns.resolve4);\n    this._nameOrIp = options.nameOrIp;\n    this._isIp = net.isIP(options.nameOrIp);\n    this._index = 0;\n    this._addresses = null;\n    this._refreshing = null;\n  }\n\n  /**\n   * Resolves the addresses for the host name.\n   */\n  async init() {\n    if (this._isIp) {\n      return;\n    }\n\n    await this._resolve();\n  }\n\n  /**\n   * Tries to resolve the addresses for the host name.\n   */\n  async refresh() {\n    if (this._isIp) {\n      return;\n    }\n\n    if (this._refreshing) {\n      return await promiseUtils.fromEvent(this._refreshing, 'finished');\n    }\n\n    this._refreshing = new EventEmitter().setMaxListeners(0);\n\n    try {\n      await this._resolve();\n    } catch (err) {\n      // Ignore the possible resolution error\n    }\n\n    this._refreshing.emit('finished');\n    this._refreshing = null;\n  }\n\n  async _resolve() {\n    const arr = await this._resolve4(this._nameOrIp);\n\n    if (!arr || arr.length === 0) {\n      throw new Error(`${this._nameOrIp} could not be resolved`);\n    }\n\n    this._addresses = arr;\n  }\n\n  /**\n   * Returns resolved ips in a round-robin fashion.\n   */\n  getIp() {\n    if (this._isIp) {\n      return this._nameOrIp;\n    }\n\n    const item = this._addresses[this._index % this._addresses.length];\n    this._index = (this._index !== maxInt32) ? (this._index + 1) : 0;\n\n    return item;\n  }\n}\n\n/**\n * @param {Array} arr\n * @param {Function} fn\n * @param {Function} [callback]\n */\nfunction each(arr, fn, callback) {\n  if (!Array.isArray(arr)) {\n    throw new TypeError('First parameter is not an Array');\n  }\n  callback = callback || noop;\n  const length = arr.length;\n  if (length === 0) {\n    return callback();\n  }\n  let completed = 0;\n  for (let i = 0; i < length; i++) {\n    fn(arr[i], next);\n  }\n  function next(err) {\n    if (err) {\n      const cb = callback;\n      callback = noop;\n      cb(err);\n      return;\n    }\n    if (++completed !== length) {\n      return;\n    }\n    callback();\n  }\n}\n\n/**\n * @param {Array} arr\n * @param {Function} fn\n * @param {Function} [callback]\n */\nfunction eachSeries(arr, fn, callback) {\n  if (!Array.isArray(arr)) {\n    throw new TypeError('First parameter is not an Array');\n  }\n  callback = callback || noop;\n  const length = arr.length;\n  if (length === 0) {\n    return callback();\n  }\n  let sync;\n  let index = 1;\n  fn(arr[0], next);\n  if (sync === undefined) {\n    sync = false;\n  }\n\n  function next(err) {\n    if (err) {\n      return callback(err);\n    }\n    if (index >= length) {\n      return callback();\n    }\n    if (sync === undefined) {\n      sync = true;\n    }\n    if (sync) {\n      return process.nextTick(function () {\n        fn(arr[index++], next);\n      });\n    }\n    fn(arr[index++], next);\n  }\n}\n\n/**\n * @param {Array} arr\n * @param {Function} fn\n * @param {Function} [callback]\n */\nfunction forEachOf(arr, fn, callback) {\n  return mapEach(arr, fn, true, callback);\n}\n\n/**\n * @param {Array} arr\n * @param {Function} fn\n * @param {Function} [callback]\n */\nfunction map(arr, fn, callback) {\n  return mapEach(arr, fn, false, callback);\n}\n\nfunction mapEach(arr, fn, useIndex, callback) {\n  if (!Array.isArray(arr)) {\n    throw new TypeError('First parameter must be an Array');\n  }\n  callback = callback || noop;\n  const length = arr.length;\n  if (length === 0) {\n    return callback(null, []);\n  }\n  const result = new Array(length);\n  let completed = 0;\n  const invoke = useIndex ? invokeWithIndex : invokeWithoutIndex;\n  for (let i = 0; i < length; i++) {\n    invoke(i);\n  }\n\n  function invokeWithoutIndex(i) {\n    fn(arr[i], function mapItemCallback(err, transformed) {\n      result[i] = transformed;\n      next(err);\n    });\n  }\n\n  function invokeWithIndex(i) {\n    fn(arr[i], i, function mapItemCallback(err, transformed) {\n      result[i] = transformed;\n      next(err);\n    });\n  }\n\n  function next(err) {\n    if (err) {\n      const cb = callback;\n      callback = noop;\n      cb(err);\n      return;\n    }\n    if (++completed !== length) {\n      return;\n    }\n    callback(null, result);\n  }\n}\n\n/**\n * @param {Array} arr\n * @param {Function} fn\n * @param {Function} [callback]\n */\nfunction mapSeries(arr, fn, callback) {\n  if (!Array.isArray(arr)) {\n    throw new TypeError('First parameter must be an Array');\n  }\n  callback = callback || noop;\n  const length = arr.length;\n  if (length === 0) {\n    return callback(null, []);\n  }\n  const result = new Array(length);\n  let index = 0;\n  let sync;\n  invoke(0);\n  if (sync === undefined) {\n    sync = false;\n  }\n\n  function invoke(i) {\n    fn(arr[i], function mapItemCallback(err, transformed) {\n      result[i] = transformed;\n      next(err);\n    });\n  }\n\n  function next(err) {\n    if (err) {\n      return callback(err);\n    }\n    if (++index === length) {\n      return callback(null, result);\n    }\n    if (sync === undefined) {\n      sync = true;\n    }\n    const i = index;\n    if (sync) {\n      return process.nextTick(function () {\n        invoke(i);\n      });\n    }\n    invoke(index);\n  }\n}\n\n/**\n * @param {Array.<Function>} arr\n * @param {Function} [callback]\n */\nfunction parallel(arr, callback) {\n  if (!Array.isArray(arr)) {\n    throw new TypeError('First parameter must be an Array');\n  }\n  callback = callback || noop;\n  const length = arr.length;\n  let completed = 0;\n  for (let i = 0; i < length; i++) {\n    arr[i](next);\n  }\n  function next(err) {\n    if (err) {\n      const cb = callback;\n      callback = noop;\n      return cb(err);\n    }\n    if (++completed !== length) {\n      return;\n    }\n    callback();\n  }\n}\n\n/**\n * Similar to async.series(), but instead accumulating the result in an Array, it callbacks with the result of the last\n * function in the array.\n * @param {Array.<Function>} arr\n * @param {Function} [callback]\n */\nfunction series(arr, callback) {\n  if (!Array.isArray(arr)) {\n    throw new TypeError('First parameter must be an Array');\n  }\n  callback = callback || noop;\n  let index = 0;\n  let sync;\n  next();\n  function next(err, result) {\n    if (err) {\n      return callback(err);\n    }\n    if (index === arr.length) {\n      return callback(null, result);\n    }\n    if (sync) {\n      return process.nextTick(function () {\n        sync = true;\n        arr[index++](next);\n        sync = false;\n      });\n    }\n    sync = true;\n    arr[index++](next);\n    sync = false;\n  }\n}\n\n/**\n * @param {Number} count\n * @param {Function} iteratorFunc\n * @param {Function} [callback]\n */\nfunction times(count, iteratorFunc, callback) {\n  callback = callback || noop;\n  count = +count;\n  if (isNaN(count) || count === 0) {\n    return callback();\n  }\n  let completed = 0;\n  for (let i = 0; i < count; i++) {\n    iteratorFunc(i, next);\n  }\n  function next(err) {\n    if (err) {\n      const cb = callback;\n      callback = noop;\n      return cb(err);\n    }\n    if (++completed !== count) {\n      return;\n    }\n    callback();\n  }\n}\n\n/**\n * @param {Number} count\n * @param {Number} limit\n * @param {Function} iteratorFunc\n * @param {Function} [callback]\n */\nfunction timesLimit(count, limit, iteratorFunc, callback) {\n  let sync = undefined;\n  callback = callback || noop;\n  limit = Math.min(limit, count);\n  let index = limit - 1;\n  let i;\n  let completed = 0;\n  for (i = 0; i < limit; i++) {\n    iteratorFunc(i, next);\n  }\n  i = -1;\n  function next(err) {\n    if (err) {\n      const cb = callback;\n      callback = noop;\n      cb(err);\n      return;\n    }\n    if (++completed === count) {\n      return callback();\n    }\n    index++;\n    if (index >= count) {\n      return;\n    }\n    if (sync === undefined) {\n      sync = (i >= 0);\n    }\n    if (sync) {\n      const captureIndex = index;\n      return process.nextTick(function () {\n        iteratorFunc(captureIndex, next);\n      });\n    }\n    iteratorFunc(index, next);\n  }\n}\n\n/**\n * @param {Number} count\n * @param {Function} iteratorFunction\n * @param {Function} callback\n */\nfunction timesSeries(count, iteratorFunction, callback) {\n  count = +count;\n  if (isNaN(count) || count < 1) {\n    return callback();\n  }\n  let index = 1;\n  let sync;\n  iteratorFunction(0, next);\n  if (sync === undefined) {\n    sync = false;\n  }\n  function next(err) {\n    if (err) {\n      return callback(err);\n    }\n    if (index === count) {\n      return callback();\n    }\n    if (sync === undefined) {\n      sync = true;\n    }\n    const i = index++;\n    if (sync) {\n      //Prevent \"Maximum call stack size exceeded\"\n      return process.nextTick(function () {\n        iteratorFunction(i, next);\n      });\n    }\n    //do a sync call as the callback is going to call on a future tick\n    iteratorFunction(i, next);\n  }\n}\n\n/**\n * @param {Function} condition\n * @param {Function} fn\n * @param {Function} callback\n */\nfunction whilst(condition, fn, callback) {\n  let sync = 0;\n  next();\n  function next(err) {\n    if (err) {\n      return callback(err);\n    }\n    if (!condition()) {\n      return callback();\n    }\n    if (sync === 0) {\n      sync = 1;\n      fn(function (err) {\n        if (sync === 1) {\n          //sync function\n          sync = 4;\n        }\n        next(err);\n      });\n      if (sync === 1) {\n        //async function\n        sync = 2;\n      }\n      return;\n    }\n    if (sync === 4) {\n      //Prevent \"Maximum call stack size exceeded\"\n      return process.nextTick(function () {\n        fn(next);\n      });\n    }\n    //do a sync call as the callback is going to call on a future tick\n    fn(next);\n  }\n}\n\n\n/**\n * Contains the methods for reading and writing vints into binary format.\n * Exposes only 2 internal methods, the rest are hidden.\n */\nconst VIntCoding = (function () {\n  /** @param {Long} n */\n  function encodeZigZag64(n) {\n    //     (n << 1) ^ (n >> 63);\n    return n.toUnsigned().shiftLeft(1).xor(n.shiftRight(63));\n  }\n\n  /** @param {Long} n */\n  function decodeZigZag64(n) {\n    //     (n >>> 1) ^ -(n & 1);\n    return n.shiftRightUnsigned(1).xor(n.and(Long.ONE).negate());\n  }\n\n  /**\n   * @param {Long} value\n   * @param {Buffer} buffer\n   * @returns {Number}\n   */\n  function writeVInt(value, buffer) {\n    return writeUnsignedVInt(encodeZigZag64(value), buffer);\n  }\n\n  /**\n   * @param {Long} value\n   * @param {Buffer} buffer\n   * @returns {number}\n   */\n  function writeUnsignedVInt(value, buffer) {\n    const size = computeUnsignedVIntSize(value);\n    if (size === 1) {\n      buffer[0] = value.getLowBits();\n      return 1;\n    }\n    encodeVInt(value, size, buffer);\n    return size;\n  }\n\n  /**\n   * @param {Long} value\n   * @returns {number}\n   */\n  function computeUnsignedVIntSize(value) {\n    const magnitude = numberOfLeadingZeros(value.or(Long.ONE));\n    return (639 - magnitude * 9) >> 6;\n  }\n\n  /**\n   * @param {Long} value\n   * @param {Number} size\n   * @param {Buffer} buffer\n   */\n  function encodeVInt(value, size, buffer) {\n    const extraBytes = size - 1;\n    let intValue = value.getLowBits();\n    let i;\n    let intBytes = 4;\n    for (i = extraBytes; i >= 0 && (intBytes--) > 0; i--) {\n      buffer[i] = 0xFF & intValue;\n      intValue >>= 8;\n    }\n    intValue = value.getHighBits();\n    for (; i >= 0; i--) {\n      buffer[i] = 0xFF & intValue;\n      intValue >>= 8;\n    }\n    buffer[0] |= encodeExtraBytesToRead(extraBytes);\n  }\n  /**\n   * Returns the number of zero bits preceding the highest-order one-bit in the binary representation of the value.\n   * @param {Long} value\n   * @returns {Number}\n   */\n  function numberOfLeadingZeros(value) {\n    if (value.equals(Long.ZERO)) {\n      return 64;\n    }\n    let n = 1;\n    let x = value.getHighBits();\n    if (x === 0) {\n      n += 32;\n      x = value.getLowBits();\n    }\n    if (x >>> 16 === 0) {\n      n += 16;\n      x <<= 16;\n    }\n    if (x >>> 24 === 0) {\n      n += 8;\n      x <<= 8;\n    }\n    if (x >>> 28 === 0) {\n      n += 4;\n      x <<= 4;\n    }\n    if (x >>> 30 === 0) {\n      n += 2;\n      x <<= 2;\n    }\n    n -= x >>> 31;\n    return n;\n  }\n\n\n  function encodeExtraBytesToRead(extraBytesToRead) {\n    return ~(0xff >> extraBytesToRead);\n  }\n\n  /**\n   * @param {Buffer} buffer\n   * @param {{value: number}} offset\n   * @returns {Long}\n   */\n  function readVInt(buffer, offset) {\n    return decodeZigZag64(readUnsignedVInt(buffer, offset));\n  }\n\n  /**\n   * uvint_unpack\n   * @param {Buffer} input\n   * @param {{ value: number}} offset\n   * @returns {Long}\n   */\n  function readUnsignedVInt(input, offset) {\n    const firstByte = input[offset.value++];\n    if ((firstByte & 0x80) === 0) {\n      return Long.fromInt(firstByte);\n    }\n    const sByteInt = fromSignedByteToInt(firstByte);\n    const size = numberOfExtraBytesToRead(sByteInt);\n    let result = Long.fromInt(sByteInt & firstByteValueMask(size));\n    for (let ii = 0; ii < size; ii++) {\n      const b = Long.fromInt(input[offset.value++]);\n      //       (result << 8) | b\n      result = result.shiftLeft(8).or(b);\n    }\n    return result;\n  }\n\n  function fromSignedByteToInt(value) {\n    if (value > 0x7f) {\n      return value - 0x0100;\n    }\n    return value;\n  }\n\n  function numberOfLeadingZerosInt32(i) {\n    if (i === 0) {\n      return 32;\n    }\n    let n = 1;\n    if (i >>> 16 === 0) {\n      n += 16;\n      i <<= 16;\n    }\n    if (i >>> 24 === 0) {\n      n += 8;\n      i <<= 8;\n    }\n    if (i >>> 28 === 0) {\n      n += 4;\n      i <<= 4;\n    }\n    if (i >>> 30 === 0) {\n      n += 2;\n      i <<= 2;\n    }\n    n -= i >>> 31;\n    return n;\n  }\n\n  /**\n   * @param {Number} firstByte\n   * @returns {Number}\n   */\n  function numberOfExtraBytesToRead(firstByte) {\n    // Instead of counting 1s of the byte, we negate and count 0 of the byte\n    return numberOfLeadingZerosInt32(~firstByte) - 24;\n  }\n\n  /**\n   * @param {Number} extraBytesToRead\n   * @returns {Number}\n   */\n  function firstByteValueMask(extraBytesToRead) {\n    return 0xff >> extraBytesToRead;\n  }\n\n  /**\n   * @param {Number} value\n   * @param {Buffer} output\n   * @returns {void}\n   */\n  // eslint-disable-next-line no-unused-vars\n  function writeUnsignedVInt32(value, output) {\n    writeUnsignedVInt(Long.fromNumber(value), output);\n  }\n\n  /**\n   * Read up to a 32-bit integer back, using the unsigned (no zigzag) encoding.\n   *\n   * <p>Note this method is the same as {@link #readUnsignedVInt(DataInput)}, except that we do\n   * *not* block if there are not enough bytes in the buffer to reconstruct the value.\n   *\n   * @param {Buffer} input\n   * @param {Number} readerIndex\n   * @returns {Number}\n   * @throws VIntOutOfRangeException If the vint doesn't fit into a 32-bit integer\n   */\n  // eslint-disable-next-line no-unused-vars\n  function getUnsignedVInt32(input, readerIndex) {\n    return checkedCast(getUnsignedVInt(input, readerIndex, input.length));\n  }\n\n  /**\n   * \n   * @param {Buffer} input \n   * @param {Number} readerIndex \n   * @param {Number} readerLimit \n   * @returns {Long}\n   */\n  function getUnsignedVInt(input, readerIndex, readerLimit) {\n    if (readerIndex < 0)\n    {throw new errors.ArgumentError(\n      \"Reader index should be non-negative, but was \" + readerIndex);}\n\n    if (readerIndex >= readerLimit) {return Long.fromNumber(-1);}\n\n    const firstByte = /** @type {Number} */ (input.at(readerIndex++));\n\n    // Bail out early if this is one byte, necessary or it fails later\n    if (firstByte >= 0) {return Long.fromNumber(firstByte);}\n\n    const size = numberOfExtraBytesToRead(firstByte);\n    if (readerIndex + size > readerLimit) {return Long.fromNumber(-1);}\n\n    const retval = Long.fromNumber(firstByte & firstByteValueMask(size));\n    for (let ii = 0; ii < size; ii++) {\n      const b = /** @type {Number} */ (input.at(readerIndex++));\n      retval.shiftLeft(8);\n      retval.or(b & 0xff);\n    }\n\n    return retval;\n  }\n\n  /**\n   * \n   * @param {Long} value \n   * @returns {Number} \n   */\n  function checkedCast(value) {\n    const result = value.toInt();\n    if (value.notEquals(result)) {throw new errors.VIntOutOfRangeException(value);}\n    return result;\n  }\n\n  /**\n   * \n   * @param {Buffer} bytes \n   * @returns {[number, number]} [size, bytes read]\n   */\n  function uvintUnpack(bytes) {\n    const firstByte = bytes[0];\n\n    if ((firstByte & 128) === 0) {\n      return [firstByte, 1];\n    }\n\n    const numExtraBytes = 8 - (~firstByte & 0xff).toString(2).length;\n    let rv = firstByte & (0xff >> numExtraBytes);\n    \n    for (let idx = 1; idx <= numExtraBytes; idx++) {\n      const newByte = bytes[idx];\n      rv <<= 8;\n      rv |= newByte & 0xff;\n    }\n\n    return [rv, numExtraBytes + 1];\n  }\n\n  /**\n * \n * @param {Number} val \n * @returns {Buffer}\n */\n  function uvintPack(val) {\n    const rv = [];\n    if (val < 128) {\n      rv.push(val);\n    } else {\n      let v = val;\n      let numExtraBytes = 0;\n      let numBits = v.toString(2).length;\n      let reservedBits = numExtraBytes + 1;\n\n      while (numBits > (8 - reservedBits)) {\n        numExtraBytes += 1;\n        numBits -= 8;\n        reservedBits = Math.min(numExtraBytes + 1, 8);\n        rv.push(v & 0xff);\n        v >>= 8;\n      }\n\n      if (numExtraBytes > 8) {\n        throw new Error(`Value ${val} is too big and cannot be encoded as vint`);\n      }\n\n      const n = 8 - numExtraBytes;\n      v |= (0xff >> n) << n;\n      rv.push(Math.abs(v));\n    }\n\n    rv.reverse();\n    return Buffer.from(rv);\n  }\n\n  return {\n    readVInt: readVInt,\n    writeVInt: writeVInt,\n    uvintPack: uvintPack,\n    uvintUnpack: uvintUnpack\n  };\n})();\n\nexports.adaptNamedParamsPrepared = adaptNamedParamsPrepared;\nexports.adaptNamedParamsWithHints = adaptNamedParamsWithHints;\nexports.AddressResolver = AddressResolver;\nexports.allocBuffer = allocBuffer;\nexports.allocBufferUnsafe = allocBufferUnsafe;\nexports.allocBufferFromArray = allocBufferFromArray;\nexports.allocBufferFromString = allocBufferFromString;\nexports.arrayIterator = arrayIterator;\nexports.binarySearch = binarySearch;\nexports.callbackOnce = callbackOnce;\nexports.copyBuffer = copyBuffer;\nexports.deepExtend = deepExtend;\nexports.each = each;\nexports.eachSeries = eachSeries;\n/** @const */\nexports.emptyArray = Object.freeze([]);\n/** @const */\nexports.emptyObject = emptyObject;\nexports.extend = extend;\nexports.fixStack = fixStack;\nexports.forEachOf = forEachOf;\nexports.funcCompare = funcCompare;\nexports.ifUndefined = ifUndefined;\nexports.ifUndefined3 = ifUndefined3;\nexports.insertSorted = insertSorted;\nexports.iteratorToArray = iteratorToArray;\nexports.log = log;\nexports.map = map;\nexports.mapSeries = mapSeries;\nexports.maxInt = maxInt;\nexports.noop = noop;\nexports.objectValues = objectValues;\nexports.parallel = parallel;\nexports.promiseWrapper = promiseWrapper;\nexports.propCompare = propCompare;\nexports.series = series;\nexports.shuffleArray = shuffleArray;\nexports.stringRepeat = stringRepeat;\nexports.times = times;\nexports.timesLimit = timesLimit;\nexports.timesSeries = timesSeries;\nexports.totalLength = totalLength;\nexports.validateFn = validateFn;\nexports.whilst = whilst;\nexports.HashSet = HashSet;\nexports.VIntCoding = VIntCoding;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst dns = require('dns');\nconst util = require('util');\nconst utils = require('../utils');\n/** @module policies/addressResolution */\n/**\n * @class\n * @classdesc\n * Translates IP addresses received from Cassandra nodes into locally queryable\n * addresses.\n * <p>\n * The driver auto-detects new Cassandra nodes added to the cluster through server\n * side pushed notifications and through checking the system tables. For each\n * node, the address received will correspond to the address set as\n * <code>rpc_address</code> in the node yaml file. In most case, this is the correct\n * address to use by the driver and that is what is used by default. However,\n * sometimes the addresses received through this mechanism will either not be\n * reachable directly by the driver or should not be the preferred address to use\n * to reach the node (for instance, the <code>rpc_address</code> set on Cassandra nodes\n * might be a private IP, but some clients  may have to use a public IP, or\n * pass by a router to reach that node). This interface allows to deal with\n * such cases, by allowing to translate an address as sent by a Cassandra node\n * to another address to be used by the driver for connection.\n * <p>\n * Please note that the contact points addresses provided while creating the\n * {@link Client} instance are not \"translated\", only IP address retrieve from or sent\n * by Cassandra nodes to the driver are.\n * @constructor\n */\nfunction AddressTranslator() {\n\n}\n\n/**\n * Translates a Cassandra <code>rpc_address</code> to another address if necessary.\n * @param {String} address the address of a node as returned by Cassandra.\n * <p>\n * Note that if the <code>rpc_address</code> of a node has been configured to <code>0.0.0.0</code>\n * server side, then the provided address will be the node <code>listen_address</code>,\n * *not* <code>0.0.0.0</code>.\n * </p>\n * @param {Number} port The port number, as specified in the [protocolOptions]{@link ClientOptions} at Client instance creation (9042 by default).\n * @param {Function} callback Callback to invoke with endpoint as first parameter.\n * The endpoint is an string composed of the IP address and the port number in the format <code>ipAddress:port</code>.\n */\nAddressTranslator.prototype.translate = function (address, port, callback) {\n  callback(address + ':' + port);\n};\n\n/**\n * @class\n * @classdesc\n * {@link AddressTranslator} implementation for multi-region EC2 deployments <strong>where clients are also deployed in EC2</strong>.\n * <p>\n * Its distinctive feature is that it translates addresses according to the location of the Cassandra host:\n * </p>\n * <ul>\n *  <li>addresses in different EC2 regions (than the client) are unchanged</li>\n *  <li>addresses in the same EC2 region are <strong>translated to private IPs</strong></li>\n * </ul>\n * <p>\n * This optimizes network costs, because Amazon charges more for communication over public IPs.\n * </p>\n * @constructor\n */\nfunction EC2MultiRegionTranslator() {\n\n}\n\nutil.inherits(EC2MultiRegionTranslator, AddressTranslator);\n\n/**\n * Addresses in the same EC2 region are translated to private IPs and addresses in\n * different EC2 regions (than the client) are unchanged\n */\nEC2MultiRegionTranslator.prototype.translate = function (address, port, callback) {\n  let newAddress = address;\n  const self = this;\n  let name;\n  utils.series([\n    function resolve(next) {\n      dns.reverse(address, function (err, hostNames) {\n        if (err) {\n          return next(err);\n        }\n        if (!hostNames) {\n          return next();\n        }\n        name = hostNames[0];\n        next();\n      });\n    },\n    function lookup(next) {\n      if (!name) {\n        return next();\n      }\n      dns.lookup(name, function (err, lookupAddress) {\n        if (err) {\n          return next(err);\n        }\n        newAddress = lookupAddress;\n        next();\n      });\n    }], function (err) {\n    if (err) {\n      //there was an issue while doing dns resolution\n      self.logError(address, err);\n    }\n    callback(newAddress + ':' + port);\n  });\n};\n\n/**\n * Log method called to log errors that occurred while performing dns resolution.\n * You can assign your own method to the class instance to do proper logging.\n * @param {String} address\n * @param {Error} err\n */\nEC2MultiRegionTranslator.prototype.logError = function (address, err) {\n  //Do nothing by default\n};\n\nexports.AddressTranslator = AddressTranslator;\nexports.EC2MultiRegionTranslator = EC2MultiRegionTranslator;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst crypto = require('crypto');\nconst utils = require('../utils');\n\n/** @module types */\n\n/**\n * Creates a new instance of Uuid based on a Buffer\n * @class\n * @classdesc Represents an immutable universally unique identifier (UUID). A UUID represents a 128-bit value.\n * @param {Buffer} buffer The 16-length buffer.\n * @constructor\n */\nfunction Uuid(buffer) {\n  if (!buffer || buffer.length !== 16) {\n    throw new Error('You must provide a buffer containing 16 bytes');\n  }\n  this.buffer = buffer;\n}\n\n/**\n * Parses a string representation of a Uuid\n * @param {String} value\n * @returns {Uuid}\n */\nUuid.fromString = function (value) {\n  //36 chars: 32 + 4 hyphens\n  if (typeof value !== 'string' || value.length !== 36) {\n    throw new Error('Invalid string representation of Uuid, it should be in the 00000000-0000-0000-0000-000000000000');\n  }\n  return new Uuid(utils.allocBufferFromString(value.replace(/-/g, ''), 'hex'));\n};\n\n/**\n * Creates a new random (version 4) Uuid.\n * @param {function} [callback] Optional callback to be invoked with the error as first parameter and the created Uuid as\n * second parameter.\n * @returns {Uuid}\n */\nUuid.random = function (callback) {\n  if (callback) {\n    getRandomBytes(function(err, buffer) {\n      if (err) {\n        return callback(err);\n      }\n      return callback(null, createUuidFromBuffer(buffer));\n    });\n  } else {\n    const buffer = getRandomBytes();\n    return createUuidFromBuffer(buffer);\n  }\n};\n\n/**\n * Gets the bytes representation of a Uuid\n * @returns {Buffer}\n */\nUuid.prototype.getBuffer = function () {\n  return this.buffer;\n};\n/**\n * Compares this object to the specified object.\n * The result is true if and only if the argument is not null, is a UUID object, and contains the same value, bit for bit, as this UUID.\n * @param {Uuid} other The other value to test for equality.\n */\nUuid.prototype.equals = function (other) {\n  return other instanceof Uuid && this.buffer.equals(other.buffer);\n};\n\n/**\n * Returns a string representation of the value of this Uuid instance.\n * 32 hex separated by hyphens, in the form of 00000000-0000-0000-0000-000000000000.\n * @returns {String}\n */\nUuid.prototype.toString = function () {\n  //32 hex representation of the Buffer\n  const hexValue = getHex(this);\n  return (\n    hexValue.substr(0, 8) + '-' +\n    hexValue.substr(8, 4) + '-' +\n    hexValue.substr(12, 4) + '-' +\n    hexValue.substr(16, 4) + '-' +\n    hexValue.substr(20, 12));\n};\n\n/**\n * Provide the name of the constructor and the string representation\n * @returns {string}\n */\nUuid.prototype.inspect = function () {\n  return this.constructor.name + ': ' + this.toString();\n};\n\n/**\n * Returns the string representation.\n * Method used by the native JSON.stringify() to serialize this instance.\n */\nUuid.prototype.toJSON = function () {\n  return this.toString();\n};\n\n\n/**\n * Returns new Uuid\n * @private\n * @returns {Uuid}\n */\nfunction createUuidFromBuffer (buffer) {\n  //clear the version\n  buffer[6] &= 0x0f;\n  //set the version 4\n  buffer[6] |= 0x40;\n  //clear the variant\n  buffer[8] &= 0x3f;\n  //set the IETF variant\n  buffer[8] |= 0x80;\n  return new Uuid(buffer);\n}\n\n/**\n * @private\n * @returns {String} 32 hex representation of the instance, without separators\n */\nfunction getHex (uuid) {\n  return uuid.buffer.toString('hex');\n}\n\n/**\n * Gets a crypto generated 16 bytes\n * @private\n * @returns {Buffer}\n */\nfunction getRandomBytes (cb) {\n  return crypto.randomBytes(16, cb);\n}\n\nmodule.exports = Uuid;\n", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst util = require('util');\nconst crypto = require('crypto');\nconst Long = require('long');\n\nconst Uuid = require('./uuid');\nconst utils = require('../utils');\n\n/** @module types */\n/**\n * Oct 15, 1582 in milliseconds since unix epoch\n * @const\n * @private\n */\nconst _unixToGregorian = 12219292800000;\n/**\n * 10,000 ticks in a millisecond\n * @const\n * @private\n */\nconst _ticksInMs = 10000;\n\nconst minNodeId = utils.allocBufferFromString('808080808080', 'hex');\nconst minClockId = utils.allocBufferFromString('8080', 'hex');\nconst maxNodeId = utils.allocBufferFromString('7f7f7f7f7f7f', 'hex');\nconst maxClockId = utils.allocBufferFromString('7f7f', 'hex');\n\n/**\n * Counter used to generate up to 10000 different timeuuid values with the same Date\n * @private\n * @type {number}\n */\nlet _ticks = 0;\n/**\n * Counter used to generate ticks for the current time\n * @private\n * @type {number}\n */\nlet _ticksForCurrentTime = 0;\n/**\n * Remember the last time when a ticks for the current time so that it can be reset\n * @private\n * @type {number}\n */\nlet _lastTimestamp = 0;\n\n/**\n * Creates a new instance of Uuid based on the parameters provided according to rfc4122.\n * If any of the arguments is not provided, it will be randomly generated, except for the date that will use the current\n * date.\n * <p>\n *   Note that when nodeId and/or clockId portions are not provided, the constructor will generate them using\n *   <code>crypto.randomBytes()</code>. As it's possible that <code>crypto.randomBytes()</code> might block, it's\n *   recommended that you use the callback-based version of the static methods <code>fromDate()</code> or\n *   <code>now()</code> in that case.\n * </p>\n * @class\n * @classdesc Represents an immutable version 1 universally unique identifier (UUID). A UUID represents a 128-bit value.\n * <p>Usage: <code>TimeUuid.now()</code></p>\n * @extends module:types~Uuid\n * @param {Date} [value] The datetime for the instance, if not provided, it will use the current Date.\n * @param {Number} [ticks] A number from 0 to 10000 representing the 100-nanoseconds units for this instance to fill in the information not available in the Date,\n * as Ecmascript Dates have only milliseconds precision.\n * @param {String|Buffer} [nodeId] A 6-length Buffer or string of 6 ascii characters representing the node identifier, ie: 'host01'.\n * @param {String|Buffer} [clockId] A 2-length Buffer or string of 6 ascii characters representing the clock identifier.\n * @constructor\n */\nfunction TimeUuid(value, ticks, nodeId, clockId) {\n  let buffer;\n  if (value instanceof Buffer) {\n    if (value.length !== 16) {\n      throw new Error('Buffer for v1 uuid not valid');\n    }\n    buffer = value;\n  }\n  else {\n    buffer = generateBuffer(value, ticks, nodeId, clockId);\n  }\n  Uuid.call(this, buffer);\n}\n\nutil.inherits(TimeUuid, Uuid);\n\n/**\n * Generates a TimeUuid instance based on the Date provided using random node and clock values.\n * @param {Date} date Date to generate the v1 uuid.\n * @param {Number} [ticks] A number from 0 to 10000 representing the 100-nanoseconds units for this instance to fill in the information not available in the Date,\n * as Ecmascript Dates have only milliseconds precision.\n * @param {String|Buffer} [nodeId] A 6-length Buffer or string of 6 ascii characters representing the node identifier, ie: 'host01'.\n * If not provided, a random nodeId will be generated.\n * @param {String|Buffer} [clockId] A 2-length Buffer or string of 6 ascii characters representing the clock identifier.\n * If not provided a random clockId will be generated.\n * @param {Function} [callback] An optional callback to be invoked with the error as first parameter and the created\n * <code>TimeUuid</code> as second parameter. When a callback is provided, the random portions of the\n * <code>TimeUuid</code> instance are created asynchronously.\n * <p>\n *   When nodeId and/or clockId portions are not provided, this method will generate them using\n *   <code>crypto.randomBytes()</code>. As it's possible that <code>crypto.randomBytes()</code> might block, it's\n *   recommended that you use the callback-based version of this method in that case.\n * </p>\n * @example <caption>Generate a TimeUuid from a ECMAScript Date</caption>\n * const timeuuid = TimeUuid.fromDate(new Date());\n * @example <caption>Generate a TimeUuid from a Date with ticks portion</caption>\n * const timeuuid = TimeUuid.fromDate(new Date(), 1203);\n * @example <caption>Generate a TimeUuid from a Date without any random portion</caption>\n * const timeuuid = TimeUuid.fromDate(new Date(), 1203, 'host01', '02');\n * @example <caption>Generate a TimeUuid from a Date with random node and clock identifiers</caption>\n * TimeUuid.fromDate(new Date(), 1203, function (err, timeuuid) {\n *   // do something with the generated timeuuid\n * });\n */\nTimeUuid.fromDate = function (date, ticks, nodeId, clockId, callback) {\n  if (typeof ticks === 'function') {\n    callback = ticks;\n    ticks = nodeId = clockId = null;\n  } else if (typeof nodeId === 'function') {\n    callback = nodeId;\n    nodeId = clockId = null;\n  } else if (typeof clockId === 'function') {\n    callback = clockId;\n    clockId = null;\n  }\n\n  if (!callback) {\n    return new TimeUuid(date, ticks, nodeId, clockId);\n  }\n\n  utils.parallel([\n    next => getOrGenerateRandom(nodeId, 6, (err, buffer) => next(err, nodeId = buffer)),\n    next => getOrGenerateRandom(clockId, 2, (err, buffer) => next(err, clockId = buffer)),\n  ], (err) => {\n    if (err) {\n      return callback(err);\n    }\n\n    let timeUuid;\n    try {\n      timeUuid = new TimeUuid(date, ticks, nodeId, clockId);\n    }\n    catch (e) {\n      return callback(e);\n    }\n\n    callback(null, timeUuid);\n  });\n};\n\n/**\n * Parses a string representation of a TimeUuid\n * @param {String} value\n * @returns {TimeUuid}\n */\nTimeUuid.fromString = function (value) {\n  return new TimeUuid(Uuid.fromString(value).getBuffer());\n};\n\n/**\n * Returns the smaller possible type 1 uuid with the provided Date.\n */\nTimeUuid.min = function (date, ticks) {\n  return new TimeUuid(date, ticks, minNodeId, minClockId);\n};\n\n/**\n * Returns the biggest possible type 1 uuid with the provided Date.\n */\nTimeUuid.max = function (date, ticks) {\n  return new TimeUuid(date, ticks, maxNodeId, maxClockId);\n};\n\n/**\n * Generates a TimeUuid instance based on the current date using random node and clock values.\n * @param {String|Buffer} [nodeId] A 6-length Buffer or string of 6 ascii characters representing the node identifier, ie: 'host01'.\n * If not provided, a random nodeId will be generated.\n * @param {String|Buffer} [clockId] A 2-length Buffer or string of 6 ascii characters representing the clock identifier.\n * If not provided a random clockId will be generated.\n * @param {Function} [callback] An optional callback to be invoked with the error as first parameter and the created\n * <code>TimeUuid</code> as second parameter. When a callback is provided, the random portions of the\n * <code>TimeUuid</code> instance are created asynchronously.\n * <p>\n *   When nodeId and/or clockId portions are not provided, this method will generate them using\n *   <code>crypto.randomBytes()</code>. As it's possible that <code>crypto.randomBytes()</code> might block, it's\n *   recommended that you use the callback-based version of this method in that case.\n * </p>\n * @example <caption>Generate a TimeUuid from a Date without any random portion</caption>\n * const timeuuid = TimeUuid.now('host01', '02');\n * @example <caption>Generate a TimeUuid with random node and clock identifiers</caption>\n * TimeUuid.now(function (err, timeuuid) {\n *   // do something with the generated timeuuid\n * });\n * @example <caption>Generate a TimeUuid based on the current date (might block)</caption>\n * const timeuuid = TimeUuid.now();\n */\nTimeUuid.now = function (nodeId, clockId, callback) {\n  return TimeUuid.fromDate(null, null, nodeId, clockId, callback);\n};\n\n\n/**\n * Gets the Date and 100-nanoseconds units representation of this instance.\n * @returns {{date: Date, ticks: Number}}\n */\nTimeUuid.prototype.getDatePrecision = function () {\n  const timeLow = this.buffer.readUInt32BE(0);\n\n  let timeHigh = 0;\n  timeHigh |= ( this.buffer[4] & 0xff ) << 8;\n  timeHigh |= this.buffer[5] & 0xff;\n  timeHigh |= ( this.buffer[6] & 0x0f ) << 24;\n  timeHigh |= ( this.buffer[7] & 0xff ) << 16;\n\n  const val = Long.fromBits(timeLow, timeHigh);\n  const ticksInMsLong = Long.fromNumber(_ticksInMs);\n  const ticks = val.modulo(ticksInMsLong);\n  const time = val\n    .div(ticksInMsLong)\n    .subtract(Long.fromNumber(_unixToGregorian));\n  return { date: new Date(time.toNumber()), ticks: ticks.toNumber()};\n};\n\n/**\n * Gets the Date representation of this instance.\n * @returns {Date}\n */\nTimeUuid.prototype.getDate = function () {\n  return this.getDatePrecision().date;\n};\n\n/**\n * Returns the node id this instance\n * @returns {Buffer}\n */\nTimeUuid.prototype.getNodeId = function () {\n  return this.buffer.slice(10);\n};\n\n/**\n * Returns the clock id this instance, with the variant applied (first 2 msb being 1 and 0).\n * @returns {Buffer}\n */\nTimeUuid.prototype.getClockId = function () {\n  return this.buffer.slice(8, 10);\n};\n\n/**\n * Returns the node id this instance as an ascii string\n * @returns {String}\n */\nTimeUuid.prototype.getNodeIdString = function () {\n  return this.buffer.slice(10).toString('ascii');\n};\n\nfunction writeTime(buffer, time, ticks) {\n  //value time expressed in ticks precision\n  const val = Long\n    .fromNumber(time + _unixToGregorian)\n    .multiply(Long.fromNumber(10000))\n    .add(Long.fromNumber(ticks));\n  const timeHigh = val.getHighBitsUnsigned();\n  buffer.writeUInt32BE(val.getLowBitsUnsigned(), 0);\n  buffer.writeUInt16BE(timeHigh & 0xffff, 4);\n  buffer.writeUInt16BE(timeHigh >>> 16 & 0xffff, 6);\n}\n\n/**\n * Returns a buffer of length 2 representing the clock identifier\n * @param {String|Buffer} clockId\n * @returns {Buffer}\n * @private\n */\nfunction getClockId(clockId) {\n  let buffer = clockId;\n  if (typeof clockId === 'string') {\n    buffer = utils.allocBufferFromString(clockId, 'ascii');\n  }\n  if (!(buffer instanceof Buffer)) {\n    //Generate\n    buffer = getRandomBytes(2);\n  }\n  else if (buffer.length !== 2) {\n    throw new Error('Clock identifier must have 2 bytes');\n  }\n  return buffer;\n}\n\n/**\n * Returns a buffer of length 6 representing the clock identifier\n * @param {String|Buffer} nodeId\n * @returns {Buffer}\n * @private\n */\nfunction getNodeId(nodeId) {\n  let buffer = nodeId;\n  if (typeof nodeId === 'string') {\n    buffer = utils.allocBufferFromString(nodeId, 'ascii');\n  }\n  if (!(buffer instanceof Buffer)) {\n    //Generate\n    buffer = getRandomBytes(6);\n  }\n  else if (buffer.length !== 6) {\n    throw new Error('Node identifier must have 6 bytes');\n  }\n  return buffer;\n}\n\n/**\n * Returns the ticks portion of a timestamp.  If the ticks are not provided an internal counter is used that gets reset at 10000.\n * @private\n * @param {Number} [ticks] \n * @returns {Number} \n */\nfunction getTicks(ticks) {\n  if (typeof ticks !== 'number'|| ticks >= _ticksInMs) {\n    _ticks++;\n    if (_ticks >= _ticksInMs) {\n      _ticks = 0;\n    }\n    ticks = _ticks;\n  }\n  return ticks;\n}\n\n/**\n * Returns an object with the time representation of the date expressed in milliseconds since unix epoch \n * and a ticks property for the 100-nanoseconds precision.\n * @private\n * @returns {{time: Number, ticks: Number}} \n */\nfunction getTimeWithTicks(date, ticks) {\n  if (!(date instanceof Date) || isNaN(date.getTime())) {\n    // time with ticks for the current time\n    date = new Date();\n    const time = date.getTime();\n    _ticksForCurrentTime++;\n    if(_ticksForCurrentTime > _ticksInMs || time > _lastTimestamp) {\n      _ticksForCurrentTime = 0;\n      _lastTimestamp = time;\n    }\n    ticks = _ticksForCurrentTime;\n  }\n  return {\n    time: date.getTime(),\n    ticks: getTicks(ticks)\n  };\n}\n\nfunction getRandomBytes(length) {\n  return crypto.randomBytes(length);\n}\n\nfunction getOrGenerateRandom(id, length, callback) {\n  if (id) {\n    return callback(null, id);\n  }\n  crypto.randomBytes(length, callback);\n}\n\n/**\n * Generates a 16-length Buffer instance\n * @private\n * @param {Date} date\n * @param {Number} ticks\n * @param {String|Buffer} nodeId\n * @param {String|Buffer} clockId\n * @returns {Buffer}\n */\nfunction generateBuffer(date, ticks, nodeId, clockId) {\n  const timeWithTicks = getTimeWithTicks(date, ticks);\n  nodeId = getNodeId(nodeId);\n  clockId = getClockId(clockId);\n  const buffer = utils.allocBufferUnsafe(16);\n  //Positions 0-7 Timestamp\n  writeTime(buffer, timeWithTicks.time, timeWithTicks.ticks);\n  //Position 8-9 Clock\n  clockId.copy(buffer, 8, 0);\n  //Positions 10-15 Node\n  nodeId.copy(buffer, 10, 0);\n  //Version Byte: Time based\n  //0001xxxx\n  //turn off first 4 bits\n  buffer[6] = buffer[6] & 0x0f;\n  //turn on fifth bit\n  buffer[6] = buffer[6] | 0x10;\n\n  //IETF Variant Byte: 1.0.x\n  //10xxxxxx\n  //turn off first 2 bits\n  buffer[8] = buffer[8] & 0x3f;\n  //turn on first bit\n  buffer[8] = buffer[8] | 0x80;\n  return buffer;\n}\n\nmodule.exports = TimeUuid;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst _versionPattern = /(\\d+)\\.(\\d+)(?:\\.(\\d+))?(?:\\.(\\d+)?)?(?:[-~]([\\w+]*(?:-\\w[.\\w]*)*))?(?:\\+([.\\w]+))?/;\n\n/**\n * Represents a version number in the form of X.Y.Z with optional pre-release and build metadata.\n *\n * Version numbers compare the usual way, the major version number (X) is compared first, then\n * the minor one (Y) and then the patch level one (Z).  If pre-release or other build metadata\n * is present for a version, that version is considered less than an otherwise equivalent version\n * that doesn't have these labels, otherwise they are considered equal.\n *\n * As of initial implementation versions are only compared against those with at most patch versions\n * more refined comparisons are not needed.\n *\n * @property {Number} major The major version, X of X.Y.Z.\n * @property {Number} minor The minor version, Y of X.Y.Z.\n * @property {Number} patch The patch version, Z of X.Y.Z.\n * @property {Number} dsePatch The dsePatch version, A of X.Y.Z.A or undefined if not present.\n * @property {String[]} preReleases Prerelease indicators if present, i.e. SNAPSHOT of X.Y.Z-SNAPSHOT.\n * @property {String} build Build string if present, i.e. build1 of X.Y.Z+build1.\n *\n * @ignore\n */\nclass VersionNumber {\n  constructor(major, minor, patch, dsePatch, preReleases, build) {\n    this.major = major;\n    this.minor = minor;\n    this.patch = patch;\n    this.dsePatch = dsePatch;\n    this.preReleases = preReleases;\n    this.build = build;\n  }\n\n  /**\n   * @return {String} String representation of this version.\n   */\n  toString() {\n    let str = this.major + '.' + this.minor;\n    if (this.patch !== undefined) {\n      str += '.' + this.patch;\n    }\n    if (this.dsePatch !== undefined) {\n      str += '.' + this.dsePatch;\n    }\n    if (this.preReleases !== undefined) {\n      this.preReleases.forEach((preRelease) => {\n        str += '-' + preRelease;\n      });\n    }\n    if (this.build) {\n      str += '+' + this.build;\n    }\n    return str;\n  }\n\n  /**\n   * Compares this version with the provided version. \n   * @param {VersionNumber} other \n   * @return {Number} -1 if less than other, 0 if equal, 1 if greater than.\n   */\n  compare(other) {\n    if (this.major < other.major) {\n      return -1;\n    } else if (this.major > other.major) {\n      return 1;\n    } else if (this.minor < other.minor) {\n      return -1;\n    } else if (this.minor > other.minor) {\n      return 1;\n    }\n\n    // sanitize patch by setting to 0 if undefined.\n    const thisPatch = this.patch || 0;\n    const otherPatch = other.patch || 0;\n    if (thisPatch < otherPatch) {\n      return -1;\n    } else if (thisPatch > otherPatch) {\n      return 1;\n    }\n\n    // if dsePatch is set in one case, but not other, consider the one where it is set as greater.\n    if (this.dsePatch === undefined) {\n      if (other.dsePatch !== undefined) {\n        return -1;\n      }\n    } else if (other.dsePatch === undefined) {\n      return 1;\n    } else {\n      if (this.dsePatch < other.dsePatch) {\n        return -1;\n      } else if (this.dsePatch > other.dsePatch) {\n        return 1;\n      }\n    }\n\n    // If prereleases are present, consider less than those that don't have any.\n    if (this.preReleases === undefined) {\n      if (other.preReleases !== undefined) {\n        return 1;\n      }\n    } else if (other.preReleases === undefined) {\n      return -1;\n    }\n   \n    // Don't consider build.\n    return 0;\n  }\n\n  static parse(version) {\n    if (!version) {\n      return null;\n    }\n\n    const match = version.match(_versionPattern);\n    if (match) {\n      const major = parseInt(match[1], 10);\n      const minor = parseInt(match[2], 10);\n      const patch = match[3] ? parseInt(match[3], 10) : undefined;\n      const dsePatch = match[4] ? parseInt(match[4], 10) : undefined;\n      const preReleases = match[5] ? match[5].split('-') : undefined;\n      const build = match[6];\n      return new VersionNumber(major, minor, patch, dsePatch, preReleases, build);\n    }\n    throw new TypeError('Could not extract version from \\'' + version + '\\'');\n  }\n}\n\nmodule.exports = VersionNumber;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst utils = require('../utils');\nconst VersionNumber = require('./version-number');\nconst v200 = VersionNumber.parse('2.0.0');\nconst v210 = VersionNumber.parse('2.1.0');\nconst v220 = VersionNumber.parse('2.2.0');\nconst v300 = VersionNumber.parse('3.0.0');\nconst v510 = VersionNumber.parse('5.1.0');\nconst v600 = VersionNumber.parse('6.0.0');\n\n/**\n * Contains information for the different protocol versions supported by the driver.\n * @type {Object}\n * @property {Number} v1 Cassandra protocol v1, supported in Apache Cassandra 1.2-->2.2.\n * @property {Number} v2 Cassandra protocol v2, supported in Apache Cassandra 2.0-->2.2.\n * @property {Number} v3 Cassandra protocol v3, supported in Apache Cassandra 2.1-->3.x.\n * @property {Number} v4 Cassandra protocol v4, supported in Apache Cassandra 2.2-->3.x.\n * @property {Number} v5 Cassandra protocol v5, in beta from Apache Cassandra 3.x+. Currently not supported by the\n * driver.\n * @property {Number} dseV1 DataStax Enterprise protocol v1, DSE 5.1+\n * @property {Number} dseV2 DataStax Enterprise protocol v2, DSE 6.0+\n * @property {Number} maxSupported Returns the higher protocol version that is supported by this driver.\n * @property {Number} minSupported Returns the lower protocol version that is supported by this driver.\n * @property {Function} isSupported A function that returns a boolean determining whether a given protocol version\n * is supported.\n * @alias module:types~protocolVersion\n */\nconst protocolVersion = {\n  // Strict equality operators to compare versions are allowed, other comparison operators are discouraged. Instead,\n  // use a function that checks if a functionality is present on a certain version, for maintainability purposes.\n  v1: 0x01,\n  v2: 0x02,\n  v3: 0x03,\n  v4: 0x04,\n  v5: 0x05,\n  v6: 0x06,\n  dseV1: 0x41,\n  dseV2: 0x42,\n  maxSupported: 0x42,\n  minSupported: 0x01,\n\n  /**\n   * Determines whether the protocol version is a DSE-specific protocol version.\n   * @param {Number} version\n   * @returns {Boolean}\n   * @ignore\n   */\n  isDse: function(version) {\n    return ((version >= this.dseV1 && version <= this.dseV2));\n  },\n  /**\n   * Returns true if the protocol version represents a version of Cassandra\n   * supported by this driver, false otherwise\n   * @param {Number} version\n   * @returns {Boolean}\n   * @ignore\n   */\n  isSupportedCassandra: function(version) {\n    return (version <= 0x04 && version >= 0x01);\n  },\n  /**\n   * Determines whether the protocol version is supported by this driver.\n   * @param {Number} version\n   * @returns {Boolean}\n   * @ignore\n   */\n  isSupported: function (version) {\n    return (this.isDse(version) || this.isSupportedCassandra(version));\n  },\n\n  /**\n   * Determines whether the protocol includes flags for PREPARE messages.\n   * @param {Number} version\n   * @returns {Boolean}\n   * @ignore\n   */\n  supportsPrepareFlags: function (version) {\n    return (version === this.dseV2);\n  },\n  /**\n   * Determines whether the protocol supports sending the keyspace as part of PREPARE, QUERY, EXECUTE, and BATCH.\n   * @param {Number} version\n   * @returns {Boolean}\n   * @ignore\n   */\n  supportsKeyspaceInRequest: function (version) {\n    return (version === this.dseV2);\n  },\n  /**\n   * Determines whether the protocol supports result_metadata_id on `prepared` response and\n   * and `execute` request.\n   * @param {Number} version\n   * @returns {Boolean}\n   * @ignore\n   */\n  supportsResultMetadataId: function (version) {\n    return (version === this.dseV2);\n  },\n  /**\n   * Determines whether the protocol supports partition key indexes in the `prepared` RESULT responses.\n   * @param {Number} version\n   * @returns {Boolean}\n   * @ignore\n   */\n  supportsPreparedPartitionKey: function (version) {\n    return (version >= this.v4);\n  },\n  /**\n   * Determines whether the protocol supports up to 4 strings (ie: change_type, target, keyspace and table) in the\n   * schema change responses.\n   * @param version\n   * @return {boolean}\n   * @ignore\n   */\n  supportsSchemaChangeFullMetadata: function (version) {\n    return (version >= this.v3);\n  },\n  /**\n   * Determines whether the protocol supports continuous paging.\n   * @param version\n   * @return {boolean}\n   * @ignore\n   */\n  supportsContinuousPaging: function (version) {\n    return (this.isDse(version));\n  },\n  /**\n   * Determines whether the protocol supports paging state and serial consistency parameters in QUERY and EXECUTE\n   * requests.\n   * @param version\n   * @return {boolean}\n   * @ignore\n   */\n  supportsPaging: function (version) {\n    return (version >= this.v2);\n  },\n  /**\n   * Determines whether the protocol supports timestamps parameters in BATCH, QUERY and EXECUTE requests.\n   * @param {Number} version\n   * @return {boolean}\n   * @ignore\n   */\n  supportsTimestamp: function (version) {\n    return (version >= this.v3);\n  },\n  /**\n   * Determines whether the protocol supports named parameters in QUERY and EXECUTE requests.\n   * @param {Number} version\n   * @return {boolean}\n   * @ignore\n   */\n  supportsNamedParameters: function (version) {\n    return (version >= this.v3);\n  },\n  /**\n   * Determines whether the protocol supports unset parameters.\n   * @param {Number} version\n   * @return {boolean}\n   * @ignore\n   */\n  supportsUnset: function (version) {\n    return (version >= this.v4);\n  },\n  /**\n   * Determines whether the protocol provides a reason map for read and write failure errors.\n   * @param version\n   * @return {boolean}\n   * @ignore\n   */\n  supportsFailureReasonMap: function (version) {\n    return (version >= this.v5);\n  },\n  /**\n   * Determines whether the protocol supports timestamp and serial consistency parameters in BATCH requests.\n   * @param {Number} version\n   * @return {boolean}\n   * @ignore\n   */\n  uses2BytesStreamIds: function (version) {\n    return (version >= this.v3);\n  },\n  /**\n   * Determines whether the collection length is encoded using 32 bits.\n   * @param {Number} version\n   * @return {boolean}\n   * @ignore\n   */\n  uses4BytesCollectionLength: function (version) {\n    return (version >= this.v3);\n  },\n  /**\n   * Determines whether the QUERY, EXECUTE and BATCH flags are encoded using 32 bits.\n   * @param {Number} version\n   * @return {boolean}\n   * @ignore\n   */\n  uses4BytesQueryFlags: function (version) {\n    return (this.isDse(version));\n  },\n  /**\n   * Startup responses using protocol v4+ can be a SERVER_ERROR wrapping a ProtocolException, this method returns true\n   * when is possible to receive such error.\n   * @param {Number} version\n   * @return {boolean}\n   * @ignore\n   */\n  canStartupResponseErrorBeWrapped: function (version) {\n    return (version >= this.v4);\n  },\n  /**\n   * Gets the first version number that is supported, lower than the one provided.\n   * Returns zero when there isn't a lower supported version.\n   * @param {Number} version\n   * @return {Number}\n   * @ignore\n   */\n  getLowerSupported: function (version) {\n    if (version >= this.v5) {\n      return this.v4;\n    }\n    if (version <= this.v1) {\n      return 0;\n    }\n    return version - 1;\n  },\n\n  /**\n   * Computes the highest supported protocol version collectively by the given hosts.\n   *\n   * Considers the cassandra_version of the input hosts to determine what protocol versions\n   * are supported and uses the highest common protocol version among them.\n   *\n   * If hosts >= C* 3.0 are detected, any hosts older than C* 2.1 will not be considered\n   * as those cannot be connected to.  In general this will not be a problem as C* does\n   * not support clusters with nodes that have versions that are more than one major\n   * version away from each other.\n   * @param {Connection} connection Connection hosts were discovered from.\n   * @param {Array.<Host>} hosts The hosts to determine highest protocol version from.\n   * @return {Number} Highest supported protocol version among hosts.\n   */\n  getHighestCommon: function(connection, hosts) {\n    const log = connection.log ? connection.log.bind(connection) : utils.noop;\n    let maxVersion = connection.protocolVersion;\n    // whether or not protocol v3 is required (nodes detected that don't support < 3).\n    let v3Requirement = false;\n    // track the common protocol version >= v3 in case we encounter older versions.\n    let maxVersionWith3OrMore = maxVersion;\n    hosts.forEach(h => {\n      let dseVersion = null;\n      if (h.dseVersion) {\n        // As of DSE 5.1, DSE has it's own specific protocol versions.  If we detect 5.1+\n        // consider those protocol versions.\n        dseVersion = VersionNumber.parse(h.dseVersion);\n        log('verbose', `Encountered host ${h.address} with dse version ${dseVersion}`);\n        if (dseVersion.compare(v510) >= 0) {\n          v3Requirement = true;\n          if (dseVersion.compare(v600) >= 0) {\n            maxVersion = Math.min(this.dseV2, maxVersion);\n          } else {\n            maxVersion = Math.min(this.dseV1, maxVersion);\n          }\n          maxVersionWith3OrMore = maxVersion;\n          return;\n        }\n        // If DSE < 5.1, we fall back on the cassandra protocol logic.\n      }\n\n      if (!h.cassandraVersion || h.cassandraVersion.length === 0) {\n        log('warning', 'Encountered host ' + h.address + ' with no cassandra version,' +\n          ' skipping as part of protocol version evaluation');\n        return;\n      }\n\n      try {\n        const cassandraVersion = VersionNumber.parse(h.cassandraVersion);\n        if (!dseVersion) {\n          log('verbose', 'Encountered host ' + h.address + ' with cassandra version ' + cassandraVersion);\n        }\n        if (cassandraVersion.compare(v300) >= 0) {\n          // Anything 3.0.0+ has a max protocol version of V4 and requires at least V3.\n          v3Requirement = true;\n          maxVersion = Math.min(this.v4, maxVersion);\n          maxVersionWith3OrMore = maxVersion;\n        } else if (cassandraVersion.compare(v220) >= 0) {\n          // Cassandra 2.2.x has a max protocol version of V4.\n          maxVersion = Math.min(this.v4, maxVersion);\n          maxVersionWith3OrMore = maxVersion;\n        } else if (cassandraVersion.compare(v210) >= 0) {\n          // Cassandra 2.1.x has a max protocol version of V3.\n          maxVersion = Math.min(this.v3, maxVersion);\n          maxVersionWith3OrMore = maxVersion;\n        } else if (cassandraVersion.compare(v200) >= 0) {\n          // Cassandra 2.0.x has a max protocol version of V2.\n          maxVersion = Math.min(this.v2, maxVersion);\n        } else {\n          // Anything else is < 2.x and requires protocol version V1.\n          maxVersion = this.v1;\n        }\n      } catch (e) {\n        log('warning', 'Encountered host ' + h.address + ' with unparseable cassandra version ' + h.cassandraVersion\n          + ' skipping as part of protocol version evaluation');\n      }\n    });\n\n    if (v3Requirement && maxVersion < this.v3) {\n      const addendum = '. This should not be possible as nodes within a cluster can\\'t be separated by more than one major version';\n      if (maxVersionWith3OrMore < this.v3) {\n        log('error', 'Detected hosts that require at least protocol version 0x3, but currently connected to '\n         + connection.address + ':' + connection.port + ' using protocol version 0x' + maxVersionWith3OrMore\n         + '. Will not be able to connect to these hosts' + addendum);\n      } else {\n        log('error', 'Detected hosts with maximum protocol version of 0x' + maxVersion.toString(16)\n          + ' but there are some hosts that require at least version 0x3. Will not be able to connect to these older hosts'\n          + addendum);\n      }\n      maxVersion = maxVersionWith3OrMore;\n    }\n\n    log('verbose', 'Resolved protocol version 0x' + maxVersion.toString(16) + ' as the highest common protocol version among hosts');\n    return maxVersion;\n  },\n\n  /**\n   * Determines if the protocol is a BETA version of the protocol.\n   * @param {Number} version\n   * @return {Number}\n   */\n  isBeta: function (version) {\n    return version === this.v5;\n  }\n};\n\nmodule.exports = protocolVersion;", "// Copyright 2009 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/** @module types */\n\nvar utils = require('../utils');\n\n/**\n * Constructs a two's-complement integer an array containing bits of the\n * integer in 32-bit (signed) pieces, given in little-endian order (i.e.,\n * lowest-order bits in the first piece), and the sign of -1 or 0.\n *\n * See the from* functions below for other convenient ways of constructing\n * Integers.\n *\n * The internal representation of an integer is an array of 32-bit signed\n * pieces, along with a sign (0 or -1) that indicates the contents of all the\n * other 32-bit pieces out to infinity.  We use 32-bit pieces because these are\n * the size of integers on which Javascript performs bit-operations.  For\n * operations like addition and multiplication, we split each number into 16-bit\n * pieces, which can easily be multiplied within Javascript's floating-point\n * representation without overflow or change in sign.\n *\n * @constructor\n * @param {Array.<number>} bits Array containing the bits of the number.\n * @param {number} sign The sign of the number: -1 for negative and 0 positive.\n * @final\n */\nfunction Integer (bits, sign) {\n  /**\n   * @type {!Array.<number>}\n   * @private\n   */\n  this.bits_ = [];\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.sign_ = sign;\n\n  // Copy the 32-bit signed integer values passed in.  We prune out those at the\n  // top that equal the sign since they are redundant.\n  var top = true;\n  for (var i = bits.length - 1; i >= 0; i--) {\n    var val = bits[i] | 0;\n    if (!top || val != sign) {\n      this.bits_[i] = val;\n      top = false;\n    }\n  }\n}\n\n\n// NOTE: Common constant values ZERO, ONE, NEG_ONE, etc. are defined below the\n// from* methods on which they depend.\n\n\n/**\n * A cache of the Integer representations of small integer values.\n * @type {!Object}\n * @private\n */\nInteger.IntCache_ = {};\n\n\n/**\n * Returns an Integer representing the given (32-bit) integer value.\n * @param {number} value A 32-bit integer value.\n * @return {!Integer} The corresponding Integer value.\n */\nInteger.fromInt = function(value) {\n  if (-128 <= value && value < 128) {\n    var cachedObj = Integer.IntCache_[value];\n    if (cachedObj) {\n      return cachedObj;\n    }\n  }\n\n  var obj = new Integer([value | 0], value < 0 ? -1 : 0);\n  if (-128 <= value && value < 128) {\n    Integer.IntCache_[value] = obj;\n  }\n  return obj;\n};\n\n\n/**\n * Returns an Integer representing the given value, provided that it is a finite\n * number.  Otherwise, zero is returned.\n * @param {number} value The value in question.\n * @return {!Integer} The corresponding Integer value.\n */\nInteger.fromNumber = function(value) {\n  if (isNaN(value) || !isFinite(value)) {\n    return Integer.ZERO;\n  } else if (value < 0) {\n    return Integer.fromNumber(-value).negate();\n  } else {\n    var bits = [];\n    var pow = 1;\n    for (var i = 0; value >= pow; i++) {\n      bits[i] = (value / pow) | 0;\n      pow *= Integer.TWO_PWR_32_DBL_;\n    }\n    return new Integer(bits, 0);\n  }\n};\n\n\n/**\n * Returns a Integer representing the value that comes by concatenating the\n * given entries, each is assumed to be 32 signed bits, given in little-endian\n * order (lowest order bits in the lowest index), and sign-extending the highest\n * order 32-bit value.\n * @param {Array.<number>} bits The bits of the number, in 32-bit signed pieces,\n *     in little-endian order.\n * @return {!Integer} The corresponding Integer value.\n */\nInteger.fromBits = function(bits) {\n  var high = bits[bits.length - 1];\n  //noinspection JSBitwiseOperatorUsage\n  return new Integer(bits, high & (1 << 31) ? -1 : 0);\n};\n\n\n/**\n * Returns an Integer representation of the given string, written using the\n * given radix.\n * @param {string} str The textual representation of the Integer.\n * @param {number=} opt_radix The radix in which the text is written.\n * @return {!Integer} The corresponding Integer value.\n */\nInteger.fromString = function(str, opt_radix) {\n  if (str.length == 0) {\n    throw TypeError('number format error: empty string');\n  }\n\n  var radix = opt_radix || 10;\n  if (radix < 2 || 36 < radix) {\n    throw Error('radix out of range: ' + radix);\n  }\n\n  if (str.charAt(0) == '-') {\n    return Integer.fromString(str.substring(1), radix).negate();\n  } else if (str.indexOf('-') >= 0) {\n    throw TypeError('number format error: interior \"-\" character');\n  }\n\n  // Do several (8) digits each time through the loop, so as to\n  // minimize the calls to the very expensive emulated div.\n  var radixToPower = Integer.fromNumber(Math.pow(radix, 8));\n\n  var result = Integer.ZERO;\n  for (var i = 0; i < str.length; i += 8) {\n    var size = Math.min(8, str.length - i);\n    var value = parseInt(str.substring(i, i + size), radix);\n    if (size < 8) {\n      var power = Integer.fromNumber(Math.pow(radix, size));\n      result = result.multiply(power).add(Integer.fromNumber(value));\n    } else {\n      result = result.multiply(radixToPower);\n      result = result.add(Integer.fromNumber(value));\n    }\n  }\n  return result;\n};\n\n/**\n * Returns an Integer representation of a given big endian Buffer.\n * The internal representation of bits contains bytes in groups of 4\n * @param {Buffer} buf\n * @returns {Integer}\n */\nInteger.fromBuffer = function (buf) {\n  var bits = new Array(Math.ceil(buf.length / 4));\n  //noinspection JSBitwiseOperatorUsage\n  var sign = buf[0] & (1 << 7) ? -1 : 0;\n  for (var i = 0; i < bits.length; i++) {\n    var offset = buf.length - ((i + 1) * 4);\n    var value;\n    if (offset < 0) {\n      //The buffer length is not multiple of 4\n      offset = offset + 4;\n      value = 0;\n      for (var j = 0; j < offset; j++) {\n        var byte = buf[j];\n        if (sign === -1) {\n          //invert the bits\n          byte = ~byte & 0xff;\n        }\n        value = value | (byte << (offset - j - 1) * 8);\n      }\n      if (sign === -1) {\n        //invert all the bits\n        value = ~value;\n      }\n    }\n    else {\n      value = buf.readInt32BE(offset);\n    }\n    bits[i] = value;\n  }\n  return new Integer(bits, sign);\n};\n\n/**\n * Returns a big endian buffer representation of an Integer.\n * Internally the bits are represented using 4 bytes groups (numbers),\n * in the Buffer representation there might be the case where we need less than the 4 bytes.\n * For example: 0x00000001 -> '01', 0xFFFFFFFF -> 'FF', 0xFFFFFF01 -> 'FF01'\n * @param {Integer} value\n * @returns {Buffer}\n*/\nInteger.toBuffer = function (value) {\n  var sign = value.sign_;\n  var bits = value.bits_;\n  if (bits.length === 0) {\n    //[0] or [0xffffffff]\n    return utils.allocBufferFromArray([value.sign_]);\n  }\n  //the high bits might need to be represented in less than 4 bytes\n  var highBits = bits[bits.length-1];\n  if (sign === -1) {\n    highBits = ~highBits;\n  }\n  var high = [];\n  if (highBits >>> 24 > 0) {\n    high.push((highBits >> 24) & 0xff);\n  }\n  if (highBits >>> 16 > 0) {\n    high.push((highBits >> 16) & 0xff);\n  }\n  if (highBits >>> 8 > 0) {\n    high.push((highBits >> 8) & 0xff);\n  }\n  high.push(highBits & 0xff);\n  if (sign === -1) {\n    //The byte containing the sign bit got removed\n    if (high[0] >> 7 !== 0) {\n      //it is going to be negated\n      high.unshift(0);\n    }\n  }\n  else if (high[0] >> 7 !== 0) {\n    //its positive but it lost the byte containing the sign bit\n    high.unshift(0);\n  }\n  var buf = utils.allocBufferUnsafe(high.length + ((bits.length-1) * 4));\n  for (var j = 0; j < high.length; j++) {\n    var b = high[j];\n    if (sign === -1) {\n      buf[j] = ~b;\n    }\n    else {\n      buf[j] = b;\n    }\n  }\n  for (var i = 0; i < bits.length - 1; i++) {\n    var group = bits[bits.length - 2 - i];\n    var offset = high.length + i * 4;\n    buf.writeInt32BE(group, offset);\n  }\n  return buf;\n};\n\n\n/**\n * A number used repeatedly in calculations.  This must appear before the first\n * call to the from* functions below.\n * @type {number}\n * @private\n */\nInteger.TWO_PWR_32_DBL_ = (1 << 16) * (1 << 16);\n\n\n/** @type {!Integer} */\nInteger.ZERO = Integer.fromInt(0);\n\n\n/** @type {!Integer} */\nInteger.ONE = Integer.fromInt(1);\n\n\n/**\n * @type {!Integer}\n * @private\n */\nInteger.TWO_PWR_24_ = Integer.fromInt(1 << 24);\n\n\n/**\n * Returns the value, assuming it is a 32-bit integer.\n * @return {number} The corresponding int value.\n */\nInteger.prototype.toInt = function() {\n  return this.bits_.length > 0 ? this.bits_[0] : this.sign_;\n};\n\n\n/** @return {number} The closest floating-point representation to this value. */\nInteger.prototype.toNumber = function() {\n  if (this.isNegative()) {\n    return -this.negate().toNumber();\n  } else {\n    var val = 0;\n    var pow = 1;\n    for (var i = 0; i < this.bits_.length; i++) {\n      val += this.getBitsUnsigned(i) * pow;\n      pow *= Integer.TWO_PWR_32_DBL_;\n    }\n    return val;\n  }\n};\n\n\n/**\n * @param {number=} opt_radix The radix in which the text should be written.\n * @return {string} The textual representation of this value.\n * @override\n */\nInteger.prototype.toString = function(opt_radix) {\n  var radix = opt_radix || 10;\n  if (radix < 2 || 36 < radix) {\n    throw Error('radix out of range: ' + radix);\n  }\n\n  if (this.isZero()) {\n    return '0';\n  } else if (this.isNegative()) {\n    return '-' + this.negate().toString(radix);\n  }\n\n  // Do several (6) digits each time through the loop, so as to\n  // minimize the calls to the very expensive emulated div.\n  var radixToPower = Integer.fromNumber(Math.pow(radix, 6));\n\n  var rem = this;\n  var result = '';\n  while (true) {\n    var remDiv = rem.divide(radixToPower);\n    var intval = rem.subtract(remDiv.multiply(radixToPower)).toInt();\n    var digits = intval.toString(radix);\n\n    rem = remDiv;\n    if (rem.isZero()) {\n      return digits + result;\n    } else {\n      while (digits.length < 6) {\n        digits = '0' + digits;\n      }\n      result = '' + digits + result;\n    }\n  }\n};\n\n\n/**\n * Returns the index-th 32-bit (signed) piece of the Integer according to\n * little-endian order (i.e., index 0 contains the smallest bits).\n * @param {number} index The index in question.\n * @return {number} The requested 32-bits as a signed number.\n */\nInteger.prototype.getBits = function(index) {\n  if (index < 0) {\n    return 0;  // Allowing this simplifies bit shifting operations below...\n  } else if (index < this.bits_.length) {\n    return this.bits_[index];\n  } else {\n    return this.sign_;\n  }\n};\n\n\n/**\n * Returns the index-th 32-bit piece as an unsigned number.\n * @param {number} index The index in question.\n * @return {number} The requested 32-bits as an unsigned number.\n */\nInteger.prototype.getBitsUnsigned = function(index) {\n  var val = this.getBits(index);\n  return val >= 0 ? val : Integer.TWO_PWR_32_DBL_ + val;\n};\n\n\n/** @return {number} The sign bit of this number, -1 or 0. */\nInteger.prototype.getSign = function() {\n  return this.sign_;\n};\n\n\n/** @return {boolean} Whether this value is zero. */\nInteger.prototype.isZero = function() {\n  if (this.sign_ != 0) {\n    return false;\n  }\n  for (var i = 0; i < this.bits_.length; i++) {\n    if (this.bits_[i] != 0) {\n      return false;\n    }\n  }\n  return true;\n};\n\n\n/** @return {boolean} Whether this value is negative. */\nInteger.prototype.isNegative = function() {\n  return this.sign_ == -1;\n};\n\n\n/** @return {boolean} Whether this value is odd. */\nInteger.prototype.isOdd = function() {\n  return (this.bits_.length == 0) && (this.sign_ == -1) ||\n    (this.bits_.length > 0) && ((this.bits_[0] & 1) != 0);\n};\n\n\n/**\n * @param {Integer} other Integer to compare against.\n * @return {boolean} Whether this Integer equals the other.\n */\nInteger.prototype.equals = function(other) {\n  if (this.sign_ != other.sign_) {\n    return false;\n  }\n  var len = Math.max(this.bits_.length, other.bits_.length);\n  for (var i = 0; i < len; i++) {\n    if (this.getBits(i) != other.getBits(i)) {\n      return false;\n    }\n  }\n  return true;\n};\n\n\n/**\n * @param {Integer} other Integer to compare against.\n * @return {boolean} Whether this Integer does not equal the other.\n */\nInteger.prototype.notEquals = function(other) {\n  return !this.equals(other);\n};\n\n\n/**\n * @param {Integer} other Integer to compare against.\n * @return {boolean} Whether this Integer is greater than the other.\n */\nInteger.prototype.greaterThan = function(other) {\n  return this.compare(other) > 0;\n};\n\n\n/**\n * @param {Integer} other Integer to compare against.\n * @return {boolean} Whether this Integer is greater than or equal to the other.\n */\nInteger.prototype.greaterThanOrEqual = function(other) {\n  return this.compare(other) >= 0;\n};\n\n\n/**\n * @param {Integer} other Integer to compare against.\n * @return {boolean} Whether this Integer is less than the other.\n */\nInteger.prototype.lessThan = function(other) {\n  return this.compare(other) < 0;\n};\n\n\n/**\n * @param {Integer} other Integer to compare against.\n * @return {boolean} Whether this Integer is less than or equal to the other.\n */\nInteger.prototype.lessThanOrEqual = function(other) {\n  return this.compare(other) <= 0;\n};\n\n\n/**\n * Compares this Integer with the given one.\n * @param {Integer} other Integer to compare against.\n * @return {number} 0 if they are the same, 1 if the this is greater, and -1\n *     if the given one is greater.\n */\nInteger.prototype.compare = function(other) {\n  var diff = this.subtract(other);\n  if (diff.isNegative()) {\n    return -1;\n  } else if (diff.isZero()) {\n    return 0;\n  } else {\n    return +1;\n  }\n};\n\n\n/**\n * Returns an integer with only the first numBits bits of this value, sign\n * extended from the final bit.\n * @param {number} numBits The number of bits by which to shift.\n * @return {!Integer} The shorted integer value.\n */\nInteger.prototype.shorten = function(numBits) {\n  var arr_index = (numBits - 1) >> 5;\n  var bit_index = (numBits - 1) % 32;\n  var bits = [];\n  for (var i = 0; i < arr_index; i++) {\n    bits[i] = this.getBits(i);\n  }\n  var sigBits = bit_index == 31 ? 0xFFFFFFFF : (1 << (bit_index + 1)) - 1;\n  var val = this.getBits(arr_index) & sigBits;\n  //noinspection JSBitwiseOperatorUsage\n  if (val & (1 << bit_index)) {\n    val |= 0xFFFFFFFF - sigBits;\n    bits[arr_index] = val;\n    return new Integer(bits, -1);\n  } else {\n    bits[arr_index] = val;\n    return new Integer(bits, 0);\n  }\n};\n\n\n/** @return {!Integer} The negation of this value. */\nInteger.prototype.negate = function() {\n  return this.not().add(Integer.ONE);\n};\n\n\n/**\n * Returns the sum of this and the given Integer.\n * @param {Integer} other The Integer to add to this.\n * @return {!Integer} The Integer result.\n */\nInteger.prototype.add = function(other) {\n  var len = Math.max(this.bits_.length, other.bits_.length);\n  var arr = [];\n  var carry = 0;\n\n  for (var i = 0; i <= len; i++) {\n    var a1 = this.getBits(i) >>> 16;\n    var a0 = this.getBits(i) & 0xFFFF;\n\n    var b1 = other.getBits(i) >>> 16;\n    var b0 = other.getBits(i) & 0xFFFF;\n\n    var c0 = carry + a0 + b0;\n    var c1 = (c0 >>> 16) + a1 + b1;\n    carry = c1 >>> 16;\n    c0 &= 0xFFFF;\n    c1 &= 0xFFFF;\n    arr[i] = (c1 << 16) | c0;\n  }\n  return Integer.fromBits(arr);\n};\n\n\n/**\n * Returns the difference of this and the given Integer.\n * @param {Integer} other The Integer to subtract from this.\n * @return {!Integer} The Integer result.\n */\nInteger.prototype.subtract = function(other) {\n  return this.add(other.negate());\n};\n\n\n/**\n * Returns the product of this and the given Integer.\n * @param {Integer} other The Integer to multiply against this.\n * @return {!Integer} The product of this and the other.\n */\nInteger.prototype.multiply = function(other) {\n  if (this.isZero()) {\n    return Integer.ZERO;\n  } else if (other.isZero()) {\n    return Integer.ZERO;\n  }\n\n  if (this.isNegative()) {\n    if (other.isNegative()) {\n      return this.negate().multiply(other.negate());\n    } else {\n      return this.negate().multiply(other).negate();\n    }\n  } else if (other.isNegative()) {\n    return this.multiply(other.negate()).negate();\n  }\n\n  // If both numbers are small, use float multiplication\n  if (this.lessThan(Integer.TWO_PWR_24_) &&\n    other.lessThan(Integer.TWO_PWR_24_)) {\n    return Integer.fromNumber(this.toNumber() * other.toNumber());\n  }\n\n  // Fill in an array of 16-bit products.\n  var len = this.bits_.length + other.bits_.length;\n  var arr = [];\n  for (var i = 0; i < 2 * len; i++) {\n    arr[i] = 0;\n  }\n  for (var i = 0; i < this.bits_.length; i++) {\n    for (var j = 0; j < other.bits_.length; j++) {\n      var a1 = this.getBits(i) >>> 16;\n      var a0 = this.getBits(i) & 0xFFFF;\n\n      var b1 = other.getBits(j) >>> 16;\n      var b0 = other.getBits(j) & 0xFFFF;\n\n      arr[2 * i + 2 * j] += a0 * b0;\n      Integer.carry16_(arr, 2 * i + 2 * j);\n      arr[2 * i + 2 * j + 1] += a1 * b0;\n      Integer.carry16_(arr, 2 * i + 2 * j + 1);\n      arr[2 * i + 2 * j + 1] += a0 * b1;\n      Integer.carry16_(arr, 2 * i + 2 * j + 1);\n      arr[2 * i + 2 * j + 2] += a1 * b1;\n      Integer.carry16_(arr, 2 * i + 2 * j + 2);\n    }\n  }\n\n  // Combine the 16-bit values into 32-bit values.\n  for (var i = 0; i < len; i++) {\n    arr[i] = (arr[2 * i + 1] << 16) | arr[2 * i];\n  }\n  for (var i = len; i < 2 * len; i++) {\n    arr[i] = 0;\n  }\n  return new Integer(arr, 0);\n};\n\n\n/**\n * Carries any overflow from the given index into later entries.\n * @param {Array.<number>} bits Array of 16-bit values in little-endian order.\n * @param {number} index The index in question.\n * @private\n */\nInteger.carry16_ = function(bits, index) {\n  while ((bits[index] & 0xFFFF) != bits[index]) {\n    bits[index + 1] += bits[index] >>> 16;\n    bits[index] &= 0xFFFF;\n  }\n};\n\n\n/**\n * Returns this Integer divided by the given one.\n * @param {Integer} other Th Integer to divide this by.\n * @return {!Integer} This value divided by the given one.\n */\nInteger.prototype.divide = function(other) {\n  if (other.isZero()) {\n    throw Error('division by zero');\n  } else if (this.isZero()) {\n    return Integer.ZERO;\n  }\n\n  if (this.isNegative()) {\n    if (other.isNegative()) {\n      return this.negate().divide(other.negate());\n    } else {\n      return this.negate().divide(other).negate();\n    }\n  } else if (other.isNegative()) {\n    return this.divide(other.negate()).negate();\n  }\n\n  // Repeat the following until the remainder is less than other:  find a\n  // floating-point that approximates remainder / other *from below*, add this\n  // into the result, and subtract it from the remainder.  It is critical that\n  // the approximate value is less than or equal to the real value so that the\n  // remainder never becomes negative.\n  var res = Integer.ZERO;\n  var rem = this;\n  while (rem.greaterThanOrEqual(other)) {\n    // Approximate the result of division. This may be a little greater or\n    // smaller than the actual value.\n    var approx = Math.max(1, Math.floor(rem.toNumber() / other.toNumber()));\n\n    // We will tweak the approximate result by changing it in the 48-th digit or\n    // the smallest non-fractional digit, whichever is larger.\n    var log2 = Math.ceil(Math.log(approx) / Math.LN2);\n    var delta = (log2 <= 48) ? 1 : Math.pow(2, log2 - 48);\n\n    // Decrease the approximation until it is smaller than the remainder.  Note\n    // that if it is too large, the product overflows and is negative.\n    var approxRes = Integer.fromNumber(approx);\n    var approxRem = approxRes.multiply(other);\n    while (approxRem.isNegative() || approxRem.greaterThan(rem)) {\n      approx -= delta;\n      approxRes = Integer.fromNumber(approx);\n      approxRem = approxRes.multiply(other);\n    }\n\n    // We know the answer can't be zero... and actually, zero would cause\n    // infinite recursion since we would make no progress.\n    if (approxRes.isZero()) {\n      approxRes = Integer.ONE;\n    }\n\n    res = res.add(approxRes);\n    rem = rem.subtract(approxRem);\n  }\n  return res;\n};\n\n\n/**\n * Returns this Integer modulo the given one.\n * @param {Integer} other The Integer by which to mod.\n * @return {!Integer} This value modulo the given one.\n */\nInteger.prototype.modulo = function(other) {\n  return this.subtract(this.divide(other).multiply(other));\n};\n\n\n/** @return {!Integer} The bitwise-NOT of this value. */\nInteger.prototype.not = function() {\n  var len = this.bits_.length;\n  var arr = [];\n  for (var i = 0; i < len; i++) {\n    arr[i] = ~this.bits_[i];\n  }\n  return new Integer(arr, ~this.sign_);\n};\n\n\n/**\n * Returns the bitwise-AND of this Integer and the given one.\n * @param {Integer} other The Integer to AND with this.\n * @return {!Integer} The bitwise-AND of this and the other.\n */\nInteger.prototype.and = function(other) {\n  var len = Math.max(this.bits_.length, other.bits_.length);\n  var arr = [];\n  for (var i = 0; i < len; i++) {\n    arr[i] = this.getBits(i) & other.getBits(i);\n  }\n  return new Integer(arr, this.sign_ & other.sign_);\n};\n\n\n/**\n * Returns the bitwise-OR of this Integer and the given one.\n * @param {Integer} other The Integer to OR with this.\n * @return {!Integer} The bitwise-OR of this and the other.\n */\nInteger.prototype.or = function(other) {\n  var len = Math.max(this.bits_.length, other.bits_.length);\n  var arr = [];\n  for (var i = 0; i < len; i++) {\n    arr[i] = this.getBits(i) | other.getBits(i);\n  }\n  return new Integer(arr, this.sign_ | other.sign_);\n};\n\n\n/**\n * Returns the bitwise-XOR of this Integer and the given one.\n * @param {Integer} other The Integer to XOR with this.\n * @return {!Integer} The bitwise-XOR of this and the other.\n */\nInteger.prototype.xor = function(other) {\n  var len = Math.max(this.bits_.length, other.bits_.length);\n  var arr = [];\n  for (var i = 0; i < len; i++) {\n    arr[i] = this.getBits(i) ^ other.getBits(i);\n  }\n  return new Integer(arr, this.sign_ ^ other.sign_);\n};\n\n\n/**\n * Returns this value with bits shifted to the left by the given amount.\n * @param {number} numBits The number of bits by which to shift.\n * @return {!Integer} This shifted to the left by the given amount.\n */\nInteger.prototype.shiftLeft = function(numBits) {\n  var arr_delta = numBits >> 5;\n  var bit_delta = numBits % 32;\n  var len = this.bits_.length + arr_delta + (bit_delta > 0 ? 1 : 0);\n  var arr = [];\n  for (var i = 0; i < len; i++) {\n    if (bit_delta > 0) {\n      arr[i] = (this.getBits(i - arr_delta) << bit_delta) |\n      (this.getBits(i - arr_delta - 1) >>> (32 - bit_delta));\n    } else {\n      arr[i] = this.getBits(i - arr_delta);\n    }\n  }\n  return new Integer(arr, this.sign_);\n};\n\n\n/**\n * Returns this value with bits shifted to the right by the given amount.\n * @param {number} numBits The number of bits by which to shift.\n * @return {!Integer} This shifted to the right by the given amount.\n */\nInteger.prototype.shiftRight = function(numBits) {\n  var arr_delta = numBits >> 5;\n  var bit_delta = numBits % 32;\n  var len = this.bits_.length - arr_delta;\n  var arr = [];\n  for (var i = 0; i < len; i++) {\n    if (bit_delta > 0) {\n      arr[i] = (this.getBits(i + arr_delta) >>> bit_delta) |\n      (this.getBits(i + arr_delta + 1) << (32 - bit_delta));\n    } else {\n      arr[i] = this.getBits(i + arr_delta);\n    }\n  }\n  return new Integer(arr, this.sign_);\n};\n\n/**\n * Provide the name of the constructor and the string representation\n * @returns {string}\n */\nInteger.prototype.inspect = function () {\n  return this.constructor.name + ': ' + this.toString();\n};\n\n/**\n * Returns a Integer whose value is the absolute value of this\n * @returns {Integer}\n */\nInteger.prototype.abs = function () {\n  return this.sign_ === 0 ? this : this.negate();\n};\n\n/**\n * Returns the string representation.\n * Method used by the native JSON.stringify() to serialize this instance.\n */\nInteger.prototype.toJSON = function () {\n  return this.toString();\n};\n\nmodule.exports = Integer;\n", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst Integer = require('./integer');\nconst utils = require('../utils');\n\n/** @module types */\n/**\n * Constructs an immutable arbitrary-precision signed decimal number.\n * A <code>BigDecimal</code> consists of an [arbitrary precision integer]{@link module:types~Integer}\n * <i>unscaled value</i> and a 32-bit integer <i>scale</i>.  If zero\n * or positive, the scale is the number of digits to the right of the\n * decimal point.  If negative, the unscaled value of the number is\n * multiplied by ten to the power of the negation of the scale.  The\n * value of the number represented by the <code>BigDecimal</code> is\n * therefore <tt>(unscaledValue &times; 10<sup>-scale</sup>)</tt>.\n * @class\n * @classdesc The <code>BigDecimal</code> class provides operations for\n * arithmetic, scale manipulation, rounding, comparison and\n * format conversion.  The {@link #toString} method provides a\n * canonical representation of a <code>BigDecimal</code>.\n * @param {Integer|Number} unscaledValue The integer part of the decimal.\n * @param {Number} scale The scale of the decimal.\n * @constructor\n */\nfunction BigDecimal(unscaledValue, scale) {\n  if (typeof unscaledValue === 'number') {\n    unscaledValue = Integer.fromNumber(unscaledValue);\n  }\n  /**\n   * @type {Integer}\n   * @private\n   */\n  this._intVal = unscaledValue;\n  /**\n   * @type {Number}\n   * @private\n   */\n  this._scale = scale;\n}\n\n/**\n * Returns the BigDecimal representation of a buffer composed of the scale (int32BE) and the unsigned value (varint BE)\n * @param {Buffer} buf\n * @returns {BigDecimal}\n */\nBigDecimal.fromBuffer = function (buf) {\n  const scale = buf.readInt32BE(0);\n  const unscaledValue = Integer.fromBuffer(buf.slice(4));\n  return new BigDecimal(unscaledValue, scale);\n};\n\n/**\n * Returns a buffer representation composed of the scale as a BE int 32 and the unsigned value as a BE varint\n * @param {BigDecimal} value\n * @returns {Buffer}\n */\nBigDecimal.toBuffer = function (value) {\n  const unscaledValueBuffer = Integer.toBuffer(value._intVal);\n  const scaleBuffer = utils.allocBufferUnsafe(4);\n  scaleBuffer.writeInt32BE(value._scale, 0);\n  return Buffer.concat([scaleBuffer, unscaledValueBuffer], scaleBuffer.length + unscaledValueBuffer.length);\n};\n\n/**\n * Returns a BigDecimal representation of the string\n * @param {String} value\n * @returns {BigDecimal}\n */\nBigDecimal.fromString = function (value) {\n  if (!value) {\n    throw new TypeError('Invalid null or undefined value');\n  }\n  value = value.trim();\n  const scaleIndex = value.indexOf('.');\n  let scale = 0;\n  if (scaleIndex >= 0) {\n    scale = value.length - 1 - scaleIndex;\n    value = value.substr(0, scaleIndex) + value.substr(scaleIndex + 1);\n  }\n  return new BigDecimal(Integer.fromString(value), scale);\n};\n\n/**\n * Returns a BigDecimal representation of the Number\n * @param {Number} value\n * @returns {BigDecimal}\n */\nBigDecimal.fromNumber = function (value) {\n  if (isNaN(value)) {\n    return new BigDecimal(Integer.ZERO, 0);\n  }\n  let textValue = value.toString();\n  if (textValue.indexOf('e') >= 0) {\n    //get until scale 20\n    textValue = value.toFixed(20);\n  }\n  return BigDecimal.fromString(textValue);\n};\n\n/**\n * Returns true if the value of the BigDecimal instance and other are the same\n * @param {BigDecimal} other\n * @returns {Boolean}\n */\nBigDecimal.prototype.equals = function (other) {\n  return ((other instanceof BigDecimal) && this.compare(other) === 0);\n};\n\nBigDecimal.prototype.inspect = function () {\n  return this.constructor.name + ': ' + this.toString();\n};\n\n/**\n * @param {BigDecimal} other\n * @returns {boolean}\n */\nBigDecimal.prototype.notEquals = function (other) {\n  return !this.equals(other);\n};\n\n/**\n * Compares this BigDecimal with the given one.\n * @param {BigDecimal} other Integer to compare against.\n * @return {number} 0 if they are the same, 1 if the this is greater, and -1\n *     if the given one is greater.\n */\nBigDecimal.prototype.compare = function (other) {\n  const diff = this.subtract(other);\n  if (diff.isNegative()) {\n    return -1;\n  }\n  if (diff.isZero()) {\n    return 0;\n  }\n  return +1;\n};\n\n/**\n * Returns the difference of this and the given BigDecimal.\n * @param {BigDecimal} other The BigDecimal to subtract from this.\n * @return {!BigDecimal} The BigDecimal result.\n */\nBigDecimal.prototype.subtract = function (other) {\n  const first = this;\n  if (first._scale === other._scale) {\n    return new BigDecimal(first._intVal.subtract(other._intVal), first._scale);\n  }\n  let diffScale;\n  let unscaledValue;\n  if (first._scale < other._scale) {\n    //The scale of this is lower\n    diffScale = other._scale - first._scale;\n    //multiple this unScaledValue to compare in the same scale\n    unscaledValue = first._intVal\n      .multiply(Integer.fromNumber(Math.pow(10, diffScale)))\n      .subtract(other._intVal);\n    return new BigDecimal(unscaledValue, other._scale);\n  }\n  //The scale of this is higher\n  diffScale = first._scale - other._scale;\n  //multiple this unScaledValue to compare in the same scale\n  unscaledValue = first._intVal\n    .subtract(\n      other._intVal.multiply(Integer.fromNumber(Math.pow(10, diffScale))));\n  return new BigDecimal(unscaledValue, first._scale);\n};\n\n/**\n * Returns the sum of this and the given <code>BigDecimal</code>.\n * @param {BigDecimal} other The BigDecimal to sum to this.\n * @return {!BigDecimal} The BigDecimal result.\n */\nBigDecimal.prototype.add = function (other) {\n  const first = this;\n  if (first._scale === other._scale) {\n    return new BigDecimal(first._intVal.add(other._intVal), first._scale);\n  }\n  let diffScale;\n  let unscaledValue;\n  if (first._scale < other._scale) {\n    //The scale of this is lower\n    diffScale = other._scale - first._scale;\n    //multiple this unScaledValue to compare in the same scale\n    unscaledValue = first._intVal\n      .multiply(Integer.fromNumber(Math.pow(10, diffScale)))\n      .add(other._intVal);\n    return new BigDecimal(unscaledValue, other._scale);\n  }\n  //The scale of this is higher\n  diffScale = first._scale - other._scale;\n  //multiple this unScaledValue to compare in the same scale\n  unscaledValue = first._intVal\n    .add(\n      other._intVal.multiply(Integer.fromNumber(Math.pow(10, diffScale))));\n  return new BigDecimal(unscaledValue, first._scale);\n};\n\n/**\n * Returns true if the current instance is greater than the other\n * @param {BigDecimal} other\n * @returns {boolean}\n */\nBigDecimal.prototype.greaterThan = function (other) {\n  return this.compare(other) === 1;\n};\n\n/** @return {boolean} Whether this value is negative. */\nBigDecimal.prototype.isNegative = function () {\n  return this._intVal.isNegative();\n};\n\n/** @return {boolean} Whether this value is zero. */\nBigDecimal.prototype.isZero = function () {\n  return this._intVal.isZero();\n};\n\n/**\n * Returns the string representation of this <code>BigDecimal</code>\n * @returns {string}\n */\nBigDecimal.prototype.toString = function () {\n  let intString = this._intVal.toString();\n  if (this._scale === 0) {\n    return intString;\n  }\n  let signSymbol = '';\n  if (intString.charAt(0) === '-') {\n    signSymbol = '-';\n    intString = intString.substr(1);\n  }\n  let separatorIndex = intString.length - this._scale;\n  if (separatorIndex <= 0) {\n    //add zeros at the beginning, plus an additional zero\n    intString = utils.stringRepeat('0', (-separatorIndex) + 1) + intString;\n    separatorIndex = intString.length - this._scale;\n  }\n  return signSymbol + intString.substr(0, separatorIndex) + '.' + intString.substr(separatorIndex);\n};\n\n/**\n * Returns a Number representation of this <code>BigDecimal</code>.\n * @returns {Number}\n */\nBigDecimal.prototype.toNumber = function () {\n  return parseFloat(this.toString());\n};\n\n/**\n * Returns the string representation.\n * Method used by the native JSON.stringify() to serialize this instance.\n */\nBigDecimal.prototype.toJSON = function () {\n  return this.toString();\n};\n\n\nmodule.exports = BigDecimal;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst Long = require('long');\nconst util = require('util');\nconst utils = require('../utils');\nconst VIntCoding = utils.VIntCoding;\n\n/** @module types */\n\n// Reuse the same buffers that should perform slightly better than built-in buffer pool\nconst reusableBuffers = {\n  months: utils.allocBuffer(9),\n  days: utils.allocBuffer(9),\n  nanoseconds: utils.allocBuffer(9)\n};\n\nconst maxInt32 = 0x7FFFFFFF;\nconst longOneThousand = Long.fromInt(1000);\nconst nanosPerMicro = longOneThousand;\nconst nanosPerMilli = longOneThousand.multiply(nanosPerMicro);\nconst nanosPerSecond = longOneThousand.multiply(nanosPerMilli);\nconst nanosPerMinute = Long.fromInt(60).multiply(nanosPerSecond);\nconst nanosPerHour = Long.fromInt(60).multiply(nanosPerMinute);\nconst daysPerWeek = 7;\nconst monthsPerYear = 12;\nconst standardRegex = /(\\d+)(y|mo|w|d|h|s|ms|us|s|ns|m)/gi;\nconst iso8601Regex = /P((\\d+)Y)?((\\d+)M)?((\\d+)D)?(T((\\d+)H)?((\\d+)M)?((\\d+)S)?)?/;\nconst iso8601WeekRegex = /P(\\d+)W/;\nconst iso8601AlternateRegex = /P(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})/;\n\n/**\n * Creates a new instance of {@link Duration}.\n * @classdesc\n * Represents a duration. A duration stores separately months, days, and seconds due to the fact that the number of\n * days in a month varies, and a day can have 23 or 25 hours if a daylight saving is involved.\n * @param {Number} months The number of months.\n * @param {Number} days The number of days.\n * @param {Number|Long} nanoseconds The number of nanoseconds.\n * @constructor\n */\nfunction Duration(months, days, nanoseconds) {\n  /**\n   * Gets the number of months.\n   * @type {Number}\n   */\n  this.months = months;\n  /**\n   * Gets the number of days.\n   * @type {Number}\n   */\n  this.days = days;\n  /**\n   * Gets the number of nanoseconds represented as a <code>int64</code>.\n   * @type {Long}\n   */\n  this.nanoseconds = typeof nanoseconds === 'number' ? Long.fromNumber(nanoseconds) : nanoseconds;\n}\n\nDuration.prototype.equals = function (other) {\n  if (!(other instanceof Duration)) {\n    return false;\n  }\n  return this.months === other.months &&\n    this.days === other.days &&\n    this.nanoseconds.equals(other.nanoseconds);\n};\n\n/**\n * Serializes the duration and returns the representation of the value in bytes.\n * @returns {Buffer}\n */\nDuration.prototype.toBuffer = function () {\n  const lengthMonths = VIntCoding.writeVInt(Long.fromNumber(this.months), reusableBuffers.months);\n  const lengthDays = VIntCoding.writeVInt(Long.fromNumber(this.days), reusableBuffers.days);\n  const lengthNanoseconds = VIntCoding.writeVInt(this.nanoseconds, reusableBuffers.nanoseconds);\n  const buffer = utils.allocBufferUnsafe(lengthMonths + lengthDays + lengthNanoseconds);\n  reusableBuffers.months.copy(buffer, 0, 0, lengthMonths);\n  let offset = lengthMonths;\n  reusableBuffers.days.copy(buffer, offset, 0, lengthDays);\n  offset += lengthDays;\n  reusableBuffers.nanoseconds.copy(buffer, offset, 0, lengthNanoseconds);\n  return buffer;\n};\n\n/**\n * Returns the string representation of the value.\n * @return {string}\n */\nDuration.prototype.toString = function () {\n  let value = '';\n  function append(dividend, divisor, unit) {\n    if (dividend === 0 || dividend < divisor) {\n      return dividend;\n    }\n    // string concatenation is supposed to be fasted than join()\n    value += (dividend / divisor).toFixed(0) + unit;\n    return dividend % divisor;\n  }\n  function append64(dividend, divisor, unit) {\n    if (dividend.equals(Long.ZERO) || dividend.lessThan(divisor)) {\n      return dividend;\n    }\n    // string concatenation is supposed to be fasted than join()\n    value += dividend.divide(divisor).toString() + unit;\n    return dividend.modulo(divisor);\n  }\n  if (this.months < 0 || this.days < 0 || this.nanoseconds.isNegative()) {\n    value = '-';\n  }\n  let remainder = append(Math.abs(this.months), monthsPerYear, \"y\");\n  append(remainder, 1, \"mo\");\n  append(Math.abs(this.days), 1, \"d\");\n\n  if (!this.nanoseconds.equals(Long.ZERO)) {\n    const nanos = this.nanoseconds.isNegative() ? this.nanoseconds.negate() : this.nanoseconds;\n    remainder = append64(nanos, nanosPerHour, \"h\");\n    remainder = append64(remainder, nanosPerMinute, \"m\");\n    remainder = append64(remainder, nanosPerSecond, \"s\");\n    remainder = append64(remainder, nanosPerMilli, \"ms\");\n    remainder = append64(remainder, nanosPerMicro, \"us\");\n    append64(remainder, Long.ONE, \"ns\");\n  }\n  return value;\n};\n\n/**\n * Creates a new {@link Duration} instance from the binary representation of the value.\n * @param {Buffer} buffer\n * @returns {Duration}\n */\nDuration.fromBuffer = function (buffer) {\n  const offset = { value: 0 };\n  const months = VIntCoding.readVInt(buffer, offset).toNumber();\n  const days = VIntCoding.readVInt(buffer, offset).toNumber();\n  const nanoseconds = VIntCoding.readVInt(buffer, offset);\n  return new Duration(months, days, nanoseconds);\n};\n\n/**\n * Creates a new {@link Duration} instance from the string representation of the value.\n * <p>\n *   Accepted formats:\n * </p>\n * <ul>\n * <li>multiple digits followed by a time unit like: 12h30m where the time unit can be:\n *   <ul>\n *     <li>{@code y}: years</li>\n *     <li>{@code m}: months</li>\n *     <li>{@code w}: weeks</li>\n *     <li>{@code d}: days</li>\n *     <li>{@code h}: hours</li>\n *     <li>{@code m}: minutes</li>\n *     <li>{@code s}: seconds</li>\n *     <li>{@code ms}: milliseconds</li>\n *     <li>{@code us} or {@code s}: microseconds</li>\n *     <li>{@code ns}: nanoseconds</li>\n *   </ul>\n * </li>\n * <li>ISO 8601 format:  <code>P[n]Y[n]M[n]DT[n]H[n]M[n]S or P[n]W</code></li>\n * <li>ISO 8601 alternative format: <code>P[YYYY]-[MM]-[DD]T[hh]:[mm]:[ss]</code></li>\n * </ul>\n * @param {String} input\n * @returns {Duration}\n */\nDuration.fromString = function (input) {\n  const isNegative = input.charAt(0) === '-';\n  const source = isNegative ? input.substr(1) : input;\n  if (source.charAt(0) === 'P') {\n    if (source.charAt(source.length - 1) === 'W') {\n      return parseIso8601WeekFormat(isNegative, source);\n    }\n    if (source.indexOf('-') > 0) {\n      return parseIso8601AlternativeFormat(isNegative, source);\n    }\n    return parseIso8601Format(isNegative, source);\n  }\n  return parseStandardFormat(isNegative, source);\n};\n\n/**\n * @param {Boolean} isNegative\n * @param {String} source\n * @returns {Duration}\n * @private\n */\nfunction parseStandardFormat(isNegative, source) {\n  const builder = new Builder(isNegative);\n  standardRegex.lastIndex = 0;\n  let matches;\n  while ((matches = standardRegex.exec(source)) && matches.length <= 3) {\n    builder.add(matches[1], matches[2]);\n  }\n  return builder.build();\n}\n\n/**\n * @param {Boolean} isNegative\n * @param {String} source\n * @returns {Duration}\n * @private\n */\nfunction parseIso8601Format(isNegative, source) {\n  const matches = iso8601Regex.exec(source);\n  if (!matches || matches[0] !== source) {\n    throw new TypeError(util.format(\"Unable to convert '%s' to a duration\", source));\n  }\n  const builder = new Builder(isNegative);\n  if (matches[1]) {\n    builder.addYears(matches[2]);\n  }\n  if (matches[3]) {\n    builder.addMonths(matches[4]);\n  }\n  if (matches[5]) {\n    builder.addDays(matches[6]);\n  }\n  if (matches[7]) {\n    if (matches[8]) {\n      builder.addHours(matches[9]);\n    }\n    if (matches[10]) {\n      builder.addMinutes(matches[11]);\n    }\n    if (matches[12]) {\n      builder.addSeconds(matches[13]);\n    }\n  }\n  return builder.build();\n}\n\n/**\n * @param {Boolean} isNegative\n * @param {String} source\n * @returns {Duration}\n * @private\n */\nfunction parseIso8601WeekFormat(isNegative, source) {\n  const matches = iso8601WeekRegex.exec(source);\n  if (!matches || matches[0] !== source) {\n    throw new TypeError(util.format(\"Unable to convert '%s' to a duration\", source));\n  }\n  return new Builder(isNegative)\n    .addWeeks(matches[1])\n    .build();\n}\n\n/**\n * @param {Boolean} isNegative\n * @param {String} source\n * @returns {Duration}\n * @private\n */\nfunction parseIso8601AlternativeFormat(isNegative, source) {\n  const matches = iso8601AlternateRegex.exec(source);\n  if (!matches || matches[0] !== source) {\n    throw new TypeError(util.format(\"Unable to convert '%s' to a duration\", source));\n  }\n  return new Builder(isNegative).addYears(matches[1])\n    .addMonths(matches[2])\n    .addDays(matches[3])\n    .addHours(matches[4])\n    .addMinutes(matches[5])\n    .addSeconds(matches[6])\n    .build();\n}\n\n/**\n * @param {Boolean} isNegative\n * @private\n * @constructor\n */\nfunction Builder(isNegative) {\n  this._isNegative = isNegative;\n  this._unitIndex = 0;\n  this._months = 0;\n  this._days = 0;\n  this._nanoseconds = Long.ZERO;\n  this._addMethods = {\n    'y': this.addYears,\n    'mo': this.addMonths,\n    'w': this.addWeeks,\n    'd': this.addDays,\n    'h': this.addHours,\n    'm': this.addMinutes,\n    's': this.addSeconds,\n    'ms': this.addMillis,\n    // s\n    '\\u00B5s': this.addMicros,\n    'us': this.addMicros,\n    'ns': this.addNanos\n  };\n  this._unitByIndex = [\n    null, 'years', 'months', 'weeks', 'days', 'hours', 'minutes', 'seconds', 'milliseconds', 'microseconds',\n    'nanoseconds'\n  ];\n}\n\nBuilder.prototype._validateOrder = function (unitIndex) {\n  if (unitIndex === this._unitIndex) {\n    throw new TypeError(util.format(\"Invalid duration. The %s are specified multiple times\", this._getUnitName(unitIndex)));\n  }\n\n  if (unitIndex <= this._unitIndex) {\n    throw new TypeError(util.format(\"Invalid duration. The %s should be after %s\",\n      this._getUnitName(this._unitIndex),\n      this._getUnitName(unitIndex)));\n  }\n  this._unitIndex = unitIndex;\n};\n\n/**\n * @param {Number} units\n * @param {Number} monthsPerUnit\n */\nBuilder.prototype._validateMonths = function(units, monthsPerUnit) {\n  this._validate32(units, (maxInt32 - this._months) / monthsPerUnit, \"months\");\n};\n\n/**\n * @param {Number} units\n * @param {Number} daysPerUnit\n */\nBuilder.prototype._validateDays = function(units, daysPerUnit) {\n  this._validate32(units, (maxInt32 - this._days) / daysPerUnit, \"days\");\n};\n\n/**\n * @param {Long} units\n * @param {Long} nanosPerUnit\n */\nBuilder.prototype._validateNanos = function(units, nanosPerUnit) {\n  this._validate64(units, Long.MAX_VALUE.subtract(this._nanoseconds).divide(nanosPerUnit), \"nanoseconds\");\n};\n\n/**\n * @param {Number} units\n * @param {Number} limit\n * @param {String} unitName\n */\nBuilder.prototype._validate32 = function(units, limit, unitName) {\n  if (units > limit) {\n    throw new TypeError(util.format('Invalid duration. The total number of %s must be less or equal to %s',\n      unitName,\n      maxInt32));\n  }\n};\n\n/**\n * @param {Long} units\n * @param {Long} limit\n * @param {String} unitName\n */\nBuilder.prototype._validate64 = function(units, limit, unitName) {\n  if (units.greaterThan(limit)) {\n    throw new TypeError(util.format('Invalid duration. The total number of %s must be less or equal to %s',\n      unitName,\n      Long.MAX_VALUE.toString()));\n  }\n};\n\nBuilder.prototype._getUnitName = function(unitIndex) {\n  const name = this._unitByIndex[+unitIndex];\n  if (!name) {\n    throw new Error('unknown unit index: ' + unitIndex);\n  }\n  return name;\n};\n\nBuilder.prototype.add = function (textValue, symbol) {\n  const addMethod = this._addMethods[symbol.toLowerCase()];\n  if (!addMethod) {\n    throw new TypeError(util.format(\"Unknown duration symbol '%s'\", symbol));\n  }\n  return addMethod.call(this, textValue);\n};\n\n/**\n * @param {String|Number} years\n * @return {Builder}\n */\nBuilder.prototype.addYears = function (years) {\n  const value = +years;\n  this._validateOrder(1);\n  this._validateMonths(value, monthsPerYear);\n  this._months += value * monthsPerYear;\n  return this;\n};\n\n/**\n * @param {String|Number} months\n * @return {Builder}\n */\nBuilder.prototype.addMonths = function(months) {\n  const value = +months;\n  this._validateOrder(2);\n  this._validateMonths(value, 1);\n  this._months += value;\n  return this;\n};\n\n/**\n * @param {String|Number} weeks\n * @return {Builder}\n */\nBuilder.prototype.addWeeks = function(weeks) {\n  const value = +weeks;\n  this._validateOrder(3);\n  this._validateDays(value, daysPerWeek);\n  this._days += value * daysPerWeek;\n  return this;\n};\n\n/**\n * @param {String|Number} days\n * @return {Builder}\n */\nBuilder.prototype.addDays = function(days) {\n  const value = +days;\n  this._validateOrder(4);\n  this._validateDays(value, 1);\n  this._days += value;\n  return this;\n};\n\n/**\n * @param {String|Long} hours\n * @return {Builder}\n */\nBuilder.prototype.addHours = function(hours) {\n  const value = typeof hours === 'string' ? Long.fromString(hours) : hours;\n  this._validateOrder(5);\n  this._validateNanos(value, nanosPerHour);\n  this._nanoseconds = this._nanoseconds.add(value.multiply(nanosPerHour));\n  return this;\n};\n\n/**\n * @param {String|Long} minutes\n * @return {Builder}\n */\nBuilder.prototype.addMinutes = function(minutes) {\n  const value = typeof minutes === 'string' ? Long.fromString(minutes) : minutes;\n  this._validateOrder(6);\n  this._validateNanos(value, nanosPerMinute);\n  this._nanoseconds = this._nanoseconds.add(value.multiply(nanosPerMinute));\n  return this;\n};\n\n/**\n * @param {String|Long} seconds\n * @return {Builder}\n */\nBuilder.prototype.addSeconds = function(seconds) {\n  const value = typeof seconds === 'string' ? Long.fromString(seconds) : seconds;\n  this._validateOrder(7);\n  this._validateNanos(value, nanosPerSecond);\n  this._nanoseconds = this._nanoseconds.add(value.multiply(nanosPerSecond));\n  return this;\n};\n\n/**\n * @param {String|Long} millis\n * @return {Builder}\n */\nBuilder.prototype.addMillis = function(millis) {\n  const value = typeof millis === 'string' ? Long.fromString(millis) : millis;\n  this._validateOrder(8);\n  this._validateNanos(value, nanosPerMilli);\n  this._nanoseconds = this._nanoseconds.add(value.multiply(nanosPerMilli));\n  return this;\n};\n\n/**\n * @param {String|Long} micros\n * @return {Builder}\n */\nBuilder.prototype.addMicros = function(micros) {\n  const value = typeof micros === 'string' ? Long.fromString(micros) : micros;\n  this._validateOrder(9);\n  this._validateNanos(value, nanosPerMicro);\n  this._nanoseconds = this._nanoseconds.add(value.multiply(nanosPerMicro));\n  return this;\n};\n\n/**\n * @param {String|Long} nanos\n * @return {Builder}\n */\nBuilder.prototype.addNanos = function(nanos) {\n  const value = typeof nanos === 'string' ? Long.fromString(nanos) : nanos;\n  this._validateOrder(10);\n  this._validateNanos(value, Long.ONE);\n  this._nanoseconds = this._nanoseconds.add(value);\n  return this;\n};\n\n/** @return {Duration} */\nBuilder.prototype.build = function () {\n  return (this._isNegative ?\n    new Duration(-this._months, -this._days, this._nanoseconds.negate()) :\n    new Duration(this._months, this._days, this._nanoseconds));\n};\n\nmodule.exports = Duration;\n", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst utils = require('../utils');\n\n/** @module types */\n/**\n * Creates a new instance of InetAddress\n * @class\n * @classdesc Represents an v4 or v6 Internet Protocol (IP) address.\n * @param {Buffer} buffer\n * @constructor\n */\nfunction InetAddress(buffer) {\n  if (!(buffer instanceof Buffer) || (buffer.length !== 4 && buffer.length !== 16)) {\n    throw new TypeError('The ip address must contain 4 or 16 bytes');\n  }\n\n  /**\n   * Immutable buffer that represents the IP address \n   * @type Array\n   */\n  this.buffer = buffer;\n\n  /**\n   * Returns the length of the underlying buffer\n   * @type Number\n   */\n  this.length = buffer.length;\n\n  /**\n   * Returns the Ip version (4 or 6)\n   * @type Number\n   */\n  this.version = buffer.length === 4 ? 4 : 6;\n}\n\n/**\n * Parses the string representation and returns an Ip address\n * @param {String} value\n */\nInetAddress.fromString = function (value) {\n  if (!value) {\n    return new InetAddress(utils.allocBufferFromArray([0, 0, 0, 0]));\n  }\n  const ipv4Pattern = /^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$/;\n  const ipv6Pattern = /^[\\da-f:.]+$/i;\n  let parts;\n  if (ipv4Pattern.test(value)) {\n    parts = value.split('.');\n    return new InetAddress(utils.allocBufferFromArray(parts));\n  }\n  if (!ipv6Pattern.test(value)) {\n    throw new TypeError('Value could not be parsed as InetAddress: ' + value);\n  }\n  parts = value.split(':');\n  if (parts.length < 3) {\n    throw new TypeError('Value could not be parsed as InetAddress: ' + value);\n  }\n  const buffer = utils.allocBufferUnsafe(16);\n  let filling = 8 - parts.length + 1;\n  let applied = false;\n  let offset = 0;\n  const embeddedIp4 = ipv4Pattern.test(parts[parts.length - 1]);\n  if (embeddedIp4) {\n    // Its IPv6 address with an embedded IPv4 address:\n    // subtract 1 from the potential empty filling as ip4 contains 4 bytes instead of 2 of a ipv6 section\n    filling -= 1;\n  }\n  function writeItem(uIntValue) {\n    buffer.writeUInt8(+uIntValue, offset++);\n  }\n  for (let i = 0; i < parts.length; i++) {\n    const item = parts[i];\n    if (item) {\n      if (embeddedIp4 && i === parts.length - 1) {\n        item.split('.').forEach(writeItem);\n        break;\n      }\n      buffer.writeUInt16BE(parseInt(item, 16), offset);\n      offset = offset + 2;\n      continue;\n    }\n    //its an empty string\n    if (applied) {\n      //there could be 2 occurrences of empty string\n      filling = 1;\n    }\n    applied = true;\n    for (let j = 0; j < filling; j++) {\n      buffer[offset++] = 0;\n      buffer[offset++] = 0;\n    }\n  }\n  if (embeddedIp4 && !isValidIPv4Mapped(buffer)) {\n    throw new TypeError('Only IPv4-Mapped IPv6 addresses are allowed as IPv6 address with embedded IPv4 address');\n  }\n  return new InetAddress(buffer);\n};\n\n/**\n * Compares 2 addresses and returns true if the underlying bytes are the same\n * @param {InetAddress} other\n * @returns {Boolean}\n */\nInetAddress.prototype.equals = function (other) {\n  if (!(other instanceof InetAddress)) {\n    return false;\n  }\n  return (this.buffer.length === other.buffer.length &&\n    this.buffer.toString('hex') === other.buffer.toString('hex'));\n};\n\n/**\n * Returns the underlying buffer\n * @returns {Buffer}\n */\nInetAddress.prototype.getBuffer = function () {\n  return this.buffer;\n};\n\n/**\n * Provide the name of the constructor and the string representation\n * @returns {string}\n */\nInetAddress.prototype.inspect = function () {\n  return this.constructor.name + ': ' + this.toString();\n};\n\n/**\n * Returns the string representation of the IP address.\n * <p>For v4 IP addresses, a string in the form of d.d.d.d is returned.</p>\n * <p>\n *   For v6 IP addresses, a string in the form of x:x:x:x:x:x:x:x is returned, where the 'x's are the hexadecimal\n *   values of the eight 16-bit pieces of the address, according to rfc5952.\n *   In cases where there is more than one field of only zeros, it can be shortened. For example, 2001:0db8:0:0:0:1:0:1\n *   will be expressed as 2001:0db8::1:0:1.\n * </p>\n * @param {String} [encoding]\n * @returns {String}\n */\nInetAddress.prototype.toString = function (encoding) {\n  if (encoding === 'hex') {\n    //backward compatibility: behave in the same way as the buffer\n    return this.buffer.toString('hex');\n  }\n  if (this.buffer.length === 4) {\n    return (\n      this.buffer[0] + '.' +\n      this.buffer[1] + '.' +\n      this.buffer[2] + '.' +\n      this.buffer[3]\n    );\n  }\n  let start = -1;\n  const longest = { length: 0, start: -1};\n  function checkLongest (i) {\n    if (start >= 0) {\n      //close the group\n      const length = i - start;\n      if (length > longest.length) {\n        longest.length = length;\n        longest.start = start;\n        start = -1;\n      }\n    }\n  }\n  //get the longest 16-bit group of zeros\n  for (let i = 0; i < this.buffer.length; i = i + 2) {\n    if (this.buffer[i] === 0 && this.buffer[i + 1] === 0) {\n      //its a group of zeros\n      if (start < 0) {\n        start = i;\n      }\n\n      // at the end of the buffer, make a final call to checkLongest.\n      if(i === this.buffer.length - 2) {\n        checkLongest(i+2);\n      }\n      continue;\n    }\n    //its a group of non-zeros\n    checkLongest(i);\n  }\n\n  let address = '';\n  for (let h = 0; h < this.buffer.length; h = h + 2) {\n    if (h === longest.start) {\n      address += ':';\n      continue;\n    }\n    if (h < (longest.start + longest.length) && h > longest.start) {\n      //its a group of zeros\n      continue;\n    }\n    if (address.length > 0) {\n      address += ':';\n    }\n    address += ((this.buffer[h] << 8) | this.buffer[h+1]).toString(16);\n  }\n  if (address.charAt(address.length-1) === ':') {\n    address += ':';\n  }\n  return address;\n};\n\n/**\n * Returns the string representation.\n * Method used by the native JSON.stringify() to serialize this instance.\n */\nInetAddress.prototype.toJSON = function () {\n  return this.toString();\n};\n\n/**\n * Validates for a IPv4-Mapped IPv6 according to https://tools.ietf.org/html/rfc4291#section-2.5.5\n * @private\n * @param {Buffer} buffer\n */\nfunction isValidIPv4Mapped(buffer) {\n  // check the form\n  // |      80 bits   | 16 |   32 bits\n  // +----------------+----+-------------\n  // |0000........0000|FFFF| IPv4 address\n\n  for (let i = 0; i < buffer.length - 6; i++) {\n    if (buffer[i] !== 0) {\n      return false;\n    }\n  }\n  return !(buffer[10] !== 255 || buffer[11] !== 255);\n}\n\nmodule.exports = InetAddress;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst util = require('util');\n\nconst utils = require('../utils');\n/** @module types */\n\n/**\n * @private\n * @const\n */\nconst millisecondsPerDay = 86400000;\n/**\n * @private\n */\nconst dateCenter = Math.pow(2,31);\n/**\n *\n * Creates a new instance of LocalDate.\n * @class\n * @classdesc A date without a time-zone in the ISO-8601 calendar system, such as 2010-08-05.\n * <p>\n *   LocalDate is an immutable object that represents a date, often viewed as year-month-day. For example, the value \"1st October 2014\" can be stored in a LocalDate.\n * </p>\n * <p>\n *   This class does not store or represent a time or time-zone. Instead, it is a description of the date, as used for birthdays. It cannot represent an instant on the time-line without additional information such as an offset or time-zone.\n * </p>\n * <p>\n *   Note that this type can represent dates in the range [-5877641-06-23; 5881580-07-17] while the ES5 date type can only represent values in the range of [-271821-04-20; 275760-09-13].\n *   In the event that year, month, day parameters do not fall within the ES5 date range an Error will be thrown.  If you wish to represent a date outside of this range, pass a single\n *   parameter indicating the days since epoch.  For example, -1 represents 1969-12-31.\n * </p>\n * @param {Number} year The year or days since epoch.  If days since epoch, month and day should not be provided.\n * @param {Number} month Between 1 and 12 inclusive.\n * @param {Number} day Between 1 and the number of days in the given month of the given year.\n *\n * @property {Date} date The date representation if falls within a range of an ES5 data type, otherwise an invalid date.\n *\n * @constructor\n */\nfunction LocalDate(year, month, day) {\n  //implementation detail: internally uses a UTC based date\n  if (typeof year === 'number' && typeof month === 'number' && typeof day === 'number') {\n    // Use setUTCFullYear as if there is a 2 digit year, Date.UTC() assumes\n    // that is the 20th century.\n    this.date = new Date();\n    this.date.setUTCHours(0, 0, 0, 0);\n    this.date.setUTCFullYear(year, month-1, day);\n    if(isNaN(this.date.getTime())) {\n      throw new Error(util.format('%d-%d-%d does not form a valid ES5 date!',\n        year, month, day));\n    }\n  }\n  else if (typeof month === 'undefined' && typeof day === 'undefined') {\n    if (typeof year === 'number') {\n      //in days since epoch.\n      if(year < -2147483648 || year > 2147483647) {\n        throw new Error('You must provide a valid value for days since epoch (-2147483648 <= value <= 2147483647).');\n      }\n      this.date = new Date(year * millisecondsPerDay);\n    }\n  }\n\n  if (typeof this.date === 'undefined') {\n    throw new Error('You must provide a valid year, month and day');\n  }\n\n  /** \n   * If date cannot be represented yet given a valid days since epoch, track\n   * it internally.\n   */\n  this._value = isNaN(this.date.getTime()) ? year : null;\n\n  /**\n   * A number representing the year.  May return NaN if cannot be represented as\n   * a Date.\n   * @type Number\n   */\n  this.year = this.date.getUTCFullYear();\n  /**\n   * A number between 1 and 12 inclusive representing the month.  May return\n   * NaN if cannot be represented as a Date.\n   * @type Number\n   */\n  this.month = this.date.getUTCMonth() + 1;\n  /**\n   * A number between 1 and the number of days in the given month of the given year (28, 29, 30, 31).\n   * May return NaN if cannot be represented as a Date.\n   * @type Number\n   */\n  this.day = this.date.getUTCDate();\n}\n\n/**\n * Creates a new instance of LocalDate using the current year, month and day from the system clock in the default time-zone.\n */\nLocalDate.now = function () {\n  return LocalDate.fromDate(new Date());\n};\n\n/**\n * Creates a new instance of LocalDate using the current date from the system clock at UTC.\n */\nLocalDate.utcNow = function () {\n  return new LocalDate(Date.now());\n};\n\n\n/**\n * Creates a new instance of LocalDate using the year, month and day from the provided local date time.\n * @param {Date} date\n */\nLocalDate.fromDate = function (date) {\n  if (isNaN(date.getTime())) {\n    throw new TypeError('Invalid date: ' + date);\n  }\n  return new LocalDate(date.getFullYear(), date.getMonth() + 1, date.getDate());\n};\n\n/**\n * Creates a new instance of LocalDate using the year, month and day provided in the form: yyyy-mm-dd or\n * days since epoch (i.e. -1 for Dec 31, 1969).\n * @param {String} value\n */\nLocalDate.fromString = function (value) {\n  const dashCount = (value.match(/-/g) || []).length;\n  if(dashCount >= 2) {\n    let multiplier = 1;\n    if (value[0] === '-') {\n      value = value.substring(1);\n      multiplier = -1;\n    }\n    const parts = value.split('-');\n    return new LocalDate(multiplier * parseInt(parts[0], 10), parseInt(parts[1], 10), parseInt(parts[2], 10));\n  }\n  if(value.match(/^-?\\d+$/)) {\n    // Parse as days since epoch.\n    return new LocalDate(parseInt(value, 10));\n  }\n  throw new Error(\"Invalid input '\" + value + \"'.\");\n};\n\n/**\n * Creates a new instance of LocalDate using the bytes representation.\n * @param {Buffer} buffer\n */\nLocalDate.fromBuffer = function (buffer) {\n  //move to unix epoch: 0.\n  return new LocalDate((buffer.readUInt32BE(0) - dateCenter));\n};\n\n/**\n * Compares this LocalDate with the given one.\n * @param {LocalDate} other date to compare against.\n * @return {number} 0 if they are the same, 1 if the this is greater, and -1\n * if the given one is greater.\n */\nLocalDate.prototype.compare = function (other) {\n  const thisValue = isNaN(this.date.getTime()) ? this._value * millisecondsPerDay : this.date.getTime();\n  const otherValue = isNaN(other.date.getTime()) ? other._value * millisecondsPerDay : other.date.getTime();\n  const diff = thisValue - otherValue;\n  if (diff < 0) {\n    return -1;\n  }\n  if (diff > 0) {\n    return 1;\n  }\n  return 0;\n};\n\n/**\n * Returns true if the value of the LocalDate instance and other are the same\n * @param {LocalDate} other\n * @returns {Boolean}\n */\nLocalDate.prototype.equals = function (other) {\n  return ((other instanceof LocalDate)) && this.compare(other) === 0;\n};\n\nLocalDate.prototype.inspect = function () {\n  return this.constructor.name + ': ' + this.toString();\n};\n\n/**\n * Gets the bytes representation of the instance.\n * @returns {Buffer}\n */\nLocalDate.prototype.toBuffer = function () {\n  //days since unix epoch\n  const daysSinceEpoch = isNaN(this.date.getTime()) ? this._value : Math.floor(this.date.getTime() / millisecondsPerDay);\n  const value = daysSinceEpoch + dateCenter;\n  const buf = utils.allocBufferUnsafe(4);\n  buf.writeUInt32BE(value, 0);\n  return buf;\n};\n\n/**\n * Gets the string representation of the instance in the form: yyyy-mm-dd if\n * the value can be parsed as a Date, otherwise days since epoch.\n * @returns {String}\n */\nLocalDate.prototype.toString = function () {\n  let result;\n  //if cannot be parsed as date, return days since epoch representation.\n  if (isNaN(this.date.getTime())) {\n    return this._value.toString();\n  }\n  if (this.year < 0) {\n    result = '-' + fillZeros((this.year * -1).toString(), 4);\n  }\n  else {\n    result = fillZeros(this.year.toString(), 4);\n  }\n  result += '-' + fillZeros(this.month.toString(), 2) + '-' + fillZeros(this.day.toString(), 2);\n  return result;\n};\n\n/**\n * Gets the string representation of the instance in the form: yyyy-mm-dd, valid for JSON.\n * @returns {String}\n */\nLocalDate.prototype.toJSON = function () {\n  return this.toString();\n};\n\n/**\n * @param {String} value\n * @param {Number} amount\n * @private\n */\nfunction fillZeros(value, amount) {\n  if (value.length >= amount) {\n    return value;\n  }\n  return utils.stringRepeat('0', amount - value.length) + value;\n}\n\nmodule.exports = LocalDate;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst Long = require('long');\nconst util = require('util');\nconst utils = require('../utils');\n/** @module types */\n\n/**\n * @const\n * @private\n * */\nconst maxNanos = Long.fromString('86399999999999');\n/**\n * Nanoseconds in a second\n * @const\n * @private\n * */\nconst nanoSecInSec = Long.fromNumber(1000000000);\n/**\n * Nanoseconds in a millisecond\n * @const\n * @private\n * */\nconst nanoSecInMillis = Long.fromNumber(1000000);\n/**\n * Milliseconds in day\n * @const\n * @private\n * */\nconst millisInDay = 86400000;\n/**\n *\n * Creates a new instance of LocalTime.\n * @class\n * @classdesc A time without a time-zone in the ISO-8601 calendar system, such as 10:30:05.\n * <p>\n *   LocalTime is an immutable date-time object that represents a time, often viewed as hour-minute-second. Time is represented to nanosecond precision. For example, the value \"13:45.30.123456789\" can be stored in a LocalTime.\n * </p>\n * @param {Long} totalNanoseconds Total nanoseconds since midnight.\n * @constructor\n */\nfunction LocalTime(totalNanoseconds) {\n  if (!(totalNanoseconds instanceof Long)) {\n    throw new Error('You must specify a Long value as totalNanoseconds');\n  }\n  if (totalNanoseconds.lessThan(Long.ZERO) || totalNanoseconds.greaterThan(maxNanos)) {\n    throw new Error('Total nanoseconds out of range');\n  }\n  this.value = totalNanoseconds;\n  \n  /**\n   * Gets the hour component of the time represented by the current instance, a number from 0 to 23.\n   * @type Number\n   */\n  this.hour = this._getParts()[0];\n  /**\n   * Gets the minute component of the time represented by the current instance, a number from 0 to 59.\n   * @type Number\n   */\n  this.minute = this._getParts()[1];\n  /**\n   * Gets the second component of the time represented by the current instance, a number from 0 to 59.\n   * @type Number\n   */\n  this.second = this._getParts()[2];\n  /**\n   * Gets the nanoseconds component of the time represented by the current instance, a number from 0 to 999999999.\n   * @type Number\n   */\n  this.nanosecond = this._getParts()[3];\n}\n\n/**\n * Parses an string representation and returns a new LocalDate.\n * @param {String} value\n * @returns {LocalTime}\n */\nLocalTime.fromString = function (value) {\n  if (typeof value !== 'string') {\n    throw new Error('Argument type invalid: ' + util.inspect(value));\n  }\n  const parts = value.split(':');\n  let millis = parseInt(parts[0], 10) * 3600000 + parseInt(parts[1], 10) * 60000;\n  let nanos;\n  if (parts.length === 3) {\n    const secParts = parts[2].split('.');\n    millis += parseInt(secParts[0], 10) * 1000;\n    if (secParts.length === 2) {\n      nanos = secParts[1];\n      //add zeros at the end\n      nanos = nanos + utils.stringRepeat('0', 9 - nanos.length);\n    }\n  }\n  return LocalTime.fromMilliseconds(millis, parseInt(nanos, 10) || 0);\n};\n\n/**\n * Uses the current local time (in milliseconds) and the nanoseconds to create a new instance of LocalTime\n * @param {Number} [nanoseconds] A Number from 0 to 999,999, representing the time nanosecond portion.\n * @returns {LocalTime}\n */\nLocalTime.now = function (nanoseconds) {\n  return LocalTime.fromDate(new Date(), nanoseconds);\n};\n\n/**\n * Uses the provided local time (in milliseconds) and the nanoseconds to create a new instance of LocalTime\n * @param {Date} date Local date portion to extract the time passed since midnight.\n * @param {Number} [nanoseconds] A Number from 0 to 999,999, representing the nanosecond time portion.\n * @returns {LocalTime}\n */\nLocalTime.fromDate = function (date, nanoseconds) {\n  if (!(date instanceof Date)) {\n    throw new Error('Not a valid date');\n  }\n  //Use the local representation, only the milliseconds portion\n  const millis = (date.getTime() + date.getTimezoneOffset() * -60000) % millisInDay;\n  return LocalTime.fromMilliseconds(millis, nanoseconds);\n};\n\n/**\n * Uses the provided local time (in milliseconds) and the nanoseconds to create a new instance of LocalTime\n * @param {Number} milliseconds A Number from 0 to 86,399,999.\n * @param {Number} [nanoseconds] A Number from 0 to 999,999, representing the time nanosecond portion.\n * @returns {LocalTime}\n */\nLocalTime.fromMilliseconds = function (milliseconds, nanoseconds) {\n  if (typeof nanoseconds !== 'number') {\n    nanoseconds = 0;\n  }\n  return new LocalTime(Long\n    .fromNumber(milliseconds)\n    .multiply(nanoSecInMillis)\n    .add(Long.fromNumber(nanoseconds)));\n};\n\n/**\n * Creates a new instance of LocalTime from the bytes representation.\n * @param {Buffer} value\n * @returns {LocalTime}\n */\nLocalTime.fromBuffer = function (value) {\n  if (!(value instanceof Buffer)) {\n    throw new TypeError('Expected Buffer, obtained ' + util.inspect(value));\n  }\n  return new LocalTime(new Long(value.readInt32BE(4), value.readInt32BE(0)));\n};\n\n/**\n * Compares this LocalTime with the given one.\n * @param {LocalTime} other time to compare against.\n * @return {number} 0 if they are the same, 1 if the this is greater, and -1\n * if the given one is greater.\n */\nLocalTime.prototype.compare = function (other) {\n  return this.value.compare(other.value);\n};\n\n/**\n * Returns true if the value of the LocalTime instance and other are the same\n * @param {LocalTime} other\n * @returns {Boolean}\n */\nLocalTime.prototype.equals = function (other) {\n  return ((other instanceof LocalTime)) && this.compare(other) === 0;\n};\n\n/**\n * Gets the total amount of nanoseconds since midnight for this instance.\n * @returns {Long}\n */\nLocalTime.prototype.getTotalNanoseconds = function () {\n  return this.value;\n};\n\nLocalTime.prototype.inspect = function () {\n  return this.constructor.name + ': ' + this.toString();\n};\n\n/**\n * Returns a big-endian bytes representation of the instance\n * @returns {Buffer}\n */\nLocalTime.prototype.toBuffer = function () {\n  const buffer = utils.allocBufferUnsafe(8);\n  buffer.writeUInt32BE(this.value.getHighBitsUnsigned(), 0);\n  buffer.writeUInt32BE(this.value.getLowBitsUnsigned(), 4);\n  return buffer;\n};\n\n/**\n * Returns the string representation of the instance in the form of hh:MM:ss.ns\n * @returns {String}\n */\nLocalTime.prototype.toString = function () {\n  return formatTime(this._getParts());\n};\n\n/**\n * Gets the string representation of the instance in the form: hh:MM:ss.ns\n * @returns {String}\n */\nLocalTime.prototype.toJSON = function () {\n  return this.toString();\n};\n\n/**\n * @returns {Array.<Number>}\n * @ignore\n */\nLocalTime.prototype._getParts = function () {\n  if (!this._partsCache) {\n    //hours, minutes, seconds and nanos\n    const parts = [0, 0, 0, 0];\n    const secs = this.value.div(nanoSecInSec);\n    //faster modulo\n    //total nanos\n    parts[3] = this.value.subtract(secs.multiply(nanoSecInSec)).toNumber();\n    //seconds\n    parts[2] = secs.toNumber();\n    if (parts[2] >= 60) {\n      //minutes\n      parts[1] = Math.floor(parts[2] / 60);\n      parts[2] = parts[2] % 60;\n    }\n    if (parts[1] >= 60) {\n      //hours\n      parts[0] = Math.floor(parts[1] / 60);\n      parts[1] = parts[1] % 60;\n    }\n    this._partsCache = parts;\n  }\n  return this._partsCache;\n};\n\n/**\n * @param {Array.<Number>} values\n * @private\n */\nfunction formatTime(values) {\n  let result;\n  if (values[0] < 10) {\n    result = '0' + values[0] + ':';\n  }\n  else {\n    result = values[0] + ':';\n  }\n  if (values[1] < 10) {\n    result += '0' + values[1] + ':';\n  }\n  else {\n    result += values[1] + ':';\n  }\n  if (values[2] < 10) {\n    result += '0' + values[2];\n  }\n  else {\n    result += values[2];\n  }\n  if (values[3] > 0) {\n    let nanos = values[3].toString();\n    //nine digits\n    if (nanos.length < 9) {\n      nanos = utils.stringRepeat('0', 9 - nanos.length) + nanos;\n    }\n    let lastPosition;\n    for (let i = nanos.length - 1; i > 0; i--) {\n      if (nanos[i] !== '0') {\n        break;\n      }\n      lastPosition = i;\n    }\n    if (lastPosition) {\n      nanos = nanos.substring(0, lastPosition);\n    }\n    result += '.' + nanos;\n  }\n  return result;\n}\n\nmodule.exports = LocalTime;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst utils = require('../utils');\nconst errors = require('../errors');\n\nconst asyncIteratorSymbol = Symbol.asyncIterator || '@@asyncIterator';\n\n/** @module types */\n\n/**\n * Creates a new instance of ResultSet.\n * @class\n * @classdesc Represents the result of a query.\n * @param {Object} response\n * @param {String} host\n * @param {Object} triedHosts\n * @param {Number} speculativeExecutions\n * @param {Number} consistency\n * @param {Boolean} isSchemaInAgreement\n * @constructor\n */\nfunction ResultSet(response, host, triedHosts, speculativeExecutions, consistency, isSchemaInAgreement) {\n  // if no execution was made at all, set to 0.\n  if (speculativeExecutions === -1) {\n    speculativeExecutions = 0;\n  }\n  /**\n   * Information on the execution of a successful query:\n   * @member {Object}\n   * @property {Number} achievedConsistency The consistency level that has been actually achieved by the query.\n   * @property {String} queriedHost The Cassandra host that coordinated this query.\n   * @property {Object} triedHosts Gets the associative array of host that were queried before getting a valid response,\n   * being the last host the one that replied correctly.\n   * @property {Object} speculativeExecutions The number of speculative executions (not including the first) executed before\n   * getting a valid response.\n   * @property {Uuid} traceId Identifier of the trace session.\n   * @property {Array.<string>} warnings Warning messages generated by the server when executing the query.\n   * @property {Boolean} isSchemaInAgreement Whether the cluster had reached schema agreement after the execution of\n   * this query.\n   * <p>\n   *   After a successful schema-altering query (ex: creating a table), the driver will check if\n   *   the cluster's nodes agree on the new schema version. If not, it will keep retrying for a given\n   *   delay (see <code>protocolOptions.maxSchemaAgreementWaitSeconds</code>).\n   * </p>\n   * <p>\n   *   Note that the schema agreement check is only performed for schema-altering queries For other\n   *   query types, this method will always return <code>true</code>. If this method returns <code>false</code>,\n   *   clients can call [Metadata.checkSchemaAgreement()]{@link module:metadata~Metadata#checkSchemaAgreement} later to\n   *   perform the check manually.\n   * </p>\n   */\n  this.info = {\n    queriedHost: host,\n    triedHosts: triedHosts,\n    speculativeExecutions: speculativeExecutions,\n    achievedConsistency: consistency,\n    traceId: null,\n    warnings: null,\n    customPayload: null,\n    isSchemaInAgreement\n  };\n\n  if (response.flags) {\n    this.info.traceId = response.flags.traceId;\n    this.info.warnings = response.flags.warnings;\n    this.info.customPayload = response.flags.customPayload;\n  }\n\n  /**\n   * Gets an array rows returned by the query.\n   * When the result set represents a response from a write query, this property will be <code>undefined</code>.\n   * When the read query result contains more rows than the fetch size (5000), this property will only contain the\n   * first rows up to fetch size. To obtain all the rows, you can use the built-in async iterator that will retrieve the\n   * following pages of results.\n   * @type {Array<Row>|undefined}\n   */\n  this.rows = response.rows;\n\n  /**\n   * Gets the row length of the result, regardless if the result has been buffered or not\n   * @type {Number|undefined}\n   */\n  this.rowLength = this.rows ? this.rows.length : response.rowLength;\n\n  /**\n   * Gets the columns returned in this ResultSet.\n   * @type {Array.<{name, type}>}\n   * @default null\n   */\n  this.columns = null;\n\n  /**\n   * A string token representing the current page state of query. It can be used in the following executions to\n   * continue paging and retrieve the remained of the result for the query.\n   * @type {String|null}\n   * @default null\n   */\n  this.pageState = null;\n\n  /**\n   * Method used to manually fetch the next page of results.\n   * This method is only exposed when using the {@link Client#eachRow} method and there are more rows available in\n   * following pages.\n   * @type Function\n   */\n  this.nextPage = undefined;\n\n  /**\n   * Method used internally to fetch the next page of results using promises.\n   * @internal\n   * @ignore\n   * @type {Function}\n   */\n  this.nextPageAsync = undefined;\n\n  const meta = response.meta;\n\n  if (meta) {\n    this.columns = meta.columns;\n\n    if (meta.pageState) {\n      this.pageState = meta.pageState.toString('hex');\n\n      // Expose rawPageState internally\n      Object.defineProperty(this, 'rawPageState', { value: meta.pageState, enumerable: false });\n    }\n  }\n}\n\n/**\n * Returns the first row or null if the result rows are empty.\n */\nResultSet.prototype.first = function () {\n  if (this.rows && this.rows.length) {\n    return this.rows[0];\n  }\n  return null;\n};\n\nResultSet.prototype.getPageState = function () {\n  // backward-compatibility\n  return this.pageState;\n};\n\nResultSet.prototype.getColumns = function () {\n  // backward-compatibility\n  return this.columns;\n};\n\n/**\n * When this instance is the result of a conditional update query, it returns whether it was successful.\n * Otherwise, it returns <code>true</code>.\n * <p>\n *   For consistency, this method always returns <code>true</code> for non-conditional queries (although there is\n *   no reason to call the method in that case). This is also the case for conditional DDL statements\n *   (CREATE KEYSPACE... IF NOT EXISTS, CREATE TABLE... IF NOT EXISTS), for which the server doesn't return\n *   information whether it was applied or not.\n * </p>\n */\nResultSet.prototype.wasApplied = function () {\n  if (!this.rows || this.rows.length === 0) {\n    return true;\n  }\n  const firstRow = this.rows[0];\n  const applied = firstRow['[applied]'];\n  return typeof applied === 'boolean' ? applied : true;\n};\n\n/**\n * Gets the iterator function.\n * <p>\n *   Retrieves the iterator of the underlying fetched rows, without causing the driver to fetch the following\n *   result pages. For more information on result paging,\n *   [visit the documentation]{@link http://docs.datastax.com/en/developer/nodejs-driver/latest/features/paging/}.\n * </p>\n * @alias module:types~ResultSet#@@iterator\n * @see {@link module:types~ResultSet#@@asyncIterator}\n * @example <caption>Using for...of statement</caption>\n * const query = 'SELECT user_id, post_id, content FROM timeline WHERE user_id = ?';\n * const result = await client.execute(query, [ id ], { prepare: true });\n * for (const row of result) {\n *   console.log(row['email']);\n * }\n * @returns {Iterator.<Row>}\n */\nResultSet.prototype[Symbol.iterator] = function getIterator() {\n  if (!this.rows) {\n    return utils.emptyArray[Symbol.iterator]();\n  }\n  return this.rows[Symbol.iterator]();\n};\n\n/**\n * Gets the async iterator function.\n * <p>\n *   Retrieves the async iterator representing the entire query result, the driver will fetch the following result\n *   pages.\n * </p>\n * <p>Use the async iterator when the query result might contain more rows than the <code>fetchSize</code>.</p>\n * <p>\n *   Note that using the async iterator will not affect the internal state of the <code>ResultSet</code> instance.\n *   You should avoid using both <code>rows</code> property that contains the row instances of the first page of\n *   results, and the async iterator, that will yield all the rows in the result regardless on the number of pages.\n * </p>\n * <p>Multiple concurrent async iterations are not supported.</p>\n * @alias module:types~ResultSet#@@asyncIterator\n * @example <caption>Using for await...of statement</caption>\n * const query = 'SELECT user_id, post_id, content FROM timeline WHERE user_id = ?';\n * const result = await client.execute(query, [ id ], { prepare: true });\n * for await (const row of result) {\n *   console.log(row['email']);\n * }\n * @returns {AsyncIterator<Row>}\n */\nResultSet.prototype[asyncIteratorSymbol] = function getAsyncGenerator() {\n  let index = 0;\n  let pageState = this.rawPageState;\n  let rows = this.rows;\n\n  if (!rows || rows.length === 0) {\n    return { next: () => Promise.resolve({ done: true }) };\n  }\n\n  const self = this;\n\n  // Async generators are not present in Node.js 8, implement it manually\n  return {\n    async next() {\n      if (index >= rows.length && pageState) {\n        if (!self.nextPageAsync) {\n          throw new errors.DriverInternalError('Property nextPageAsync should be set when pageState is defined');\n        }\n\n        const rs = await self.nextPageAsync(pageState);\n        rows = rs.rows;\n        index = 0;\n        pageState = rs.rawPageState;\n      }\n\n      if (index < rows.length) {\n        return { done: false, value: rows[index++] };\n      }\n\n      return { done: true };\n    }\n  };\n};\n\n/**\n * Determines whether there are more pages of results.\n * If so, the driver will initially retrieve and contain only the first page of results.\n * To obtain all the rows, use the [AsyncIterator]{@linkcode module:types~ResultSet#@@asyncIterator}.\n * @returns {boolean}\n */\nResultSet.prototype.isPaged = function() {\n  return !!this.rawPageState;\n};\n\nmodule.exports = ResultSet;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst { Readable } = require('stream');\nconst utils = require('../utils');\nconst errors = require('../errors');\nconst clientOptions = require('../client-options');\n\n/** @module types */\n/**\n * Readable stream using to yield data from a result or a field\n */\nclass ResultStream extends Readable {\n  constructor(opt) {\n    super(opt);\n    this.buffer = [];\n    this.paused = true;\n    this._cancelAllowed = false;\n    this._handlersObject = null;\n    this._highWaterMarkRows = 0;\n  }\n\n  _read() {\n    this.paused = false;\n    if (this.buffer.length === 0) {\n      this._readableState.reading = false;\n    }\n    while (!this.paused && this.buffer.length > 0) {\n      this.paused = !this.push(this.buffer.shift());\n    }\n    this._checkBelowHighWaterMark();\n    if (!this.paused && !this.buffer.length && this._readNext) {\n      this._readNext();\n      this._readNext = null;\n    }\n  }\n\n  /**\n   * Allows for throttling, helping nodejs keep the internal buffers reasonably sized.\n   * @param {function} readNext function that triggers reading the next result chunk\n   * @ignore\n   */\n  _valve(readNext) {\n    this._readNext = null;\n    if (!readNext) {\n      return;\n    }\n    if (this.paused || this.buffer.length) {\n      this._readNext = readNext;\n    }\n    else {\n      readNext();\n    }\n  }\n\n  add(chunk) {\n    const length = this.buffer.push(chunk);\n    this.read(0);\n    this._checkAboveHighWaterMark();\n    return length;\n  }\n\n  _checkAboveHighWaterMark() {\n    if (!this._handlersObject || !this._handlersObject.resumeReadingHandler) {\n      return;\n    }\n    if (this._highWaterMarkRows === 0 || this.buffer.length !== this._highWaterMarkRows) {\n      return;\n    }\n    this._handlersObject.resumeReadingHandler(false);\n  }\n\n  _checkBelowHighWaterMark() {\n    if (!this._handlersObject || !this._handlersObject.resumeReadingHandler) {\n      return;\n    }\n    if (this._highWaterMarkRows === 0 || this.buffer.length >= this._highWaterMarkRows) {\n      return;\n    }\n    // The consumer has dequeued below the watermark\n    this._handlersObject.resumeReadingHandler(true);\n  }\n\n  /**\n   * When continuous paging is enabled, allows the client to notify to the server to stop pushing further pages.\n   * <p>Note: This is not part of the public API yet.</p>\n   * @param {Function} [callback] The cancel method accepts an optional callback.\n   * @example <caption>Cancelling a continuous paging execution</caption>\n   * const stream = client.stream(query, params, { prepare: true, continuousPaging: true });\n   * // ...\n   * // Ask the server to stop pushing rows.\n   * stream.cancel();\n   * @ignore\n   */\n  cancel(callback) {\n    if (!this._cancelAllowed) {\n      const err = new Error('You can only cancel streaming executions when continuous paging is enabled');\n      if (!callback) {\n        throw err;\n      }\n      return callback(err);\n    }\n    if (!this._handlersObject) {\n      throw new errors.DriverInternalError('ResultStream cancel is allowed but the cancel options were not set');\n    }\n    callback = callback || utils.noop;\n    if (!this._handlersObject.cancelHandler) {\n      // The handler is not yet set\n      // Set the callback as a flag to identify that the cancel handler must be invoked when set\n      this._handlersObject.cancelHandler = callback;\n      return;\n    }\n    this._handlersObject.cancelHandler(callback);\n  }\n\n  /**\n   * Sets the pointer to the handler to be used to cancel the continuous page execution.\n   * @param options\n   * @internal\n   * @ignore\n   */\n  setHandlers(options) {\n    if (!options.continuousPaging) {\n      return;\n    }\n    this._cancelAllowed = true;\n    this._handlersObject = options;\n    this._highWaterMarkRows =\n      options.continuousPaging.highWaterMarkRows || clientOptions.continuousPageDefaultHighWaterMark;\n  }\n}\n\nmodule.exports = ResultStream;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n/** @module types */\n/**\n * Represents a result row\n * @param {Array} columns\n * @constructor\n */\nfunction Row(columns) {\n  if (!columns) {\n    throw new Error('Columns not defined');\n  }\n  //Private non-enumerable properties, with double underscore to avoid interfering with column names\n  Object.defineProperty(this, '__columns', { value: columns, enumerable: false, writable: false});\n}\n\n/**\n * Returns the cell value.\n * @param {String|Number} columnName Name or index of the column\n */\nRow.prototype.get = function (columnName) {\n  if (typeof columnName === 'number') {\n    //its an index\n    return this[this.__columns[columnName].name];\n  }\n  return this[columnName];\n};\n\n/**\n * Returns an array of the values of the row\n * @returns {Array}\n */\nRow.prototype.values = function () {\n  const valuesArray = [];\n  this.forEach(function (val) {\n    valuesArray.push(val);\n  });\n  return valuesArray;\n};\n\n/**\n * Returns an array of the column names of the row\n * @returns {Array}\n */\nRow.prototype.keys = function () {\n  const keysArray = [];\n  this.forEach(function (val, key) {\n    keysArray.push(key);\n  });\n  return keysArray;\n};\n\n/**\n * Executes the callback for each field in the row, containing the value as first parameter followed by the columnName\n * @param {Function} callback\n */\nRow.prototype.forEach = function (callback) {\n  for (const columnName in this) {\n    if (!this.hasOwnProperty(columnName)) {\n      continue;\n    }\n    callback(this[columnName], columnName);\n  }\n};\n\nmodule.exports = Row;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\"use strict\";\n\n/** @module types */\n\n/**\n * Creates a new sequence of immutable objects with the parameters provided.\n * @class\n * @classdesc A tuple is a sequence of immutable objects.\n * Tuples are sequences, just like [Arrays]{@link Array}. The only difference is that tuples can't be changed.\n * <p>\n *   As tuples can be used as a Map keys, the {@link Tuple#toString toString()} method calls toString of each element,\n *   to try to get a unique string key.\n * </p>\n * @param args The sequence elements as arguments.\n * @constructor\n */\nfunction Tuple(...args) {\n\n  /**\n   * Immutable elements of Tuple object.\n   * @type Array\n   */\n  this.elements = args;\n\n  if (this.elements.length === 0) {\n    throw new TypeError('Tuple must contain at least one value');\n  }\n\n  /**\n   * Returns the number of the elements.\n   * @type Number\n   */\n  this.length = this.elements.length;\n}\n\n/**\n * Creates a new instance of a tuple based on the Array\n * @param {Array} elements\n * @returns {Tuple}\n */\nTuple.fromArray = function (elements) {\n  // Apply the elements Array as parameters\n  return new Tuple(...elements);\n};\n\n/**\n * Returns the value located at the index.\n * @param {Number} index Element index\n */\nTuple.prototype.get = function (index) {\n  return this.elements[index || 0];\n};\n\n/**\n * Returns the string representation of the sequence surrounded by parenthesis, ie: (1, 2).\n * <p>\n *   The returned value attempts to be a unique string representation of its values.\n * </p>\n * @returns {string}\n */\nTuple.prototype.toString = function () {\n  return ('(' +\n    this.elements.reduce(function (prev, x, i) {\n      return prev + (i > 0 ? ',' : '') + x.toString();\n    }, '') +\n    ')');\n};\n\n/**\n * Returns the Array representation of the sequence.\n * @returns {Array}\n */\nTuple.prototype.toJSON = function () {\n  return this.elements;\n};\n\n/**\n * Gets the elements as an array\n * @returns {Array}\n */\nTuple.prototype.values = function () {\n  // Clone the elements\n  return this.elements.slice(0);\n};\n\nmodule.exports = Tuple;", "module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"node:util\" has been externalized for browser compatibility. Cannot access \"node:util.${key}\" in client code. See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\"use strict\";\n/** @module types */\n/**\n * Creates a new instance of Cql Vector, also compatible with Float32Array.\n * @class\n */\nconst util = require('node:util');\nclass Vector {\n  /**\n     *\n     * @param {Float32Array | Array<any>} elements\n     * @param {string} [subtype]\n     */\n  constructor (elements, subtype) {\n    if (elements instanceof Float32Array) {\n      this.elements = Array.from(elements);\n    }\n    else if (Array.isArray(elements)) {\n      this.elements = elements;\n    }\n    else {\n      throw new TypeError('Vector must be constructed with a Float32Array or an Array');\n    }\n    if (this.elements.length === 0) {\n      throw new TypeError('Vector must contain at least one value');\n    }\n    /**\n         * Returns the number of the elements.\n         * @type Number\n         */\n    this.length = this.elements.length;\n    this.subtype = subtype;\n    return new Proxy(this, {\n      get: function (obj, key) {\n        if (key === 'IDENTITY'){\n          return 'Vector';\n        } else if (typeof (key) === 'string' && (Number.isInteger(Number(key)))) // key is an index\n        {return obj.elements[key];}\n        return obj[key];\n      },\n      set: function (obj, key, value) {\n        if (typeof (key) === 'string' && (Number.isInteger(Number(key)))) // key is an index\n        {return obj.elements[key] = value;}\n        return obj[key] = value;\n      },\n      ownKeys: function (obj) {\n        return Reflect.ownKeys(elements);\n      },\n      getOwnPropertyDescriptor(target, key) {\n        if (typeof (key) === 'string' && (Number.isInteger(Number(key)))){\n          // array index\n          return { enumerable: true, configurable: true};\n        }\n        return Reflect.getOwnPropertyDescriptor(target, key);\n                \n      }\n    });\n  }\n  /**\n     * Returns the string representation of the vector.\n     * @returns {string}\n     */\n  toString() {\n    return \"[\".concat(this.elements.toString(), \"]\");\n  }\n  /**\n     *\n     * @param {number} index\n     */\n  at(index) {\n    return this.elements[index];\n  }\n\n  /**\n   * \n   * @returns {IterableIterator<any>} an iterator over the elements of the vector\n   */\n  [Symbol.iterator]() {\n    return this.elements[Symbol.iterator]();\n  }\n\n  static get [Symbol.species]() {\n    return Vector;\n  }\n\n  /**\n     * \n     * @param {(value: any, index: number, array: any[]) => void} callback\n     */\n  forEach(callback) {\n    return this.elements.forEach(callback);\n  }\n\n  /**\n   * @returns {string | undefined} get the subtype string, e.g., \"float\", but it's optional so it can return null\n   */\n  getSubtype(){\n    return this.subtype;\n  }\n}\n\nObject.defineProperty(Vector, Symbol.hasInstance, {\n  value: function (i) { \n    return (util.types.isProxy(i) && i.IDENTITY === 'Vector') || i instanceof Float32Array; }\n});\n\nmodule.exports = Vector;\n", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst util = require('util');\n\nconst errors = require('../errors');\nconst TimeUuid = require('./time-uuid');\nconst Uuid = require('./uuid');\nconst protocolVersion = require('./protocol-version');\nconst utils = require('../utils');\n\n/** @module types */\n/**\n * Long constructor, wrapper of the internal library used: {@link https://github.com/dcodeIO/long.js Long.js}.\n * @constructor\n */\nconst Long = require('long');\n\n/**\n * Consistency levels\n * @type {Object}\n * @property {Number} any Writing: A write must be written to at least one node. If all replica nodes for the given row key are down, the write can still succeed after a hinted handoff has been written. If all replica nodes are down at write time, an ANY write is not readable until the replica nodes for that row have recovered.\n * @property {Number} one Returns a response from the closest replica, as determined by the snitch.\n * @property {Number} two Returns the most recent data from two of the closest replicas.\n * @property {Number} three Returns the most recent data from three of the closest replicas.\n * @property {Number} quorum Reading: Returns the record with the most recent timestamp after a quorum of replicas has responded regardless of data center. Writing: A write must be written to the commit log and memory table on a quorum of replica nodes.\n * @property {Number} all Reading: Returns the record with the most recent timestamp after all replicas have responded. The read operation will fail if a replica does not respond. Writing: A write must be written to the commit log and memory table on all replica nodes in the cluster for that row.\n * @property {Number} localQuorum Reading: Returns the record with the most recent timestamp once a quorum of replicas in the current data center as the coordinator node has reported. Writing: A write must be written to the commit log and memory table on a quorum of replica nodes in the same data center as the coordinator node. Avoids latency of inter-data center communication.\n * @property {Number} eachQuorum Reading: Returns the record once a quorum of replicas in each data center of the cluster has responded. Writing: Strong consistency. A write must be written to the commit log and memtable on a quorum of replica nodes in all data centers.\n * @property {Number} serial Achieves linearizable consistency for lightweight transactions by preventing unconditional updates.\n * @property {Number} localSerial Same as serial but confined to the data center. A write must be written conditionally to the commit log and memtable on a quorum of replica nodes in the same data center.\n * @property {Number} localOne Similar to One but only within the DC the coordinator is in.\n */\nconst consistencies = {\n  any:          0x00,\n  one:          0x01,\n  two:          0x02,\n  three:        0x03,\n  quorum:       0x04,\n  all:          0x05,\n  localQuorum:  0x06,\n  eachQuorum:   0x07,\n  serial:       0x08,\n  localSerial:  0x09,\n  localOne:     0x0a\n};\n\n/**\n * Mapping of consistency level codes to their string representation.\n * @type {Object}\n */\nconst consistencyToString = {};\nconsistencyToString[consistencies.any] = 'ANY';\nconsistencyToString[consistencies.one] = 'ONE';\nconsistencyToString[consistencies.two] = 'TWO';\nconsistencyToString[consistencies.three] = 'THREE';\nconsistencyToString[consistencies.quorum] = 'QUORUM';\nconsistencyToString[consistencies.all] = 'ALL';\nconsistencyToString[consistencies.localQuorum] = 'LOCAL_QUORUM';\nconsistencyToString[consistencies.eachQuorum] = 'EACH_QUORUM';\nconsistencyToString[consistencies.serial] = 'SERIAL';\nconsistencyToString[consistencies.localSerial] = 'LOCAL_SERIAL';\nconsistencyToString[consistencies.localOne] = 'LOCAL_ONE';\n\n/**\n * CQL data types\n * @type {Object}\n * @property {Number} custom A custom type.\n * @property {Number} ascii ASCII character string.\n * @property {Number} bigint 64-bit signed long.\n * @property {Number} blob Arbitrary bytes (no validation).\n * @property {Number} boolean true or false.\n * @property {Number} counter Counter column (64-bit signed value).\n * @property {Number} decimal Variable-precision decimal.\n * @property {Number} double 64-bit IEEE-754 floating point.\n * @property {Number} float 32-bit IEEE-754 floating point.\n * @property {Number} int 32-bit signed integer.\n * @property {Number} text UTF8 encoded string.\n * @property {Number} timestamp A timestamp.\n * @property {Number} uuid Type 1 or type 4 UUID.\n * @property {Number} varchar UTF8 encoded string.\n * @property {Number} varint Arbitrary-precision integer.\n * @property {Number} timeuuid  Type 1 UUID.\n * @property {Number} inet An IP address. It can be either 4 bytes long (IPv4) or 16 bytes long (IPv6).\n * @property {Number} date A date without a time-zone in the ISO-8601 calendar system.\n * @property {Number} time A value representing the time portion of the day.\n * @property {Number} smallint 16-bit two's complement integer.\n * @property {Number} tinyint 8-bit two's complement integer.\n * @property {Number} list A collection of elements.\n * @property {Number} map Key/value pairs.\n * @property {Number} set A collection that contains no duplicate elements.\n * @property {Number} udt User-defined type.\n * @property {Number} tuple A sequence of values.\n */\nconst dataTypes = {\n  custom:     0x0000,\n  ascii:      0x0001,\n  bigint:     0x0002,\n  blob:       0x0003,\n  boolean:    0x0004,\n  counter:    0x0005,\n  decimal:    0x0006,\n  double:     0x0007,\n  float:      0x0008,\n  int:        0x0009,\n  text:       0x000a,\n  timestamp:  0x000b,\n  uuid:       0x000c,\n  varchar:    0x000d,\n  varint:     0x000e,\n  timeuuid:   0x000f,\n  inet:       0x0010,\n  date:       0x0011,\n  time:       0x0012,\n  smallint:   0x0013,\n  tinyint:    0x0014,\n  duration:   0x0015,\n  list:       0x0020,\n  map:        0x0021,\n  set:        0x0022,\n  udt:        0x0030,\n  tuple:      0x0031,\n  /**\n   * Returns the typeInfo of a given type name\n   * @param {string} name\n   * @returns {import('../encoder').ColumnInfo}\n   */\n  getByName:  function(name) {\n    name = name.toLowerCase();\n    if (name.indexOf('<') > 0) {\n      const listMatches = /^(list|set)<(.+)>$/.exec(name);\n      if (listMatches) {\n        return { code: this[listMatches[1]], info: this.getByName(listMatches[2])};\n      }\n      const mapMatches = /^(map)< *(.+) *, *(.+)>$/.exec(name);\n      if (mapMatches) {\n        return { code: this[mapMatches[1]], info: [this.getByName(mapMatches[2]), this.getByName(mapMatches[3])]};\n      }\n      const udtMatches = /^(udt)<(.+)>$/.exec(name);\n      if (udtMatches) {\n        //udt name as raw string\n        return { code: this[udtMatches[1]], info: udtMatches[2]};\n      }\n      const tupleMatches = /^(tuple)<(.+)>$/.exec(name);\n      if (tupleMatches) {\n        //tuple info as an array of types\n        return { code: this[tupleMatches[1]], info: tupleMatches[2].split(',').map(function (x) {\n          return this.getByName(x.trim());\n        }, this)};\n      }\n      const vectorMatches = /^vector<\\s*(.+)\\s*,\\s*(\\d+)\\s*>$/.exec(name);\n      if(vectorMatches){\n        return {\n          code: this.custom,\n          customTypeName: 'vector',\n          info: [this.getByName(vectorMatches[1]), parseInt(vectorMatches[2], 10)]\n        };\n      }\n    }\n    const typeInfo = { code: this[name]};\n    if (typeof typeInfo.code !== 'number') {\n      throw new TypeError('Data type with name ' + name + ' not valid');\n    }\n    return typeInfo;\n  }\n};\n\n/**\n * Map of Data types by code\n * @internal\n * @private\n * @type {Record<number, string>}\n */\nconst _dataTypesByCode = (function () {\n  /**@type {Record<number, string>} */\n  const result = {};\n  for (const key in dataTypes) {\n    if (!dataTypes.hasOwnProperty(key)) {\n      continue;\n    }\n    const val = dataTypes[key];\n    if (typeof val !== 'number') {\n      continue;\n    }\n    result[val] = key;\n  }\n  return result;\n})();\n\n/**\n * Represents the distance of Cassandra node as assigned by a LoadBalancingPolicy relatively to the driver instance.\n * @type {Object}\n * @property {Number} local A local node.\n * @property {Number} remote A remote node.\n * @property {Number} ignored A node that is meant to be ignored.\n */\nconst distance = {\n  local:    0,\n  remote:   1,\n  ignored:  2\n};\n\n/**\n * An integer byte that distinguish the actual message from and to Cassandra\n * @internal\n * @ignore\n */\nconst opcodes = {\n  error:          0x00,\n  startup:        0x01,\n  ready:          0x02,\n  authenticate:   0x03,\n  credentials:    0x04,\n  options:        0x05,\n  supported:      0x06,\n  query:          0x07,\n  result:         0x08,\n  prepare:        0x09,\n  execute:        0x0a,\n  register:       0x0b,\n  event:          0x0c,\n  batch:          0x0d,\n  authChallenge:  0x0e,\n  authResponse:   0x0f,\n  authSuccess:    0x10,\n  cancel:         0xff,\n\n  /**\n   * Determines if the code is a valid opcode\n   */\n  isInRange: function (code) {\n    return code > this.error && code > this.event;\n  }\n};\n\n/**\n * Event types from Cassandra\n * @type {{topologyChange: string, statusChange: string, schemaChange: string}}\n * @internal\n * @ignore\n */\nconst protocolEvents = {\n  topologyChange: 'TOPOLOGY_CHANGE',\n  statusChange: 'STATUS_CHANGE',\n  schemaChange: 'SCHEMA_CHANGE'\n};\n\n/**\n * Server error codes returned by Cassandra\n * @type {Object}\n * @property {Number} serverError Something unexpected happened.\n * @property {Number} protocolError Some client message triggered a protocol violation.\n * @property {Number} badCredentials Authentication was required and failed.\n * @property {Number} unavailableException Raised when coordinator knows there is not enough replicas alive to perform a query with the requested consistency level.\n * @property {Number} overloaded The request cannot be processed because the coordinator is overloaded.\n * @property {Number} isBootstrapping The request was a read request but the coordinator node is bootstrapping.\n * @property {Number} truncateError Error encountered during a truncate request.\n * @property {Number} writeTimeout Timeout encountered on write query on coordinator waiting for response(s) from replicas.\n * @property {Number} readTimeout Timeout encountered on read query on coordinator waitign for response(s) from replicas.\n * @property {Number} readFailure A non-timeout error encountered during a read request.\n * @property {Number} functionFailure A (user defined) function encountered during execution.\n * @property {Number} writeFailure A non-timeout error encountered during a write request.\n * @property {Number} syntaxError The submitted query has a syntax error.\n * @property {Number} unauthorized The logged user doesn't have the right to perform the query.\n * @property {Number} invalid The query is syntactically correct but invalid.\n * @property {Number} configError The query is invalid because of some configuration issue.\n * @property {Number} alreadyExists The query attempted to create a schema element (i.e. keyspace, table) that already exists.\n * @property {Number} unprepared Can be thrown while a prepared statement tries to be executed if the provided statement is not known by the coordinator.\n */\nconst responseErrorCodes = {\n  serverError:            0x0000,\n  protocolError:          0x000A,\n  badCredentials:         0x0100,\n  unavailableException:   0x1000,\n  overloaded:             0x1001,\n  isBootstrapping:        0x1002,\n  truncateError:          0x1003,\n  writeTimeout:           0x1100,\n  readTimeout:            0x1200,\n  readFailure:            0x1300,\n  functionFailure:        0x1400,\n  writeFailure:           0x1500,\n  syntaxError:            0x2000,\n  unauthorized:           0x2100,\n  invalid:                0x2200,\n  configError:            0x2300,\n  alreadyExists:          0x2400,\n  unprepared:             0x2500,\n  clientWriteFailure:     0x8000,\n};\n\n/**\n * Type of result included in a response\n * @internal\n * @ignore\n */\nconst resultKind = {\n  voidResult:      0x0001,\n  rows:            0x0002,\n  setKeyspace:     0x0003,\n  prepared:        0x0004,\n  schemaChange:    0x0005\n};\n\n/**\n * Message frame flags\n * @internal\n * @ignore\n */\nconst frameFlags = {\n  compression:    0x01,\n  tracing:        0x02,\n  customPayload:  0x04,\n  warning:        0x08\n};\n\n/**\n * Unset representation.\n * <p>\n *   Use this field if you want to set a parameter to <code>unset</code>. Valid for Cassandra 2.2 and above.\n * </p>\n */\nconst unset = Object.freeze({'unset': true});\n\n/**\n * A long representing the value 1000\n * @const\n * @private\n */\nconst _longOneThousand = Long.fromInt(1000);\n\n/**\n * Counter used to generate up to 1000 different timestamp values with the same Date\n * @private\n */\nlet _timestampTicks = 0;\n\n/**\n * <p><strong>Backward compatibility only, use [TimeUuid]{@link module:types~TimeUuid} instead</strong>.</p>\n * Generates and returns a RFC4122 v1 (timestamp based) UUID in a string representation.\n * @param {{msecs, node, clockseq, nsecs}} [options]\n * @param {Buffer} [buffer]\n * @param {Number} [offset]\n * @deprecated Use [TimeUuid]{@link module:types~TimeUuid} instead\n */\nfunction timeuuid(options, buffer, offset) {\n  let date;\n  let ticks;\n  let nodeId;\n  let clockId;\n  if (options) {\n    if (typeof options.msecs === 'number') {\n      date = new Date(options.msecs);\n    }\n    if (options.msecs instanceof Date) {\n      date = options.msecs;\n    }\n    if (Array.isArray(options.node)) {\n      nodeId = utils.allocBufferFromArray(options.node);\n    }\n    if (typeof options.clockseq === 'number') {\n      clockId = utils.allocBufferUnsafe(2);\n      clockId.writeUInt16BE(options.clockseq, 0);\n    }\n    if (typeof options.nsecs === 'number') {\n      ticks = options.nsecs;\n    }\n  }\n  const uuid = new TimeUuid(date, ticks, nodeId, clockId);\n  if (buffer instanceof Buffer) {\n    //copy the values into the buffer\n    uuid.getBuffer().copy(buffer, offset || 0);\n    return buffer;\n  }\n  return uuid.toString();\n}\n\n/**\n * <p><strong>Backward compatibility only, use [Uuid]{@link module:types~Uuid} class instead</strong>.</p>\n * Generate and return a RFC4122 v4 UUID in a string representation.\n * @deprecated Use [Uuid]{@link module:types~Uuid} class instead\n */\nfunction uuid(options, buffer, offset) {\n  let uuid;\n  if (options) {\n    if (Array.isArray(options.random)) {\n      uuid = new Uuid(utils.allocBufferFromArray(options.random));\n    }\n  }\n  if (!uuid) {\n    uuid = Uuid.random();\n  }\n  if (buffer instanceof Buffer) {\n    //copy the values into the buffer\n    uuid.getBuffer().copy(buffer, offset || 0);\n    return buffer;\n  }\n  return uuid.toString();\n}\n\n/**\n * Gets the data type name for a given type definition, it may not work for udt or custom type\n * @internal\n * @ignore\n * @throws {ArgumentError}\n * @param {import('../encoder').ColumnInfo} item \n */\nfunction getDataTypeNameByCode(item) {\n  if (!item || typeof item.code !== 'number') {\n    throw new errors.ArgumentError('Invalid signature type definition');\n  }\n  const typeName = _dataTypesByCode[item.code];\n  if (!typeName) {\n    throw new errors.ArgumentError(util.format('Type with code %d not found', item.code));\n  }\n  if (!('info' in item) || !item.info) {\n    return typeName;\n  }\n  // special case for vector\n  if (item.code === dataTypes.custom && 'customTypeName' in item && item.customTypeName === 'vector') {\n    return 'vector<' + getDataTypeNameByCode(item.info[0]) + ', ' + item.info[1] + '>';\n  }\n  if (Array.isArray(item.info)) {\n    return (typeName +\n      '<' +\n      item.info.map(function (t) {\n        return getDataTypeNameByCode(t);\n      }).join(', ') +\n      '>');\n  }\n  if (typeof item.info.code === 'number') {\n    return typeName + '<' + getDataTypeNameByCode(item.info) + '>';\n  }\n  if (item.code === dataTypes.udt) {\n    return (/**@type {UdtColumnInfo}*/item).info.name;\n  }\n  return typeName;\n}\n\n//classes\n\n/**\n * Represents a frame header that could be used to read from a Buffer or to write to a Buffer\n * @ignore\n * @param {Number} version Protocol version\n * @param {Number} flags\n * @param {Number} streamId\n * @param {Number} opcode\n * @param {Number} bodyLength\n * @constructor\n */\nfunction FrameHeader(version, flags, streamId, opcode, bodyLength) {\n  this.version = version;\n  this.flags = flags;\n  this.streamId = streamId;\n  this.opcode = opcode;\n  this.bodyLength = bodyLength;\n}\n\n/**\n * The length of the header of the frame based on the protocol version\n * @returns {Number}\n */\nFrameHeader.size = function (version) {\n  if (protocolVersion.uses2BytesStreamIds(version)) {\n    return 9;\n  }\n  return 8;\n};\n\n/**\n * Gets the protocol version based on the first byte of the header\n * @param {Buffer} buffer\n * @returns {Number}\n */\nFrameHeader.getProtocolVersion = function (buffer) {\n  return buffer[0] & 0x7F;\n};\n\n/**\n * @param {Buffer} buf\n * @param {Number} [offset]\n * @returns {FrameHeader}\n */\nFrameHeader.fromBuffer = function (buf, offset) {\n  let streamId = 0;\n  if (!offset) {\n    offset = 0;\n  }\n  const version = buf[offset++] & 0x7F;\n  const flags = buf.readUInt8(offset++);\n  if (!protocolVersion.uses2BytesStreamIds(version)) {\n    streamId = buf.readInt8(offset++);\n  }\n  else {\n    streamId = buf.readInt16BE(offset);\n    offset += 2;\n  }\n  return new FrameHeader(version, flags, streamId, buf.readUInt8(offset++), buf.readUInt32BE(offset));\n};\n\n/** @returns {Buffer} */\nFrameHeader.prototype.toBuffer = function () {\n  const buf = utils.allocBufferUnsafe(FrameHeader.size(this.version));\n  buf.writeUInt8(this.version, 0);\n  buf.writeUInt8(this.flags, 1);\n  let offset = 3;\n  if (!protocolVersion.uses2BytesStreamIds(this.version)) {\n    buf.writeInt8(this.streamId, 2);\n  }\n  else {\n    buf.writeInt16BE(this.streamId, 2);\n    offset = 4;\n  }\n  buf.writeUInt8(this.opcode, offset++);\n  buf.writeUInt32BE(this.bodyLength, offset);\n  return buf;\n};\n/**\n * Returns a long representation.\n * Used internally for deserialization\n */\nLong.fromBuffer = function (value) {\n  if (!(value instanceof Buffer)) {\n    throw new TypeError('Expected Buffer, obtained ' + util.inspect(value));\n  }\n  return new Long(value.readInt32BE(4), value.readInt32BE(0));\n};\n\n/**\n * Returns a big-endian buffer representation of the Long instance\n * @param {Long} value\n */\nLong.toBuffer = function (value) {\n  if (!(value instanceof Long)) {\n    throw new TypeError('Expected Long, obtained ' + util.inspect(value));\n  }\n  const buffer = utils.allocBufferUnsafe(8);\n  buffer.writeUInt32BE(value.getHighBitsUnsigned(), 0);\n  buffer.writeUInt32BE(value.getLowBitsUnsigned(), 4);\n  return buffer;\n};\n\n/**\n * Provide the name of the constructor and the string representation\n * @returns {string}\n */\nLong.prototype.inspect = function () {\n  return 'Long: ' + this.toString();\n};\n\n/**\n * Returns the string representation.\n * Method used by the native JSON.stringify() to serialize this instance\n */\nLong.prototype.toJSON = function () {\n  return this.toString();\n};\n\n/**\n * Generates a value representing the timestamp for the query in microseconds based on the date and the microseconds provided\n * @param {Date} [date] The date to generate the value, if not provided it will use the current date.\n * @param {Number} [microseconds] A number from 0 to 999 used to build the microseconds part of the date.\n * @returns {Long}\n */\nfunction generateTimestamp(date, microseconds) {\n  if (!date) {\n    date = new Date();\n  }\n  let longMicro = Long.ZERO;\n  if (typeof microseconds === 'number' && microseconds >= 0 && microseconds < 1000) {\n    longMicro = Long.fromInt(microseconds);\n  }\n  else {\n    if (_timestampTicks > 999) {\n      _timestampTicks = 0;\n    }\n    longMicro = Long.fromInt(_timestampTicks);\n    _timestampTicks++;\n  }\n  return Long\n    .fromNumber(date.getTime())\n    .multiply(_longOneThousand)\n    .add(longMicro);\n}\n\n//error classes\n\n/** @private */\nfunction QueryParserError(e) {\n  QueryParserError.super_.call(this, e.message, this.constructor);\n  this.internalError = e;\n}\nutil.inherits(QueryParserError, errors.DriverError);\n\n/** @private */\nfunction TimeoutError (message) {\n  TimeoutError.super_.call(this, message, this.constructor);\n  this.info = 'Represents an error that happens when the maximum amount of time for an operation passed.';\n}\nutil.inherits(TimeoutError, errors.DriverError);\n\nexports.opcodes = opcodes;\nexports.consistencies = consistencies;\nexports.consistencyToString = consistencyToString;\nexports.dataTypes = dataTypes;\nexports.getDataTypeNameByCode = getDataTypeNameByCode;\nexports.distance = distance;\nexports.frameFlags = frameFlags;\nexports.protocolEvents = protocolEvents;\nexports.protocolVersion = protocolVersion;\nexports.responseErrorCodes = responseErrorCodes;\nexports.resultKind = resultKind;\nexports.timeuuid = timeuuid;\nexports.uuid = uuid;\nexports.BigDecimal = require('./big-decimal');\nexports.Duration = require('./duration');\nexports.FrameHeader = FrameHeader;\nexports.InetAddress = require('./inet-address');\nexports.Integer = require('./integer');\nexports.LocalDate = require('./local-date');\nexports.LocalTime = require('./local-time');\nexports.Long = Long;\nexports.ResultSet = require('./result-set');\nexports.ResultStream = require('./result-stream');\nexports.Row = require('./row');\n//export DriverError for backward-compatibility\nexports.DriverError = errors.DriverError;\nexports.TimeoutError = TimeoutError;\nexports.TimeUuid = TimeUuid;\nexports.Tuple = require('./tuple');\nexports.Vector = require('./vector');\nexports.Uuid = Uuid;\nexports.unset = unset;\nexports.generateTimestamp = generateTimestamp;\n", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst util = require('util');\nconst types = require('../types');\nconst utils = require('../utils.js');\nconst errors = require('../errors.js');\n\nconst doneIteratorObject = Object.freeze({ done: true });\nconst newlyUpInterval = 60000;\n\n/** @module policies/loadBalancing */\n/**\n * Base class for Load Balancing Policies\n * @constructor\n */\nfunction LoadBalancingPolicy() {\n\n}\n\n/**\n * Initializes the load balancing policy, called after the driver obtained the information of the cluster.\n * @param {Client} client\n * @param {HostMap} hosts\n * @param {Function} callback\n */\nLoadBalancingPolicy.prototype.init = function (client, hosts, callback) {\n  this.client = client;\n  this.hosts = hosts;\n  callback();\n};\n\n/**\n * Returns the distance assigned by this policy to the provided host.\n * @param {Host} host\n */\nLoadBalancingPolicy.prototype.getDistance = function (host) {\n  return types.distance.local;\n};\n\n/**\n * Returns an iterator with the hosts for a new query.\n * Each new query will call this method. The first host in the result will\n * then be used to perform the query.\n * @param {String} keyspace Name of currently logged keyspace at <code>Client</code> level.\n * @param {ExecutionOptions|null} executionOptions The information related to the execution of the request.\n * @param {Function} callback The function to be invoked with the error as first parameter and the host iterator as\n * second parameter.\n */\nLoadBalancingPolicy.prototype.newQueryPlan = function (keyspace, executionOptions, callback) {\n  callback(new Error('You must implement a query plan for the LoadBalancingPolicy class'));\n};\n\n/**\n * Gets an associative array containing the policy options.\n */\nLoadBalancingPolicy.prototype.getOptions = function () {\n  return new Map();\n};\n\n/**\n * This policy yield nodes in a round-robin fashion.\n * @extends LoadBalancingPolicy\n * @constructor\n */\nfunction RoundRobinPolicy() {\n  this.index = 0;\n}\n\nutil.inherits(RoundRobinPolicy, LoadBalancingPolicy);\n\n/**\n * Returns an iterator with the hosts to be used as coordinator for a query.\n * @param {String} keyspace Name of currently logged keyspace at <code>Client</code> level.\n * @param {ExecutionOptions|null} executionOptions The information related to the execution of the request.\n * @param {Function} callback The function to be invoked with the error as first parameter and the host iterator as\n * second parameter.\n */\nRoundRobinPolicy.prototype.newQueryPlan = function (keyspace, executionOptions, callback) {\n  if (!this.hosts) {\n    return callback(new Error('Load balancing policy not initialized'));\n  }\n  const hosts = this.hosts.values();\n  const self = this;\n  let counter = 0;\n\n  let planIndex = self.index % hosts.length;\n  self.index += 1;\n  if (self.index >= utils.maxInt) {\n    self.index = 0;\n  }\n\n  callback(null, {\n    next: function () {\n      if (++counter > hosts.length) {\n        return doneIteratorObject;\n      }\n      return {value: hosts[planIndex++ % hosts.length], done: false};\n    }\n  });\n};\n\n/**\n * A data-center aware Round-robin load balancing policy.\n * This policy provides round-robin queries over the nodes of the local\n * data center.\n * @param {?String} [localDc] local datacenter name.  This value overrides the 'localDataCenter' Client option \\\n * and is useful for cases where you have multiple execution profiles that you intend on using for routing\n * requests to different data centers.\n * @extends {LoadBalancingPolicy}\n * @constructor\n */\nfunction DCAwareRoundRobinPolicy(localDc) {\n  this.localDc = localDc;\n  this.index = 0;\n  /** @type {Array} */\n  this.localHostsArray = null;\n}\n\nutil.inherits(DCAwareRoundRobinPolicy, LoadBalancingPolicy);\n\n/**\n * Initializes the load balancing policy.\n * @param {Client} client\n * @param {HostMap} hosts\n * @param {Function} callback\n */\nDCAwareRoundRobinPolicy.prototype.init = function (client, hosts, callback) {\n  this.client = client;\n  this.hosts = hosts;\n  hosts.on('add', this._cleanHostCache.bind(this));\n  hosts.on('remove', this._cleanHostCache.bind(this));\n\n  try {\n    setLocalDc(this, client, this.hosts);\n  } catch (err) {\n    return callback(err);\n  }\n\n  callback();\n};\n\n/**\n * Returns the distance depending on the datacenter.\n * @param {Host} host\n */\nDCAwareRoundRobinPolicy.prototype.getDistance = function (host) {\n  if (host.datacenter === this.localDc) {\n    return types.distance.local;\n  }\n\n  return types.distance.ignored;\n};\n\nDCAwareRoundRobinPolicy.prototype._cleanHostCache = function () {\n  this.localHostsArray = null;\n};\n\nDCAwareRoundRobinPolicy.prototype._resolveLocalHosts = function() {\n  const hosts = this.hosts.values();\n  if (this.localHostsArray) {\n    //there were already calculated\n    return;\n  }\n  this.localHostsArray = [];\n  hosts.forEach(function (h) {\n    if (!h.datacenter) {\n      //not a remote dc node\n      return;\n    }\n    if (h.datacenter === this.localDc) {\n      this.localHostsArray.push(h);\n    }\n  }, this);\n};\n\n/**\n * It returns an iterator that yields local nodes.\n * @param {String} keyspace Name of currently logged keyspace at <code>Client</code> level.\n * @param {ExecutionOptions|null} executionOptions The information related to the execution of the request.\n * @param {Function} callback The function to be invoked with the error as first parameter and the host iterator as\n * second parameter.\n */\nDCAwareRoundRobinPolicy.prototype.newQueryPlan = function (keyspace, executionOptions, callback) {\n  if (!this.hosts) {\n    return callback(new Error('Load balancing policy not initialized'));\n  }\n  this.index += 1;\n  if (this.index >= utils.maxInt) {\n    this.index = 0;\n  }\n  this._resolveLocalHosts();\n  // Use a local reference of hosts\n  const localHostsArray = this.localHostsArray;\n  let planLocalIndex = this.index;\n  let counter = 0;\n  callback(null, {\n    next: function () {\n      let host;\n      if (counter++ < localHostsArray.length) {\n        host = localHostsArray[planLocalIndex++ % localHostsArray.length];\n        return { value: host, done: false };\n      }\n      return doneIteratorObject;\n    }\n  });\n};\n\n/**\n * Gets an associative array containing the policy options.\n */\nDCAwareRoundRobinPolicy.prototype.getOptions = function () {\n  return new Map([\n    ['localDataCenter', this.localDc ]\n  ]);\n};\n\n/**\n * A wrapper load balancing policy that add token awareness to a child policy.\n * @param {LoadBalancingPolicy} childPolicy\n * @extends LoadBalancingPolicy\n * @constructor\n */\nfunction TokenAwarePolicy (childPolicy) {\n  if (!childPolicy) {\n    throw new Error(\"You must specify a child load balancing policy\");\n  }\n  this.childPolicy = childPolicy;\n}\n\nutil.inherits(TokenAwarePolicy, LoadBalancingPolicy);\n\nTokenAwarePolicy.prototype.init = function (client, hosts, callback) {\n  this.client = client;\n  this.hosts = hosts;\n  this.childPolicy.init(client, hosts, callback);\n};\n\nTokenAwarePolicy.prototype.getDistance = function (host) {\n  return this.childPolicy.getDistance(host);\n};\n\n/**\n * Returns the hosts to use for a new query.\n * The returned plan will return local replicas first, if replicas can be determined, followed by the plan of the\n * child policy.\n * @param {String} keyspace Name of currently logged keyspace at <code>Client</code> level.\n * @param {ExecutionOptions|null} executionOptions The information related to the execution of the request.\n * @param {Function} callback The function to be invoked with the error as first parameter and the host iterator as\n * second parameter.\n */\nTokenAwarePolicy.prototype.newQueryPlan = function (keyspace, executionOptions, callback) {\n  let routingKey;\n  if (executionOptions) {\n    routingKey = executionOptions.getRoutingKey();\n    if (executionOptions.getKeyspace()) {\n      keyspace = executionOptions.getKeyspace();\n    }\n  }\n  let replicas;\n  if (routingKey) {\n    replicas = this.client.getReplicas(keyspace, routingKey);\n  }\n  if (!routingKey || !replicas) {\n    return this.childPolicy.newQueryPlan(keyspace, executionOptions, callback);\n  }\n  const iterator = new TokenAwareIterator(keyspace, executionOptions, replicas, this.childPolicy);\n  iterator.iterate(callback);\n};\n\n/**\n * An iterator that holds the context for the subsequent next() calls\n * @param {String} keyspace\n * @param {ExecutionOptions} execOptions\n * @param {Array} replicas\n * @param childPolicy\n * @constructor\n * @ignore\n */\nfunction TokenAwareIterator(keyspace, execOptions, replicas, childPolicy) {\n  this.keyspace = keyspace;\n  this.childPolicy = childPolicy;\n  this.options = execOptions;\n  this.localReplicas = [];\n  this.replicaIndex = 0;\n  this.replicaMap = {};\n  this.childIterator = null;\n  // Memoize the local replicas\n  // The amount of local replicas should be defined before start iterating, in order to select an\n  // appropriate (pseudo random) startIndex\n  for (let i = 0; i < replicas.length; i++) {\n    const host = replicas[i];\n    if (this.childPolicy.getDistance(host) !== types.distance.local) {\n      continue;\n    }\n    this.replicaMap[host.address] = true;\n    this.localReplicas.push(host);\n  }\n  // We use a PRNG to set the replica index\n  // We only care about proportional fair scheduling between replicas of a given token\n  // Math.random() has an extremely short permutation cycle length but we don't care about collisions\n  this.startIndex = Math.floor(Math.random() * this.localReplicas.length);\n}\n\nTokenAwareIterator.prototype.iterate = function (callback) {\n  //Load the child policy hosts\n  const self = this;\n  this.childPolicy.newQueryPlan(this.keyspace, this.options, function (err, iterator) {\n    if (err) {\n      return callback(err);\n    }\n    //get the iterator of the child policy in case is needed\n    self.childIterator = iterator;\n    callback(null, {\n      next: function () { return self.computeNext(); }\n    });\n  });\n};\n\nTokenAwareIterator.prototype.computeNext = function () {\n  let host;\n  if (this.replicaIndex < this.localReplicas.length) {\n    host = this.localReplicas[(this.startIndex + (this.replicaIndex++)) % this.localReplicas.length];\n    return { value: host, done: false };\n  }\n  // Return hosts from child policy\n  let item;\n  while ((item = this.childIterator.next()) && !item.done) {\n    if (this.replicaMap[item.value.address]) {\n      // Avoid yielding local replicas from the child load balancing policy query plan\n      continue;\n    }\n    return item;\n  }\n  return doneIteratorObject;\n};\n\n/**\n * Gets an associative array containing the policy options.\n */\nTokenAwarePolicy.prototype.getOptions = function () {\n  const map = new Map([\n    ['childPolicy', this.childPolicy.constructor !== undefined ? this.childPolicy.constructor.name : null ]\n  ]);\n\n  if (this.childPolicy instanceof DCAwareRoundRobinPolicy) {\n    map.set('localDataCenter', this.childPolicy.localDc);\n  }\n\n  return map;\n};\n\n/**\n * Create a new policy that wraps the provided child policy but only \"allow\" hosts\n * from the provided list.\n * @class\n * @classdesc\n * A load balancing policy wrapper that ensure that only hosts from a provided\n * allow list will ever be returned.\n * <p>\n * This policy wraps another load balancing policy and will delegate the choice\n * of hosts to the wrapped policy with the exception that only hosts contained\n * in the allow list provided when constructing this policy will ever be\n * returned. Any host not in the while list will be considered ignored\n * and thus will not be connected to.\n * <p>\n * This policy can be useful to ensure that the driver only connects to a\n * predefined set of hosts. Keep in mind however that this policy defeats\n * somewhat the host auto-detection of the driver. As such, this policy is only\n * useful in a few special cases or for testing, but is not optimal in general.\n * If all you want to do is limiting connections to hosts of the local\n * data-center then you should use DCAwareRoundRobinPolicy and *not* this policy\n * in particular.\n * @param {LoadBalancingPolicy} childPolicy the wrapped policy.\n * @param {Array.<string>}  allowList The hosts address in the format ipAddress:port.\n * Only hosts from this list may get connected\n * to (whether they will get connected to or not depends on the child policy).\n * @extends LoadBalancingPolicy\n * @constructor\n */\nfunction AllowListPolicy (childPolicy, allowList) {\n  if (!childPolicy) {\n    throw new Error(\"You must specify a child load balancing policy\");\n  }\n  if (!Array.isArray(allowList)) {\n    throw new Error(\"You must provide the list of allowed host addresses\");\n  }\n\n  this.childPolicy = childPolicy;\n  this.allowList = new Map(allowList.map(address => [ address, true ]));\n}\n\nutil.inherits(AllowListPolicy, LoadBalancingPolicy);\n\nAllowListPolicy.prototype.init = function (client, hosts, callback) {\n  this.childPolicy.init(client, hosts, callback);\n};\n\n/**\n * Uses the child policy to return the distance to the host if included in the allow list.\n * Any host not in the while list will be considered ignored.\n * @param host\n */\nAllowListPolicy.prototype.getDistance = function (host) {\n  if (!this._contains(host)) {\n    return types.distance.ignored;\n  }\n  return this.childPolicy.getDistance(host);\n};\n\n/**\n * @param {Host} host\n * @returns {boolean}\n * @private\n */\nAllowListPolicy.prototype._contains = function (host) {\n  return !!this.allowList.get(host.address);\n};\n\n/**\n * Returns the hosts to use for a new query filtered by the allow list.\n */\nAllowListPolicy.prototype.newQueryPlan = function (keyspace, info, callback) {\n  const self = this;\n  this.childPolicy.newQueryPlan(keyspace, info, function (err, iterator) {\n    if (err) {\n      return callback(err);\n    }\n    callback(null, self._filter(iterator));\n  });\n};\n\nAllowListPolicy.prototype._filter = function (childIterator) {\n  const self = this;\n  return {\n    next: function () {\n      const item = childIterator.next();\n      if (!item.done && !self._contains(item.value)) {\n        return this.next();\n      }\n      return item;\n    }\n  };\n};\n\n/**\n * Gets an associative array containing the policy options.\n */\nAllowListPolicy.prototype.getOptions = function () {\n  return new Map([\n    ['childPolicy', this.childPolicy.constructor !== undefined ? this.childPolicy.constructor.name : null ],\n    ['allowList', Array.from(this.allowList.keys())]\n  ]);\n};\n\n/**\n * Creates a new instance of the policy.\n * @classdesc\n * Exposed for backward-compatibility only, it's recommended that you use {@link AllowListPolicy} instead.\n * @param {LoadBalancingPolicy} childPolicy the wrapped policy.\n * @param {Array.<string>} allowList The hosts address in the format ipAddress:port.\n * Only hosts from this list may get connected to (whether they will get connected to or not depends on the child\n * policy).\n * @extends AllowListPolicy\n * @deprecated Use allow-list instead. It will be removed in future major versions.\n * @constructor\n */\nfunction WhiteListPolicy(childPolicy, allowList) {\n  AllowListPolicy.call(this, childPolicy, allowList);\n}\n\nutil.inherits(WhiteListPolicy, AllowListPolicy);\n\n/**\n * A load-balancing policy implementation that attempts to fairly distribute the load based on the amount of in-flight\n * request per hosts. The local replicas are initially shuffled and\n * <a href=\"https://www.eecs.harvard.edu/~michaelm/postscripts/mythesis.pdf\">between the first two nodes in the\n * shuffled list, the one with fewer in-flight requests is selected as coordinator</a>.\n *\n * <p>\n *   Additionally, it detects unresponsive replicas and reorders them at the back of the query plan.\n * </p>\n *\n * <p>\n *   For graph analytics queries, it uses the preferred analytics graph server previously obtained by driver as first\n *   host in the query plan.\n * </p>\n */\nclass DefaultLoadBalancingPolicy extends LoadBalancingPolicy {\n\n  /**\n   * Creates a new instance of <code>DefaultLoadBalancingPolicy</code>.\n   * @param {String|Object} [options] The local data center name or the optional policy options object.\n   * <p>\n   *   Note that when providing the local data center name, it overrides <code>localDataCenter</code> option at\n   *   <code>Client</code> level.\n   * </p>\n   * @param {String} [options.localDc] local data center name.  This value overrides the 'localDataCenter' Client option\n   * and is useful for cases where you have multiple execution profiles that you intend on using for routing\n   * requests to different data centers.\n   * @param {Function} [options.filter] A function to apply to determine if hosts are included in the query plan.\n   * The function takes a Host parameter and returns a Boolean.\n   */\n  constructor(options) {\n    super();\n\n    if (typeof options === 'string') {\n      options = { localDc: options };\n    } else if (!options) {\n      options = utils.emptyObject;\n    }\n\n    this._client = null;\n    this._hosts = null;\n    this._filteredHosts = null;\n    this._preferredHost = null;\n    this._index = 0;\n    this.localDc = options.localDc;\n    this._filter = options.filter || this._defaultFilter;\n\n    // Allow some checks to be injected\n    if (options.isHostNewlyUp) {\n      this._isHostNewlyUp = options.isHostNewlyUp;\n    }\n    if (options.healthCheck) {\n      this._healthCheck = options.healthCheck;\n    }\n    if (options.compare) {\n      this._compare = options.compare;\n    }\n    if (options.getReplicas) {\n      this._getReplicas = options.getReplicas;\n    }\n  }\n\n  /**\n   * Initializes the load balancing policy, called after the driver obtained the information of the cluster.\n   * @param {Client} client\n   * @param {HostMap} hosts\n   * @param {Function} callback\n   */\n  init(client, hosts, callback) {\n    this._client = client;\n    this._hosts = hosts;\n\n    // Clean local host cache\n    this._hosts.on('add', () => this._filteredHosts = null);\n    this._hosts.on('remove', () => this._filteredHosts = null);\n\n    try {\n      setLocalDc(this, client, this._hosts);\n    } catch (err) {\n      return callback(err);\n    }\n\n    callback();\n  }\n\n  /**\n   * Returns the distance assigned by this policy to the provided host, relatively to the client instance.\n   * @param {Host} host\n   */\n  getDistance(host) {\n    if (this._preferredHost !== null && host === this._preferredHost) {\n      // Set the last preferred host as local.\n      // It ensures that the pool for the graph analytics host has the appropriate size\n      return types.distance.local;\n    }\n\n    if (!this._filter(host)) {\n      return types.distance.ignored;\n    }\n\n    return host.datacenter === this.localDc ? types.distance.local : types.distance.ignored;\n  }\n\n  /**\n   * Returns a host iterator to be used for a query execution.\n   * @override\n   * @param {String} keyspace\n   * @param {ExecutionOptions} executionOptions\n   * @param {Function} callback\n   */\n  newQueryPlan(keyspace, executionOptions, callback) {\n    let routingKey;\n    let preferredHost;\n\n    if (executionOptions) {\n      routingKey = executionOptions.getRoutingKey();\n\n      if (executionOptions.getKeyspace()) {\n        keyspace = executionOptions.getKeyspace();\n      }\n\n      preferredHost = executionOptions.getPreferredHost();\n    }\n\n    let iterable;\n\n    if (!keyspace || !routingKey) {\n      iterable = this._getLocalHosts();\n    } else {\n      iterable = this._getReplicasAndLocalHosts(keyspace, routingKey);\n    }\n\n    if (preferredHost) {\n      // Set it on an instance level field to set the distance\n      this._preferredHost = preferredHost;\n      iterable = DefaultLoadBalancingPolicy._getPreferredHostFirst(preferredHost, iterable);\n    }\n\n    return callback(null, iterable);\n  }\n\n  /**\n   * Yields the preferred host first, followed by the host in the provided iterable\n   * @param preferredHost\n   * @param iterable\n   * @private\n   */\n  static *_getPreferredHostFirst(preferredHost, iterable) {\n    yield preferredHost;\n\n    for (const host of iterable) {\n      if (host !== preferredHost) {\n        yield host;\n      }\n    }\n  }\n\n  /**\n   * Yields the local hosts without the replicas already yielded\n   * @param {Array<Host>} [localReplicas] The local replicas that we should avoid to include again\n   * @private\n   */\n  *_getLocalHosts(localReplicas) {\n    // Use a local reference\n    const hosts = this._getFilteredLocalHosts();\n    const initialIndex = this._getIndex();\n\n    // indexOf() over an Array is a O(n) operation but given that there should be 3 to 7 replicas,\n    // it shouldn't be an expensive call. Additionally, this will only be executed when the local replicas\n    // have been exhausted in a lazy manner.\n    const canBeYield = localReplicas\n      ? h => localReplicas.indexOf(h) === -1\n      : h => true;\n\n    for (let i = 0; i < hosts.length; i++) {\n      const h = hosts[(i + initialIndex) % hosts.length];\n      if (canBeYield(h) && h.isUp()) {\n        yield h;\n      }\n    }\n  }\n\n  _getReplicasAndLocalHosts(keyspace, routingKey) {\n    let replicas = this._getReplicas(keyspace, routingKey);\n    if (replicas === null) {\n      return this._getLocalHosts();\n    }\n\n    const filteredReplicas = [];\n    let newlyUpReplica = null;\n    let newlyUpReplicaTimestamp = Number.MIN_SAFE_INTEGER;\n    let unhealthyReplicas = 0;\n\n    // Filter by DC, predicate and UP replicas\n    // Use the same iteration to perform other checks: whether if its newly UP or unhealthy\n    // As this is part of the hot path, we use a simple loop and avoid using Array.prototype.filter() + closure\n    for (let i = 0; i < replicas.length; i++) {\n      const h = replicas[i];\n      if (!this._filter(h) || h.datacenter !== this.localDc || !h.isUp()) {\n        continue;\n      }\n      const isUpSince = this._isHostNewlyUp(h);\n      if (isUpSince !== null && isUpSince > newlyUpReplicaTimestamp) {\n        newlyUpReplica = h;\n        newlyUpReplicaTimestamp = isUpSince;\n      }\n      if (newlyUpReplica === null && !this._healthCheck(h)) {\n        unhealthyReplicas++;\n      }\n      filteredReplicas.push(h);\n    }\n\n    replicas = filteredReplicas;\n\n    // Shuffle remaining local replicas\n    utils.shuffleArray(replicas);\n\n    if (replicas.length < 3) {\n      // Avoid reordering replicas of a set of 2 as we could be doing more harm than good\n      return this.yieldReplicasFirst(replicas);\n    }\n\n    let temp;\n\n    if (newlyUpReplica === null) {\n      if (unhealthyReplicas > 0 && unhealthyReplicas < Math.floor(replicas.length / 2 + 1)) {\n        // There is one or more unhealthy replicas and there is a majority of healthy replicas\n        this._sendUnhealthyToTheBack(replicas, unhealthyReplicas);\n      }\n    }\n    else if ((newlyUpReplica === replicas[0] || newlyUpReplica === replicas[1]) && Math.random() * 4 >= 1) {\n      // There is a newly UP replica and the replica in first or second position is the most recent replica\n      // marked as UP and dice roll 1d4!=1 -> Send it to the back of the Array\n      const index = newlyUpReplica === replicas[0] ? 0 : 1;\n      temp = replicas[replicas.length - 1];\n      replicas[replicas.length - 1] = replicas[index];\n      replicas[index] = temp;\n    }\n\n    if (this._compare(replicas[1], replicas[0]) > 0) {\n      // Power of two random choices\n      temp = replicas[0];\n      replicas[0] = replicas[1];\n      replicas[1] = temp;\n    }\n\n    return this.yieldReplicasFirst(replicas);\n  }\n\n  /**\n   * Yields the local replicas followed by the rest of local nodes.\n   * @param {Array<Host>} replicas The local replicas\n   */\n  *yieldReplicasFirst(replicas) {\n    for (let i = 0; i < replicas.length; i++) {\n      yield replicas[i];\n    }\n    yield* this._getLocalHosts(replicas);\n  }\n\n  _isHostNewlyUp(h) {\n    return (h.isUpSince !== null && Date.now() - h.isUpSince < newlyUpInterval) ? h.isUpSince : null;\n  }\n\n  /**\n   * Returns a boolean determining whether the host health is ok or not.\n   * A Host is considered unhealthy when there are enough items in the queue (10 items in-flight) but the\n   * Host is not responding to those requests.\n   * @param {Host} h\n   * @return {boolean}\n   * @private\n   */\n  _healthCheck(h) {\n    return !(h.getInFlight() >= 10 && h.getResponseCount() <= 1);\n  }\n\n  /**\n   * Compares to host and returns 1 if it needs to favor the first host otherwise, -1.\n   * @return {number}\n   * @private\n   */\n  _compare(h1, h2) {\n    return h1.getInFlight() < h2.getInFlight() ? 1 : -1;\n  }\n\n  _getReplicas(keyspace, routingKey) {\n    return this._client.getReplicas(keyspace, routingKey);\n  }\n\n  /**\n   * Returns an Array of hosts filtered by DC and predicate.\n   * @returns {Array<Host>}\n   * @private\n   */\n  _getFilteredLocalHosts() {\n    if (this._filteredHosts === null) {\n      this._filteredHosts = this._hosts.values()\n        .filter(h => this._filter(h) && h.datacenter === this.localDc);\n    }\n    return this._filteredHosts;\n  }\n\n  _getIndex() {\n    const result = this._index++;\n    // Overflow protection\n    if (this._index === 0x7fffffff) {\n      this._index = 0;\n    }\n    return result;\n  }\n\n  _sendUnhealthyToTheBack(replicas, unhealthyReplicas) {\n    let counter = 0;\n\n    // Start from the back, move backwards and stop once all unhealthy replicas are at the back\n    for (let i = replicas.length - 1; i >= 0 && counter < unhealthyReplicas; i--) {\n      const host = replicas[i];\n      if (this._healthCheck(host)) {\n        continue;\n      }\n\n      const targetIndex = replicas.length - 1 - counter;\n      if (targetIndex !== i) {\n        const temp = replicas[targetIndex];\n        replicas[targetIndex] = host;\n        replicas[i] = temp;\n      }\n      counter++;\n    }\n  }\n\n  _defaultFilter() {\n    return true;\n  }\n\n  /**\n   * Gets an associative array containing the policy options.\n   */\n  getOptions() {\n    return new Map([\n      ['localDataCenter', this.localDc ],\n      ['filterFunction', this._filter !== this._defaultFilter ]\n    ]);\n  }\n}\n\n/**\n * Validates and sets the local data center to be used.\n * @param {LoadBalancingPolicy} lbp\n * @param {Client} client\n * @param {HostMap} hosts\n * @private\n */\nfunction setLocalDc(lbp, client, hosts) {\n  if (!(lbp instanceof LoadBalancingPolicy)) {\n    throw new errors.DriverInternalError('LoadBalancingPolicy instance was not provided');\n  }\n\n  if (client && client.options) {\n    if (lbp.localDc && !client.options.localDataCenter) {\n      client.log('info', `Local data center '${lbp.localDc}' was provided as an argument to the load-balancing` +\n        ` policy. It is preferable to specify the local data center using 'localDataCenter' in Client` +\n        ` options instead when your application is targeting a single data center.`);\n    }\n\n    // If localDc is unset, use value set in client options.\n    lbp.localDc = lbp.localDc || client.options.localDataCenter;\n  }\n\n  const dcs = getDataCenters(hosts);\n\n  if (!lbp.localDc) {\n    throw new errors.ArgumentError(\n      `'localDataCenter' is not defined in Client options and also was not specified in constructor.` +\n      ` At least one is required. Available DCs are: [${Array.from(dcs)}]`);\n  }\n\n  if (!dcs.has(lbp.localDc)) {\n    throw new errors.ArgumentError(`Datacenter ${lbp.localDc} was not found. Available DCs are: [${Array.from(dcs)}]`);\n  }\n}\n\nfunction getDataCenters(hosts) {\n  return new Set(hosts.values().map(h => h.datacenter));\n}\n\nmodule.exports = {\n  AllowListPolicy,\n  DCAwareRoundRobinPolicy,\n  DefaultLoadBalancingPolicy,\n  LoadBalancingPolicy,\n  RoundRobinPolicy,\n  TokenAwarePolicy,\n  // Deprecated: for backward compatibility only.\n  WhiteListPolicy\n};", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst util = require('util');\n\n/** @module policies/reconnection */\n/**\n * Base class for Reconnection Policies\n * @constructor\n */\nfunction ReconnectionPolicy() {\n\n}\n\n/**\n * A new reconnection schedule.\n * @returns {{next: function}} An infinite iterator\n */\nReconnectionPolicy.prototype.newSchedule = function () {\n  throw new Error('You must implement a new schedule for the Reconnection class');\n};\n\n/**\n * Gets an associative array containing the policy options.\n */\nReconnectionPolicy.prototype.getOptions = function () {\n  return new Map();\n};\n\n/**\n * A reconnection policy that waits a constant time between each reconnection attempt.\n * @param {Number} delay Delay in ms\n * @constructor\n */\nfunction ConstantReconnectionPolicy(delay) {\n  this.delay = delay;\n}\n\nutil.inherits(ConstantReconnectionPolicy, ReconnectionPolicy);\n\n/**\n * A new reconnection schedule that returns the same next delay value\n * @returns {{next: Function}} An infinite iterator\n */\nConstantReconnectionPolicy.prototype.newSchedule = function () {\n  const self = this;\n  return {\n    next: function () {\n      return {value: self.delay, done: false};\n    }\n  };\n};\n\n/**\n * Gets an associative array containing the policy options.\n */\nConstantReconnectionPolicy.prototype.getOptions = function () {\n  return new Map([['delay', this.delay ]]);\n};\n\n/**\n * A reconnection policy that waits exponentially longer between each\n * reconnection attempt (but keeps a constant delay once a maximum delay is reached).\n * <p>\n *   A random amount of jitter (+/- 15%) will be added to the pure exponential delay value to avoid situations\n *   where many clients are in the reconnection process at exactly the same time. The jitter will never cause the\n *   delay to be less than the base delay, or more than the max delay.\n * </p>\n * @param {Number} baseDelay The base delay in milliseconds to use for the schedules created by this policy.\n * @param {Number} maxDelay The maximum delay in milliseconds to wait between two reconnection attempt.\n * @param {Boolean} startWithNoDelay Determines if the first attempt should be zero delay\n * @constructor\n */\nfunction ExponentialReconnectionPolicy(baseDelay, maxDelay, startWithNoDelay) {\n  this.baseDelay = baseDelay;\n  this.maxDelay = maxDelay;\n  this.startWithNoDelay = startWithNoDelay;\n}\n\nutil.inherits(ExponentialReconnectionPolicy, ReconnectionPolicy);\n\n/**\n * A new schedule that uses an exponentially growing delay between reconnection attempts.\n * @returns {{next: Function}} An infinite iterator.\n */\nExponentialReconnectionPolicy.prototype.newSchedule = function* () {\n  let index = this.startWithNoDelay ? -1 : 0;\n\n  while (true) {\n    let delay = 0;\n\n    if (index >= 64) {\n      delay = this.maxDelay;\n    } else if (index !== -1) {\n      delay = Math.min(Math.pow(2, index) * this.baseDelay, this.maxDelay);\n    }\n\n    index++;\n\n    yield this._addJitter(delay);\n  }\n};\n\n/**\n * Adds a random portion of +-15% to the delay provided.\n * Initially, its adds a random value of 15% to avoid reconnection before reaching the base delay.\n * When the schedule reaches max delay, only subtracts a random portion of 15%.\n */\nExponentialReconnectionPolicy.prototype._addJitter = function (value) {\n  if (value === 0) {\n    // Instant reconnection without jitter\n    return value;\n  }\n\n  // Use the formula: 85% + rnd() * 30% to calculate the percentage of the original delay\n  let minPercentage = 0.85;\n  let range = 0.30;\n\n  if (!this.startWithNoDelay && value === this.baseDelay) {\n    // Between 100% to 115% of the original value\n    minPercentage = 1;\n    range = 0.15;\n  } else if (value === this.maxDelay) {\n    // Between 85% to 100% of the original value\n    range = 0.15;\n  }\n\n  return Math.floor(value * (Math.random() * range + minPercentage));\n};\n\n/**\n * Gets an associative array containing the policy options.\n */\nExponentialReconnectionPolicy.prototype.getOptions = function () {\n  return new Map([\n    ['baseDelay', this.baseDelay ],\n    ['maxDelay', this.maxDelay ],\n    ['startWithNoDelay', this.startWithNoDelay ]\n  ]);\n};\n\nexports.ReconnectionPolicy = ReconnectionPolicy;\nexports.ConstantReconnectionPolicy = ConstantReconnectionPolicy;\nexports.ExponentialReconnectionPolicy = ExponentialReconnectionPolicy;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst util = require('util');\n\n\n/** @module policies/retry */\n/**\n * Base and default RetryPolicy.\n * Determines what to do when the drivers runs into an specific Cassandra exception\n * @constructor\n */\nfunction RetryPolicy() {\n\n}\n\n/**\n * Determines what to do when the driver gets an UnavailableException response from a Cassandra node.\n * @param {OperationInfo} info\n * @param {Number} consistency The [consistency]{@link module:types~consistencies} level of the query that triggered\n * the exception.\n * @param {Number} required The number of replicas whose response is required to achieve the\n * required [consistency]{@link module:types~consistencies}.\n * @param {Number} alive The number of replicas that were known to be alive when the request had been processed\n * (since an unavailable exception has been triggered, there will be alive &lt; required)\n * @returns {DecisionInfo}\n */\nRetryPolicy.prototype.onUnavailable = function (info, consistency, required, alive) {\n  if (info.nbRetry > 0) {\n    return this.rethrowResult();\n  }\n  return this.retryResult(undefined, false);\n};\n\n/**\n * Determines what to do when the driver gets a ReadTimeoutException response from a Cassandra node.\n * @param {OperationInfo} info\n * @param {Number} consistency The [consistency]{@link module:types~consistencies} level of the query that triggered\n * the exception.\n * @param {Number} received The number of nodes having answered the request.\n * @param {Number} blockFor The number of replicas whose response is required to achieve the\n * required [consistency]{@link module:types~consistencies}.\n * @param {Boolean} isDataPresent When <code>false</code>, it means the replica that was asked for data has not responded.\n * @returns {DecisionInfo}\n */\nRetryPolicy.prototype.onReadTimeout = function (info, consistency, received, blockFor, isDataPresent) {\n  if (info.nbRetry > 0) {\n    return this.rethrowResult();\n  }\n  return ((received >= blockFor && !isDataPresent) ?\n    this.retryResult() :\n    this.rethrowResult());\n};\n\n/**\n * Determines what to do when the driver gets a WriteTimeoutException response from a Cassandra node.\n * @param {OperationInfo} info\n * @param {Number} consistency The [consistency]{@link module:types~consistencies} level of the query that triggered\n * the exception.\n * @param {Number} received The number of nodes having acknowledged the request.\n * @param {Number} blockFor The number of replicas whose acknowledgement is required to achieve the required\n * [consistency]{@link module:types~consistencies}.\n * @param {String} writeType A <code>string</code> that describes the type of the write that timed out (\"SIMPLE\"\n * / \"BATCH\" / \"BATCH_LOG\" / \"UNLOGGED_BATCH\" / \"COUNTER\").\n * @returns {DecisionInfo}\n */\nRetryPolicy.prototype.onWriteTimeout = function (info, consistency, received, blockFor, writeType) {\n  if (info.nbRetry > 0) {\n    return this.rethrowResult();\n  }\n  // If the batch log write failed, retry the operation as this might just be we were unlucky at picking candidates\n  return writeType === \"BATCH_LOG\" ? this.retryResult() : this.rethrowResult();\n};\n\n/**\n * Defines whether to retry and at which consistency level on an unexpected error.\n * <p>\n * This method might be invoked in the following situations:\n * </p>\n * <ol>\n * <li>On a client timeout, while waiting for the server response\n * (see [socketOptions.readTimeout]{@link ClientOptions}), being the error an instance of\n * [OperationTimedOutError]{@link module:errors~OperationTimedOutError}.</li>\n * <li>On a connection error (socket closed, etc.).</li>\n * <li>When the contacted host replies with an error, such as <code>overloaded</code>, <code>isBootstrapping</code>,\n * </code>serverError, etc. In this case, the error is instance of [ResponseError]{@link module:errors~ResponseError}.\n * </li>\n * </ol>\n * <p>\n * Note that when this method is invoked, <em>the driver cannot guarantee that the mutation has been effectively\n * applied server-side</em>; a retry should only be attempted if the request is known to be idempotent.\n * </p>\n * @param {OperationInfo} info\n * @param {Number|undefined} consistency The [consistency]{@link module:types~consistencies} level of the query that triggered\n * the exception.\n * @param {Error} err The error that caused this request to fail.\n * @returns {DecisionInfo}\n */\nRetryPolicy.prototype.onRequestError = function (info, consistency, err) {\n  // The default implementation triggers a retry on the next host in the query plan with the same consistency level,\n  // regardless of the statement's idempotence, for historical reasons.\n  return this.retryResult(undefined, false);\n};\n\n/**\n * Returns a {@link DecisionInfo} to retry the request with the given [consistency]{@link module:types~consistencies}.\n * @param {Number|undefined} [consistency] When specified, it retries the request with the given consistency.\n * @param {Boolean} [useCurrentHost] When specified, determines if the retry should be made using the same coordinator.\n * Default: true.\n * @returns {DecisionInfo}\n */\nRetryPolicy.prototype.retryResult = function (consistency, useCurrentHost) {\n  return {\n    decision: RetryPolicy.retryDecision.retry,\n    consistency: consistency,\n    useCurrentHost: useCurrentHost !== false\n  };\n};\n\n/**\n * Returns a {@link DecisionInfo} to callback in error when a err is obtained for a given request.\n * @returns {DecisionInfo}\n */\nRetryPolicy.prototype.rethrowResult = function () {\n  return { decision: RetryPolicy.retryDecision.rethrow };\n};\n\n/**\n * Determines the retry decision for the retry policies.\n * @type {Object}\n * @property {Number} rethrow\n * @property {Number} retry\n * @property {Number} ignore\n * @static\n */\nRetryPolicy.retryDecision = {\n  rethrow:  0,\n  retry:    1,\n  ignore:   2\n};\n\n/**\n * Creates a new instance of <code>IdempotenceAwareRetryPolicy</code>.\n * @classdesc\n * A retry policy that avoids retrying non-idempotent statements.\n * <p>\n * In case of write timeouts or unexpected errors, this policy will always return\n * [rethrowResult()]{@link module:policies/retry~RetryPolicy#rethrowResult} if the statement is deemed non-idempotent\n * (see [QueryOptions.isIdempotent]{@link QueryOptions}).\n * <p/>\n * For all other cases, this policy delegates the decision to the child policy.\n * @param {RetryPolicy} [childPolicy] The child retry policy to wrap. When not defined, it will use an instance of\n * [RetryPolicy]{@link module:policies/retry~RetryPolicy} as child policy.\n * @extends module:policies/retry~RetryPolicy\n * @constructor\n * @deprecated Since version 4.0 non-idempotent operations are never tried for write timeout or request error, use the\n * default retry policy instead.\n */\nfunction IdempotenceAwareRetryPolicy(childPolicy) {\n  this._childPolicy = childPolicy || new RetryPolicy();\n}\n\nutil.inherits(IdempotenceAwareRetryPolicy, RetryPolicy);\n\nIdempotenceAwareRetryPolicy.prototype.onReadTimeout = function (info, consistency, received, blockFor, isDataPresent) {\n  return this._childPolicy.onReadTimeout(info, consistency, received, blockFor, isDataPresent);\n};\n\n/**\n * If the query is not idempotent, it returns a rethrow decision. Otherwise, it relies on the child policy to decide.\n */\nIdempotenceAwareRetryPolicy.prototype.onRequestError = function (info, consistency, err) {\n  if (info.executionOptions.isIdempotent()) {\n    return this._childPolicy.onRequestError(info, consistency, err);\n  }\n  return this.rethrowResult();\n};\n\nIdempotenceAwareRetryPolicy.prototype.onUnavailable = function (info, consistency, required, alive) {\n  return this._childPolicy.onUnavailable(info, consistency, required, alive);\n};\n\n/**\n * If the query is not idempotent, it return a rethrow decision. Otherwise, it relies on the child policy to decide.\n */\nIdempotenceAwareRetryPolicy.prototype.onWriteTimeout = function (info, consistency, received, blockFor, writeType) {\n  if (info.executionOptions.isIdempotent()) {\n    return this._childPolicy.onWriteTimeout(info, consistency, received, blockFor, writeType);\n  }\n  return this.rethrowResult();\n};\n\n/**\n * Creates a new instance of FallthroughRetryPolicy.\n * @classdesc\n * A retry policy that never retries nor ignores.\n * <p>\n * All of the methods of this retry policy unconditionally return\n * [rethrow]{@link module:policies/retry~Retry#rethrowResult()}. If this policy is used, retry logic will have to be\n * implemented in business code.\n * </p>\n * @alias module:policies/retry~FallthroughRetryPolicy\n * @extends RetryPolicy\n * @constructor\n */\nfunction FallthroughRetryPolicy() {\n\n}\n\nutil.inherits(FallthroughRetryPolicy, RetryPolicy);\n\n/**\n * Implementation of RetryPolicy method that returns [rethrow]{@link module:policies/retry~Retry#rethrowResult()}.\n */\nFallthroughRetryPolicy.prototype.onReadTimeout = function () {\n  return this.rethrowResult();\n};\n\n/**\n * Implementation of RetryPolicy method that returns [rethrow]{@link module:policies/retry~Retry#rethrowResult()}.\n */\nFallthroughRetryPolicy.prototype.onRequestError = function () {\n  return this.rethrowResult();\n};\n\n/**\n * Implementation of RetryPolicy method that returns [rethrow]{@link module:policies/retry~Retry#rethrowResult()}.\n */\nFallthroughRetryPolicy.prototype.onUnavailable = function () {\n  return this.rethrowResult();\n};\n\n/**\n * Implementation of RetryPolicy method that returns [rethrow]{@link module:policies/retry~Retry#rethrowResult()}.\n */\nFallthroughRetryPolicy.prototype.onWriteTimeout = function () {\n  return this.rethrowResult();\n};\n\n/**\n * Decision information\n * @typedef {Object} DecisionInfo\n * @property {Number} decision The decision as specified in\n * [retryDecision]{@link module:policies/retry~RetryPolicy.retryDecision}.\n * @property {Number} [consistency] The [consistency level]{@link module:types~consistencies}.\n * @property {useCurrentHost} [useCurrentHost] Determines if it should use the same host to retry the request.\n * <p>\n *   In the case that the current host is not available anymore, it will be retried on the next host even when\n *   <code>useCurrentHost</code> is set to <code>true</code>.\n * </p>\n */\n\n/**\n * Information of the execution to be used to determine whether the operation should be retried.\n * @typedef {Object} OperationInfo\n * @property {String} query The query that was executed.\n * @param {ExecutionOptions} executionOptions The options related to the execution of the request.\n * @property {Number} nbRetry The number of retries already performed for this operation.\n */\n\nexports.IdempotenceAwareRetryPolicy = IdempotenceAwareRetryPolicy;\nexports.FallthroughRetryPolicy = FallthroughRetryPolicy;\nexports.RetryPolicy = RetryPolicy;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst util = require('util');\nconst errors = require('../errors');\n\n/** @module policies/speculativeExecution */\n\n/**\n * @classdesc\n * The policy that decides if the driver will send speculative queries to the next hosts when the current host takes too\n * long to respond.\n * <p>Note that only idempotent statements will be speculatively retried.</p>\n * @constructor\n * @abstract\n */\nfunction SpeculativeExecutionPolicy() {\n  \n}\n\n/**\n * Initialization method that gets invoked on Client startup.\n * @param {Client} client\n * @abstract\n */\nSpeculativeExecutionPolicy.prototype.init = function (client) {\n\n};\n\n/**\n * Gets invoked at client shutdown, giving the opportunity to the implementor to perform cleanup.\n * @abstract\n */\nSpeculativeExecutionPolicy.prototype.shutdown = function () {\n\n};\n\n/**\n * Gets the plan to use for a new query.\n * Returns an object with a <code>nextExecution()</code> method, which returns a positive number representing the\n * amount of milliseconds to delay the next execution or a non-negative number to avoid further executions.\n * @param {String} keyspace The currently logged keyspace.\n * @param {String|Array<String>} queryInfo The query, or queries in the case of batches, for which to build a plan.\n * @return {{nextExecution: function}}\n * @abstract\n */\nSpeculativeExecutionPolicy.prototype.newPlan = function (keyspace, queryInfo) {\n  throw new Error('You must implement newPlan() method in the SpeculativeExecutionPolicy');\n};\n\n/**\n * Gets an associative array containing the policy options.\n */\nSpeculativeExecutionPolicy.prototype.getOptions = function () {\n  return new Map();\n};\n\n/**\n * Creates a new instance of NoSpeculativeExecutionPolicy.\n * @classdesc\n * A {@link SpeculativeExecutionPolicy} that never schedules speculative executions.\n * @constructor\n * @extends {SpeculativeExecutionPolicy}\n */\nfunction NoSpeculativeExecutionPolicy() {\n  this._plan = {\n    nextExecution: function () {\n      return -1;\n    }\n  };\n}\n\nutil.inherits(NoSpeculativeExecutionPolicy, SpeculativeExecutionPolicy);\n\nNoSpeculativeExecutionPolicy.prototype.newPlan = function () {\n  return this._plan;\n};\n\n\n/**\n * Creates a new instance of ConstantSpeculativeExecutionPolicy.\n * @classdesc\n * A {@link SpeculativeExecutionPolicy} that schedules a given number of speculative executions,\n * separated by a fixed delay.\n * @constructor\n * @param {Number} delay The delay between each speculative execution.\n * @param {Number} maxSpeculativeExecutions The amount of speculative executions that should be scheduled after the\n * initial execution. Must be strictly positive.\n * @extends {SpeculativeExecutionPolicy}\n */\nfunction ConstantSpeculativeExecutionPolicy(delay, maxSpeculativeExecutions) {\n  if (!(delay >= 0)) {\n    throw new errors.ArgumentError('delay must be a positive number or zero');\n  }\n  if (!(maxSpeculativeExecutions > 0)) {\n    throw new errors.ArgumentError('maxSpeculativeExecutions must be a positive number');\n  }\n  this._delay = delay;\n  this._maxSpeculativeExecutions = maxSpeculativeExecutions;\n}\n\nutil.inherits(ConstantSpeculativeExecutionPolicy, SpeculativeExecutionPolicy);\n\nConstantSpeculativeExecutionPolicy.prototype.newPlan = function () {\n  let executions = 0;\n  const self = this;\n  return {\n    nextExecution: function () {\n      if (executions++ < self._maxSpeculativeExecutions) {\n        return self._delay;\n      }\n      return -1;\n    }\n  };\n};\n\n/**\n * Gets an associative array containing the policy options.\n */\nConstantSpeculativeExecutionPolicy.prototype.getOptions = function () {\n  return new Map([\n    ['delay', this._delay ],\n    ['maxSpeculativeExecutions', this._maxSpeculativeExecutions ]\n  ]);\n};\n\nexports.NoSpeculativeExecutionPolicy = NoSpeculativeExecutionPolicy;\nexports.SpeculativeExecutionPolicy = SpeculativeExecutionPolicy;\nexports.ConstantSpeculativeExecutionPolicy = ConstantSpeculativeExecutionPolicy;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst util = require('util');\nconst { Long } = require('../types');\nconst errors = require('../errors');\n\n/** @module policies/timestampGeneration */\n\n/**\n * Defines the maximum date in milliseconds that can be represented in microseconds using Number ((2 ^ 53) / 1000)\n * @const\n * @private\n */\nconst _maxSafeNumberDate = 9007199254740;\n\n/**\n * A long representing the value 1000\n * @const\n * @private\n */\nconst _longOneThousand = Long.fromInt(1000);\n\n/**\n * Creates a new instance of {@link TimestampGenerator}.\n * @classdesc\n * Generates client-side, microsecond-precision query timestamps.\n * <p>\n *   Given that Cassandra uses those timestamps to resolve conflicts, implementations should generate\n *   monotonically increasing timestamps for successive invocations of {@link TimestampGenerator.next()}.\n * </p>\n * @constructor\n */\nfunction TimestampGenerator() {\n\n}\n\n/**\n * Returns the next timestamp.\n * <p>\n *   Implementors should enforce increasing monotonicity of timestamps, that is,\n *   a timestamp returned should always be strictly greater that any previously returned\n *   timestamp.\n * <p/>\n * <p>\n *   Implementors should strive to achieve microsecond precision in the best possible way,\n *   which is usually largely dependent on the underlying operating system's capabilities.\n * </p>\n * @param {Client} client The {@link Client} instance to generate timestamps to.\n * @returns {Long|Number|null} the next timestamp (in microseconds). If it's equals to <code>null</code>, it won't be\n * sent by the driver, letting the server to generate the timestamp.\n * @abstract\n */\nTimestampGenerator.prototype.next = function (client) {\n  throw new Error('next() must be implemented');\n};\n\n/**\n * A timestamp generator that guarantees monotonically increasing timestamps and logs warnings when timestamps\n * drift in the future.\n * <p>\n *   {@link Date} has millisecond precision and client timestamps require microsecond precision. This generator\n *   keeps track of the last generated timestamp, and if the current time is within the same millisecond as the last,\n *   it fills the microsecond portion of the new timestamp with the value of an incrementing counter.\n * </p>\n * @param {Number} [warningThreshold] Determines how far in the future timestamps are allowed to drift before a\n * warning is logged, expressed in milliseconds. Default: <code>1000</code>.\n * @param {Number} [minLogInterval] In case of multiple log events, it determines the time separation between log\n * events, expressed in milliseconds. Use 0 to disable. Default: <code>1000</code>.\n * @extends {TimestampGenerator}\n * @constructor\n */\nfunction MonotonicTimestampGenerator(warningThreshold, minLogInterval) {\n  if (warningThreshold < 0) {\n    throw new errors.ArgumentError('warningThreshold can not be lower than 0');\n  }\n  this._warningThreshold = warningThreshold || 1000;\n  this._minLogInterval = 1000;\n  if (typeof minLogInterval === 'number') {\n    // A value under 1 will disable logging\n    this._minLogInterval = minLogInterval;\n  }\n  this._micros = -1;\n  this._lastDate = 0;\n  this._lastLogDate = 0;\n}\n\nutil.inherits(MonotonicTimestampGenerator, TimestampGenerator);\n\n/**\n * Returns the current time in milliseconds since UNIX epoch\n * @returns {Number}\n */\nMonotonicTimestampGenerator.prototype.getDate = function () {\n  return Date.now();\n};\n\nMonotonicTimestampGenerator.prototype.next = function (client) {\n  let date = this.getDate();\n  let drifted = 0;\n  if (date > this._lastDate) {\n    this._micros = 0;\n    this._lastDate = date;\n    return this._generateMicroseconds();\n  }\n\n  if (date < this._lastDate) {\n    drifted = this._lastDate - date;\n    date = this._lastDate;\n  }\n  if (++this._micros === 1000) {\n    this._micros = 0;\n    if (date === this._lastDate) {\n      // Move date 1 millisecond into the future\n      date++;\n      drifted++;\n    }\n  }\n  const lastDate = this._lastDate;\n  this._lastDate = date;\n  const result = this._generateMicroseconds();\n  if (drifted >= this._warningThreshold) {\n    // Avoid logging an unbounded amount of times within a clock-skew event or during an interval when more than 1\n    // query is being issued by microsecond\n    const currentLogDate = Date.now();\n    if (this._minLogInterval > 0 && this._lastLogDate + this._minLogInterval <= currentLogDate){\n      const message = util.format(\n        'Timestamp generated using current date was %d milliseconds behind the last generated timestamp (which ' +\n        'millisecond portion was %d), the returned value (%s) is being artificially incremented to guarantee ' +\n        'monotonicity.',\n        drifted, lastDate, result);\n      this._lastLogDate = currentLogDate;\n      client.log('warning', message);\n    }\n  }\n  return result;\n};\n\n/**\n * @private\n * @returns {Number|Long}\n */\nMonotonicTimestampGenerator.prototype._generateMicroseconds = function () {\n  if (this._lastDate < _maxSafeNumberDate) {\n    // We are safe until Jun 06 2255, its faster to perform this operations on Number than on Long\n    // We hope to have native int64 by then :)\n    return this._lastDate * 1000 + this._micros;\n  }\n  return Long\n    .fromNumber(this._lastDate)\n    .multiply(_longOneThousand)\n    .add(Long.fromInt(this._micros));\n};\n\nexports.TimestampGenerator = TimestampGenerator;\nexports.MonotonicTimestampGenerator = MonotonicTimestampGenerator;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n/**\n * Contains driver tuning policies to determine [load balancing]{@link module:policies/loadBalancing},\n *  [retrying]{@link module:policies/retry} queries, [reconnecting]{@link module:policies/reconnection} to a node,\n *  [address resolution]{@link module:policies/addressResolution},\n *  [timestamp generation]{@link module:policies/timestampGeneration} and\n *  [speculative execution]{@link module:policies/speculativeExecution}.\n * @module policies\n */\nconst addressResolution = exports.addressResolution = require('./address-resolution');\nconst loadBalancing = exports.loadBalancing = require('./load-balancing');\nconst reconnection = exports.reconnection = require('./reconnection');\nconst retry = exports.retry = require('./retry');\nconst speculativeExecution = exports.speculativeExecution = require('./speculative-execution');\nconst timestampGeneration = exports.timestampGeneration = require('./timestamp-generation');\n\n/**\n * Returns a new instance of the default address translator policy used by the driver.\n * @returns {AddressTranslator}\n */\nexports.defaultAddressTranslator = function () {\n  return new addressResolution.AddressTranslator();\n};\n\n/**\n * Returns a new instance of the default load-balancing policy used by the driver.\n * @param {string} [localDc] When provided, it sets the data center that is going to be used as local for the\n * load-balancing policy instance.\n * <p>When localDc is undefined, the load-balancing policy instance will use the <code>localDataCenter</code>\n * provided in the {@link ClientOptions}.</p>\n * @returns {LoadBalancingPolicy}\n */\nexports.defaultLoadBalancingPolicy = function (localDc) {\n  return new loadBalancing.DefaultLoadBalancingPolicy(localDc);\n};\n\n/**\n * Returns a new instance of the default retry policy used by the driver.\n * @returns {RetryPolicy}\n */\nexports.defaultRetryPolicy = function () {\n  return new retry.RetryPolicy();\n};\n\n/**\n * Returns a new instance of the default reconnection policy used by the driver.\n * @returns {ReconnectionPolicy}\n */\nexports.defaultReconnectionPolicy = function () {\n  return new reconnection.ExponentialReconnectionPolicy(1000, 10 * 60 * 1000, false);\n};\n\n\n/**\n * Returns a new instance of the default speculative execution policy used by the driver.\n * @returns {SpeculativeExecutionPolicy}\n */\nexports.defaultSpeculativeExecutionPolicy = function () {\n  return new speculativeExecution.NoSpeculativeExecutionPolicy();\n};\n\n/**\n * Returns a new instance of the default timestamp generator used by the driver.\n * @returns {TimestampGenerator}\n */\nexports.defaultTimestampGenerator = function () {\n  return new timestampGeneration.MonotonicTimestampGenerator();\n};\n", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\n/**\n * Tracks request execution for a {@link Client}.\n * <p>\n *   A {@link RequestTracker} can be configured in the client options. The <code>Client</code> will execute\n *   {@link RequestTracker#onSuccess} or {@link RequestTracker#onError} for every query or batch\n *   executed (QUERY, EXECUTE and BATCH requests).\n * </p>\n * @interface\n * @alias module:tracker~RequestTracker\n */\nclass RequestTracker {\n\n  /**\n   * Invoked each time a query or batch request succeeds.\n   * @param {Host} host The node that acted as coordinator of the request.\n   * @param {String|Array} query In the case of prepared or unprepared query executions, the provided\n   * query string. For batch requests, an Array containing the queries and parameters provided.\n   * @param {Array|Object|null} parameters In the case of prepared or unprepared query executions, the provided\n   * parameters.\n   * @param {ExecutionOptions} executionOptions The information related to the execution of the request.\n   * @param {Number} requestLength Length of the body of the request.\n   * @param {Number} responseLength Length of the body of the response.\n   * @param {Array<Number>} latency An array containing [seconds, nanoseconds] tuple, where nanoseconds is the\n   * remaining part of the real time that can't be represented in second precision (see <code>process.hrtime()</code>).\n   */\n  onSuccess(host, query, parameters, executionOptions, requestLength, responseLength, latency) {\n\n  }\n\n  /**\n   * Invoked each time a query or batch request fails.\n   * @param {Host} host The node that acted as coordinator of the request.\n   * @param {String|Array} query In the case of prepared or unprepared query executions, the provided\n   * query string. For batch requests, an Array containing the queries and parameters provided.\n   * @param {Array|Object|null} parameters In the case of prepared or unprepared query executions, the provided\n   * parameters.\n   * @param {ExecutionOptions} executionOptions The information related to the execution of the request.\n   * @param {Number} requestLength Length of the body of the request. When the failure occurred before the request was\n   * written to the wire, the length will be <code>0</code>.\n   * @param {Error} err The error that caused that caused the request to fail.\n   * @param {Array<Number>} latency An array containing [seconds, nanoseconds] tuple, where nanoseconds is the\n   * remaining part of the real time that can't be represented in second precision (see <code>process.hrtime()</code>).\n   */\n  onError(host, query, parameters, executionOptions, requestLength, err, latency) {\n\n  }\n\n  /**\n   * Invoked when the Client is being shutdown.\n   */\n  shutdown() {\n\n  }\n}\n\nmodule.exports = RequestTracker;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst events = require('events');\nconst RequestTracker = require('./request-tracker');\nconst errors = require('../errors');\nconst { format } = require('util');\n\nconst nanosToMillis = 1000000;\nconst defaultMessageMaxQueryLength = 500;\nconst defaultMaxParameterValueLength = 50;\nconst defaultMaxErrorStackTraceLength = 200;\n\n/**\n * A request tracker that logs the requests executed through the session, according to a set of\n * configurable options.\n * @implements {module:tracker~RequestTracker}\n * @alias module:tracker~RequestLogger\n * @example <caption>Logging slow queries</caption>\n * const requestLogger = new RequestLogger({ slowThreshold: 1000 });\n * requestLogger.emitter.on('show', message => console.log(message));\n * // Add the requestLogger to the client options\n * const client = new Client({ contactPoints, requestTracker: requestLogger });\n */\nclass RequestLogger extends RequestTracker {\n\n  /**\n   * Creates a new instance of {@link RequestLogger}.\n   * @param {Object} options\n   * @param {Number} [options.slowThreshold] The threshold in milliseconds beyond which queries are considered 'slow'\n   * and logged as such by the driver.\n   * @param {Number} [options.requestSizeThreshold] The threshold in bytes beyond which requests are considered 'large'\n   * and logged as such by the driver.\n   * @param {Boolean} [options.logNormalRequests] Determines whether it should emit 'normal' events for every\n   * EXECUTE, QUERY and BATCH request executed successfully, useful only for debugging. This option can be modified\n   * after the client is connected using the property {@link RequestLogger#logNormalRequests}.\n   * @param {Boolean} [options.logErroredRequests] Determines whether it should emit 'failure' events for every\n   * EXECUTE, QUERY and BATCH request execution that resulted in an error. This option can be modified\n   * after the client is connected using the property {@link RequestLogger#logErroredRequests}.\n   * @param {Number} [options.messageMaxQueryLength] The maximum amount of characters that are logged from the query\n   * portion of the message. Defaults to 500.\n   * @param {Number} [options.messageMaxParameterValueLength] The maximum amount of characters of each query parameter\n   * value that will be included in the message. Defaults to 50.\n   * @param {Number} [options.messageMaxErrorStackTraceLength] The maximum amount of characters of the stack trace\n   * that will be included in the message. Defaults to 200.\n   */\n  constructor(options) {\n    super();\n    if (!options) {\n      throw new errors.ArgumentError('RequestLogger options parameter is required');\n    }\n\n    this._options = options;\n\n    /**\n     * Determines whether it should emit 'normal' events for every EXECUTE, QUERY and BATCH request executed\n     * successfully, useful only for debugging\n     * @type {Boolean}\n     */\n    this.logNormalRequests = this._options.logNormalRequests;\n\n    /**\n     * Determines whether it should emit 'failure' events for every EXECUTE, QUERY and BATCH request execution that\n     * resulted in an error\n     * @type {Boolean}\n     */\n    this.logErroredRequests = this._options.logErroredRequests;\n\n    /**\n     * The object instance that emits <code>'slow'</code>, <code>'large'</code>, <code>'normal'</code> and\n     * <code>'failure'</code> events.\n     * @type {EventEmitter}\n     */\n    this.emitter = new events.EventEmitter();\n  }\n\n  /**\n   * Logs message if request execution was deemed too slow, large or if normal requests are logged.\n   * @override\n   */\n  onSuccess(host, query, parameters, execOptions, requestLength, responseLength, latency) {\n    if (this._options.slowThreshold > 0 && toMillis(latency) > this._options.slowThreshold) {\n      this._logSlow(host, query, parameters, execOptions, requestLength, responseLength, latency);\n    }\n    else if (this._options.requestSizeThreshold > 0 && requestLength > this._options.requestSizeThreshold) {\n      this._logLargeRequest(host, query, parameters, execOptions, requestLength, responseLength, latency);\n    }\n    else if (this.logNormalRequests) {\n      this._logNormalRequest(host, query, parameters, execOptions, requestLength, responseLength, latency);\n    }\n  }\n\n  /**\n   * Logs message if request execution was too large and/or encountered an error.\n   * @override\n   */\n  onError(host, query, parameters, execOptions, requestLength, err, latency) {\n    if (this._options.requestSizeThreshold > 0 && requestLength > this._options.requestSizeThreshold) {\n      this._logLargeErrorRequest(host, query, parameters, execOptions, requestLength, err, latency);\n    }\n    else if (this.logErroredRequests) {\n      this._logErrorRequest(host, query, parameters, execOptions, requestLength, err, latency);\n    }\n  }\n\n  _logSlow(host, query, parameters, execOptions, requestLength, responseLength, latency) {\n    const message = format('[%s] Slow request, took %d ms (%s): %s', host.address, Math.floor(toMillis(latency)),\n      getPayloadSizes(requestLength, responseLength), getStatementInfo(query, parameters, execOptions, this._options));\n    this.emitter.emit('slow', message);\n  }\n\n  _logLargeRequest(host, query, parameters, execOptions, requestLength, responseLength, latency) {\n    const message = format('[%s] Request exceeded length, %s (took %d ms): %s', host.address,\n      getPayloadSizes(requestLength, responseLength), ~~toMillis(latency),\n      getStatementInfo(query, parameters, execOptions, this._options));\n    this.emitter.emit('large', message);\n  }\n\n  _logNormalRequest(host, query, parameters, execOptions, requestLength, responseLength, latency) {\n    const message = format('[%s] Request completed normally, took %d ms (%s): %s', host.address, ~~toMillis(latency),\n      getPayloadSizes(requestLength, responseLength), getStatementInfo(query, parameters, execOptions, this._options));\n    this.emitter.emit('normal', message);\n  }\n\n  _logLargeErrorRequest(host, query, parameters, execOptions, requestLength, err, latency) {\n    const maxStackTraceLength = this._options.messageMaxErrorStackTraceLength || defaultMaxErrorStackTraceLength;\n    const message = format('[%s] Request exceeded length and execution failed, %s (took %d ms): %s; error: %s',\n      host.address, getPayloadSizes(requestLength), ~~toMillis(latency),\n      getStatementInfo(query, parameters, execOptions, this._options), err.stack.substr(0, maxStackTraceLength));\n\n    // Use 'large' event and not 'failure' as this log is caused by exceeded length\n    this.emitter.emit('large', message);\n  }\n\n  _logErrorRequest(host, query, parameters, execOptions, requestLength, err, latency) {\n    const maxStackTraceLength = this._options.messageMaxErrorStackTraceLength || defaultMaxErrorStackTraceLength;\n    const message = format('[%s] Request execution failed, took %d ms (%s): %s; error: %s', host.address,\n      ~~toMillis(latency), getPayloadSizes(requestLength),\n      getStatementInfo(query, parameters, execOptions, this._options), err.stack.substr(0, maxStackTraceLength));\n\n    // Avoid using 'error' as its a special event\n    this.emitter.emit('failure', message);\n  }\n}\n\nfunction toMillis(latency) {\n  return latency[0] * 1000 + latency[1] / nanosToMillis;\n}\n\nfunction getStatementInfo(query, parameters, execOptions, options) {\n  const maxQueryLength = options.messageMaxQueryLength || defaultMessageMaxQueryLength;\n  const maxParameterLength = options.messageMaxParameterValueLength || defaultMaxParameterValueLength;\n\n  if (Array.isArray(query)) {\n    return getBatchStatementInfo(query, execOptions, maxQueryLength, maxParameterLength);\n  }\n\n  // String concatenation is usually faster than Array#join() in V8\n  let message = query.substr(0, maxQueryLength);\n  const remaining = maxQueryLength - message.length - 1;\n  message += getParametersInfo(parameters, remaining, maxParameterLength);\n\n  if (!execOptions.isPrepared()) {\n    // This part of the message is not accounted for in \"maxQueryLength\"\n    message += ' (not prepared)';\n  }\n\n  return message;\n}\n\nfunction getBatchStatementInfo(queries, execOptions, maxQueryLength, maxParameterLength) {\n  // This part of the message is not accounted for in \"maxQueryLength\"\n  let message = (execOptions.isBatchLogged() ? 'LOGGED ' : '') + 'BATCH w/ ' + queries.length +\n    (!execOptions.isPrepared() ? ' not prepared' : '') + ' queries (';\n  let remaining = maxQueryLength;\n  let i;\n\n  for (i = 0; i < queries.length && remaining > 0; i++) {\n    let q = queries[i];\n    const params = q.params;\n    if (typeof q !== 'string') {\n      q = q.query;\n    }\n\n    if (i > 0) {\n      message += ',';\n      remaining--;\n    }\n\n    const queryLength = Math.min(remaining, q.length);\n    message += q.substr(0, queryLength);\n    remaining -= queryLength;\n\n    if (remaining <= 0) {\n      break;\n    }\n\n    const parameters = getParametersInfo(params, remaining, maxParameterLength);\n    remaining -= parameters.length;\n    message += parameters;\n  }\n\n  message += i < queries.length ? ',...)' : ')';\n  return message;\n}\n\nfunction getParametersInfo(params, remaining, maxParameterLength) {\n  if (remaining <= 3) {\n    // We need at least 3 chars to describe the parameters\n    // its OK to add more chars in an effort to be descriptive\n    return ' [...]';\n  }\n\n  if (!params) {\n    return ' []';\n  }\n\n  let paramStringifier = (index, length) => formatParam(params[index], length);\n  if (!Array.isArray(params)) {\n    const obj = params;\n    params = Object.keys(params);\n    paramStringifier = (index, length) => {\n      const key = params[index];\n      let result = key.substr(0, length);\n      const rem = length - result.length - 1;\n      if (rem <= 0) {\n        return result;\n      }\n      result += \":\" + formatParam(obj[key], rem);\n      return result;\n    };\n  }\n\n  let message = ' [';\n  let i;\n  for (i = 0; remaining > 0 && i < params.length; i++) {\n    if (i > 0) {\n      message += ',';\n      remaining--;\n    }\n\n    const paramString = paramStringifier(i, Math.min(maxParameterLength, remaining));\n    remaining -= paramString.length;\n    message += paramString;\n  }\n\n  if (i < params.length) {\n    message += '...';\n  }\n\n  message += ']';\n  return message;\n}\n\nfunction formatParam(value, maxLength) {\n  if (value === undefined) {\n    return 'undefined';\n  }\n\n  if (value === null) {\n    return 'null';\n  }\n\n  return value.toString().substr(0, maxLength);\n}\n\nfunction getPayloadSizes(requestLength, responseLength) {\n  let message = 'request size ' + formatSize(requestLength);\n  if (responseLength !== undefined) {\n    message += ' / response size ' + formatSize(responseLength);\n  }\n  return message;\n}\n\nfunction formatSize(length) {\n  return length > 1000 ? Math.round(length / 1024) + ' KB' : length + ' bytes';\n}\n\nmodule.exports = RequestLogger;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\n/**\n * Tracker module.\n * @module tracker\n */\n\nexports.RequestLogger = require('./request-logger');\nexports.RequestTracker = require('./request-tracker');", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\n/**\n * Represents a base class that is used to measure events from the server and the client as seen by the driver.\n * @alias module:metrics~ClientMetrics\n * @interface\n */\nclass ClientMetrics {\n  /**\n   * Method invoked when an authentication error is obtained from the server.\n   * @param {AuthenticationError|Error} e The error encountered.\n   */\n  onAuthenticationError(e) {}\n\n  /**\n   * Method invoked when an error (different than a server or client timeout, authentication or connection error) is\n   * encountered when executing a request.\n   * @param {OperationTimedOutError} e The timeout error.\n   */\n  onClientTimeoutError(e) {}\n\n  /**\n   * Method invoked when there is a connection error.\n   * @param {Error} e The error encountered.\n   */\n  onConnectionError(e) {}\n\n  /**\n   * Method invoked when an error (different than a server or client timeout, authentication or connection error) is\n   * encountered when executing a request.\n   * @param {Error} e The error encountered.\n   */\n  onOtherError(e) {}\n\n  /**\n   * Method invoked when a read timeout error is obtained from the server.\n   * @param {ResponseError} e The error encountered.\n   */\n  onReadTimeoutError(e) {}\n\n  /**\n   * Method invoked when a write timeout error is obtained from the server.\n   * @param {ResponseError} e The error encountered.\n   */\n  onWriteTimeoutError(e) {}\n\n  /**\n   * Method invoked when an unavailable error is obtained from the server.\n   * @param {ResponseError} e The error encountered.\n   */\n  onUnavailableError(e) {}\n\n  /**\n   * Method invoked when an execution is retried as a result of a client-level timeout.\n   * @param {Error} e The error that caused the retry.\n   */\n  onClientTimeoutRetry(e) {}\n\n  /**\n   * Method invoked when an error (other than a server or client timeout) is retried.\n   * @param {Error} e The error that caused the retry.\n   */\n  onOtherErrorRetry(e) {}\n\n  /**\n   * Method invoked when an execution is retried as a result of a read timeout from the server (coordinator to replica).\n   * @param {Error} e The error that caused the retry.\n   */\n  onReadTimeoutRetry(e) {}\n\n  /**\n   * Method invoked when an execution is retried as a result of an unavailable error from the server.\n   * @param {Error} e The error that caused the retry.\n   */\n  onUnavailableRetry(e) {}\n\n  /**\n   * Method invoked when an execution is retried as a result of a write timeout from the server (coordinator to\n   * replica).\n   * @param {Error} e The error that caused the retry.\n   */\n  onWriteTimeoutRetry(e) {}\n\n  /**\n   * Method invoked when an error is marked as ignored by the retry policy.\n   * @param {Error} e The error that was ignored by the retry policy.\n   */\n  onIgnoreError(e) {}\n\n  /**\n   * Method invoked when a speculative execution is started.\n   */\n  onSpeculativeExecution() {}\n\n  /**\n   * Method invoked when a response is obtained successfully.\n   * @param {Array<Number>} latency The latency represented in a <code>[seconds, nanoseconds]</code> tuple\n   * Array, where nanoseconds is the remaining part of the real time that can't be represented in second precision.\n   */\n  onSuccessfulResponse(latency) {}\n\n  /**\n   * Method invoked when any response is obtained, the response can be the result of a successful execution or a\n   * server-side error.\n   * @param {Array<Number>} latency The latency represented in a <code>[seconds, nanoseconds]</code> tuple\n   * Array, where nanoseconds is the remaining part of the real time that can't be represented in second precision.\n   */\n  onResponse(latency) {\n\n  }\n}\n\nmodule.exports = ClientMetrics;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst ClientMetrics = require('./client-metrics');\nconst EventEmitter = require('events');\n\n/**\n * A default implementation of [ClientMetrics]{@link module:metrics~ClientMetrics} that exposes the driver events as\n * Node.js events.\n * <p>\n *   An instance of [DefaultMetrics]{@link module:metrics~DefaultMetrics} is configured by default in the client,\n *   you can access this instance using [Client#metrics]{@link Client#metrics} property.\n * </p>\n * @implements {module:metrics~ClientMetrics}\n * @alias module:metrics~DefaultMetrics\n * @example <caption>Listening to events emitted</caption>\n * defaultMetrics.errors.on('increment', err => totalErrors++);\n * defaultMetrics.errors.clientTimeout.on('increment', () => clientTimeoutErrors++);\n * defaultMetrics.speculativeRetries.on('increment', () => specExecsCount++);\n * defaultMetrics.responses.on('increment', latency => myHistogram.record(latency));\n */\nclass DefaultMetrics extends ClientMetrics {\n  /**\n   * Creates a new instance of [DefaultMetrics]{@link module:metrics~DefaultMetrics}.\n   */\n  constructor() {\n    super();\n\n    /**\n     * Emits all the error events.\n     * <p>Use each of the properties to measure events of specific errors.</p>\n     * @type {EventEmitter}\n     * @property {EventEmitter} authentication Emits the authentication timeout error events.\n     * @property {EventEmitter} clientTimeout Emits the client timeout error events.\n     * @property {EventEmitter} connection Emits the connection error events.\n     * @property {EventEmitter} readTimeout Emits the read timeout error events obtained from the server.\n     * @property {EventEmitter} other Emits the error events, that are not part of the other categories.\n     * @property {EventEmitter} unavailable Emits the unavailable error events obtained from the server.\n     * @property {EventEmitter} writeTimeout Emits the write timeout error events obtained from the server\n     */\n    this.errors = new EventEmitter();\n    this.errors.authentication = new EventEmitter();\n    this.errors.clientTimeout = new EventEmitter();\n    this.errors.connection = new EventEmitter();\n    this.errors.other = new EventEmitter();\n    this.errors.readTimeout = new EventEmitter();\n    this.errors.unavailable = new EventEmitter();\n    this.errors.writeTimeout = new EventEmitter();\n\n    /**\n     * Emits all the retry events.\n     * <p>Use each of the properties to measure events of specific retries.</p>\n     * @type {EventEmitter}\n     * @property {EventEmitter} clientTimeout Emits when an execution is retried as a result of an client timeout.\n     * @property {EventEmitter} other Emits the error events, that are not part of the other categories.\n     * @property {EventEmitter} readTimeout Emits an execution is retried as a result of an read timeout error from the\n     * server (coordinator to replica).\n     * @property {EventEmitter} unavailable Emits an execution is retried as a result of an unavailable error from the\n     * server.\n     * @property {EventEmitter} writeTimeout Emits an execution is retried as a result of a write timeout error from the\n     * server (coordinator to replica).\n     */\n    this.retries = new EventEmitter();\n    this.retries.clientTimeout = new EventEmitter();\n    this.retries.other = new EventEmitter();\n    this.retries.readTimeout = new EventEmitter();\n    this.retries.unavailable = new EventEmitter();\n    this.retries.writeTimeout = new EventEmitter();\n\n    /**\n     * Emits events when a speculative execution is started.\n     * @type {EventEmitter}\n     */\n    this.speculativeExecutions = new EventEmitter();\n\n    /**\n     * Emits events when an error is ignored by the retry policy.\n     * @type {EventEmitter}\n     */\n    this.ignoredErrors = new EventEmitter();\n\n    /**\n     * Emits events when a response message is obtained.\n     * @type {EventEmitter}\n     * @property {EventEmitter} success Emits when a response was obtained as the result of a successful execution.\n     */\n    this.responses = new EventEmitter();\n    this.responses.success = new EventEmitter();\n  }\n\n  /** @override */\n  onAuthenticationError(e) {\n    this.errors.authentication.emit('increment', e);\n    this.errors.emit('increment', e);}\n\n  /** @override */\n  onConnectionError(e) {\n    this.errors.connection.emit('increment', e);\n    this.errors.emit('increment', e);\n  }\n\n  /** @override */\n  onReadTimeoutError(e) {\n    this.errors.readTimeout.emit('increment', e);\n    this.errors.emit('increment', e);\n  }\n\n  /** @override */\n  onWriteTimeoutError(e) {\n    this.errors.writeTimeout.emit('increment', e);\n    this.errors.emit('increment', e);\n  }\n\n  /** @override */\n  onUnavailableError(e) {\n    this.errors.unavailable.emit('increment', e);\n    this.errors.emit('increment', e);\n  }\n\n  /** @override */\n  onClientTimeoutError(e) {\n    this.errors.clientTimeout.emit('increment', e);\n    this.errors.emit('increment', e);\n  }\n\n  /** @override */\n  onOtherError(e) {\n    this.errors.other.emit('increment', e);\n    this.errors.emit('increment', e);\n  }\n\n  /** @override */\n  onClientTimeoutRetry(e) {\n    this.retries.clientTimeout.emit('increment', e);\n    this.retries.emit('increment', e);\n  }\n\n  /** @override */\n  onOtherErrorRetry(e) {\n    this.retries.other.emit('increment', e);\n    this.retries.emit('increment', e);\n  }\n\n  /** @override */\n  onReadTimeoutRetry(e) {\n    this.retries.readTimeout.emit('increment', e);\n    this.retries.emit('increment', e);\n  }\n\n  /** @override */\n  onUnavailableRetry(e) {\n    this.retries.unavailable.emit('increment', e);\n    this.retries.emit('increment', e);\n  }\n\n  /** @override */\n  onWriteTimeoutRetry(e) {\n    this.retries.writeTimeout.emit('increment', e);\n    this.retries.emit('increment', e);\n  }\n\n  /** @override */\n  onIgnoreError(e) {\n    this.ignoredErrors.emit('increment', e);\n  }\n\n  /** @override */\n  onSpeculativeExecution() {\n    this.speculativeExecutions.emit('increment');\n  }\n\n  /** @override */\n  onSuccessfulResponse(latency) {\n    this.responses.success.emit('increment', latency);\n  }\n\n  /** @override */\n  onResponse(latency) {\n    this.responses.emit('increment', latency);\n  }\n}\n\nmodule.exports = DefaultMetrics;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst ClientMetrics = require('./client-metrics');\nconst DefaultMetrics = require('./default-metrics');\n\n/**\n * The <code>metrics</code> module contains interfaces and implementations used by the driver to expose\n * measurements of its internal behavior and of the server as seen from the driver side.\n * @module metrics\n */\n\nmodule.exports = { ClientMetrics, DefaultMetrics };", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n/**\n * @classdesc Provides [Authenticator]{@link module:auth~Authenticator} instances to be used when connecting to a host.\n * @constructor\n * @abstract\n * @alias module:auth~AuthProvider\n */\nfunction AuthProvider() {\n\n}\n\n/**\n * Returns an [Authenticator]{@link module:auth~Authenticator} instance to be used when connecting to a host.\n * @param {String} endpoint The ip address and port number in the format ip:port\n * @param {String} name Authenticator name\n * @abstract\n * @returns {Authenticator}\n */\nAuthProvider.prototype.newAuthenticator = function (endpoint, name) {\n  throw new Error('This is an abstract class, you must implement newAuthenticator method or ' +\n    'use another auth provider that inherits from this class');\n};\n\n/**\n * @class\n * @classdesc Handles SASL authentication with Cassandra servers.\n * Each time a new connection is created and the server requires authentication,\n * a new instance of this class will be created by the corresponding.\n * @constructor\n * @alias module:auth~Authenticator\n */\nfunction Authenticator() {\n\n}\n\n/**\n * Obtain an initial response token for initializing the SASL handshake.\n * @param {Function} callback\n */\nAuthenticator.prototype.initialResponse = function (callback) {\n  callback(new Error('Not implemented'));\n};\n\n/**\n * Evaluates a challenge received from the Server. Generally, this method should callback with\n * no error and no additional params when authentication is complete from the client perspective.\n * @param {Buffer} challenge\n * @param {Function} callback\n */\nAuthenticator.prototype.evaluateChallenge = function (challenge, callback) {\n  callback(new Error('Not implemented'));\n};\n\n/**\n * Called when authentication is successful with the last information\n * optionally sent by the server.\n * @param {Buffer} [token]\n */\nAuthenticator.prototype.onAuthenticationSuccess = function (token) {\n\n};\n\nexports.AuthProvider = AuthProvider;\nexports.Authenticator = Authenticator;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst util = require('util');\n\nconst provider = require('./provider.js');\nconst utils = require('../utils');\nconst AuthProvider = provider.AuthProvider;\nconst Authenticator = provider.Authenticator;\n/**\n * Creates a new instance of the Authenticator provider\n * @classdesc Provides plain text [Authenticator]{@link module:auth~Authenticator} instances to be used when\n * connecting to a host.\n * @extends module:auth~AuthProvider\n * @example\n * var authProvider = new cassandra.auth.PlainTextAuthProvider('my_user', 'p@ssword1!');\n * //Set the auth provider in the clientOptions when creating the Client instance\n * const client = new Client({ contactPoints: contactPoints, authProvider: authProvider });\n * @param {String} username User name in plain text\n * @param {String} password Password in plain text\n * @alias module:auth~PlainTextAuthProvider\n * @constructor\n */\nfunction PlainTextAuthProvider(username, password) {\n  this.username = username;\n  this.password = password;\n}\n\nutil.inherits(PlainTextAuthProvider, AuthProvider);\n\n/**\n * Returns a new [Authenticator]{@link module:auth~Authenticator} instance to be used for plain text authentication.\n * @override\n * @returns {Authenticator}\n */\nPlainTextAuthProvider.prototype.newAuthenticator = function () {\n  return new PlainTextAuthenticator(this.username, this.password);\n};\n\n/**\n * @ignore\n */\nfunction PlainTextAuthenticator(username, password) {\n  this.username = username;\n  this.password = password;\n}\n\nutil.inherits(PlainTextAuthenticator, Authenticator);\n\nPlainTextAuthenticator.prototype.initialResponse = function (callback) {\n  const initialToken = Buffer.concat([\n    utils.allocBufferFromArray([0]),\n    utils.allocBufferFromString(this.username, 'utf8'),\n    utils.allocBufferFromArray([0]),\n    utils.allocBufferFromString(this.password, 'utf8')\n  ]);\n  callback(null, initialToken);\n};\n\nPlainTextAuthenticator.prototype.evaluateChallenge = function (challenge, callback) {\n  //noop\n  callback();\n};\n\nmodule.exports = {\n  PlainTextAuthenticator,\n  PlainTextAuthProvider,\n};\n", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst util = require('util');\nconst { Authenticator } = require('./provider');\n\nconst dseAuthenticatorName = 'com.datastax.bdp.cassandra.auth.DseAuthenticator';\n\n/**\n * Base class for Authenticator implementations that want to make use of\n * the authentication scheme negotiation in the DseAuthenticator\n * @param {String} authenticatorName\n * @extends Authenticator\n * @constructor\n * @ignore\n */\nfunction BaseDseAuthenticator(authenticatorName) {\n  this.authenticatorName = authenticatorName;\n}\n\nutil.inherits(BaseDseAuthenticator, Authenticator);\n\n/**\n * Return a Buffer containing the required SASL mechanism.\n * @abstract\n * @returns {Buffer}\n */\nBaseDseAuthenticator.prototype.getMechanism = function () {\n  throw new Error('Not implemented');\n};\n\n/**\n * Return a byte array containing the expected successful server challenge.\n * @abstract\n * @returns {Buffer}\n */\nBaseDseAuthenticator.prototype.getInitialServerChallenge = function () {\n  throw new Error('Not implemented');\n};\n\n/**\n * @param {Function} callback\n * @override\n */\nBaseDseAuthenticator.prototype.initialResponse = function (callback) {\n  if (!this._isDseAuthenticator()) {\n    //fallback\n    return this.evaluateChallenge(this.getInitialServerChallenge(), callback);\n  }\n  //send the mechanism as a first auth message\n  callback(null, this.getMechanism());\n};\n\n/**\n * Determines if the name of the authenticator matches DSE 5+\n * @protected\n * @ignore\n */\nBaseDseAuthenticator.prototype._isDseAuthenticator = function () {\n  return this.authenticatorName === dseAuthenticatorName;\n};\n\nmodule.exports = BaseDseAuthenticator;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst util = require('util');\nconst utils = require('../utils');\n\n/**\n * GSSAPI Client interface.\n * @ignore\n */\nclass GssapiClient {\n  /**\n   * @param {String} [authorizationId]\n   * @param {String} [service]\n   */\n  constructor(authorizationId, service) {\n    this.authorizationId = authorizationId;\n    this.service = service !== undefined ? service : 'dse';\n  }\n\n  /**\n   * @abstract\n   * @param {String} host Host name or ip\n   * @param {Function} callback\n   */\n  init(host, callback) {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @param {Buffer} challenge\n   * @param {Function} callback\n   * @abstract\n   */\n  evaluateChallenge(challenge, callback) {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * @abstract\n   * @param {Function} [callback]\n   */\n  shutdown(callback) {\n    throw new Error('Not implemented');\n  }\n\n  /**\n   * Factory to get the actual implementation of GSSAPI (unix or win)\n   * @param {Object} kerberosModule Kerberos client library dependency\n   * @param {String} [authorizationId] An identity to act as (for proxy authentication).\n   * @param {String} [service] The service to use. (defaults to 'dse')\n   * @returns GssapiClient\n   */\n  static createNew(kerberosModule, authorizationId, service) {\n    return new StandardGssClient(kerberosModule, authorizationId, service);\n  }\n}\n\n/**\n * GSSAPI Client implementation using kerberos module.\n * @ignore\n */\nclass StandardGssClient extends GssapiClient {\n  constructor(kerberosModule, authorizationId, service) {\n    if (typeof kerberosModule.initializeClient !== 'function') {\n      throw new Error('The driver expects version 1.x of the kerberos library');\n    }\n\n    super(authorizationId, service);\n    this.kerberos = kerberosModule;\n    this.transitionIndex = 0;\n  }\n\n  init(host, callback) {\n    this.host = host;\n    let uri = this.service;\n    if (this.host) {\n      //For the principal    \"dse/cassandra1.datastax.com@DATASTAX.COM\"\n      //the expected uri is: \"dse@cassandra1.datastax.com\"\n      uri = util.format(\"%s@%s\", this.service, this.host);\n    }\n    const options = {\n      gssFlags: this.kerberos.GSS_C_MUTUAL_FLAG //authenticate itself flag\n    };\n    this.kerberos.initializeClient(uri, options, (err, kerberosClient) => {\n      if (err) {\n        return callback(err);\n      }\n      this.kerberosClient = kerberosClient;\n      callback();\n    });\n  }\n\n  /** @override */\n  evaluateChallenge(challenge, callback) {\n    this['transition' + this.transitionIndex](challenge, (err, response) => {\n      if (err) {\n        return callback(err);\n      }\n      this.transitionIndex++;\n      callback(null, response ? utils.allocBufferFromString(response, 'base64') : utils.allocBuffer(0));\n    });\n  }\n\n  transition0(challenge, callback) {\n    this.kerberosClient.step('', callback);\n  }\n\n  transition1(challenge, callback) {\n    const charPointerChallenge = challenge.toString('base64');\n    this.kerberosClient.step(charPointerChallenge, callback);\n  }\n\n  transition2(challenge, callback) {\n    this.kerberosClient.unwrap(challenge.toString('base64'), (err, response) => {\n      if (err) {\n        return callback(err, false);\n      }\n      const cb = function (err, wrapped) {\n        if (err) {\n          return callback(err);\n        }\n        callback(null, wrapped);\n      };\n      if (this.authorizationId !== undefined) {\n        this.kerberosClient.wrap(response, { user: this.authorizationId }, cb);\n      }\n      else {\n        this.kerberosClient.wrap(response, null, cb);\n      }\n    });\n  }\n\n  shutdown(callback) {\n    this.kerberosClient = null;\n    callback();\n  }\n}\n\nmodule.exports = GssapiClient;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst util = require('util');\nconst { AuthProvider } = require('./provider');\nconst BaseDseAuthenticator = require('./base-dse-authenticator');\nconst GssapiClient = require('./gssapi-client');\nconst dns = require('dns');\nconst utils = require('../utils');\n\nconst mechanism = utils.allocBufferFromString('GSSAPI');\nconst initialServerChallenge = 'GSSAPI-START';\nconst emptyBuffer = utils.allocBuffer(0);\n\n/**\n * Creates a new instance of <code>DseGssapiAuthProvider</code>.\n * @classdesc\n * AuthProvider that provides GSSAPI authenticator instances for clients to connect\n * to DSE clusters secured with the DseAuthenticator.\n * @param {Object} [gssOptions] GSSAPI authenticator options\n * @param {String} [gssOptions.authorizationId] The optional authorization ID. Providing an authorization ID allows the\n * currently authenticated user to act as a different user (a.k.a. proxy authentication).\n * @param {String} [gssOptions.service] The service to use. Defaults to 'dse'.\n * @param {Function} [gssOptions.hostNameResolver] A method to be used to resolve the name of the Cassandra node based\n * on the IP Address.  Defaults to [lookupServiceResolver]{@link module:auth~DseGssapiAuthProvider.lookupServiceResolver}\n * which resolves the FQDN of the provided IP to generate principals in the format of\n * <code>dse/example.com@MYREALM.COM</code>.\n * Alternatively, you can use [reverseDnsResolver]{@link module:auth~DseGssapiAuthProvider.reverseDnsResolver} to do a\n * reverse DNS lookup or [useIpResolver]{@link module:auth~DseGssapiAuthProvider.useIpResolver} to simply use the IP\n * address provided.\n * @param {String} [gssOptions.user] DEPRECATED, it will be removed in future versions. For proxy authentication, use\n * <code>authorizationId</code> instead.\n * @example\n * const client = new cassandra.Client({\n *   contactPoints: ['h1', 'h2'],\n *   authProvider: new cassandra.auth.DseGssapiAuthProvider()\n * });\n * @alias module:auth~DseGssapiAuthProvider\n * @constructor\n */\nfunction DseGssapiAuthProvider(gssOptions) {\n  //load the kerberos at construction time\n  try {\n    // eslint-disable-next-line\n    this._kerberos = require('kerberos');\n  }\n  catch (err) {\n    if (err.code === 'MODULE_NOT_FOUND') {\n      const newErr = new Error('You must install module \"kerberos\" to use GSSAPI auth provider: ' +\n        'https://www.npmjs.com/package/kerberos');\n      newErr.code = err.code;\n      throw newErr;\n    }\n    throw err;\n  }\n  gssOptions = gssOptions || utils.emptyObject;\n  this.authorizationId = gssOptions.authorizationId || gssOptions.user;\n  this.service = gssOptions.service;\n  this.hostNameResolver = gssOptions.hostNameResolver || DseGssapiAuthProvider.lookupServiceResolver;\n}\n\nutil.inherits(DseGssapiAuthProvider, AuthProvider);\n\n/**\n * Returns an Authenticator instance to be used by the driver when connecting to a host.\n * @param {String} endpoint The IP address and port number in the format ip:port.\n * @param {String} name Authenticator name.\n * @override\n * @returns {Authenticator}\n */\nDseGssapiAuthProvider.prototype.newAuthenticator = function (endpoint, name) {\n  let address = endpoint;\n  if (endpoint.indexOf(':') > 0) {\n    address = endpoint.split(':')[0];\n  }\n  return new GssapiAuthenticator(\n    this._kerberos, address, name, this.authorizationId, this.service, this.hostNameResolver);\n};\n\n/**\n * Performs a lookupService query that resolves an IPv4 or IPv6 address to a hostname.  This ultimately makes a\n * <code>getnameinfo()</code> system call which depends on the OS to do hostname resolution.\n * <p/>\n * <b>Note:</b> Depends on <code>dns.lookupService</code> which was added in 0.12.  For older versions falls back on\n * [reverseDnsResolver]{@link module:auth~DseGssapiAuthProvider.reverseDnsResolver}.\n *\n * @param {String} ip IP address to resolve.\n * @param {Function} callback The callback function with <code>err</code> and <code>hostname</code> arguments.\n */\nDseGssapiAuthProvider.lookupServiceResolver = function (ip, callback) {\n  if (!dns.lookupService) {\n    return DseGssapiAuthProvider.reverseDnsResolver(ip, callback);\n  }\n  dns.lookupService(ip, 0, function (err, hostname) {\n    if (err) {\n      return callback(err);\n    }\n    if (!hostname) {\n      //fallback to ip\n      return callback(null, ip);\n    }\n    callback(null, hostname);\n  });\n};\n\n/**\n * Performs a reverse DNS query that resolves an IPv4 or IPv6 address to a hostname.\n * @param {String} ip IP address to resolve.\n * @param {Function} callback The callback function with <code>err</code> and <code>hostname</code> arguments.\n */\nDseGssapiAuthProvider.reverseDnsResolver = function (ip, callback) {\n  dns.reverse(ip, function (err, names) {\n    if (err) {\n      return callback(err);\n    }\n    if (!names || !names.length) {\n      //fallback to ip\n      return callback(null, ip);\n    }\n    callback(null, names[0]);\n  });\n};\n\n/**\n * Effectively a no op operation, returns the IP address provided.\n * @param {String} ip IP address to use.\n * @param {Function} callback The callback function with <code>err</code> and <code>hostname</code> arguments.\n */\nDseGssapiAuthProvider.useIpResolver = function (ip, callback) {\n  callback(null, ip);\n};\n\n/**\n * @param {Object} kerberosModule\n * @param {String} address Host address.\n * @param {String} authenticatorName\n * @param {String} authorizationId\n * @param {String} service\n * @param {Function} hostNameResolver\n * @extends Authenticator\n * @private\n */\nfunction GssapiAuthenticator(kerberosModule, address, authenticatorName, authorizationId, service, hostNameResolver) {\n  BaseDseAuthenticator.call(this, authenticatorName);\n  this.authorizationId = authorizationId;\n  this.address = address;\n  this.client = GssapiClient.createNew(kerberosModule, authorizationId, service);\n  this.hostNameResolver = hostNameResolver;\n}\n\n//noinspection JSCheckFunctionSignatures\nutil.inherits(GssapiAuthenticator, BaseDseAuthenticator);\n\nGssapiAuthenticator.prototype.getMechanism = function () {\n  return mechanism;\n};\n\nGssapiAuthenticator.prototype.getInitialServerChallenge = function () {\n  return utils.allocBufferFromString(initialServerChallenge);\n};\n\n//noinspection JSUnusedGlobalSymbols\n/**\n * Obtain an initial response token for initializing the SASL handshake.\n * @param {Function} callback\n */\nGssapiAuthenticator.prototype.initialResponse = function (callback) {\n  const self = this;\n  //initialize the GSS client\n  let host = this.address;\n  utils.series([\n    function getHostName(next) {\n      self.hostNameResolver(self.address, function (err, name) {\n        if (!err && name) {\n          host = name;\n        }\n        next();\n      });\n    },\n    function initClient(next) {\n      self.client.init(host, function (err) {\n        if (err) {\n          return next(err);\n        }\n        if (!self._isDseAuthenticator()) {\n          //fallback\n          return self.evaluateChallenge(self.getInitialServerChallenge(), next);\n        }\n        //send the mechanism as a first auth message\n        next(null, self.getMechanism());\n      });\n    }\n  ], callback);\n};\n\n/**\n * Evaluates a challenge received from the Server. Generally, this method should callback with\n * no error and no additional params when authentication is complete from the client perspective.\n * @param {Buffer} challenge\n * @param {Function} callback\n * @override\n */\nGssapiAuthenticator.prototype.evaluateChallenge = function (challenge, callback) {\n  if (!challenge || challenge.toString() === initialServerChallenge) {\n    challenge = emptyBuffer;\n  }\n  this.client.evaluateChallenge(challenge, callback);\n};\n\n/**\n * @override\n */\nGssapiAuthenticator.prototype.onAuthenticationSuccess = function (token) {\n  this.client.shutdown(function noop() { });\n};\n\n\nmodule.exports = DseGssapiAuthProvider;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst util = require('util');\nconst { AuthProvider } = require('./provider');\nconst BaseDseAuthenticator = require('./base-dse-authenticator');\nconst utils = require('../utils');\n\nconst mechanism = utils.allocBufferFromString('PLAIN');\nconst separatorBuffer = utils.allocBufferFromArray([0]);\nconst initialServerChallenge = 'PLAIN-START';\n\n/**\n * Creates a new instance of <code>DsePlainTextAuthProvider</code>.\n * @classdesc\n * AuthProvider that provides plain text authenticator instances for clients to connect\n * to DSE clusters secured with the DseAuthenticator.\n * @param {String} username The username; cannot be <code>null</code>.\n * @param {String} password The password; cannot be <code>null</code>.\n * @param {String} [authorizationId] The optional authorization ID. Providing an authorization ID allows the currently\n * authenticated user to act as a different user (a.k.a. proxy authentication).\n * @extends AuthProvider\n * @alias module:auth~DsePlainTextAuthProvider\n * @example\n * const client = new cassandra.Client({\n *   contactPoints: ['h1', 'h2'],\n *   authProvider: new cassandra.auth.DsePlainTextAuthProvider('user', 'p@ssword1');\n * });\n * @constructor\n */\nfunction DsePlainTextAuthProvider(username, password, authorizationId) {\n  if (typeof username !== 'string' || typeof password !== 'string') {\n    // Validate for null and undefined\n    throw new TypeError('Username and password must be a string');\n  }\n  this.username = username;\n  this.password = password;\n  this.authorizationId = authorizationId;\n}\n\nutil.inherits(DsePlainTextAuthProvider, AuthProvider);\n\n/**\n * Returns an Authenticator instance to be used by the driver when connecting to a host.\n * @param {String} endpoint The IP address and port number in the format ip:port.\n * @param {String} name Authenticator name.\n * @override\n * @returns {Authenticator}\n */\nDsePlainTextAuthProvider.prototype.newAuthenticator = function (endpoint, name) {\n  return new PlainTextAuthenticator(name, this.username, this.password, this.authorizationId);\n};\n\n/**\n * @param {String} authenticatorName\n * @param {String} authenticatorId\n * @param {String} password\n * @param {String} authorizationId\n * @extends BaseDseAuthenticator\n * @constructor\n * @private\n */\nfunction PlainTextAuthenticator(authenticatorName, authenticatorId, password, authorizationId) {\n  BaseDseAuthenticator.call(this, authenticatorName);\n  this.authenticatorId = utils.allocBufferFromString(authenticatorId);\n  this.password = utils.allocBufferFromString(password);\n  this.authorizationId = utils.allocBufferFromString(authorizationId || '');\n}\n\nutil.inherits(PlainTextAuthenticator, BaseDseAuthenticator);\n\n/** @override */\nPlainTextAuthenticator.prototype.getMechanism = function () {\n  return mechanism;\n};\n\n/** @override */\nPlainTextAuthenticator.prototype.getInitialServerChallenge = function () {\n  return utils.allocBufferFromString(initialServerChallenge);\n};\n\n/** @override */\nPlainTextAuthenticator.prototype.evaluateChallenge = function (challenge, callback) {\n  if (!challenge || challenge.toString() !== initialServerChallenge) {\n    return callback(new Error('Incorrect SASL challenge from server'));\n  }\n  // The SASL plain text format is authorizationId 0 username 0 password\n  callback(null, Buffer.concat([\n    this.authorizationId,\n    separatorBuffer,\n    this.authenticatorId,\n    separatorBuffer,\n    this.password\n  ]));\n};\n\nmodule.exports = DsePlainTextAuthProvider;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst { AuthProvider, Authenticator } = require('./provider');\nconst { PlainTextAuthenticator } = require('./plain-text-auth-provider');\nconst errors = require('../errors');\n\nconst dseAuthenticator = 'com.datastax.bdp.cassandra.auth.DseAuthenticator';\n\n/**\n * Internal authentication provider that is used when no provider has been set by the user.\n * @ignore\n */\nclass NoAuthProvider extends AuthProvider {\n  newAuthenticator(endpoint, name) {\n    if (name === dseAuthenticator) {\n      // Try to use transitional mode\n      return new TransitionalModePlainTextAuthenticator();\n    }\n\n    // Use an authenticator that doesn't allow auth flow\n    return new NoAuthAuthenticator(endpoint);\n  }\n}\n\n/**\n * An authenticator throws an error when authentication flow is started.\n * @ignore\n */\nclass NoAuthAuthenticator extends Authenticator {\n  constructor(endpoint) {\n    super();\n    this.endpoint = endpoint;\n  }\n\n  initialResponse(callback) {\n    callback(new errors.AuthenticationError(\n      `Host ${this.endpoint} requires authentication, but no authenticator found in the options`));\n  }\n}\n\n/**\n * Authenticator that accounts for DSE authentication configured with transitional mode: normal.\n *\n * In this situation, the client is allowed to connect without authentication, but DSE\n * would still send an AUTHENTICATE response. This Authenticator handles this situation\n * by sending back a dummy credential.\n */\nclass TransitionalModePlainTextAuthenticator extends PlainTextAuthenticator {\n  constructor() {\n    super('', '');\n  }\n}\n\nmodule.exports = NoAuthProvider;\n", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n/**\n * DSE Authentication module.\n * <p>\n *   Contains the classes used for connecting to a DSE cluster secured with DseAuthenticator.\n * </p>\n * @module auth\n */\n\nconst { Authenticator, AuthProvider } = require('./provider');\nconst { PlainTextAuthProvider } = require('./plain-text-auth-provider');\nconst DseGssapiAuthProvider = require('./dse-gssapi-auth-provider');\nconst DsePlainTextAuthProvider = require('./dse-plain-text-auth-provider');\nconst NoAuthProvider = require('./no-auth-provider');\n\nmodule.exports = {\n  Authenticator,\n  AuthProvider,\n  DseGssapiAuthProvider,\n  DsePlainTextAuthProvider,\n  NoAuthProvider,\n  PlainTextAuthProvider\n};\n", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst util = require('util');\nconst policies = require('./policies');\nconst types = require('./types');\nconst utils = require('./utils');\nconst tracker = require('./tracker');\nconst metrics = require('./metrics');\nconst auth = require('./auth');\n\n/** Core connections per host for protocol versions 1 and 2 */\nconst coreConnectionsPerHostV2 = {\n  [types.distance.local]: 2,\n  [types.distance.remote]: 1,\n  [types.distance.ignored]: 0\n};\n\n/** Core connections per host for protocol version 3 and above */\nconst coreConnectionsPerHostV3 = {\n  [types.distance.local]: 1,\n  [types.distance.remote]: 1,\n  [types.distance.ignored]: 0\n};\n\n/** Default maxRequestsPerConnection value for protocol v1 and v2 */\nconst maxRequestsPerConnectionV2 = 128;\n\n/** Default maxRequestsPerConnection value for protocol v3+ */\nconst maxRequestsPerConnectionV3 = 2048;\n\nconst continuousPageUnitBytes = 'bytes';\nconst continuousPageDefaultSize = 5000;\nconst continuousPageDefaultHighWaterMark = 10000;\n\n/**\n * @returns {ClientOptions}\n */\nfunction defaultOptions () {\n  return ({\n    policies: {\n      addressResolution: policies.defaultAddressTranslator(),\n      loadBalancing: policies.defaultLoadBalancingPolicy(),\n      reconnection: policies.defaultReconnectionPolicy(),\n      retry: policies.defaultRetryPolicy(),\n      speculativeExecution: policies.defaultSpeculativeExecutionPolicy(),\n      timestampGeneration: policies.defaultTimestampGenerator()\n    },\n    queryOptions: {\n      fetchSize: 5000,\n      prepare: false,\n      captureStackTrace: false\n    },\n    protocolOptions: {\n      port: 9042,\n      maxSchemaAgreementWaitSeconds: 10,\n      maxVersion: 0,\n      noCompact: false\n    },\n    pooling: {\n      heartBeatInterval: 30000,\n      warmup: true\n    },\n    socketOptions: {\n      connectTimeout: 5000,\n      defunctReadTimeoutThreshold: 64,\n      keepAlive: true,\n      keepAliveDelay: 0,\n      readTimeout: 12000,\n      tcpNoDelay: true,\n      coalescingThreshold: 65536\n    },\n    authProvider: null,\n    requestTracker: null,\n    metrics: new metrics.DefaultMetrics(),\n    maxPrepared: 500,\n    refreshSchemaDelay: 1000,\n    isMetadataSyncEnabled: true,\n    prepareOnAllHosts: true,\n    rePrepareOnUp: true,\n    encoding: {\n      copyBuffer: true,\n      useUndefinedAsUnset: true\n    },\n    monitorReporting: {\n      enabled: true\n    }\n  });\n}\n\n/**\n * Extends and validates the user options\n * @param {Object} [baseOptions] The source object instance that will be overridden\n * @param {Object} userOptions\n * @returns {Object}\n */\nfunction extend(baseOptions, userOptions) {\n  if (arguments.length === 1) {\n    userOptions = arguments[0];\n    baseOptions = {};\n  }\n  const options = utils.deepExtend(baseOptions, defaultOptions(), userOptions);\n\n  if (!options.cloud) {\n    if (!Array.isArray(options.contactPoints) || options.contactPoints.length === 0) {\n      throw new TypeError('Contacts points are not defined.');\n    }\n\n    for (let i = 0; i < options.contactPoints.length; i++) {\n      const hostName = options.contactPoints[i];\n      if (!hostName) {\n        throw new TypeError(util.format('Contact point %s (%s) is not a valid host name, ' +\n          'the following values are valid contact points: ipAddress, hostName or ipAddress:port', i, hostName));\n      }\n    }\n\n    options.sni = undefined;\n  } else {\n    validateCloudOptions(options);\n  }\n\n  if (!options.logEmitter) {\n    options.logEmitter = function () {};\n  }\n  if (!options.queryOptions) {\n    throw new TypeError('queryOptions not defined in options');\n  }\n\n  if (options.requestTracker !== null && !(options.requestTracker instanceof tracker.RequestTracker)) {\n    throw new TypeError('requestTracker must be an instance of RequestTracker');\n  }\n\n  if (!(options.metrics instanceof metrics.ClientMetrics)) {\n    throw new TypeError('metrics must be an instance of ClientMetrics');\n  }\n\n  validatePoliciesOptions(options.policies);\n\n  validateProtocolOptions(options.protocolOptions);\n\n  validateSocketOptions(options.socketOptions);\n\n  validateAuthenticationOptions(options);\n\n  options.encoding = options.encoding || {};\n\n  validateEncodingOptions(options.encoding);\n\n  if (options.profiles && !Array.isArray(options.profiles)) {\n    throw new TypeError('profiles must be an Array of ExecutionProfile instances');\n  }\n\n  validateApplicationInfo(options);\n\n  validateMonitorReporting(options);\n\n  return options;\n}\n\n/**\n * Validates the options to connect to a cloud instance.\n * @private\n */\nfunction validateCloudOptions(options) {\n  const bundle = options.cloud.secureConnectBundle;\n\n  // eslint-disable-next-line no-undef\n  if (!(typeof bundle === 'string' || (typeof URL !== 'undefined' && bundle instanceof URL))) {\n    throw new TypeError('secureConnectBundle in cloud options must be of type string');\n  }\n\n  if (options.contactPoints) {\n    throw new TypeError('Contact points can not be defined when cloud settings are provided');\n  }\n\n  if (options.sslOptions) {\n    throw new TypeError('SSL options can not be defined when cloud settings are provided');\n  }\n}\n\n/**\n * Validates the policies from the client options.\n * @param {ClientOptions.policies} policiesOptions\n * @private\n */\nfunction validatePoliciesOptions(policiesOptions) {\n  if (!policiesOptions) {\n    throw new TypeError('policies not defined in options');\n  }\n  if (!(policiesOptions.loadBalancing instanceof policies.loadBalancing.LoadBalancingPolicy)) {\n    throw new TypeError('Load balancing policy must be an instance of LoadBalancingPolicy');\n  }\n  if (!(policiesOptions.reconnection instanceof policies.reconnection.ReconnectionPolicy)) {\n    throw new TypeError('Reconnection policy must be an instance of ReconnectionPolicy');\n  }\n  if (!(policiesOptions.retry instanceof policies.retry.RetryPolicy)) {\n    throw new TypeError('Retry policy must be an instance of RetryPolicy');\n  }\n  if (!(policiesOptions.addressResolution instanceof policies.addressResolution.AddressTranslator)) {\n    throw new TypeError('Address resolution policy must be an instance of AddressTranslator');\n  }\n  if (policiesOptions.timestampGeneration !== null &&\n    !(policiesOptions.timestampGeneration instanceof policies.timestampGeneration.TimestampGenerator)) {\n    throw new TypeError('Timestamp generation policy must be an instance of TimestampGenerator');\n  }\n}\n\n/**\n * Validates the protocol options.\n * @param {ClientOptions.protocolOptions} protocolOptions\n * @private\n */\nfunction validateProtocolOptions(protocolOptions) {\n  if (!protocolOptions) {\n    throw new TypeError('protocolOptions not defined in options');\n  }\n  const version = protocolOptions.maxVersion;\n  if (version && (typeof version !== 'number' || !types.protocolVersion.isSupported(version))) {\n    throw new TypeError(util.format('protocolOptions.maxVersion provided (%s) is invalid', version));\n  }\n}\n\n/**\n * Validates the socket options.\n * @param {ClientOptions.socketOptions} socketOptions\n * @private\n */\nfunction validateSocketOptions(socketOptions) {\n  if (!socketOptions) {\n    throw new TypeError('socketOptions not defined in options');\n  }\n  if (typeof socketOptions.readTimeout !== 'number') {\n    throw new TypeError('socketOptions.readTimeout must be a Number');\n  }\n  if (typeof socketOptions.coalescingThreshold !== 'number' || socketOptions.coalescingThreshold <= 0) {\n    throw new TypeError('socketOptions.coalescingThreshold must be a positive Number');\n  }\n}\n\n/**\n * Validates authentication provider and credentials.\n * @param {ClientOptions} options\n * @private\n */\nfunction validateAuthenticationOptions(options) {\n  if (!options.authProvider) {\n    const credentials = options.credentials;\n    if (credentials) {\n      if (typeof credentials.username !== 'string' || typeof credentials.password !== 'string') {\n        throw new TypeError('credentials username and password must be a string');\n      }\n\n      options.authProvider = new auth.PlainTextAuthProvider(credentials.username, credentials.password);\n    } else {\n      options.authProvider = new auth.NoAuthProvider();\n    }\n  } else if (!(options.authProvider instanceof auth.AuthProvider)) {\n    throw new TypeError('options.authProvider must be an instance of AuthProvider');\n  }\n}\n\n/**\n * Validates the encoding options.\n * @param {ClientOptions.encoding} encodingOptions\n * @private\n */\nfunction validateEncodingOptions(encodingOptions) {\n  if (encodingOptions.map) {\n    const mapConstructor = encodingOptions.map;\n    if (typeof mapConstructor !== 'function' ||\n      typeof mapConstructor.prototype.forEach !== 'function' ||\n      typeof mapConstructor.prototype.set !== 'function') {\n      throw new TypeError('Map constructor not valid');\n    }\n  }\n\n  if (encodingOptions.set) {\n    const setConstructor = encodingOptions.set;\n    if (typeof setConstructor !== 'function' ||\n      typeof setConstructor.prototype.forEach !== 'function' ||\n      typeof setConstructor.prototype.add !== 'function') {\n      throw new TypeError('Set constructor not valid');\n    }\n  }\n\n  if ((encodingOptions.useBigIntAsLong || encodingOptions.useBigIntAsVarint) && typeof BigInt === 'undefined') {\n    throw new TypeError('BigInt is not supported by the JavaScript engine');\n  }\n}\n\nfunction validateApplicationInfo(options) {\n  function validateString(key) {\n    const str = options[key];\n\n    if (str !== null && str !== undefined && typeof str !== 'string') {\n      throw new TypeError(`${key} should be a String`);\n    }\n  }\n\n  validateString('applicationName');\n  validateString('applicationVersion');\n\n  if (options.id !== null && options.id !== undefined && !(options.id instanceof types.Uuid)) {\n    throw new TypeError('Client id must be a Uuid');\n  }\n}\n\nfunction validateMonitorReporting(options) {\n  const o = options.monitorReporting;\n  if (o === null || typeof o !== 'object') {\n    throw new TypeError(`Monitor reporting must be an object, obtained: ${o}`);\n  }\n}\n\n/**\n * Sets the default options that depend on the protocol version and other metadata.\n * @param {Client} client\n */\nfunction setMetadataDependent(client) {\n  const version = client.controlConnection.protocolVersion;\n  let coreConnectionsPerHost = coreConnectionsPerHostV3;\n  let maxRequestsPerConnection = maxRequestsPerConnectionV3;\n\n  if (!types.protocolVersion.uses2BytesStreamIds(version)) {\n    coreConnectionsPerHost = coreConnectionsPerHostV2;\n    maxRequestsPerConnection = maxRequestsPerConnectionV2;\n  }\n\n  if (client.options.queryOptions.consistency === undefined) {\n    client.options.queryOptions.consistency =\n      client.metadata.isDbaas() ? types.consistencies.localQuorum : types.consistencies.localOne;\n  }\n\n  client.options.pooling = utils.deepExtend(\n    {}, { coreConnectionsPerHost, maxRequestsPerConnection }, client.options.pooling);\n}\n\nexports.extend = extend;\nexports.defaultOptions = defaultOptions;\nexports.coreConnectionsPerHostV2 = coreConnectionsPerHostV2;\nexports.coreConnectionsPerHostV3 = coreConnectionsPerHostV3;\nexports.maxRequestsPerConnectionV2 = maxRequestsPerConnectionV2;\nexports.maxRequestsPerConnectionV3 = maxRequestsPerConnectionV3;\nexports.setMetadataDependent = setMetadataDependent;\nexports.continuousPageUnitBytes = continuousPageUnitBytes;\nexports.continuousPageDefaultSize = continuousPageDefaultSize;\nexports.continuousPageDefaultHighWaterMark = continuousPageDefaultHighWaterMark;\n", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst utils = require('./utils');\nconst types = require('./types');\nconst promiseUtils = require('./promise-utils');\n\n/**\n * Creates a new instance of {@link ExecutionProfile}.\n * @classdesc\n * Represents a set configurations to be used in a statement execution to be used for a single {@link Client} instance.\n * <p>\n *   An {@link ExecutionProfile} instance should not be shared across different {@link Client} instances.\n * </p>\n * @param {String} name Name of the execution profile.\n * <p>\n *   Use <code>'default'</code> to specify that the new instance should be the default {@link ExecutionProfile} if no\n *   profile is specified in the execution.\n * </p>\n * @param {Object} [options] Profile options, when any of the options is not specified the {@link Client} will the use\n * the ones defined in the default profile.\n * @param {Number} [options.consistency] The consistency level to use for this profile.\n * @param {LoadBalancingPolicy} [options.loadBalancing] The load-balancing policy to use for this profile.\n * @param {Number} [options.readTimeout] The client per-host request timeout to use for this profile.\n * @param {RetryPolicy} [options.retry] The retry policy to use for this profile.\n * @param {Number} [options.serialConsistency] The serial consistency level to use for this profile.\n * @param {Object} [options.graphOptions]\n * @param {String} [options.graphOptions.language] The graph language to use for graph queries.\n * <p>\n *   Note that this setting should normally be <code>undefined</code> or set by a utility method and it's not expected\n *   to be defined manually by the user.\n * </p>\n * @param {String} [options.graphOptions.results] The protocol to use for serializing and deserializing graph results.\n * <p>\n *   Note that this setting should normally be <code>undefined</code> or set by a utility method and it's not expected\n *   to be defined manually by the user.\n * </p>\n * @param {String} [options.graphOptions.name] The graph name to use for graph queries.\n * @param {Number} [options.graphOptions.readConsistency] The consistency level to use for graph read queries.\n * @param {String} [options.graphOptions.source] The graph traversal source name to use for graph queries.\n * @param {Number} [options.graphOptions.writeConsistency] The consistency level to use for graph write queries.\n * @param {LoadBalancingPolicy} [options.loadBalancing] The load-balancing policy to use for this profile.\n * @param {Number} [options.readTimeout] The client per-host request timeout to use for this profile.\n * @param {RetryPolicy} [options.retry] The retry policy to use for this profile.\n * @param {Number} [options.serialConsistency] The serial consistency level to use for this profile.\n * @example\n * const { Client, ExecutionProfile } = require('cassandra-driver');\n * const client = new Client({\n *   contactPoints: ['host1', 'host2'],\n *   profiles: [\n *     new ExecutionProfile('metrics-oltp', {\n *       consistency: consistency.localQuorum,\n *       retry: myRetryPolicy\n *     })\n *   ]\n * });\n *\n * client.execute(query, params, { executionProfile: 'metrics-oltp' }, callback);\n * @constructor\n */\nfunction ExecutionProfile(name, options) {\n  if (typeof name !== 'string') {\n    throw new TypeError('Execution profile name must be a string');\n  }\n  options = options || utils.emptyObject;\n  const graphOptions = options.graphOptions || utils.emptyObject;\n  /**\n   * Name of the execution profile.\n   * @type {String}\n   */\n  this.name = name;\n  /**\n   * Consistency level.\n   * @type {Number}\n   */\n  this.consistency = options.consistency;\n  /**\n   * Load-balancing policy\n   * @type {LoadBalancingPolicy}\n   */\n  this.loadBalancing = options.loadBalancing;\n  /**\n   * Client read timeout.\n   * @type {Number}\n   */\n  this.readTimeout = options.readTimeout;\n  /**\n   * Retry policy.\n   * @type {RetryPolicy}\n   */\n  this.retry = options.retry;\n  /**\n   * Serial consistency level.\n   * @type {Number}\n   */\n  this.serialConsistency = options.serialConsistency;\n  /**\n   * The graph options for this profile.\n   * @type {Object}\n   * @property {String} language The graph language.\n   * @property {String} name The graph name.\n   * @property {String} readConsistency The consistency to use for graph write queries.\n   * @property {String} source The graph traversal source.\n   * @property {String} writeConsistency The consistency to use for graph write queries.\n   */\n  this.graphOptions = {\n    language: graphOptions.language,\n    results: graphOptions.results,\n    name: graphOptions.name,\n    readConsistency: graphOptions.readConsistency,\n    source: graphOptions.source,\n    writeConsistency: graphOptions.writeConsistency\n  };\n}\n\n/**\n * Contains the logic to handle the different execution profiles of a {@link Client}.\n * @ignore\n */\nclass ProfileManager {\n\n  /**\n   * @param {ClientOptions} options\n   */\n  constructor(options) {\n    this._profiles = options.profiles || [];\n    this._defaultConfiguredRetryPolicy = undefined;\n    this._setDefault(options);\n    // A array of unique load balancing policies\n    this._loadBalancingPolicies = [];\n    // A dictionary of name keys and profile values\n    this._profilesMap = {};\n    // A dictionary of name keys and custom payload dictionaries as values\n    this._customPayloadCache = {};\n    // A dictionary of name keys and graph options as values\n    this._graphOptionsCache = {};\n    this._profiles.forEach(function (p) {\n      this._profilesMap[p.name] = p;\n      // Set required properties\n      p.loadBalancing = p.loadBalancing || this._defaultProfile.loadBalancing;\n      // Using array indexOf is not very efficient (O(n)) but the amount of profiles should be limited\n      // and a handful of load-balancing policies (no hashcode for load-Balancing policies)\n      if (this._loadBalancingPolicies.indexOf(p.loadBalancing) === -1) {\n        this._loadBalancingPolicies.push(p.loadBalancing);\n      }\n      return p;\n    }, this);\n  }\n\n  /**\n   * @param {Client} client\n   * @param {HostMap} hosts\n   */\n  async init(client, hosts) {\n    for (const lbp of this._loadBalancingPolicies) {\n      await promiseUtils.fromCallback(callback => lbp.init(client, hosts, callback));\n    }\n  }\n\n  /**\n   * Uses the load-balancing policies to get the relative distance to the host and return the closest one.\n   * @param {Host} host\n   */\n  getDistance(host) {\n    let distance = types.distance.ignored;\n    // this is performance critical: we can't use any other language features than for-loop :(\n    for (let i = 0; i < this._loadBalancingPolicies.length; i++) {\n      const d = this._loadBalancingPolicies[i].getDistance(host);\n      if (d < distance) {\n        distance = d;\n        if (distance === types.distance.local) {\n          break;\n        }\n      }\n    }\n\n    host.setDistance(distance);\n    return distance;\n  }\n\n  /**\n   * @param {String|ExecutionProfile} name\n   * @returns {ExecutionProfile|undefined} It returns the execution profile by name or the default profile when name is\n   * undefined. It returns undefined when the profile does not exist.\n   */\n  getProfile(name) {\n    if (name instanceof ExecutionProfile) {\n      return name;\n    }\n    return this._profilesMap[name || 'default'];\n  }\n\n  /** @returns {ExecutionProfile} */\n  getDefault() {\n    return this._defaultProfile;\n  }\n\n  /** @returns {LoadBalancingPolicy} */\n  getDefaultLoadBalancing() {\n    return this._defaultProfile.loadBalancing;\n  }\n\n  /**\n   * Gets the cached default graph options for a given profile. If it doesn't exist, it creates new options using the\n   * handler and inserts it into the cache\n   * @param {ExecutionProfile} profile\n   * @param {Function} createHandler\n   */\n  getOrCreateGraphOptions(profile, createHandler) {\n    let graphOptions = this._graphOptionsCache[profile.name];\n    if (!graphOptions) {\n      graphOptions = (this._graphOptionsCache[profile.name] = createHandler());\n    }\n    return graphOptions;\n  }\n\n  /**\n   * @private\n   * @param {ClientOptions} options\n   */\n  _setDefault(options) {\n    this._defaultProfile = this._profiles.filter(function (p) { return p.name === 'default'; })[0];\n    if (!this._defaultProfile) {\n      this._profiles.push(this._defaultProfile = new ExecutionProfile('default'));\n    }\n\n    // Store the default configured retry policy\n    this._defaultConfiguredRetryPolicy = this._defaultProfile.retry;\n\n    // Set the required properties\n    this._defaultProfile.loadBalancing = this._defaultProfile.loadBalancing || options.policies.loadBalancing;\n    this._defaultProfile.retry = this._defaultProfile.retry || options.policies.retry;\n  }\n\n  /**\n   * Gets all the execution profiles currently defined.\n   * @returns {Array.<ExecutionProfile>}\n   */\n  getAll() {\n    return this._profiles;\n  }\n\n  getDefaultConfiguredRetryPolicy() {\n    return this._defaultConfiguredRetryPolicy;\n  }\n}\n\nmodule.exports = {\n  ProfileManager,\n  ExecutionProfile\n};", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst events = require('events');\n\nconst types = require('./types');\nconst utils = require('./utils.js');\nconst FrameHeader = types.FrameHeader;\n\n/**\n * Contains the logic to write all the different types to the frame.\n */\nclass FrameWriter {\n  /**\n   * Creates a new instance of FrameWriter.\n   * @param {Number} opcode\n   */\n  constructor(opcode) {\n    if (!opcode) {\n      throw new Error('Opcode not provided');\n    }\n    this.buffers = [];\n    this.opcode = opcode;\n    this.bodyLength = 0;\n  }\n\n  add(buf) {\n    this.buffers.push(buf);\n    this.bodyLength += buf.length;\n  }\n\n  writeShort(num) {\n    const buf = utils.allocBufferUnsafe(2);\n    buf.writeUInt16BE(num, 0);\n    this.add(buf);\n  }\n\n  writeInt(num) {\n    const buf = utils.allocBufferUnsafe(4);\n    buf.writeInt32BE(num, 0);\n    this.add(buf);\n  }\n\n  /** @param {Long} num */\n  writeLong(num) {\n    this.add(types.Long.toBuffer(num));\n  }\n\n  /**\n   * Writes bytes according to Cassandra <int byteLength><bytes>\n   * @param {Buffer|null|types.unset} bytes\n   */\n  writeBytes(bytes) {\n    if (bytes === null) {\n      //Only the length buffer containing -1\n      this.writeInt(-1);\n      return;\n    }\n    if (bytes === types.unset) {\n      this.writeInt(-2);\n      return;\n    }\n    //Add the length buffer\n    this.writeInt(bytes.length);\n    //Add the actual buffer\n    this.add(bytes);\n  }\n\n  /**\n   * Writes a buffer according to Cassandra protocol: bytes.length (2) + bytes\n   * @param {Buffer} bytes\n   */\n  writeShortBytes(bytes) {\n    if(bytes === null) {\n      //Only the length buffer containing -1\n      this.writeShort(-1);\n      return;\n    }\n    //Add the length buffer\n    this.writeShort(bytes.length);\n    //Add the actual buffer\n    this.add(bytes);\n  }\n\n  /**\n   * Writes a single byte\n   * @param {Number} num Value of the byte, a number between 0 and 255.\n   */\n  writeByte(num) {\n    this.add(utils.allocBufferFromArray([num]));\n  }\n\n  writeString(str) {\n    if (typeof str === \"undefined\") {\n      throw new Error(\"can not write undefined\");\n    }\n    const len = Buffer.byteLength(str, 'utf8');\n    const buf = utils.allocBufferUnsafe(2 + len);\n    buf.writeUInt16BE(len, 0);\n    buf.write(str, 2, buf.length-2, 'utf8');\n    this.add(buf);\n  }\n\n  writeLString(str) {\n    const len = Buffer.byteLength(str, 'utf8');\n    const buf = utils.allocBufferUnsafe(4 + len);\n    buf.writeInt32BE(len, 0);\n    buf.write(str, 4, buf.length-4, 'utf8');\n    this.add(buf);\n  }\n\n  writeStringList(values) {\n    this.writeShort(values.length);\n    values.forEach(this.writeString, this);\n  }\n\n  writeCustomPayload(payload) {\n    const keys = Object.keys(payload);\n    this.writeShort(keys.length);\n    keys.forEach(k => {\n      this.writeString(k);\n      this.writeBytes(payload[k]);\n    });\n  }\n\n  writeStringMap(map) {\n    const keys = [];\n    for (const k in map) {\n      if (map.hasOwnProperty(k)) {\n        keys.push(k);\n      }\n    }\n\n    this.writeShort(keys.length);\n\n    for(let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      this.writeString(key);\n      this.writeString(map[key]);\n    }\n  }\n\n  /**\n   * @param {Number} version\n   * @param {Number} streamId\n   * @param {Number} [flags] Header flags\n   * @returns {Buffer}\n   * @throws {TypeError}\n   */\n  write(version, streamId, flags) {\n    const header = new FrameHeader(version, flags || 0, streamId, this.opcode, this.bodyLength);\n    const headerBuffer = header.toBuffer();\n    this.buffers.unshift(headerBuffer);\n    return Buffer.concat(this.buffers, headerBuffer.length + this.bodyLength);\n  }\n}\n\n/**\n * Represents a queue that process one write at a time (FIFO).\n * @extends {EventEmitter}\n */\nclass WriteQueue extends events.EventEmitter {\n  /**\n   * Creates a new WriteQueue instance.\n   * @param {Socket} netClient\n   * @param {Encoder} encoder\n   * @param {ClientOptions} options\n   */\n  constructor(netClient, encoder, options) {\n    super();\n    this.netClient = netClient;\n    this.encoder = encoder;\n    this.isRunning = false;\n    /** @type {Array<{operation: OperationState, callback: Function}>} */\n    this.queue = [];\n    this.coalescingThreshold = options.socketOptions.coalescingThreshold;\n    this.error = null;\n    this.canWrite = true;\n\n    // Listen to drain event that is going to be fired once\n    // the underlying buffer is empty\n    netClient.on('drain', () => {\n      this.canWrite = true;\n      this.run();\n    });\n  }\n\n  /**\n   * Enqueues a new request\n   * @param {OperationState} operation\n   * @param {Function} callback The write callback.\n   */\n  push(operation, callback) {\n    const self = this;\n\n    if (this.error) {\n      // There was a write error, there is no point in further trying to write to the socket.\n      return process.nextTick(function writePushError() {\n        callback(self.error);\n      });\n    }\n\n    this.queue.push({ operation: operation, callback: callback});\n    this.run();\n  }\n\n  run() {\n    if (!this.isRunning && this.canWrite) {\n      this.isRunning = true;\n      // Use nextTick to allow the queue to build up on the current phase\n      process.nextTick(() => this.process());\n    }\n  }\n\n  process() {\n    if (this.error) {\n      return;\n    }\n\n    const buffers = [];\n    const callbacks = [];\n    let totalLength = 0;\n\n    while (this.queue.length > 0 && totalLength < this.coalescingThreshold) {\n      const writeItem = this.queue.shift();\n      if (!writeItem.operation.canBeWritten()) {\n        // Invoke the write callback with an error that is not going to be yielded to user\n        // as the operation has timed out or was cancelled.\n        writeItem.callback(new Error('The operation was already cancelled or timeout elapsed'));\n        continue;\n      }\n      let data;\n      try {\n        data = writeItem.operation.request.write(this.encoder, writeItem.operation.streamId);\n      }\n      catch (err) {\n        writeItem.callback(err);\n        continue;\n      }\n      totalLength += data.length;\n      buffers.push(data);\n      callbacks.push(writeItem.callback);\n    }\n\n    if (totalLength === 0) {\n      this.isRunning = false;\n      return;\n    }\n\n    // We have to invoke the callbacks to avoid race conditions.\n    // There is a performance benefit from executing all of them in a loop\n    for (let i = 0; i < callbacks.length; i++) {\n      callbacks[i]();\n    }\n\n    // Concatenate buffers and write it to the socket\n    // Further writes will be throttled until flushed\n    this.canWrite = this.netClient.write(Buffer.concat(buffers, totalLength), err => {\n      if (err) {\n        this.setWriteError(err);\n        return;\n      }\n\n      if (this.queue.length === 0 || !this.canWrite) {\n        // It will start running once we get the next message or has drained\n        this.isRunning = false;\n        return;\n      }\n\n      // Allow IO between writes\n      setImmediate(() => this.process());\n    });\n  }\n\n  /**\n   * Emits the 'error' event and callbacks items that haven't been written and clears them from the queue.\n   * @param err\n   */\n  setWriteError(err) {\n    err.isSocketError = true;\n    this.error = new types.DriverError('Socket was closed');\n    this.error.isSocketError = true;\n    // Use an special flag for items that haven't been written\n    this.error.requestNotWritten = true;\n    this.error.innerError = err;\n    const q = this.queue;\n    // Not more items can be added to the queue.\n    this.queue = utils.emptyArray;\n    for (let i = 0; i < q.length; i++) {\n      const item = q[i];\n      // Use the error marking that it was not written\n      item.callback(this.error);\n    }\n  }\n}\n\nmodule.exports = { FrameWriter, WriteQueue };\n", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst utils = require('./utils');\nconst types = require('./types');\nconst errors = require('./errors');\n\nconst proxyExecuteKey = 'ProxyExecute';\n\n/**\n * A base class that represents a wrapper around the user provided query options with getter methods and proper\n * default values.\n * <p>\n *   Note that getter methods might return <code>undefined</code> when not set on the query options or default\n *  {@link Client} options.\n * </p>\n */\nclass ExecutionOptions {\n\n  /**\n   * Creates a new instance of {@link ExecutionOptions}.\n   */\n  constructor() {\n  }\n\n  /**\n   * Creates an empty instance, where all methods return undefined, used internally.\n   * @ignore\n   * @return {ExecutionOptions}\n   */\n  static empty() {\n    return new ExecutionOptions();\n  }\n\n  /**\n   * Determines if the stack trace before the query execution should be maintained.\n   * @abstract\n   * @returns {Boolean}\n   */\n  getCaptureStackTrace() {\n\n  }\n\n  /**\n   * Gets the [Consistency level]{@link module:types~consistencies} to be used for the execution.\n   * @abstract\n   * @returns {Number}\n   */\n  getConsistency() {\n\n  }\n\n  /**\n   * Key-value payload to be passed to the server. On the server side, implementations of QueryHandler can use\n   * this data.\n   * @abstract\n   * @returns {Object}\n   */\n  getCustomPayload() {\n\n  }\n\n  /**\n   * Gets the amount of rows to retrieve per page.\n   * @abstract\n   * @returns {Number}\n   */\n  getFetchSize() {\n\n  }\n\n  /**\n   * When a fixed host is set on the query options and the query plan for the load-balancing policy is not used, it\n   * gets the host that should handle the query.\n   * @returns {Host}\n   */\n  getFixedHost() {\n\n  }\n\n  /**\n   * Gets the type hints for parameters given in the query, ordered as for the parameters.\n   * @abstract\n   * @returns {Array|Array<Array>}\n   */\n  getHints() {\n\n  }\n\n  /**\n   * Determines whether the driver must retrieve the following result pages automatically.\n   * <p>\n   *   This setting is only considered by the [Client#eachRow()]{@link Client#eachRow} method.\n   * </p>\n   * @abstract\n   * @returns {Boolean}\n   */\n  isAutoPage() {\n\n  }\n\n  /**\n   * Determines whether its a counter batch. Only valid for [Client#batch()]{@link Client#batch}, it will be ignored by\n   * other methods.\n   * @abstract\n   * @returns {Boolean} A <code>Boolean</code> value, it can't be <code>undefined</code>.\n   */\n  isBatchCounter() {\n\n  }\n\n  /**\n   * Determines whether the batch should be written to the batchlog. Only valid for\n   * [Client#batch()]{@link Client#batch}, it will be ignored by other methods.\n   * @abstract\n   * @returns {Boolean} A <code>Boolean</code> value, it can't be <code>undefined</code>.\n   */\n  isBatchLogged() {\n\n  }\n\n  /**\n   * Determines whether the query can be applied multiple times without changing the result beyond the initial\n   * application.\n   * @abstract\n   * @returns {Boolean}\n   */\n  isIdempotent() {\n\n  }\n\n  /**\n   * Determines whether the query must be prepared beforehand.\n   * @abstract\n   * @returns {Boolean} A <code>Boolean</code> value, it can't be <code>undefined</code>.\n   */\n  isPrepared() {\n\n  }\n\n  /**\n   * Determines whether query tracing is enabled for the execution.\n   * @abstract\n   * @returns {Boolean}\n   */\n  isQueryTracing() {\n\n  }\n\n  /**\n   * Gets the keyspace for the query when set at query options level.\n   * <p>\n   *   Note that this method will return <code>undefined</code> when the keyspace is not set at query options level.\n   *   It will only return the keyspace name when the user provided a different keyspace than the current\n   *   {@link Client} keyspace.\n   * </p>\n   * @abstract\n   * @returns {String}\n   */\n  getKeyspace() {\n\n  }\n\n  /**\n   * Gets the load balancing policy used for this execution.\n   * @returns {LoadBalancingPolicy} A <code>LoadBalancingPolicy</code> instance, it can't be <code>undefined</code>.\n   */\n  getLoadBalancingPolicy() {\n\n  }\n\n  /**\n   * Gets the Buffer representing the paging state.\n   * @abstract\n   * @returns {Buffer}\n   */\n  getPageState() {\n\n  }\n\n  /**\n   * Internal method that gets the preferred host.\n   * @abstract\n   * @ignore\n   */\n  getPreferredHost() {\n\n  }\n\n  /**\n   * Gets the query options as provided to the execution method without setting the default values.\n   * @returns {QueryOptions}\n   */\n  getRawQueryOptions() {\n\n  }\n\n  /**\n   * Gets the timeout in milliseconds to be used for the execution per coordinator.\n   * <p>\n   *   A value of <code>0</code> disables client side read timeout for the execution. Default: <code>undefined</code>.\n   * </p>\n   * @abstract\n   * @returns {Number}\n   */\n  getReadTimeout() {\n\n  }\n\n  /**\n   * Gets the [retry policy]{@link module:policies/retry} to be used.\n   * @abstract\n   * @returns {RetryPolicy} A <code>RetryPolicy</code> instance, it can't be <code>undefined</code>.\n   */\n  getRetryPolicy() {\n\n  }\n\n  /**\n   * Internal method to obtain the row callback, for \"by row\" results.\n   * @abstract\n   * @ignore\n   */\n  getRowCallback() {\n\n  }\n\n  /**\n   * Internal method to get or generate a timestamp for the request execution.\n   * @ignore\n   * @returns {Long|null}\n   */\n  getOrGenerateTimestamp() {\n\n  }\n\n  /**\n   * Gets the index of the parameters that are part of the partition key to determine the routing.\n   * @abstract\n   * @ignore\n   * @returns {Array}\n   */\n  getRoutingIndexes() {\n\n  }\n\n  /**\n   * Gets the partition key(s) to determine which coordinator should be used for the query.\n   * @abstract\n   * @returns {Buffer|Array<Buffer>}\n   */\n  getRoutingKey() {\n\n  }\n\n  /**\n   * Gets the array of the parameters names that are part of the partition key to determine the\n   * routing. Only valid for non-prepared requests.\n   * @abstract\n   * @ignore\n   */\n  getRoutingNames() {\n\n  }\n\n  /**\n   * Gets the the consistency level to be used for the serial phase of conditional updates.\n   * @abstract\n   * @returns {Number}\n   */\n  getSerialConsistency() {\n\n  }\n\n  /**\n   * Gets the provided timestamp for the execution in microseconds from the unix epoch (00:00:00, January 1st, 1970).\n   * <p>When a timestamp generator is used, this method returns <code>undefined</code>.</p>\n   * @abstract\n   * @returns {Number|Long|undefined|null}\n   */\n  getTimestamp() {\n\n  }\n\n  /**\n   * @param {Array} hints\n   * @abstract\n   * @ignore\n   */\n  setHints(hints) {\n\n  }\n\n  /**\n   * Sets the keyspace for the execution.\n   * @ignore\n   * @abstract\n   * @param {String} keyspace\n   */\n  setKeyspace(keyspace) {\n\n  }\n\n  /**\n   * @abstract\n   * @ignore\n   */\n  setPageState() {\n\n  }\n\n  /**\n   * Internal method that sets the preferred host.\n   * @abstract\n   * @ignore\n   */\n  setPreferredHost() {\n\n  }\n\n  /**\n   * Sets the index of the parameters that are part of the partition key to determine the routing.\n   * @param {Array} routingIndexes\n   * @abstract\n   * @ignore\n   */\n  setRoutingIndexes(routingIndexes) {\n\n  }\n\n  /**\n   * Sets the routing key.\n   * @abstract\n   * @ignore\n   */\n  setRoutingKey(value) {\n\n  }\n}\n\n/**\n * Internal implementation of {@link ExecutionOptions} that uses the value from the client options and execution\n * profile into account.\n * @ignore\n */\nclass DefaultExecutionOptions extends ExecutionOptions {\n  /**\n   * Creates a new instance of {@link ExecutionOptions}.\n   * @param {QueryOptions} queryOptions\n   * @param {Client} client\n   * @param {Function|null} rowCallback\n   */\n  constructor(queryOptions, client, rowCallback) {\n    super();\n\n    this._queryOptions = queryOptions;\n    this._rowCallback = rowCallback;\n    this._routingKey = this._queryOptions.routingKey;\n    this._hints = this._queryOptions.hints;\n    this._keyspace = this._queryOptions.keyspace;\n    this._routingIndexes = this._queryOptions.routingIndexes;\n    this._pageState = typeof this._queryOptions.pageState === 'string' ?\n      utils.allocBufferFromString(this._queryOptions.pageState, 'hex') : this._queryOptions.pageState;\n    this._preferredHost = null;\n\n    this._client = client;\n    this._defaultQueryOptions = client.options.queryOptions;\n    this._profile = client.profileManager.getProfile(this._queryOptions.executionProfile);\n\n    // Build a custom payload object designed for DSE-specific functionality\n    this._customPayload = DefaultExecutionOptions.createCustomPayload(this._queryOptions, this._defaultQueryOptions);\n\n    if (!this._profile) {\n      throw new errors.ArgumentError(`Execution profile \"${this._queryOptions.executionProfile}\" not found`);\n    }\n  }\n\n  /**\n   * Creates a payload for given user.\n   * @param {QueryOptions} userOptions\n   * @param {QueryOptions} defaultQueryOptions\n   * @private\n   */\n  static createCustomPayload(userOptions, defaultQueryOptions) {\n    let customPayload = userOptions.customPayload || defaultQueryOptions.customPayload;\n    const executeAs = userOptions.executeAs || defaultQueryOptions.executeAs;\n\n    if (executeAs) {\n      if (!customPayload) {\n        customPayload = {};\n        customPayload[proxyExecuteKey] = utils.allocBufferFromString(executeAs);\n      } else if (!customPayload[proxyExecuteKey]) {\n        // Avoid appending to the existing payload object\n        customPayload = utils.extend({}, customPayload);\n        customPayload[proxyExecuteKey] = utils.allocBufferFromString(executeAs);\n      }\n    }\n\n    return customPayload;\n  }\n\n  /**\n   * Creates a new instance {@link ExecutionOptions}, based on the query options.\n   * @param {QueryOptions|null} queryOptions\n   * @param {Client} client\n   * @param {Function|null} [rowCallback]\n   * @ignore\n   * @return {ExecutionOptions}\n   */\n  static create(queryOptions, client, rowCallback) {\n    if (!queryOptions || typeof queryOptions === 'function') {\n      // queryOptions can be null/undefined and could be of type function when is an optional parameter\n      queryOptions = utils.emptyObject;\n    }\n    return new DefaultExecutionOptions(queryOptions, client, rowCallback);\n  }\n\n  getCaptureStackTrace() {\n    return ifUndefined(this._queryOptions.captureStackTrace, this._defaultQueryOptions.captureStackTrace);\n  }\n\n  getConsistency() {\n    return ifUndefined3(this._queryOptions.consistency, this._profile.consistency,\n      this._defaultQueryOptions.consistency);\n  }\n\n  getCustomPayload() {\n    return this._customPayload;\n  }\n\n  getFetchSize() {\n    return ifUndefined(this._queryOptions.fetchSize, this._defaultQueryOptions.fetchSize);\n  }\n\n  getFixedHost() {\n    return this._queryOptions.host;\n  }\n\n  getHints() {\n    return this._hints;\n  }\n\n  isAutoPage() {\n    return ifUndefined(this._queryOptions.autoPage, this._defaultQueryOptions.autoPage);\n  }\n\n  isBatchCounter() {\n    return ifUndefined(this._queryOptions.counter, false);\n  }\n\n  isBatchLogged() {\n    return ifUndefined3(this._queryOptions.logged, this._defaultQueryOptions.logged, true);\n  }\n\n  isIdempotent() {\n    return ifUndefined(this._queryOptions.isIdempotent, this._defaultQueryOptions.isIdempotent);\n  }\n\n  /**\n   * Determines if the query execution must be prepared beforehand.\n   * @return {Boolean}\n   */\n  isPrepared() {\n    return ifUndefined(this._queryOptions.prepare, this._defaultQueryOptions.prepare);\n  }\n\n  isQueryTracing() {\n    return ifUndefined(this._queryOptions.traceQuery, this._defaultQueryOptions.traceQuery);\n  }\n\n  getKeyspace() {\n    return this._keyspace;\n  }\n\n  getLoadBalancingPolicy() {\n    return this._profile.loadBalancing;\n  }\n\n  getOrGenerateTimestamp() {\n    let result = this.getTimestamp();\n\n    if (result === undefined) {\n      const generator = this._client.options.policies.timestampGeneration;\n\n      if ( types.protocolVersion.supportsTimestamp(this._client.controlConnection.protocolVersion) && generator) {\n        result = generator.next(this._client);\n      } else {\n        result = null;\n      }\n    }\n\n    return typeof result === 'number' ? types.Long.fromNumber(result) : result;\n  }\n\n  getPageState() {\n    return this._pageState;\n  }\n\n  /**\n   * Gets the profile defined by the user or the default profile\n   * @internal\n   * @ignore\n   */\n  getProfile() {\n    return this._profile;\n  }\n\n  getRawQueryOptions() {\n    return this._queryOptions;\n  }\n\n  getReadTimeout() {\n    return ifUndefined3(this._queryOptions.readTimeout, this._profile.readTimeout,\n      this._client.options.socketOptions.readTimeout);\n  }\n\n  getRetryPolicy() {\n    return ifUndefined3(this._queryOptions.retry, this._profile.retry, this._client.options.policies.retry);\n  }\n\n  getRoutingIndexes() {\n    return this._routingIndexes;\n  }\n\n  getRoutingKey() {\n    return this._routingKey;\n  }\n\n  getRoutingNames() {\n    return this._queryOptions.routingNames;\n  }\n\n  /**\n   * Internal method to obtain the row callback, for \"by row\" results.\n   * @ignore\n   */\n  getRowCallback() {\n    return this._rowCallback;\n  }\n\n  getSerialConsistency() {\n    return ifUndefined3(\n      this._queryOptions.serialConsistency, this._profile.serialConsistency, this._defaultQueryOptions.serialConsistency);\n  }\n\n  getTimestamp() {\n    return this._queryOptions.timestamp;\n  }\n\n  /**\n   * Internal property to set the custom payload.\n   * @ignore\n   * @internal\n   * @param {Object} payload\n   */\n  setCustomPayload(payload) {\n    this._customPayload = payload;\n  }\n\n  /**\n   * @param {Array} hints\n   */\n  setHints(hints) {\n    this._hints = hints;\n  }\n\n  /**\n   * @param {String} keyspace\n   */\n  setKeyspace(keyspace) {\n    this._keyspace = keyspace;\n  }\n\n  /**\n   * @param {Buffer} pageState\n   */\n  setPageState(pageState) {\n    this._pageState = pageState;\n  }\n\n  /**\n   * @param {Array} routingIndexes\n   */\n  setRoutingIndexes(routingIndexes) {\n    this._routingIndexes = routingIndexes;\n  }\n\n  setRoutingKey(value) {\n    this._routingKey = value;\n  }\n}\n\nfunction ifUndefined(v1, v2) {\n  return v1 !== undefined ? v1 : v2;\n}\n\nfunction ifUndefined3(v1, v2, v3) {\n  if (v1 !== undefined) {\n    return v1;\n  }\n  return v2 !== undefined ? v2 : v3;\n}\n\nmodule.exports = { ExecutionOptions, DefaultExecutionOptions, proxyExecuteKey };", "{\n  \"name\": \"cassandra-driver\",\n  \"version\": \"4.8.0\",\n  \"description\": \"DataStax Node.js Driver for Apache Cassandra\",\n  \"author\": \"DataStax\",\n  \"keywords\": [\n    \"cassandra\",\n    \"cql\",\n    \"cql3\",\n    \"connection\",\n    \"gremlin\",\n    \"datastax\",\n    \"nosql\",\n    \"driver\",\n    \"database\",\n    \"dse\",\n    \"graph\",\n    \"graphdb\"\n  ],\n  \"license\": \"Apache-2.0\",\n  \"types\": \"./index.d.ts\",\n  \"dependencies\": {\n    \"@types/node\": \"^18.11.18\",\n    \"adm-zip\": \"~0.5.10\",\n    \"long\": \"~5.2.3\"\n  },\n  \"devDependencies\": {\n    \"chai\": \"~4.3.8\",\n    \"kerberos\": \"~2.0.3\",\n    \"mocha\": \"~10.2.0\",\n    \"mocha-jenkins-reporter\": \"~0.4.8\",\n    \"proxyquire\": \"~2.1.3\",\n    \"sinon\": \"~15.2.0\",\n    \"temp\": \">= 0.8.3\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/datastax/nodejs-driver.git\"\n  },\n  \"bugs\": {\n    \"url\": \"https://groups.google.com/a/lists.datastax.com/forum/#!forum/nodejs-driver-user\"\n  },\n  \"scripts\": {\n    \"test\": \"./node_modules/.bin/mocha test/unit -R spec -t 5000 --recursive\",\n    \"unit\": \"./node_modules/.bin/mocha test/unit -R spec -t 5000 --recursive\",\n    \"integration_short\": \"./node_modules/.bin/mocha test/integration/short -R spec -t 5000 --recursive\",\n    \"integration_long\": \"./node_modules/.bin/mocha test/integration/long -R spec -t 5000 --recursive\",\n    \"ci_jenkins\": \"./node_modules/.bin/mocha test/unit test/integration/short --recursive -R mocha-jenkins-reporter --exit\",\n    \"ci_appveyor\": \".\\\\\\\"node_modules/.bin/mocha\\\" test/unit test/integration/short --recursive -R mocha-appveyor-reporter --exit\",\n    \"ci_unit_appveyor\": \".\\\\\\\"node_modules/.bin/mocha\\\" test/unit --recursive -R mocha-appveyor-reporter --exit\",\n    \"server_api\": \"./node_modules/.bin/mocha test/integration/short -g '@SERVER_API' --recursive --exit\",\n    \"eslint\": \"eslint lib test\"\n  },\n  \"engines\": {\n    \"node\": \">=18\"\n  }\n}\n", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst util = require('util');\n\nconst { FrameWriter } = require('./writers');\nconst types = require('./types');\nconst utils = require('./utils');\nconst { ExecutionOptions } = require('./execution-options');\nconst packageInfo = require('../package.json');\n\n/**\n * Options for the execution of the query / prepared statement\n * @private\n */\nconst queryFlag = {\n  values:                 0x01,\n  skipMetadata:           0x02,\n  pageSize:               0x04,\n  withPagingState:        0x08,\n  withSerialConsistency:  0x10,\n  withDefaultTimestamp:   0x20,\n  withNameForValues:      0x40,\n  withKeyspace:           0x80,\n  withPageSizeBytes: 0x40000000,\n  withContinuousPaging: 0x80000000\n};\n\n/**\n * Options for the execution of a batch request from protocol v3 and above\n * @private\n */\nconst batchFlag = {\n  withSerialConsistency:  0x10,\n  withDefaultTimestamp:   0x20,\n  withNameForValues:      0x40,\n  withKeyspace:           0x80\n};\n\n/**\n * Options for execution of a prepare request from protocol DSE_V2 and above\n * @private\n */\nconst prepareFlag = {\n  withKeyspace:           0x01\n};\n\nconst batchType = {\n  logged: 0,\n  unlogged: 1,\n  counter: 2\n};\n\n/**\n * Abstract class Request\n */\nclass Request {\n  constructor() {\n    this.length = 0;\n  }\n\n  /**\n   * @abstract\n   * @param {Encoder} encoder\n   * @param {Number} streamId\n   * @throws {TypeError}\n   * @returns {Buffer}\n   */\n  write(encoder, streamId) {\n    throw new Error('Method must be implemented');\n  }\n\n  /**\n   * Creates a new instance using the same constructor as the current instance, copying the properties.\n   * @return {Request}\n   */\n  clone() {\n    const newRequest = new (this.constructor)();\n    const keysArray = Object.keys(this);\n    for (let i = 0; i < keysArray.length; i++) {\n      const key = keysArray[i];\n      newRequest[key] = this[key];\n    }\n    return newRequest;\n  }\n}\n\n/**\n * Writes a execute query (given a prepared queryId)\n * @param {String} query\n * @param {Buffer} queryId\n * @param {Array} params\n * @param options\n */\nclass ExecuteRequest extends Request {\n  /**\n   * @param {String} query\n   * @param queryId\n   * @param params\n   * @param {ExecutionOptions} execOptions\n   * @param meta\n   */\n  constructor(query, queryId, params, execOptions, meta) {\n    super();\n\n    this.query = query;\n    this.queryId = queryId;\n    this.params = params;\n    this.meta = meta;\n    this.options = execOptions || ExecutionOptions.empty();\n    this.consistency = this.options.getConsistency() || types.consistencies.one;\n    // Only QUERY request parameters are encoded as named parameters\n    // EXECUTE request parameters are always encoded as positional parameters\n    this.namedParameters = false;\n  }\n\n  getParamType(index) {\n    const columnInfo = this.meta.columns[index];\n    return columnInfo ? columnInfo.type : null;\n  }\n\n  write(encoder, streamId) {\n    //v1: <queryId>\n    //      <n><value_1>....<value_n><consistency>\n    //v2: <queryId>\n    //      <consistency><flags>[<n><value_1>...<value_n>][<result_page_size>][<paging_state>][<serial_consistency>]\n    //v3: <queryId>\n    //      <consistency><flags>[<n>[name_1]<value_1>...[name_n]<value_n>][<result_page_size>][<paging_state>][<serial_consistency>][<timestamp>]\n    const frameWriter = new FrameWriter(types.opcodes.execute);\n    let headerFlags = this.options.isQueryTracing() ? types.frameFlags.tracing : 0;\n    if (this.options.getCustomPayload()) {\n      //The body may contain the custom payload\n      headerFlags |= types.frameFlags.customPayload;\n      frameWriter.writeCustomPayload(this.options.getCustomPayload());\n    }\n    frameWriter.writeShortBytes(this.queryId);\n    if(types.protocolVersion.supportsResultMetadataId(encoder.protocolVersion)) {\n      frameWriter.writeShortBytes(this.meta.resultId);\n    }\n    this.writeQueryParameters(frameWriter, encoder);\n\n    // Record the length of the body of the request before writing it\n    this.length = frameWriter.bodyLength;\n\n    return frameWriter.write(encoder.protocolVersion, streamId, headerFlags);\n  }\n\n  /**\n   * Writes v1 and v2 execute query parameters\n   * @param {FrameWriter} frameWriter\n   * @param {Encoder} encoder\n   * @param {Boolean} [isQuery] True if query, otherwise assumed to be execute request.\n   */\n  writeQueryParameters(frameWriter, encoder, isQuery) {\n    //v1: <n><value_1>....<value_n><consistency>\n    //v2: <consistency><flags>[<n><value_1>...<value_n>][<result_page_size>][<paging_state>][<serial_consistency>]\n    //v3: <consistency><flags>[<n>[name_1]<value_1>...[name_n]<value_n>][<result_page_size>][<paging_state>][<serial_consistency>][<timestamp>]\n    //dse_v1: <consistency><flags>[<n>[name_1]<value_1>...[name_n]<value_n>][<result_page_size>][<paging_state>]\n    //          [<serial_consistency>][<timestamp>][continuous_paging_options]\n    //dse_v2: <consistency><flags>[<n>[name_1]<value_1>...[name_n]<value_n>][<result_page_size>][<paging_state>]\n    //          [<serial_consistency>][<timestamp>][keyspace][continuous_paging_options]\n    let flags = 0;\n\n    const timestamp = this.options.getOrGenerateTimestamp();\n\n    if (types.protocolVersion.supportsPaging(encoder.protocolVersion)) {\n      flags |= (this.params && this.params.length) ? queryFlag.values : 0;\n      flags |= (this.options.getFetchSize() > 0) ? queryFlag.pageSize : 0;\n      flags |= this.options.getPageState() ? queryFlag.withPagingState : 0;\n      flags |= this.options.getSerialConsistency() ? queryFlag.withSerialConsistency : 0;\n      flags |= timestamp !== null && timestamp !== undefined ? queryFlag.withDefaultTimestamp : 0;\n      flags |= this.namedParameters ? queryFlag.withNameForValues : 0;\n\n      // Don't inject keyspace for EXECUTE requests as inherited from prepared statement.\n      const supportsKeyspace = isQuery && types.protocolVersion.supportsKeyspaceInRequest(encoder.protocolVersion);\n      flags |= supportsKeyspace && this.options.getKeyspace() ? queryFlag.withKeyspace : 0;\n\n      frameWriter.writeShort(this.consistency);\n      if (types.protocolVersion.uses4BytesQueryFlags(encoder.protocolVersion)) {\n        frameWriter.writeInt(flags);\n      }\n      else {\n        frameWriter.writeByte(flags);\n      }\n    }\n\n    if (this.params && this.params.length) {\n      frameWriter.writeShort(this.params.length);\n      for (let i = 0; i < this.params.length; i++) {\n        let paramValue = this.params[i];\n        if (flags & queryFlag.withNameForValues) {\n          //parameter is composed by name / value\n          frameWriter.writeString(paramValue.name);\n          paramValue = paramValue.value;\n        }\n        frameWriter.writeBytes(encoder.encode(paramValue, this.getParamType(i)));\n      }\n    }\n\n    if (!types.protocolVersion.supportsPaging(encoder.protocolVersion)) {\n      if (!this.params || !this.params.length) {\n        //zero parameters\n        frameWriter.writeShort(0);\n      }\n      frameWriter.writeShort(this.consistency);\n      return;\n    }\n    if (flags & queryFlag.pageSize) {\n      frameWriter.writeInt(this.options.getFetchSize());\n    }\n    if (flags & queryFlag.withPagingState) {\n      frameWriter.writeBytes(this.options.getPageState());\n    }\n    if (flags & queryFlag.withSerialConsistency) {\n      frameWriter.writeShort(this.options.getSerialConsistency());\n    }\n    if (flags & queryFlag.withDefaultTimestamp) {\n      frameWriter.writeLong(timestamp);\n    }\n    if (flags & queryFlag.withKeyspace) {\n      frameWriter.writeString(this.options.getKeyspace());\n    }\n  }\n}\n\nclass QueryRequest extends ExecuteRequest {\n  /**\n   * @param {String} query\n   * @param params\n   * @param {ExecutionOptions} [execOptions]\n   * @param {Boolean} [namedParameters]\n   */\n  constructor(query, params, execOptions, namedParameters) {\n    super(query, null, params, execOptions, null);\n    this.hints = this.options.getHints() || utils.emptyArray;\n    this.namedParameters = namedParameters;\n  }\n\n  getParamType(index) {\n    return this.hints[index];\n  }\n\n  write(encoder, streamId) {\n    //v1: <query><consistency>\n    //v2: <query>\n    //      <consistency><flags>[<n><value_1>...<value_n>][<result_page_size>][<paging_state>][<serial_consistency>]\n    //v3: <query>\n    //      <consistency><flags>[<n>[name_1]<value_1>...[name_n]<value_n>][<result_page_size>][<paging_state>][<serial_consistency>][<timestamp>]\n    const frameWriter = new FrameWriter(types.opcodes.query);\n    let headerFlags = this.options.isQueryTracing() ? types.frameFlags.tracing : 0;\n    if (this.options.getCustomPayload()) {\n      //The body may contain the custom payload\n      headerFlags |= types.frameFlags.customPayload;\n      frameWriter.writeCustomPayload(this.options.getCustomPayload());\n    }\n\n    frameWriter.writeLString(this.query);\n\n    if (!types.protocolVersion.supportsPaging(encoder.protocolVersion)) {\n      frameWriter.writeShort(this.consistency);\n    } else {\n      //Use the same fields as the execute writer\n      this.writeQueryParameters(frameWriter, encoder, true);\n    }\n\n    // Record the length of the body of the request before writing it\n    this.length = frameWriter.bodyLength;\n\n    return frameWriter.write(encoder.protocolVersion, streamId, headerFlags);\n  }\n}\n\nclass PrepareRequest extends Request {\n  constructor(query, keyspace) {\n    super();\n    this.query = query;\n    this.keyspace = keyspace;\n  }\n\n  write(encoder, streamId) {\n    const frameWriter = new FrameWriter(types.opcodes.prepare);\n    frameWriter.writeLString(this.query);\n    if (types.protocolVersion.supportsPrepareFlags(encoder.protocolVersion)) {\n      const flags = this.keyspace && types.protocolVersion.supportsKeyspaceInRequest(encoder.protocolVersion) ? prepareFlag.withKeyspace : 0;\n      frameWriter.writeInt(flags);\n      if (flags & prepareFlag.withKeyspace) {\n        frameWriter.writeString(this.keyspace);\n      }\n    }\n    return frameWriter.write(encoder.protocolVersion, streamId);\n  }\n}\n\nclass StartupRequest extends Request {\n\n  /**\n   * Creates a new instance of {@link StartupRequest}.\n   * @param {Object} [options]\n   * @param [options.cqlVersion]\n   * @param [options.noCompact]\n   * @param [options.clientId]\n   * @param [options.applicationName]\n   * @param [options.applicationVersion]\n   */\n  constructor(options) {\n    super();\n    this.options = options || {};\n  }\n\n  write(encoder, streamId) {\n    const frameWriter = new FrameWriter(types.opcodes.startup);\n\n    const startupOptions = {\n      CQL_VERSION: this.options.cqlVersion || '3.0.0',\n      DRIVER_NAME: packageInfo.description,\n      DRIVER_VERSION: packageInfo.version\n    };\n\n    if(this.options.noCompact) {\n      startupOptions['NO_COMPACT'] = 'true';\n    }\n\n    if (this.options.clientId) {\n      startupOptions['CLIENT_ID'] = this.options.clientId.toString();\n    }\n\n    if (this.options.applicationName) {\n      startupOptions['APPLICATION_NAME'] = this.options.applicationName;\n    }\n\n    if (this.options.applicationVersion) {\n      startupOptions['APPLICATION_VERSION'] = this.options.applicationVersion;\n    }\n\n    frameWriter.writeStringMap(startupOptions);\n    return frameWriter.write(encoder.protocolVersion, streamId);\n  }\n}\n\nclass RegisterRequest extends Request {\n  constructor(events) {\n    super();\n    this.events = events;\n  }\n\n  write(encoder, streamId) {\n    const frameWriter = new FrameWriter(types.opcodes.register);\n    frameWriter.writeStringList(this.events);\n    return frameWriter.write(encoder.protocolVersion, streamId);\n  }\n}\n\n/**\n * Represents an AUTH_RESPONSE request\n * @param {Buffer} token\n */\nclass AuthResponseRequest extends Request {\n  constructor(token) {\n    super();\n    this.token = token;\n  }\n\n  write(encoder, streamId) {\n    const frameWriter = new FrameWriter(types.opcodes.authResponse);\n    frameWriter.writeBytes(this.token);\n    return frameWriter.write(encoder.protocolVersion, streamId);\n  }\n}\n\n/**\n * Represents a protocol v1 CREDENTIALS request message\n */\nclass CredentialsRequest extends Request {\n  constructor(username, password) {\n    super();\n    this.username = username;\n    this.password = password;\n  }\n\n  write(encoder, streamId) {\n    const frameWriter = new FrameWriter(types.opcodes.credentials);\n    frameWriter.writeStringMap({ username:this.username, password:this.password });\n    return frameWriter.write(encoder.protocolVersion, streamId);\n  }\n}\n\nclass BatchRequest extends Request {\n  /**\n   * Creates a new instance of BatchRequest.\n   * @param {Array.<{query, params, [info]}>} queries Array of objects with the properties query and params\n   * @param {ExecutionOptions} execOptions\n   */\n  constructor(queries, execOptions) {\n    super();\n    this.queries = queries;\n    this.options = execOptions;\n    this.hints = execOptions.getHints() || utils.emptyArray;\n    this.type = batchType.logged;\n\n    if (execOptions.isBatchCounter()) {\n      this.type = batchType.counter;\n    } else if (!execOptions.isBatchLogged()) {\n      this.type = batchType.unlogged;\n    }\n  }\n\n  /**\n  * Writes a batch request\n  */\n  write(encoder, streamId) {\n    //v2: <type><n><query_1>...<query_n><consistency>\n    //v3: <type><n><query_1>...<query_n><consistency><flags>[<serial_consistency>][<timestamp>]\n    //dseV1+: similar to v3/v4, flags is an int instead of a byte\n    if (!this.queries || !(this.queries.length > 0)) {\n      throw new TypeError(util.format('Invalid queries provided %s', this.queries));\n    }\n    const frameWriter = new FrameWriter(types.opcodes.batch);\n    let headerFlags = this.options.isQueryTracing() ? types.frameFlags.tracing : 0;\n    if (this.options.getCustomPayload()) {\n      //The body may contain the custom payload\n      headerFlags |= types.frameFlags.customPayload;\n      frameWriter.writeCustomPayload(this.options.getCustomPayload());\n    }\n    frameWriter.writeByte(this.type);\n    frameWriter.writeShort(this.queries.length);\n    const self = this;\n    this.queries.forEach(function eachQuery(item, i) {\n      const hints = self.hints[i];\n      const params = item.params || utils.emptyArray;\n      let getParamType;\n      if (item.queryId) {\n        // Contains prepared queries\n        frameWriter.writeByte(1);\n        frameWriter.writeShortBytes(item.queryId);\n        getParamType = i => item.meta.columns[i].type;\n      }\n      else {\n        // Contains string queries\n        frameWriter.writeByte(0);\n        frameWriter.writeLString(item.query);\n        getParamType = hints ? (i => hints[i]) : (() => null);\n      }\n\n      frameWriter.writeShort(params.length);\n      params.forEach((param, index) => frameWriter.writeBytes(encoder.encode(param, getParamType(index))));\n    }, this);\n\n    frameWriter.writeShort(this.options.getConsistency());\n\n    if (types.protocolVersion.supportsTimestamp(encoder.protocolVersion)) {\n      // Batch flags\n      let flags = this.options.getSerialConsistency() ? batchFlag.withSerialConsistency : 0;\n      const timestamp = this.options.getOrGenerateTimestamp();\n      flags |= timestamp !== null && timestamp !== undefined ? batchFlag.withDefaultTimestamp : 0;\n\n      flags |= this.options.getKeyspace() && types.protocolVersion.supportsKeyspaceInRequest(encoder.protocolVersion)\n        ? batchFlag.withKeyspace : 0;\n\n      if (types.protocolVersion.uses4BytesQueryFlags(encoder.protocolVersion)) {\n        frameWriter.writeInt(flags);\n      }\n      else {\n        frameWriter.writeByte(flags);\n      }\n\n      if (flags & batchFlag.withSerialConsistency) {\n        frameWriter.writeShort(this.options.getSerialConsistency());\n      }\n\n      if (flags & batchFlag.withDefaultTimestamp) {\n        frameWriter.writeLong(timestamp);\n      }\n\n      if (flags & batchFlag.withKeyspace) {\n        frameWriter.writeString(this.options.getKeyspace());\n      }\n    }\n\n    // Set the length of the body of the request before writing it\n    this.length = frameWriter.bodyLength;\n\n    return frameWriter.write(encoder.protocolVersion, streamId, headerFlags);\n  }\n\n  clone() {\n    return new BatchRequest(this.queries, this.options);\n  }\n}\n\nfunction CancelRequest(operationId) {\n  this.streamId = null;\n  this.operationId = operationId;\n}\n\nutil.inherits(CancelRequest, Request);\n\nCancelRequest.prototype.write = function (encoder, streamId) {\n  const frameWriter = new FrameWriter(types.opcodes.cancel);\n  frameWriter.writeInt(1);\n  frameWriter.writeInt(this.operationId);\n  return frameWriter.write(encoder.protocolVersion, streamId);\n};\n\nclass OptionsRequest extends Request {\n\n  write(encoder, streamId) {\n    const frameWriter = new FrameWriter(types.opcodes.options);\n    return frameWriter.write(encoder.protocolVersion, streamId, 0);\n  }\n\n  clone() {\n    // since options has no unique state, simply return self.\n    return this;\n  }\n}\n\nconst options = new OptionsRequest();\n\nexports.AuthResponseRequest = AuthResponseRequest;\nexports.BatchRequest = BatchRequest;\nexports.CancelRequest = CancelRequest;\nexports.CredentialsRequest = CredentialsRequest;\nexports.ExecuteRequest = ExecuteRequest;\nexports.PrepareRequest = PrepareRequest;\nexports.QueryRequest = QueryRequest;\nexports.Request = Request;\nexports.RegisterRequest = RegisterRequest;\nexports.StartupRequest = StartupRequest;\nexports.options = options;\n", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst util = require('util');\nconst errors = require('../errors');\n\n/**\n * Represents the state of a {@link Client}.\n * <p>\n * Exposes information on the connections maintained by a Client at a specific time.\n * </p>\n * @alias module:metadata~ClientState\n * @constructor\n */\nclass ClientState {\n\n  /**\n   * Creates a new instance of <code>ClientState</code>.\n   * @param {Array<Host>} hosts\n   * @param {Object.<String, Number>} openConnections\n   * @param {Object.<String, Number>} inFlightQueries\n   */\n  constructor(hosts, openConnections, inFlightQueries) {\n    this._hosts = hosts;\n    this._openConnections = openConnections;\n    this._inFlightQueries = inFlightQueries;\n  }\n\n  /**\n   * Get an array of hosts to which the client is connected to.\n   * @return {Array<Host>}\n   */\n  getConnectedHosts() {\n    return this._hosts;\n  }\n\n  /**\n   * Gets the amount of open connections to a given host.\n   * @param {Host} host\n   * @return {Number}\n   */\n  getOpenConnections(host) {\n    if (!host) {\n      throw new errors.ArgumentError('Host is not defined');\n    }\n\n    return this._openConnections[host.address] || 0;\n  }\n\n  /**\n   * Gets the amount of queries that are currently being executed through a given host.\n   * <p>\n   * This corresponds to the number of queries that have been sent by the Client to server Host on one of its connections\n   * but haven't yet obtained a response.\n   * </p>\n   * @param {Host} host\n   * @return {Number}\n   */\n  getInFlightQueries(host) {\n    if (!host) {\n      throw new errors.ArgumentError('Host is not defined');\n    }\n\n    return this._inFlightQueries[host.address] || 0;\n  }\n\n  /**\n   * Returns the string representation of the instance.\n   */\n  toString() {\n    return util.format('{\"hosts\": %j, \"openConnections\": %j, \"inFlightQueries\": %j}',\n      this._hosts.map(function (h) { return h.address; }), this._openConnections, this._inFlightQueries);\n  }\n\n  /**\n   * Creates a new instance from the provided client.\n   * @param {Client} client\n   * @internal\n   * @ignore\n   */\n  static from(client) {\n    const openConnections = {};\n    const inFlightQueries = {};\n    const hostArray = [];\n\n    client.hosts.forEach(host => {\n      if (host.pool.connections.length === 0) {\n        return;\n      }\n\n      hostArray.push(host);\n      openConnections[host.address] = host.pool.connections.length;\n      inFlightQueries[host.address] = host.getInFlight();\n    });\n\n    return new ClientState(hostArray, openConnections, inFlightQueries);\n  }\n}\n\nmodule.exports = ClientState;", "module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"tls\" has been externalized for browser compatibility. Cannot access \"tls.${key}\" in client code. See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\"use strict\";\n\nconst Long = require('long');\n\nconst TWO_PWR_16_DBL = 1 << 16;\nconst TWO_PWR_32_DBL = TWO_PWR_16_DBL * TWO_PWR_16_DBL;\n\n/**\n * Constructs a signed int64 representation.\n * @ignore\n */\nclass MutableLong {\n  constructor(b00, b16, b32, b48) {\n    // Use an array of uint16\n    this._arr = [b00 & 0xffff, b16 & 0xffff, b32 & 0xffff, b48 & 0xffff];\n  }\n\n  toString() {\n    return this.toImmutable().toString();\n  }\n\n  /**\n   * Compares this value with the provided value.\n   * @param {MutableLong} other\n   * @return {number}\n   */\n  compare(other) {\n    const thisNeg = this.isNegative();\n    const otherNeg = other.isNegative();\n    if (thisNeg && !otherNeg) {\n      return -1;\n    }\n    if (!thisNeg && otherNeg) {\n      return 1;\n    }\n    // At this point the sign bits are the same\n    return this._compareBits(other);\n  }\n\n  _compareBits(other) {\n    for (let i = 3; i >= 0; i--) {\n      if (this._arr[i] > other._arr[i]) {\n        return 1;\n      }\n      if (this._arr[i] < other._arr[i]) {\n        return -1;\n      }\n    }\n    return 0;\n  }\n\n  getUint16(index) {\n    return this._arr[index];\n  }\n\n  getLowBitsUnsigned() {\n    return (this._arr[0] | ((this._arr[1] & 0xffff) << 16)) >>> 0;\n  }\n\n  getHighBitsUnsigned() {\n    return (this._arr[2] | (this._arr[3] << 16)) >>> 0;\n  }\n\n  toNumber() {\n    return (this._arr[3] << 16 | this._arr[2]) * TWO_PWR_32_DBL + ((this._arr[1] << 16 | this._arr[0]) >>> 0);\n  }\n\n  /**\n   * Performs the bitwise NOT of this value.\n   * @return {MutableLong}\n   */\n  not() {\n    this._arr[0] = ~this._arr[0] & 0xffff;\n    this._arr[1] = ~this._arr[1] & 0xffff;\n    this._arr[2] = ~this._arr[2] & 0xffff;\n    this._arr[3] = ~this._arr[3] & 0xffff;\n    return this;\n  }\n\n  add(addend) {\n    let c48 = 0, c32 = 0, c16 = 0, c00 = 0;\n    c00 += this._arr[0] + addend._arr[0];\n    this._arr[0] = c00 & 0xffff;\n    c16 += c00 >>> 16;\n    c16 += this._arr[1] + addend._arr[1];\n    this._arr[1] = c16 & 0xffff;\n    c32 += c16 >>> 16;\n    c32 += this._arr[2] + addend._arr[2];\n    this._arr[2] = c32 & 0xffff;\n    c48 += c32 >>> 16;\n    c48 += this._arr[3] + addend._arr[3];\n    this._arr[3] = c48 & 0xffff;\n    return this;\n  }\n\n  shiftLeft(numBits) {\n    if (numBits === 0) {\n      return this;\n    }\n    if (numBits >= 64) {\n      return this.toZero();\n    }\n    const remainingBits = numBits % 16;\n    const pos = Math.floor(numBits / 16);\n    if (pos > 0) {\n      this._arr[3] = this._arr[3 - pos];\n      this._arr[2] = pos > 2 ? 0 : this._arr[2 - pos];\n      this._arr[1] = pos > 1 ? 0 : this._arr[0];\n      this._arr[0] = 0;\n    }\n    if (remainingBits > 0) {\n      // shift left within the int16 and the next one\n      this._arr[3] = ((this._arr[3] << remainingBits) | (this._arr[2] >>> (16 - remainingBits))) & 0xffff;\n      this._arr[2] = ((this._arr[2] << remainingBits) | (this._arr[1] >>> (16 - remainingBits))) & 0xffff;\n      this._arr[1] = ((this._arr[1] << remainingBits) | (this._arr[0] >>> (16 - remainingBits))) & 0xffff;\n      this._arr[0] = (this._arr[0] << remainingBits) & 0xffff;\n    }\n    return this;\n  }\n\n  shiftRightUnsigned(numBits) {\n    if (numBits === 0) {\n      return this;\n    }\n    if (numBits >= 64) {\n      return this.toZero();\n    }\n    const remainingBits = numBits % 16;\n    const pos = Math.floor(numBits / 16);\n    if (pos > 0) {\n      this._arr[0] = this._arr[pos];\n      this._arr[1] = pos > 2 ? 0 : this._arr[1 + pos];\n      this._arr[2] = pos > 1 ? 0 : this._arr[3];\n      this._arr[3] = 0;\n    }\n    if (remainingBits > 0) {\n      this._arr[0] = (this._arr[0] >>> remainingBits) | ((this._arr[1] << (16 - remainingBits)) & 0xffff);\n      this._arr[1] = (this._arr[1] >>> remainingBits) | ((this._arr[2] << (16 - remainingBits)) & 0xffff);\n      this._arr[2] = (this._arr[2] >>> remainingBits) | ((this._arr[3] << (16 - remainingBits)) & 0xffff);\n      this._arr[3] = this._arr[3] >>> remainingBits;\n    }\n    return this;\n  }\n\n  or(other) {\n    this._arr[0] |= other._arr[0];\n    this._arr[1] |= other._arr[1];\n    this._arr[2] |= other._arr[2];\n    this._arr[3] |= other._arr[3];\n    return this;\n  }\n\n  /**\n   * Returns the bitwise XOR of this Long and the given one.\n   * @param {MutableLong} other\n   * @returns {MutableLong} this instance.\n   */\n  xor(other) {\n    this._arr[0] ^= other._arr[0];\n    this._arr[1] ^= other._arr[1];\n    this._arr[2] ^= other._arr[2];\n    this._arr[3] ^= other._arr[3];\n    return this;\n  }\n\n  clone() {\n    return new MutableLong(this._arr[0], this._arr[1], this._arr[2], this._arr[3]);\n  }\n\n  /**\n   * Performs the product of this and the specified Long.\n   * @param {MutableLong} multiplier\n   * @returns {MutableLong} this instance.\n   */\n  multiply(multiplier) {\n    let negate = false;\n    if (this.isZero() || multiplier.isZero()) {\n      return this.toZero();\n    }\n    if (this.isNegative()) {\n      this.negate();\n      negate = !negate;\n    }\n    if (multiplier.isNegative()) {\n      multiplier = multiplier.clone().negate();\n      negate = !negate;\n    }\n    // We can skip products that would overflow.\n    let c48 = 0, c32 = 0, c16 = 0, c00 = 0;\n    c00 += this._arr[0] * multiplier._arr[0];\n    c16 += c00 >>> 16;\n    c16 += this._arr[1] * multiplier._arr[0];\n    c32 += c16 >>> 16;\n    c16 &= 0xFFFF;\n    c16 += this._arr[0] * multiplier._arr[1];\n    c32 += c16 >>> 16;\n    c32 += this._arr[2] * multiplier._arr[0];\n    c48 += c32 >>> 16;\n    c32 &= 0xFFFF;\n    c32 += this._arr[1] * multiplier._arr[1];\n    c48 += c32 >>> 16;\n    c32 &= 0xFFFF;\n    c32 += this._arr[0] * multiplier._arr[2];\n    c48 += c32 >>> 16;\n    c48 += this._arr[3] * multiplier._arr[0] + this._arr[2] * multiplier._arr[1] +\n      this._arr[1] * multiplier._arr[2] + this._arr[0] * multiplier._arr[3];\n    this._arr[0] = c00 & 0xffff;\n    this._arr[1] = c16 & 0xffff;\n    this._arr[2] = c32 & 0xffff;\n    this._arr[3] = c48 & 0xffff;\n    if (negate) {\n      this.negate();\n    }\n    return this;\n  }\n\n  toZero() {\n    this._arr[3] = this._arr[2] = this._arr[1] = this._arr[0] = 0;\n    return this;\n  }\n\n  isZero() {\n    return (this._arr[3] === 0 && this._arr[2] === 0 && this._arr[1] === 0 && this._arr[0] === 0);\n  }\n\n  isNegative() {\n    // most significant bit turned on\n    return (this._arr[3] & 0x8000) > 0;\n  }\n\n  /**\n   * Negates this value.\n   * @return {MutableLong}\n   */\n  negate() {\n    return this.not().add(MutableLong.one);\n  }\n\n  equals(other) {\n    if (!(other instanceof MutableLong)) {\n      return false;\n    }\n    return (this._arr[0] === other._arr[0] && this._arr[1] === other._arr[1] &&\n      this._arr[2] === other._arr[2] && this._arr[3] === other._arr[3]);\n  }\n\n  toImmutable() {\n    return Long.fromBits(this.getLowBitsUnsigned(), this.getHighBitsUnsigned(), false);\n  }\n\n  static fromNumber(value) {\n    if (isNaN(value) || !isFinite(value)) {\n      return new MutableLong();\n    }\n    if (value < 0) {\n      return MutableLong.fromNumber(-value).negate();\n    }\n    const low32Bits = value % TWO_PWR_32_DBL;\n    const high32Bits = value / TWO_PWR_32_DBL;\n    return MutableLong.fromBits(low32Bits, high32Bits);\n  }\n\n  static fromBits(low32Bits, high32Bits) {\n    return new MutableLong(low32Bits, low32Bits >>> 16, high32Bits, high32Bits >>> 16);\n  }\n\n  /**\n   * Returns a Long representation of the given string, written using the specified radix.\n   * @param {String} str\n   * @param {Number} [radix]\n   * @return {MutableLong}\n   */\n  static fromString(str, radix) {\n    if (typeof str !== 'string') {\n      throw new Error('String format is not valid: ' + str);\n    }\n    if (str.length === 0) {\n      throw Error('number format error: empty string');\n    }\n    if (str === \"NaN\" || str === \"Infinity\" || str === \"+Infinity\" || str === \"-Infinity\") {\n      return new MutableLong();\n    }\n    radix = radix || 10;\n    if (radix < 2 || radix > 36) {\n      throw Error('radix out of range: ' + radix);\n    }\n    let p;\n    if ((p = str.indexOf('-')) > 0) {\n      throw Error('number format error: interior \"-\" character: ' + str);\n    }\n    if (p === 0) {\n      return MutableLong.fromString(str.substring(1), radix).negate();\n    }\n    // Do several (8) digits each time through the loop\n    const radixToPower = MutableLong.fromNumber(Math.pow(radix, 8));\n    const result = new MutableLong();\n    for (let i = 0; i < str.length; i += 8) {\n      const size = Math.min(8, str.length - i);\n      const value = parseInt(str.substring(i, i + size), radix);\n      if (size < 8) {\n        const power = MutableLong.fromNumber(Math.pow(radix, size));\n        result.multiply(power).add(MutableLong.fromNumber(value));\n        break;\n      }\n      result.multiply(radixToPower);\n      result.add(MutableLong.fromNumber(value));\n    }\n    return result;\n  }\n}\n\nMutableLong.one = new MutableLong(1, 0, 0, 0);\n\nmodule.exports = MutableLong;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst types = require('./types');\nconst util = require('util');\n\nconst _Murmur3TokenType = types.dataTypes.getByName('bigint');\nconst _RandomTokenType = types.dataTypes.getByName('varint');\nconst _OrderedTokenType = types.dataTypes.getByName('blob');\n\n/**\n * Represents a token on the Cassandra ring.\n */\nclass Token {\n  constructor(value) {\n    this._value = value;\n  }\n\n  /**\n   * @returns {{code: number, info: *|Object}} The type info for the\n   *                                           type of the value of the token.\n   */\n  getType() {\n    throw new Error('You must implement a getType function for this Token instance');\n  }\n\n  /**\n   * @returns {*} The raw value of the token.\n   */\n  getValue() {\n    return this._value;\n  }\n\n  toString() {\n    return this._value.toString();\n  }\n\n  /**\n   * Returns 0 if the values are equal, 1 if greater than other, -1\n   * otherwise.\n   *\n   * @param {Token} other \n   * @returns {Number}\n   */\n  compare(other) {\n    return this._value.compare(other._value);\n  }\n\n  equals(other) {\n    return this.compare(other) === 0;\n  }\n\n  inspect() {\n    return this.constructor.name + ' { ' + this.toString() + ' }';\n  }\n}\n\n/**\n * Represents a token from a Cassandra ring where the partitioner\n * is Murmur3Partitioner.\n * \n * The raw token type is a varint (represented by MutableLong).\n */\nclass Murmur3Token extends Token {\n  constructor(value) {\n    super(value);\n  }\n\n  getType() {\n    return _Murmur3TokenType;\n  }\n}\n\n/**\n * Represents a token from a Cassandra ring where the partitioner\n * is RandomPartitioner.\n * \n * The raw token type is a bigint (represented by Number).\n */\nclass RandomToken extends Token {\n  constructor(value) {\n    super(value);\n  }\n\n  getType() {\n    return _RandomTokenType;\n  }\n}\n\n/**\n * Represents a token from a Cassandra ring where the partitioner\n * is ByteOrderedPartitioner.\n * \n * The raw token type is a blob (represented by Buffer or Array).\n */\nclass ByteOrderedToken extends Token {\n  constructor(value) {\n    super(value);\n  }\n\n  getType() {\n    return _OrderedTokenType;\n  }\n\n  toString() {\n    return this._value.toString('hex').toUpperCase();\n  }\n}\n\n/** \n * Represents a range of tokens on a Cassandra ring.\n *\n * A range is start-exclusive and end-inclusive.  It is empty when\n * start and end are the same token, except if that is the minimum\n * token, in which case the range covers the whole ring (this is\n * consistent with the behavior of CQL range queries).\n *\n * Note that CQL does not handle wrapping.  To query all partitions\n * in a range, see {@link unwrap}.\n */\nclass TokenRange {\n  constructor(start, end, tokenizer) {\n    this.start = start;\n    this.end = end;\n    Object.defineProperty(this, '_tokenizer', { value: tokenizer, enumerable: false});\n  }\n\n  /**\n   * Splits this range into a number of smaller ranges of equal \"size\"\n   * (referring to the number of tokens, not the actual amount of data).\n   *\n   * Splitting an empty range is not permitted.  But not that, in edge\n   * cases, splitting a range might produce one or more empty ranges.\n   *\n   * @param {Number} numberOfSplits Number of splits to make.\n   * @returns {TokenRange[]} Split ranges.\n   * @throws {Error} If splitting an empty range.\n   */\n  splitEvenly(numberOfSplits) {\n    if (numberOfSplits < 1) {\n      throw new Error(util.format(\"numberOfSplits (%d) must be greater than 0.\", numberOfSplits));\n    }\n    if (this.isEmpty()) {\n      throw new Error(\"Can't split empty range \" + this.toString());\n    }\n\n    const tokenRanges = [];\n    const splitPoints = this._tokenizer.split(this.start, this.end, numberOfSplits);\n    let splitStart = this.start;\n    let splitEnd;\n    for (let splitIndex = 0; splitIndex < splitPoints.length; splitIndex++) {\n      splitEnd = splitPoints[splitIndex];\n      tokenRanges.push(new TokenRange(splitStart, splitEnd, this._tokenizer));\n      splitStart = splitEnd;\n    }\n    tokenRanges.push(new TokenRange(splitStart, this.end, this._tokenizer));\n    return tokenRanges;\n  }\n\n  /**\n   * A range is empty when start and end are the same token, except if\n   * that is the minimum token, in which case the range covers the\n   * whole ring.  This is consistent with the behavior of CQL range\n   * queries.\n   *\n   * @returns {boolean} Whether this range is empty.\n   */\n  isEmpty() {\n    return this.start.equals(this.end) && !this.start.equals(this._tokenizer.minToken());\n  }\n\n  /**\n   * A range wraps around the end of the ring when the start token\n   * is greater than the end token and the end token is not the \n   * minimum token.\n   *\n   * @returns {boolean} Whether this range wraps around.\n   */\n  isWrappedAround() {\n    return this.start.compare(this.end) > 0 && !this.end.equals(this._tokenizer.minToken());\n  }\n\n  /**\n   * Splits this range into a list of two non-wrapping ranges.\n   *\n   * This will return the range itself if it is non-wrapped, or two\n   * ranges otherwise.\n   *\n   * This is useful for CQL range queries, which do not handle\n   * wrapping.\n   *\n   * @returns {TokenRange[]} The list of non-wrapping ranges.\n   */\n  unwrap() {\n    if (this.isWrappedAround()) {\n      return [\n        new TokenRange(this.start, this._tokenizer.minToken(), this._tokenizer),\n        new TokenRange(this._tokenizer.minToken(), this.end, this._tokenizer)\n      ];\n    }\n    return [this];\n  }\n\n  /**\n   * Whether this range contains a given Token.\n   * \n   * @param {*} token Token to check for.\n   * @returns {boolean} Whether or not the Token is in this range.\n   */\n  contains(token) {\n    if (this.isEmpty()) {\n      return false;\n    }\n    const minToken = this._tokenizer.minToken();\n    if (this.end.equals(minToken)) {\n      if (this.start.equals(minToken)) {\n        return true; // ]minToken, minToken] === full ring\n      } else if (token.equals(minToken)) {\n        return true;\n      }\n      return token.compare(this.start) > 0;\n    }\n\n    const isAfterStart = token.compare(this.start) > 0;\n    const isBeforeEnd = token.compare(this.end) <= 0;\n    // if wrapped around ring, token is in ring if its after start or before end.\n    // otherwise, token is in ring if its after start and before end.\n    return this.isWrappedAround() \n      ? isAfterStart || isBeforeEnd\n      : isAfterStart && isBeforeEnd;\n  }\n\n  /**\n   * Determines if the input range is equivalent to this one.\n   * \n   * @param {TokenRange} other Range to compare with.\n   * @returns {boolean} Whether or not the ranges are equal.\n   */\n  equals(other) {\n    if (other === this) {\n      return true;\n    } else if (other instanceof TokenRange) {\n      return this.compare(other) === 0;\n    }\n    return false;\n  }\n\n  /**\n   * Returns 0 if the values are equal, otherwise compares against\n   * start, if start is equal, compares against end.\n   *  \n   * @param {TokenRange} other Range to compare with.\n   * @returns {Number} \n   */\n  compare(other) {\n    const compareStart = this.start.compare(other.start);\n    return compareStart !== 0 ? compareStart : this.end.compare(other.end);\n  }\n\n  toString() {\n    return util.format(']%s, %s]', \n      this.start.toString(),\n      this.end.toString()\n    );\n  }\n}\n\nexports.Token = Token;\nexports.TokenRange = TokenRange;\nexports.ByteOrderedToken = ByteOrderedToken;\nexports.Murmur3Token = Murmur3Token;\nexports.RandomToken = RandomToken;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst utils = require('../../utils');\nconst Long = require('long');\n\n/**\n * Regex to parse dates in the following format YYYY-MM-DDThh:mm:ss.mssZ\n * Looks cumbersome but it's straightforward:\n * - \"(\\d{1,6})\": year mandatory 1 to 6 digits\n * - (?:-(\\d{1,2}))?(?:-(\\d{1,2}))? two non-capturing groups representing the month and day (1 to 2 digits captured).\n * - (?:T(\\d{1,2}?)?(?::(\\d{1,2}))?(?::(\\d{1,2}))?)?Z? A non-capturing group for the time portion\n * @private\n */\nconst dateRegex =\n  /^[-+]?(\\d{1,6})(?:-(\\d{1,2}))?(?:-(\\d{1,2}))?(?:T(\\d{1,2}?)?(?::(\\d{1,2}))?(?::(\\d{1,2})(?:\\.(\\d{1,3}))?)?)?Z?$/;\nconst multipleBoundariesRegex = /^\\[(.+?) TO (.+)]$/;\nconst unbounded = Object.freeze(new DateRangeBound(null, -1));\n\nconst dateRangeType = {\n  // single value as in \"2001-01-01\"\n  singleValue: 0,\n  // closed range as in \"[2001-01-01 TO 2001-01-31]\"\n  closedRange: 1,\n  // open range high as in \"[2001-01-01 TO *]\"\n  openRangeHigh: 2,\n  // - 0x03 - open range low as in \"[* TO 2001-01-01]\"\n  openRangeLow: 3,\n  // - 0x04 - both ranges open as in \"[* TO *]\"\n  openBoth: 4,\n  // - 0x05 - single open range as in \"[*]\"\n  openSingle: 5\n};\n\n/**\n * Defines the possible values of date range precision.\n * @type {Object}\n * @property {Number} year\n * @property {Number} month\n * @property {Number} day\n * @property {Number} hour\n * @property {Number} minute\n * @property {Number} second\n * @property {Number} millisecond\n * @memberof module:search\n */\nconst dateRangePrecision = {\n  year: 0,\n  month: 1,\n  day: 2,\n  hour: 3,\n  minute: 4,\n  second: 5,\n  millisecond: 6\n};\n\n/**\n * Creates a new instance of <code>DateRange</code> using a lower bound and an upper bound.\n * <p>Consider using <code>DateRange.fromString()</code> to create instances more easily.</p>\n * @classdesc\n * Represents a range of dates, corresponding to the Apache Solr type\n * <a href=\"https://cwiki.apache.org/confluence/display/solr/Working+with+Dates\"><code>DateRangeField</code></a>.\n * <p>\n *   A date range can have one or two bounds, namely lower bound and upper bound, to represent an interval of time.\n *   Date range bounds are both inclusive. For example:\n * </p>\n * <ul>\n *   <li><code>2015 TO 2016-10</code> represents from the first day of 2015 to the last day of October 2016</li>\n *   <li><code>2015</code> represents during the course of the year 2015.</li>\n *   <li><code>2017 TO *</code> represents any date greater or equals to the first day of the year 2017.</li>\n * </ul>\n * <p>\n *   Note that this JavaScript representation of <code>DateRangeField</code> does not support Dates outside of the range\n *   supported by ECMAScript Date: 100,000,000 days to 100,000,000 days measured relative to midnight at the\n *   beginning of 01 January, 1970 UTC. Being <code>-271821-04-20T00:00:00.000Z</code> the minimum lower boundary\n *   and <code>275760-09-13T00:00:00.000Z</code> the maximum higher boundary.\n * <p>\n * @param {DateRangeBound} lowerBound A value representing the range lower bound, composed by a\n * <code>Date</code> and a precision. Use <code>DateRangeBound.unbounded</code> for an open lower bound.\n * @param {DateRangeBound} [upperBound] A value representing the range upper bound, composed by a\n * <code>Date</code> and a precision. Use <code>DateRangeBound.unbounded</code> for an open upper bound. When it's not\n * defined, the <code>DateRange</code> instance is considered as a single value range.\n * @constructor\n * @memberOf module:datastax/search\n */\nfunction DateRange(lowerBound, upperBound) {\n  if (!lowerBound) {\n    throw new TypeError('The lower boundaries must be defined');\n  }\n  /**\n   * Gets the lower bound of this range (inclusive).\n   * @type {DateRangeBound}\n   */\n  this.lowerBound = lowerBound;\n  /**\n   * Gets the upper bound of this range (inclusive).\n   * @type {DateRangeBound|null}\n   */\n  this.upperBound = upperBound || null;\n\n  // Define the type\n  if (this.upperBound === null) {\n    if (this.lowerBound !== unbounded) {\n      this._type = dateRangeType.singleValue;\n    }\n    else {\n      this._type = dateRangeType.openSingle;\n    }\n  }\n  else {\n    if (this.lowerBound !== unbounded) {\n      this._type = this.upperBound !== unbounded ? dateRangeType.closedRange : dateRangeType.openRangeHigh;\n    }\n    else {\n      this._type = this.upperBound !== unbounded ? dateRangeType.openRangeLow : dateRangeType.openBoth;\n    }\n  }\n}\n\n/**\n * Returns true if the value of this DateRange instance and other are the same.\n * @param {DateRange} other\n * @returns {Boolean}\n */\nDateRange.prototype.equals = function (other) {\n  if (!(other instanceof DateRange)) {\n    return false;\n  }\n  return (other.lowerBound.equals(this.lowerBound) &&\n  (other.upperBound ? other.upperBound.equals(this.upperBound) : !this.upperBound));\n};\n\n/**\n * Returns the string representation of the instance.\n * @return {String}\n */\nDateRange.prototype.toString = function () {\n  if (this.upperBound === null) {\n    return this.lowerBound.toString();\n  }\n  return '[' + this.lowerBound.toString() + ' TO ' + this.upperBound.toString() + ']';\n};\n\nDateRange.prototype.toBuffer = function () {\n  // Serializes the value containing:\n  // <type>[<time0><precision0><time1><precision1>]\n  if (this._type === dateRangeType.openBoth || this._type === dateRangeType.openSingle) {\n    return utils.allocBufferFromArray([ this._type ]);\n  }\n  let buffer;\n  let offset = 0;\n  if (this._type !== dateRangeType.closedRange) {\n    // byte + long + byte\n    const boundary = this._type !== dateRangeType.openRangeLow ? this.lowerBound : this.upperBound;\n    buffer = utils.allocBufferUnsafe(10);\n    buffer.writeUInt8(this._type, offset++);\n    offset = writeDate(boundary.date, buffer, offset);\n    buffer.writeUInt8(boundary.precision, offset);\n    return buffer;\n  }\n  // byte + long + byte + long + byte\n  buffer = utils.allocBufferUnsafe(19);\n  buffer.writeUInt8(this._type, offset++);\n  offset = writeDate(this.lowerBound.date, buffer, offset);\n  buffer.writeUInt8(this.lowerBound.precision, offset++);\n  offset = writeDate(this.upperBound.date, buffer, offset);\n  buffer.writeUInt8(this.upperBound.precision, offset);\n  return buffer;\n};\n\n/**\n * Returns the <code>DateRange</code> representation of a given string.\n * <p>String representations of dates are always expressed in Coordinated Universal Time (UTC)</p>\n * @param {String} dateRangeString\n */\nDateRange.fromString = function (dateRangeString) {\n  const matches = multipleBoundariesRegex.exec(dateRangeString);\n  if (!matches) {\n    return new DateRange(DateRangeBound.toLowerBound(DateRangeBound.fromString(dateRangeString)));\n  }\n  return new DateRange(DateRangeBound.toLowerBound(DateRangeBound.fromString(matches[1])), DateRangeBound.toUpperBound(DateRangeBound.fromString(matches[2])));\n};\n\n/**\n * Deserializes the buffer into a <code>DateRange</code>\n * @param {Buffer} buffer\n * @return {DateRange}\n */\nDateRange.fromBuffer = function (buffer) {\n  if (buffer.length === 0) {\n    throw new TypeError('DateRange serialized value must have at least 1 byte');\n  }\n  const type = buffer.readUInt8(0);\n  if (type === dateRangeType.openBoth) {\n    return new DateRange(unbounded, unbounded);\n  }\n  if (type === dateRangeType.openSingle) {\n    return new DateRange(unbounded);\n  }\n  let offset = 1;\n  let date1;\n  let lowerBound;\n  let upperBound = null;\n  if (type !== dateRangeType.closedRange) {\n    date1 = readDate(buffer, offset);\n    offset += 8;\n    lowerBound = new DateRangeBound(date1, buffer.readUInt8(offset));\n    if (type === dateRangeType.openRangeLow) {\n      // lower boundary is open, the first serialized boundary is the upperBound\n      upperBound = lowerBound;\n      lowerBound = unbounded;\n    }\n    else {\n      upperBound = type === dateRangeType.openRangeHigh ? unbounded : null;\n    }\n    return new DateRange(lowerBound, upperBound);\n  }\n  date1 = readDate(buffer, offset);\n  offset += 8;\n  lowerBound = new DateRangeBound(date1, buffer.readUInt8(offset++));\n  const date2 = readDate(buffer, offset);\n  offset += 8;\n  upperBound = new DateRangeBound(date2, buffer.readUInt8(offset));\n  return new DateRange(lowerBound, upperBound);\n};\n\n/**\n * Writes a Date, long millis since epoch, to a buffer starting from offset.\n * @param {Date} date\n * @param {Buffer} buffer\n * @param {Number} offset\n * @return {Number} The new offset.\n * @private\n */\nfunction writeDate(date, buffer, offset) {\n  const long = Long.fromNumber(date.getTime());\n  buffer.writeUInt32BE(long.getHighBitsUnsigned(), offset);\n  buffer.writeUInt32BE(long.getLowBitsUnsigned(), offset + 4);\n  return offset + 8;\n}\n\n/**\n * Reads a Date, long millis since epoch, from a buffer starting from offset.\n * @param {Buffer} buffer\n * @param {Number} offset\n * @return {Date}\n * @private\n */\nfunction readDate(buffer, offset) {\n  const long = new Long(buffer.readInt32BE(offset+4), buffer.readInt32BE(offset));\n  return new Date(long.toNumber());\n}\n\n/**\n * @classdesc\n * Represents a date range boundary, composed by a <code>Date</code> and a precision.\n * @param {Date} date The timestamp portion, representing a single moment in time. Consider using\n * <code>Date.UTC()</code> method to build the <code>Date</code> instance.\n * @param {Number} precision The precision portion. Valid values for <code>DateRangeBound</code> precision are\n * defined in the [dateRangePrecision]{@link module:datastax/search~dateRangePrecision} member.\n * @constructor\n * @memberOf module:datastax/search\n */\nfunction DateRangeBound(date, precision) {\n  /**\n   * The timestamp portion of the boundary.\n   * @type {Date}\n   */\n  this.date = date;\n  /**\n   * The precision portion of the boundary. Valid values are defined in the\n   * [dateRangePrecision]{@link module:datastax/search~dateRangePrecision} member.\n   * @type {Number}\n   */\n  this.precision = precision;\n}\n\n/**\n * Returns the string representation of the instance.\n * @return {String}\n */\nDateRangeBound.prototype.toString = function () {\n  if (this.precision === -1) {\n    return '*';\n  }\n  let precision = 0;\n  const isoString = this.date.toISOString();\n  let i;\n  let char;\n  // The years take at least the first 4 characters\n  for (i = 4; i < isoString.length && precision <= this.precision; i++) {\n    char = isoString.charAt(i);\n    if (precision === dateRangePrecision.day && char === 'T') {\n      precision = dateRangePrecision.hour;\n      continue;\n    }\n    if (precision >= dateRangePrecision.hour && char === ':' || char === '.') {\n      precision++;\n      continue;\n    }\n    if (precision < dateRangePrecision.day && char === '-') {\n      precision++;\n    }\n  }\n  let start = 0;\n  const firstChar = isoString.charAt(0);\n  let sign = '';\n  let toRemoveIndex = 4;\n  if (firstChar === '+' || firstChar === '-') {\n    sign = firstChar;\n    if (firstChar === '-') {\n      // since we are retaining the -, don't remove as many zeros.\n      toRemoveIndex = 3;\n    }\n    // Remove additional zeros\n    for (start = 1; start < toRemoveIndex; start++) {\n      if (isoString.charAt(start) !== '0') {\n        break;\n      }\n    }\n  }\n  if (this.precision !== dateRangePrecision.millisecond) {\n    // i holds the position of the first char that marks the end of a precision (ie: '-', 'T', ...),\n    // we should not include it in the result, except its the 'Z' char for the complete representation\n    i--;\n  }\n  return sign + isoString.substring(start, i);\n};\n\n/**\n * Returns true if the value of this DateRange instance and other are the same.\n * @param {DateRangeBound} other\n * @return {boolean}\n */\nDateRangeBound.prototype.equals = function (other) {\n  if (!(other instanceof DateRangeBound)) {\n    return false;\n  }\n  if (other.precision !== this.precision) {\n    return false;\n  }\n  return datesEqual(other.date, this.date);\n};\n\nfunction datesEqual(d1, d2) {\n  const t1 = d1 ? d1.getTime() : null;\n  const t2 = d2 ? d2.getTime() : null;\n  return t1 === t2;\n}\n\nDateRangeBound.prototype.isUnbounded = function () {\n  return (this.precision === -1);\n};\n\n/**\n * Parses a date string and returns a DateRangeBound.\n * @param {String} boundaryString\n * @return {DateRangeBound}\n */\nDateRangeBound.fromString = function(boundaryString) {\n  if (!boundaryString) {\n    return null;\n  }\n  if (boundaryString === '*') {\n    return unbounded;\n  }\n  const matches = dateRegex.exec(boundaryString);\n  if (!matches) {\n    throw TypeError('String provided is not a valid date ' + boundaryString);\n  }\n  if (matches[7] !== undefined && matches[5] === undefined) {\n    // Due to a limitation in the regex, its possible to match dates like 2015T03:02.001, without the seconds\n    // portion but with the milliseconds specified.\n    throw new TypeError('String representation of the date contains the milliseconds portion but not the seconds: ' +\n      boundaryString);\n  }\n  const builder = new BoundaryBuilder(boundaryString.charAt(0) === '-');\n  for (let i = 1; i < matches.length; i++) {\n    builder.set(i-1, matches[i], boundaryString);\n  }\n  return builder.build();\n};\n\n/**\n * The unbounded {@link DateRangeBound} instance. Unbounded bounds are syntactically represented by a <code>*</code>\n * (star) sign.\n * @type {DateRangeBound}\n */\nDateRangeBound.unbounded = unbounded;\n\n/**\n * Converts a {DateRangeBound} into a lower-bounded bound by rounding down its date\n * based on its precision.\n *\n * @param {DateRangeBound} bound The bound to round down.\n * @returns {DateRangeBound} with the date rounded down to the given precision.\n */\nDateRangeBound.toLowerBound = function (bound) {\n  if(bound === unbounded) {\n    return bound;\n  }\n  const rounded = new Date(bound.date.getTime());\n  // in this case we want to fallthrough\n  /* eslint-disable no-fallthrough */\n  switch (bound.precision) {\n    case dateRangePrecision.year:\n      rounded.setUTCMonth(0);\n    case dateRangePrecision.month:\n      rounded.setUTCDate(1);\n    case dateRangePrecision.day:\n      rounded.setUTCHours(0);\n    case dateRangePrecision.hour:\n      rounded.setUTCMinutes(0);\n    case dateRangePrecision.minute:\n      rounded.setUTCSeconds(0);\n    case dateRangePrecision.second:\n      rounded.setUTCMilliseconds(0);\n  }\n  /* eslint-enable no-fallthrough */\n  return new DateRangeBound(rounded, bound.precision);\n};\n\n/**\n * Converts a {DateRangeBound} into a upper-bounded bound by rounding up its date\n * based on its precision.\n *\n * @param {DateRangeBound} bound The bound to round up.\n * @returns {DateRangeBound} with the date rounded up to the given precision.\n */\nDateRangeBound.toUpperBound = function (bound) {\n  if (bound === unbounded) {\n    return bound;\n  }\n  const rounded = new Date(bound.date.getTime());\n  // in this case we want to fallthrough\n  /* eslint-disable no-fallthrough */\n  switch (bound.precision) {\n    case dateRangePrecision.year:\n      rounded.setUTCMonth(11);\n    case dateRangePrecision.month:\n      // Advance to the beginning of next month and set day of month to 0\n      // which sets the date to the last day of the previous month.\n      // This gives us the effect of YYYY-MM-LastDayOfThatMonth\n      rounded.setUTCMonth(rounded.getUTCMonth() + 1, 0);\n    case dateRangePrecision.day:\n      rounded.setUTCHours(23);\n    case dateRangePrecision.hour:\n      rounded.setUTCMinutes(59);\n    case dateRangePrecision.minute:\n      rounded.setUTCSeconds(59);\n    case dateRangePrecision.second:\n      rounded.setUTCMilliseconds(999);\n  }\n  /* eslint-enable no-fallthrough */\n  return new DateRangeBound(rounded, bound.precision);\n};\n\n/** @private */\nfunction BoundaryBuilder(isNegative) {\n  this._sign = isNegative ? -1 : 1;\n  this._index = 0;\n  this._values = new Int32Array(7);\n}\n\nBoundaryBuilder.prototype.set = function (index, value, stringDate) {\n  if (value === undefined) {\n    return;\n  }\n  if (index > 6) {\n    throw new TypeError('Index out of bounds: ' + index);\n  }\n  if (index > this._index) {\n    this._index = index;\n  }\n  const numValue = +value;\n  switch (index) {\n    case dateRangePrecision.month:\n      if (numValue < 1 || numValue > 12) {\n        throw new TypeError('Month portion is not valid for date: ' + stringDate);\n      }\n      break;\n    case dateRangePrecision.day:\n      if (numValue < 1 || numValue > 31) {\n        throw new TypeError('Day portion is not valid for date: ' + stringDate);\n      }\n      break;\n    case dateRangePrecision.hour:\n      if (numValue > 23) {\n        throw new TypeError('Hour portion is not valid for date: ' + stringDate);\n      }\n      break;\n    case dateRangePrecision.minute:\n    case dateRangePrecision.second:\n      if (numValue > 59) {\n        throw new TypeError('Minute/second portion is not valid for date: ' + stringDate);\n      }\n      break;\n    case dateRangePrecision.millisecond:\n      if (numValue > 999) {\n        throw new TypeError('Millisecond portion is not valid for date: ' + stringDate);\n      }\n      break;\n  }\n  this._values[index] = numValue;\n};\n\n/** @return {DateRangeBound} */\nBoundaryBuilder.prototype.build = function () {\n  const date = new Date(0);\n  let month = this._values[1];\n  if (month) {\n    // ES Date months are represented from 0 to 11\n    month--;\n  }\n  date.setUTCFullYear(this._sign * this._values[0], month, this._values[2] || 1);\n  date.setUTCHours(this._values[3], this._values[4], this._values[5], this._values[6]);\n  return new DateRangeBound(date, this._index);\n};\n\nexports.unbounded = unbounded;\nexports.dateRangePrecision = dateRangePrecision;\nexports.DateRange = DateRange;\nexports.DateRangeBound = DateRangeBound;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst dateRangeModule = require('./date-range');\n\n/**\n * Search module.\n * <p>\n *   Contains the classes to represent the set of  types for search data that come with DSE 5.1+\n * </p>\n * @module datastax/search\n */\n\nexports.DateRange = dateRangeModule.DateRange;\nexports.DateRangeBound = dateRangeModule.DateRangeBound;\nexports.dateRangePrecision = dateRangeModule.dateRangePrecision;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst endianness = {\n  '0': 'BE',\n  '1': 'LE'\n};\n\nfunction Geometry() {\n\n}\n\nGeometry.types = {\n  Point2D: 1,\n  LineString: 2,\n  Polygon: 3\n};\n\n/**\n * @protected\n * @param {Number} code\n * @returns {String}\n * @ignore\n */\nGeometry.getEndianness = function (code) {\n  const value = endianness[code.toString()];\n  if (typeof value === 'undefined') {\n    throw new TypeError('Invalid endianness with code ' + code);\n  }\n  return value;\n};\n\n/**\n * Reads an int32 from binary representation based on endianness.\n * @protected\n * @param {Buffer} buffer\n * @param {String} endianness\n * @param {Number} offset\n * @returns Number\n * @ignore\n */\nGeometry.readInt32 = function (buffer, endianness, offset) {\n  if (endianness === 'BE') {\n    return buffer.readInt32BE(offset, true);\n  }\n  return buffer.readInt32LE(offset, true);\n};\n\n/**\n * Reads an 64-bit double from binary representation based on endianness.\n * @protected\n * @param {Buffer} buffer\n * @param {String} endianness\n * @param {Number} offset\n * @returns Number\n * @ignore\n */\nGeometry.readDouble = function (buffer, endianness, offset) {\n  if (endianness === 'BE') {\n    return buffer.readDoubleBE(offset, true);\n  }\n  return buffer.readDoubleLE(offset, true);\n};\n\n/**\n * Writes an 32-bit integer to binary representation based on OS endianness.\n * @protected\n * @param {Number} val\n * @param {Buffer} buffer\n * @param {Number} offset\n * @ignore\n */\nGeometry.prototype.writeInt32 = function (val, buffer, offset) {\n  if (this.useBESerialization()) {\n    return buffer.writeInt32BE(val, offset, true);\n  }\n  return buffer.writeInt32LE(val, offset, true);\n};\n\n/**\n * Writes an 64-bit double to binary representation based on OS endianness.\n * @protected\n * @param {Number} val\n * @param {Buffer} buffer\n * @param {Number} offset\n * @ignore\n */\nGeometry.prototype.writeDouble = function (val, buffer, offset) {\n  if (this.useBESerialization()) {\n    return buffer.writeDoubleBE(val, offset, true);\n  }\n  return buffer.writeDoubleLE(val, offset, true);\n};\n\n/**\n * Writes an 8-bit int that represents the OS endianness.\n * @protected\n * @param {Buffer} buffer\n * @param {Number} offset\n * @ignore\n */\nGeometry.prototype.writeEndianness = function (buffer, offset) {\n  if (this.useBESerialization()) {\n    return buffer.writeInt8(0, offset, true);\n  }\n  return buffer.writeInt8(1, offset, true);\n};\n\n/**\n * Returns true if the serialization must be done in big-endian format.\n * Designed to allow injection of OS endianness.\n * @abstract\n * @ignore\n */\nGeometry.prototype.useBESerialization = function () {\n  throw new Error('Not Implemented');\n};\n\nmodule.exports = Geometry;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst util = require('util');\nconst utils = require('../utils');\nconst Geometry = require('./geometry');\n\n/**\n * Creates a new {@link Point} instance.\n * @classdesc\n * A Point is a zero-dimensional object that represents a specific (X,Y)\n * location in a two-dimensional XY-Plane. In case of Geographic Coordinate\n * Systems, the X coordinate is the longitude and the Y is the latitude.\n * @param {Number} x The X coordinate.\n * @param {Number} y The Y coordinate.\n * @extends {Geometry}\n * @alias module:geometry~Point\n * @constructor\n */\nfunction Point(x, y) {\n  if (typeof x !== 'number' || typeof y !== 'number') {\n    throw new TypeError('X and Y must be numbers');\n  }\n  if (isNaN(x) || isNaN(y)) {\n    throw new TypeError('X and Y must be numbers');\n  }\n  /**\n   * Returns the X coordinate of this 2D point.\n   * @type {Number}\n   */\n  this.x = x;\n  /**\n   * Returns the Y coordinate of this 2D point.\n   * @type {Number}\n   */\n  this.y = y;\n}\n\n//noinspection JSCheckFunctionSignatures\nutil.inherits(Point, Geometry);\n\n/**\n * Creates a {@link Point} instance from\n * a <a href=\"https://en.wikipedia.org/wiki/Well-known_text\">Well-known Text (WKT)</a>\n * representation of a 2D point.\n * @param {Buffer} buffer\n * @returns {Point}\n */\nPoint.fromBuffer = function (buffer) {\n  if (!buffer || buffer.length !== 21) {\n    throw new TypeError('2D Point buffer should contain 21 bytes');\n  }\n  const endianness = Geometry.getEndianness(buffer.readInt8(0, true));\n  if (Geometry.readInt32(buffer, endianness, 1) !== Geometry.types.Point2D) {\n    throw new TypeError('Binary representation was not a point');\n  }\n  return new Point(Geometry.readDouble(buffer, endianness, 5), Geometry.readDouble(buffer, endianness, 13));\n};\n\n/**\n * Creates a {@link Point} instance from\n * a <a href=\"https://en.wikipedia.org/wiki/Well-known_text\">Well-known Text (WKT)</a>\n * representation of a 2D point.\n * @param {String} textValue\n * @returns {Point}\n */\nPoint.fromString = function (textValue) {\n  const wktRegex = /^POINT\\s?\\(([-0-9.]+) ([-0-9.]+)\\)$/g;\n  const matches = wktRegex.exec(textValue);\n  if (!matches || matches.length !== 3) {\n    throw new TypeError('2D Point WTK should contain 2 coordinates');\n  }\n  return new Point(parseFloat(matches[1]), parseFloat(matches[2]));\n};\n\n/**\n * Returns a <a href=\"https://en.wikipedia.org/wiki/Well-known_text#Well-known_binary\">Well-known Binary</a> (WKB)\n * representation of this instance.\n * @returns {Buffer}\n */\nPoint.prototype.toBuffer = function () {\n  const buffer = utils.allocBufferUnsafe(21);\n  this.writeEndianness(buffer, 0);\n  this.writeInt32(Geometry.types.Point2D, buffer, 1);\n  this.writeDouble(this.x, buffer, 5);\n  this.writeDouble(this.y, buffer, 13);\n  return buffer;\n};\n\n/**\n * Returns true if the values of the point are the same, otherwise it returns false.\n * @param {Point} other\n * @returns {Boolean}\n */\nPoint.prototype.equals = function (other) {\n  if (!(other instanceof Point)) {\n    return false;\n  }\n  return (this.x === other.x && this.y === other.y);\n};\n\n/**\n * Returns Well-known text (WKT) representation of the geometry object.\n * @returns {String}\n */\nPoint.prototype.toString = function () {\n  return util.format('POINT (%d %d)', this.x, this.y);\n};\n\nPoint.prototype.useBESerialization = function () {\n  return false;\n};\n\n/**\n * Returns a JSON representation of this geo-spatial type.\n */\nPoint.prototype.toJSON = function () {\n  return { type: 'Point', coordinates: [ this.x, this.y ]};\n};\n\nmodule.exports = Point;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst util = require('util');\nconst utils = require('../utils');\nconst Geometry = require('./geometry');\nconst Point = require('./point');\n\n/**\n * Creates a new {@link LineString} instance.\n * @classdesc\n * A LineString is a one-dimensional object representing a sequence of points and the line segments connecting them.\n * @param {...Point}[point] A sequence of [Point]{@link module:geometry~Point} items as arguments.\n * @example\n * new LineString(new Point(10.99, 20.02), new Point(14, 26), new Point(34, 1.2));\n * @constructor\n * @alias module:geometry~LineString\n * @extends {Geometry}\n */\nfunction LineString(point) {\n  let points = Array.prototype.slice.call(arguments);\n  if (points.length === 1 && Array.isArray(points) && Array.isArray(points[0])) {\n    //The first argument is an array of the points\n    points = points[0];\n  }\n  if (points.length === 1) {\n    throw new TypeError('LineString can be either empty or contain 2 or more points');\n  }\n  /**\n   * Returns a frozen Array of points that represent the line.\n   * @type {Array.<Point>}\n   */\n  this.points = Object.freeze(points);\n}\n\n//noinspection JSCheckFunctionSignatures\nutil.inherits(LineString, Geometry);\n\n/**\n * Creates a {@link LineString} instance from\n * a <a href=\"https://en.wikipedia.org/wiki/Well-known_text\">Well-known Text (WKT)</a>\n * representation of a line.\n * @param {Buffer} buffer\n * @returns {LineString}\n */\nLineString.fromBuffer = function (buffer) {\n  if (!buffer || buffer.length < 9) {\n    throw new TypeError('A linestring buffer should contain at least 9 bytes');\n  }\n  const endianness = Geometry.getEndianness(buffer.readInt8(0, true));\n  let offset = 1;\n  if (Geometry.readInt32(buffer, endianness, offset) !== Geometry.types.LineString) {\n    throw new TypeError('Binary representation was not a LineString');\n  }\n  offset += 4;\n  const length = Geometry.readInt32(buffer, endianness, offset);\n  offset += 4;\n  if (buffer.length !== offset + length * 16) {\n    throw new TypeError(util.format('Length of the buffer does not match %d !== %d', buffer.length, offset + length * 8));\n  }\n  const points = new Array(length);\n  for (let i = 0; i < length; i++) {\n    points[i] = new Point(\n      Geometry.readDouble(buffer, endianness, offset),\n      Geometry.readDouble(buffer, endianness, offset + 8));\n    offset += 16;\n  }\n  //noinspection JSCheckFunctionSignatures\n  return new LineString(points);\n};\n\n/**\n * Creates a {@link LineString} instance from\n * a <a href=\"https://en.wikipedia.org/wiki/Well-known_text\">Well-known Text (WKT)</a>\n * representation of a line.\n * @param {String} textValue\n * @returns {LineString}\n */\nLineString.fromString = function (textValue) {\n  const wktRegex = /^LINESTRING ?\\(([-0-9. ,]+)\\)+$/g;\n  const matches = wktRegex.exec(textValue);\n  if (!matches || matches.length !== 2) {\n    throw new TypeError('Invalid WKT: ' + textValue);\n  }\n  const points = LineString.parseSegments(matches[1]);\n  return new LineString(points);\n};\n\n/**\n * Internal method that parses a series of WKT points.\n * @param {String} textValue\n * @returns {Array<Point>}\n * @internal\n * @ignore\n */\nLineString.parseSegments = function (textValue) {\n  const points = [];\n  const pointParts = textValue.split(',');\n  for (let i = 0; i < pointParts.length; i++) {\n    const p = pointParts[i].trim();\n    if (p.length === 0) {\n      throw new TypeError('Invalid WKT segment: ' + textValue);\n    }\n    const xyText = p.split(' ').filter(function (element) {\n      return (element.trim().length > 0);\n    });\n    if (xyText.length !== 2) {\n      throw new TypeError('Invalid WKT segment: ' + textValue);\n    }\n    points.push(new Point(parseFloat(xyText[0]), parseFloat(xyText[1])));\n  }\n  return points;\n};\n\n/**\n * Returns a <a href=\"https://en.wikipedia.org/wiki/Well-known_text#Well-known_binary\">Well-known Binary</a> (WKB)\n * representation of this instance.\n * @returns {Buffer}\n */\nLineString.prototype.toBuffer = function () {\n  const buffer = utils.allocBufferUnsafe(9 + this.points.length * 16);\n  this.writeEndianness(buffer, 0);\n  let offset = 1;\n  this.writeInt32(Geometry.types.LineString, buffer, offset);\n  offset += 4;\n  this.writeInt32(this.points.length, buffer, offset);\n  offset += 4;\n  this.points.forEach(function (p) {\n    this.writeDouble(p.x, buffer, offset);\n    this.writeDouble(p.y, buffer, offset + 8);\n    offset += 16;\n  }, this);\n  return buffer;\n};\n\n/**\n * Returns true if the values of the linestrings are the same, otherwise it returns false.\n * @param {LineString} other\n * @returns {Boolean}\n */\nLineString.prototype.equals = function (other) {\n  if (!(other instanceof LineString)) {\n    return false;\n  }\n  if (this.points.length !== other.points.length) {\n    return false;\n  }\n  for (let i = 0; i < this.points.length; i++) {\n    if (!this.points[i].equals(other.points[i])) {\n      return false;\n    }\n  }\n  return true;\n};\n\n/**\n * Returns Well-known text (WKT) representation of the geometry object.\n * @returns {String}\n */\nLineString.prototype.toString = function () {\n  if (this.points.length === 0) {\n    return 'LINESTRING EMPTY';\n  }\n  return 'LINESTRING ('\n    + this.points.map(function (p) {\n      return p.x + ' ' + p.y;\n    }).join(', ')\n    + ')';\n};\n\nLineString.prototype.useBESerialization = function () {\n  return false;\n};\n\n/**\n * Returns a JSON representation of this geo-spatial type.\n */\nLineString.prototype.toJSON = function () {\n  return { type: 'LineString', coordinates: this.points.map(function (p) {\n    return [p.x, p.y];\n  })};\n};\n\nmodule.exports = LineString;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst util = require('util');\nconst utils = require('../utils');\nconst Geometry = require('./geometry');\nconst Point = require('./point');\nconst LineString = require('./line-string');\n\n/**\n * Creates a new {@link Polygon} instance.\n * @classdesc\n * Represents is a plane geometry figure that is bounded by a finite chain of straight line segments closing in a loop\n * to form a closed chain or circuit.\n * @param {...Array.<Point>}[ringPoints] A sequence of Array of [Point]{@link module:geometry~Point} items as arguments\n * representing the rings of the polygon.\n * @example\n * new Polygon([ new Point(30, 10), new Point(40, 40), new Point(10, 20), new Point(30, 10) ]);\n * @example\n * //polygon with a hole\n * new Polygon(\n *  [ new Point(30, 10), new Point(40, 40), new Point(10, 20), new Point(30, 10) ],\n *  [ new Point(25, 20), new Point(30, 30), new Point(20, 20), new Point(25, 20) ]\n * );\n * @alias module:geometry~Polygon\n * @constructor\n */\nfunction Polygon(ringPoints) {\n  const rings = Array.prototype.slice.call(arguments);\n  /**\n   * Returns a frozen Array of array of points that represent the different rings in the polygon.\n   * @type {Array}\n   */\n  this.rings = Object.freeze(rings);\n}\n\n//noinspection JSCheckFunctionSignatures\nutil.inherits(Polygon, Geometry);\n\n/**\n * Creates a {@link Polygon} instance from\n * a <a href=\"https://en.wikipedia.org/wiki/Well-known_text\">Well-known Text (WKT)</a>\n * representation of a polygon.\n * @param {Buffer} buffer\n * @returns {Polygon}\n */\nPolygon.fromBuffer = function (buffer) {\n  if (!buffer || buffer.length < 9) {\n    throw new TypeError('A Polygon buffer should contain at least 9 bytes');\n  }\n  const endianness = Geometry.getEndianness(buffer.readInt8(0, true));\n  let offset = 1;\n  if (Geometry.readInt32(buffer, endianness, offset) !== Geometry.types.Polygon) {\n    throw new TypeError('Binary representation was not a Polygon');\n  }\n  offset += 4;\n  const ringsLength = Geometry.readInt32(buffer, endianness, offset);\n  offset += 4;\n  const ringsArray = new Array(ringsLength);\n  for (let ringIndex = 0; ringIndex < ringsLength; ringIndex++) {\n    const pointsLength = Geometry.readInt32(buffer, endianness, offset);\n    offset += 4;\n    if (buffer.length < offset + pointsLength * 16) {\n      throw new TypeError(util.format('Length of the buffer does not match'));\n    }\n    const ring = new Array(pointsLength);\n    for (let i = 0; i < pointsLength; i++) {\n      ring[i] = new Point(\n        Geometry.readDouble(buffer, endianness, offset),\n        Geometry.readDouble(buffer, endianness, offset + 8));\n      offset += 16;\n    }\n    ringsArray[ringIndex] = ring;\n  }\n  //Invoke the constructor with each ring as a parameter\n  //ringsArray.unshift(null);\n  //return new (Function.prototype.bind.apply(Polygon, ringsArray));\n  return construct(ringsArray);\n};\n\n/**\n * Creates a {@link Polygon} instance from\n * a <a href=\"https://en.wikipedia.org/wiki/Well-known_text\">Well-known Text (WKT)</a>\n * representation of a shape.\n * @param {String} textValue\n * @returns {Polygon}\n */\nPolygon.fromString = function (textValue) {\n  const wktRegex = /^POLYGON ?\\((\\(.*\\))\\)$/g;\n  const matches = wktRegex.exec(textValue);\n  function validateWkt(condition) {\n    if (condition) {\n      throw new TypeError('Invalid WKT: ' + textValue);\n    }\n  }\n  validateWkt(!matches || matches.length !== 2);\n\n  const ringsText = matches[1];\n  const ringsArray = [];\n  let ringStart = null;\n  for (let i = 0; i < ringsText.length; i++) {\n    const c = ringsText[i];\n    if (c === '(') {\n      validateWkt(ringStart !== null);\n      ringStart = i+1;\n      continue;\n    }\n    if (c === ')') {\n      validateWkt(ringStart === null);\n      ringsArray.push(ringsText.substring(ringStart, i));\n      ringStart = null;\n      continue;\n    }\n    validateWkt(ringStart === null && c !== ' ' && c !== ',');\n  }\n  return construct(ringsArray.map(LineString.parseSegments));\n};\n\n/**\n * Creates a new instance of Polygon with each array item as a parameter\n * @private\n * @param {Array<Array<Point>>} argsArray\n * @returns {Polygon}\n */\nfunction construct(argsArray) {\n  function F() {\n    return Polygon.apply(this, argsArray);\n  }\n  F.prototype = Polygon.prototype;\n  return new F();\n}\n\n/**\n * Returns a <a href=\"https://en.wikipedia.org/wiki/Well-known_text#Well-known_binary\">Well-known Binary</a> (WKB)\n * representation of this instance.\n * @returns {Buffer}\n */\nPolygon.prototype.toBuffer = function () {\n  let totalRingsLength = 0;\n  this.rings.forEach(function (ring) {\n    totalRingsLength += 4 + ring.length * 16;\n  }, this);\n  const buffer = utils.allocBufferUnsafe(9 + totalRingsLength);\n  this.writeEndianness(buffer, 0);\n  let offset = 1;\n  this.writeInt32(Geometry.types.Polygon, buffer, offset);\n  offset += 4;\n  this.writeInt32(this.rings.length, buffer, offset);\n  offset += 4;\n  this.rings.forEach(function (ring) {\n    this.writeInt32(ring.length, buffer, offset);\n    offset += 4;\n    ring.forEach(function (p) {\n      this.writeDouble(p.x, buffer, offset);\n      this.writeDouble(p.y, buffer, offset + 8);\n      offset += 16;\n    }, this);\n  }, this);\n  return buffer;\n};\n\n/**\n * Returns true if the values of the polygons are the same, otherwise it returns false.\n * @param {Polygon} other\n * @returns {Boolean}\n */\nPolygon.prototype.equals = function (other) {\n  if (!(other instanceof Polygon)) {\n    return false;\n  }\n  if (this.rings.length !== other.rings.length) {\n    return false;\n  }\n  for (let i = 0; i < this.rings.length; i++) {\n    const r1 = this.rings[i];\n    const r2 = other.rings[i];\n    if (r1.length !== r2.length) {\n      return false;\n    }\n    for (let j = 0; j < r1.length; j++) {\n      if (!r1[i].equals(r2[i])) {\n        return false;\n      }\n    }\n  }\n  return true;\n};\n\nPolygon.prototype.useBESerialization = function () {\n  return false;\n};\n\n/**\n * Returns Well-known text (WKT) representation of the geometry object.\n * @returns {String}\n */\nPolygon.prototype.toString = function () {\n  if (this.rings.length === 0) {\n    return 'POLYGON EMPTY';\n  }\n  let ringStrings = '';\n  this.rings.forEach(function (r, i) {\n    if (i > 0) {\n      ringStrings += ', ';\n    }\n    ringStrings += '(' +\n      r.map(function (p) {\n        return p.x + ' ' + p.y;\n      }).join(', ')\n      + ')';\n  });\n  return 'POLYGON (' + ringStrings + ')';\n};\n\n/**\n * Returns a JSON representation of this geo-spatial type.\n */\nPolygon.prototype.toJSON = function () {\n  return { type: 'Polygon', coordinates: this.rings.map(function (r) {\n    return r.map(function (p) {\n      return [ p.x, p.y ];\n    });\n  })};\n};\n\nmodule.exports = Polygon;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n/**\n * Geometry module.\n * <p>\n *   Contains the classes to represent the set of additional CQL types for geospatial data that come with\n *   DSE 5.0.\n * </p>\n * @module geometry\n */\n\nexports.Geometry = require('./geometry');\nexports.LineString = require('./line-string');\nexports.Point = require('./point');\nexports.Polygon = require('./polygon');", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst util = require('util');\n\nconst types = require('./types');\nconst dataTypes = types.dataTypes;\nconst Long = types.Long;\nconst Integer = types.Integer;\nconst BigDecimal = types.BigDecimal;\nconst MutableLong = require('./types/mutable-long');\nconst utils = require('./utils');\nconst token = require('./token');\nconst { DateRange } = require('./datastax/search');\nconst geo = require('./geometry');\nconst Vector = require('./types/vector');\nconst Geometry = geo.Geometry;\nconst LineString = geo.LineString;\nconst Point = geo.Point;\nconst Polygon = geo.Polygon;\n\nconst uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\n\nconst buffers = {\n  int16Zero: utils.allocBufferFromArray([0, 0]),\n  int32Zero: utils.allocBufferFromArray([0, 0, 0, 0]),\n  int8Zero: utils.allocBufferFromArray([0]),\n  int8One: utils.allocBufferFromArray([1]),\n  int8MaxValue: utils.allocBufferFromArray([0xff])\n};\n\n// BigInt: Avoid using literals (e.g., 32n) as we must be able to compile with older engines\nconst isBigIntSupported = typeof BigInt !== 'undefined';\nconst bigInt32 = isBigIntSupported ? BigInt(32) : null;\nconst bigInt8 = isBigIntSupported ? BigInt(8) : null;\nconst bigInt0 = isBigIntSupported ? BigInt(0) : null;\nconst bigIntMinus1 = isBigIntSupported ? BigInt(-1) : null;\nconst bigInt32BitsOn = isBigIntSupported ? BigInt(0xffffffff) : null;\nconst bigInt8BitsOn = isBigIntSupported ? BigInt(0xff) : null;\n\nconst complexTypeNames = Object.freeze({\n  list      : 'org.apache.cassandra.db.marshal.ListType',\n  set       : 'org.apache.cassandra.db.marshal.SetType',\n  map       : 'org.apache.cassandra.db.marshal.MapType',\n  udt       : 'org.apache.cassandra.db.marshal.UserType',\n  tuple     : 'org.apache.cassandra.db.marshal.TupleType',\n  frozen    : 'org.apache.cassandra.db.marshal.FrozenType',\n  reversed  : 'org.apache.cassandra.db.marshal.ReversedType',\n  composite : 'org.apache.cassandra.db.marshal.CompositeType',\n  empty     : 'org.apache.cassandra.db.marshal.EmptyType',\n  collection: 'org.apache.cassandra.db.marshal.ColumnToCollectionType'\n});\nconst cqlNames = Object.freeze({\n  frozen: 'frozen',\n  list: 'list',\n  'set': 'set',\n  map: 'map',\n  tuple: 'tuple',\n  empty: 'empty',\n  duration: 'duration',\n  vector: 'vector'\n});\nconst singleTypeNames = Object.freeze({\n  'org.apache.cassandra.db.marshal.UTF8Type':           dataTypes.varchar,\n  'org.apache.cassandra.db.marshal.AsciiType':          dataTypes.ascii,\n  'org.apache.cassandra.db.marshal.UUIDType':           dataTypes.uuid,\n  'org.apache.cassandra.db.marshal.TimeUUIDType':       dataTypes.timeuuid,\n  'org.apache.cassandra.db.marshal.Int32Type':          dataTypes.int,\n  'org.apache.cassandra.db.marshal.BytesType':          dataTypes.blob,\n  'org.apache.cassandra.db.marshal.FloatType':          dataTypes.float,\n  'org.apache.cassandra.db.marshal.DoubleType':         dataTypes.double,\n  'org.apache.cassandra.db.marshal.BooleanType':        dataTypes.boolean,\n  'org.apache.cassandra.db.marshal.InetAddressType':    dataTypes.inet,\n  'org.apache.cassandra.db.marshal.SimpleDateType':     dataTypes.date,\n  'org.apache.cassandra.db.marshal.TimeType':           dataTypes.time,\n  'org.apache.cassandra.db.marshal.ShortType':          dataTypes.smallint,\n  'org.apache.cassandra.db.marshal.ByteType':           dataTypes.tinyint,\n  'org.apache.cassandra.db.marshal.DateType':           dataTypes.timestamp,\n  'org.apache.cassandra.db.marshal.TimestampType':      dataTypes.timestamp,\n  'org.apache.cassandra.db.marshal.LongType':           dataTypes.bigint,\n  'org.apache.cassandra.db.marshal.DecimalType':        dataTypes.decimal,\n  'org.apache.cassandra.db.marshal.IntegerType':        dataTypes.varint,\n  'org.apache.cassandra.db.marshal.CounterColumnType':  dataTypes.counter\n});\n\n// eslint-disable-next-line no-unused-vars\nconst singleTypeNamesByDataType = invertObject(singleTypeNames);\nconst singleFqTypeNamesLength = Object.keys(singleTypeNames).reduce(function (previous, current) {\n  return current.length > previous ? current.length : previous;\n}, 0);\n\nconst customTypeNames = Object.freeze({\n  duration: 'org.apache.cassandra.db.marshal.DurationType',\n  lineString: 'org.apache.cassandra.db.marshal.LineStringType',\n  point: 'org.apache.cassandra.db.marshal.PointType',\n  polygon: 'org.apache.cassandra.db.marshal.PolygonType',\n  dateRange: 'org.apache.cassandra.db.marshal.DateRangeType',\n  vector: 'org.apache.cassandra.db.marshal.VectorType'\n});\n\nconst nullValueBuffer = utils.allocBufferFromArray([255, 255, 255, 255]);\nconst unsetValueBuffer = utils.allocBufferFromArray([255, 255, 255, 254]);\n\n/**\n * For backwards compatibility, empty buffers as text/blob/custom values are supported.\n * In the case of other types, they are going to be decoded as a <code>null</code> value.\n * @private\n * @type {Set}\n */\nconst zeroLengthTypesSupported = new Set([\n  dataTypes.text,\n  dataTypes.ascii,\n  dataTypes.varchar,\n  dataTypes.custom,\n  dataTypes.blob\n]);\n\n/**\n * @typedef {(singleTypeNames[keyof singleTypeNames] | types.dataTypes.duration | types.dataTypes.text)} SingleTypeCodes\n * @typedef {('point' | 'polygon' | 'duration' | 'lineString' | 'dateRange')} CustomSimpleTypeCodes\n * @typedef {(customTypeNames[CustomSimpleTypeCodes]) | CustomSimpleTypeCodes | 'empty'} CustomSimpleTypeNames\n * @typedef {{code : SingleTypeCodes, info?: null, options? : {frozen?:boolean, reversed?:boolean} }} SingleColumnInfo\n * @typedef {{code : (types.dataTypes.custom), info : CustomSimpleTypeNames, options? : {frozen?:boolean, reversed?:boolean}}} CustomSimpleColumnInfo\n * @typedef {{code : (types.dataTypes.map), info : [ColumnInfo, ColumnInfo], options?: {frozen?: Boolean, reversed?: Boolean}}} MapColumnInfo\n * @typedef {{code : (types.dataTypes.tuple), info : Array<ColumnInfo>, options?: {frozen?: Boolean, reversed?: Boolean}}} TupleColumnInfo \n * @typedef {{code : (types.dataTypes.tuple | types.dataTypes.list)}} TupleListColumnInfoWithoutSubtype TODO: guessDataType can return null on tuple/list info, why?\n * @typedef {{code : (types.dataTypes.list | types.dataTypes.set), info : ColumnInfo, options?: {frozen?: Boolean, reversed?: Boolean}}} ListSetColumnInfo\n * @typedef {{code : (types.dataTypes.udt), info : {name : string, fields : Array<{name : string, type : ColumnInfo}>}, options? : {frozen?: Boolean, reversed?: Boolean}}} UdtColumnInfo\n * @typedef {{code : (types.dataTypes.custom), customTypeName : ('vector'), info : [ColumnInfo, number], options? : {frozen?:boolean, reversed?:boolean}}} VectorColumnInfo\n * @typedef {{code : (types.dataTypes.custom), info : string, options? : {frozen?:boolean, reversed?:boolean}}} OtherCustomColumnInfo\n * @typedef {SingleColumnInfo | CustomSimpleColumnInfo | MapColumnInfo | TupleColumnInfo | ListSetColumnInfo | VectorColumnInfo | OtherCustomColumnInfo | UdtColumnInfo | TupleListColumnInfoWithoutSubtype} ColumnInfo If this is a simple type, info is null; if this is a collection type with a simple subtype, info is a string, if this is a nested collection type, info is a ColumnInfo object\n */\n\n/**\n * Serializes and deserializes to and from a CQL type and a Javascript Type.\n * @param {Number} protocolVersion\n * @param {import('./client.js').ClientOptions} options\n * @constructor\n */\nfunction Encoder(protocolVersion, options) {\n  this.encodingOptions = options.encoding || utils.emptyObject;\n  defineInstanceMembers.call(this);\n  this.setProtocolVersion(protocolVersion);\n  setEncoders.call(this);\n  if (this.encodingOptions.copyBuffer) {\n    this.handleBuffer = handleBufferCopy;\n  }\n  else {\n    this.handleBuffer = handleBufferRef;\n  }\n}\n\n/**\n * Declares the privileged instance members.\n * @private\n */\nfunction defineInstanceMembers() {\n  /**\n   * Sets the protocol version and the encoding/decoding methods depending on the protocol version\n   * @param {Number} value\n   * @ignore\n   * @internal\n   */\n  this.setProtocolVersion = function (value) {\n    this.protocolVersion = value;\n    //Set the collection serialization based on the protocol version\n    this.decodeCollectionLength = decodeCollectionLengthV3;\n    this.getLengthBuffer = getLengthBufferV3;\n    this.collectionLengthSize = 4;\n    if (!types.protocolVersion.uses4BytesCollectionLength(this.protocolVersion)) {\n      this.decodeCollectionLength = decodeCollectionLengthV2;\n      this.getLengthBuffer = getLengthBufferV2;\n      this.collectionLengthSize = 2;\n    }\n  };\n\n  const customDecoders = {\n    [customTypeNames.duration]: decodeDuration,\n    [customTypeNames.lineString]: decodeLineString,\n    [customTypeNames.point]: decodePoint,\n    [customTypeNames.polygon]: decodePolygon,\n    [customTypeNames.dateRange]: decodeDateRange\n  };\n\n  const customEncoders = {\n    [customTypeNames.duration]: encodeDuration,\n    [customTypeNames.lineString]: encodeLineString,\n    [customTypeNames.point]: encodePoint,\n    [customTypeNames.polygon]: encodePolygon,\n    [customTypeNames.dateRange]: encodeDateRange\n  };\n\n  // Decoding methods\n  this.decodeBlob = function (bytes) {\n    return this.handleBuffer(bytes);\n  };\n\n  /**\n   * \n   * @param {Buffer} bytes \n   * @param {OtherCustomColumnInfo | VectorColumnInfo} columnInfo\n   * @returns \n   */\n  this.decodeCustom = function (bytes, columnInfo) {\n\n    // Make sure we actually have something to process in typeName before we go any further\n    if (!columnInfo) {\n      return this.handleBuffer(bytes);\n    }\n\n    // Special handling for vector custom types (since they have args)\n    if ('customTypeName' in columnInfo && columnInfo.customTypeName === 'vector') {\n      return this.decodeVector(bytes, columnInfo);\n    }\n\n    if(typeof columnInfo.info === 'string' && columnInfo.info.startsWith(customTypeNames.vector)) {\n      const vectorColumnInfo = /** @type {VectorColumnInfo} */ (this.parseFqTypeName(columnInfo.info));\n      return this.decodeVector(bytes, vectorColumnInfo);\n    }\n\n    const handler = customDecoders[columnInfo.info];\n    if (handler) {\n      return handler.call(this, bytes);\n    }\n    return this.handleBuffer(bytes);\n  };\n\n  this.decodeUtf8String = function (bytes) {\n    return bytes.toString('utf8');\n  };\n  this.decodeAsciiString = function (bytes) {\n    return bytes.toString('ascii');\n  };\n  this.decodeBoolean = function (bytes) {\n    return !!bytes.readUInt8(0);\n  };\n  this.decodeDouble = function (bytes) {\n    return bytes.readDoubleBE(0);\n  };\n  this.decodeFloat = function (bytes) {\n    return bytes.readFloatBE(0);\n  };\n  this.decodeInt = function (bytes) {\n    return bytes.readInt32BE(0);\n  };\n  this.decodeSmallint = function (bytes) {\n    return bytes.readInt16BE(0);\n  };\n  this.decodeTinyint = function (bytes) {\n    return bytes.readInt8(0);\n  };\n\n  this._decodeCqlLongAsLong = function (bytes) {\n    return Long.fromBuffer(bytes);\n  };\n\n  this._decodeCqlLongAsBigInt = function (bytes) {\n    return BigInt.asIntN(64, (BigInt(bytes.readUInt32BE(0)) << bigInt32) | BigInt(bytes.readUInt32BE(4)));\n  };\n\n  this.decodeLong = this.encodingOptions.useBigIntAsLong\n    ? this._decodeCqlLongAsBigInt\n    : this._decodeCqlLongAsLong;\n\n  this._decodeVarintAsInteger = function (bytes) {\n    return Integer.fromBuffer(bytes);\n  };\n\n  this._decodeVarintAsBigInt = function decodeVarintAsBigInt(bytes) {\n    let result = bigInt0;\n    if (bytes[0] <= 0x7f) {\n      for (let i = 0; i < bytes.length; i++) {\n        const b = BigInt(bytes[bytes.length - 1 - i]);\n        result = result | (b << BigInt(i * 8));\n      }\n    } else {\n      for (let i = 0; i < bytes.length; i++) {\n        const b = BigInt(bytes[bytes.length - 1 - i]);\n        result = result | ((~b & bigInt8BitsOn) << BigInt(i * 8));\n      }\n      result = ~result;\n    }\n\n    return result;\n  };\n\n  this.decodeVarint = this.encodingOptions.useBigIntAsVarint\n    ? this._decodeVarintAsBigInt\n    : this._decodeVarintAsInteger;\n\n  this.decodeDecimal = function(bytes) {\n    return BigDecimal.fromBuffer(bytes);\n  };\n  this.decodeTimestamp = function(bytes) {\n    return new Date(this._decodeCqlLongAsLong(bytes).toNumber());\n  };\n  this.decodeDate = function (bytes) {\n    return types.LocalDate.fromBuffer(bytes);\n  };\n  this.decodeTime = function (bytes) {\n    return types.LocalTime.fromBuffer(bytes);\n  };\n  /*\n   * Reads a list from bytes\n   */\n  this.decodeList = function (bytes, columnInfo) {\n    const subtype = columnInfo.info;\n    const totalItems = this.decodeCollectionLength(bytes, 0);\n    let offset = this.collectionLengthSize;\n    const list = new Array(totalItems);\n    for (let i = 0; i < totalItems; i++) {\n      //bytes length of the item\n      const length = this.decodeCollectionLength(bytes, offset);\n      offset += this.collectionLengthSize;\n      //slice it\n      list[i] = this.decode(bytes.slice(offset, offset+length), subtype);\n      offset += length;\n    }\n    return list;\n  };\n  /*\n   * Reads a Set from bytes\n   */\n  this.decodeSet = function (bytes, columnInfo) {\n    const arr = this.decodeList(bytes, columnInfo);\n    if (this.encodingOptions.set) {\n      const setConstructor = this.encodingOptions.set;\n      return new setConstructor(arr);\n    }\n    return arr;\n  };\n  /*\n   * Reads a map (key / value) from bytes\n   */\n  this.decodeMap = function (bytes, columnInfo) {\n    const subtypes = columnInfo.info;\n    let map;\n    const totalItems = this.decodeCollectionLength(bytes, 0);\n    let offset = this.collectionLengthSize;\n    const self = this;\n    function readValues(callback, thisArg) {\n      for (let i = 0; i < totalItems; i++) {\n        const keyLength = self.decodeCollectionLength(bytes, offset);\n        offset += self.collectionLengthSize;\n        const key = self.decode(bytes.slice(offset, offset + keyLength), subtypes[0]);\n        offset += keyLength;\n        const valueLength = self.decodeCollectionLength(bytes, offset);\n        offset += self.collectionLengthSize;\n        if (valueLength < 0) {\n          callback.call(thisArg, key, null);\n          continue;\n        }\n        const value = self.decode(bytes.slice(offset, offset + valueLength), subtypes[1]);\n        offset += valueLength;\n        callback.call(thisArg, key, value);\n      }\n    }\n    if (this.encodingOptions.map) {\n      const mapConstructor = this.encodingOptions.map;\n      map = new mapConstructor();\n      readValues(map.set, map);\n    }\n    else {\n      map = {};\n      readValues(function (key, value) {\n        map[key] = value;\n      });\n    }\n    return map;\n  };\n  this.decodeUuid = function (bytes) {\n    return new types.Uuid(this.handleBuffer(bytes));\n  };\n  this.decodeTimeUuid = function (bytes) {\n    return new types.TimeUuid(this.handleBuffer(bytes));\n  };\n  this.decodeInet = function (bytes) {\n    return new types.InetAddress(this.handleBuffer(bytes));\n  };\n  /**\n   * Decodes a user defined type into an object\n   * @param {Buffer} bytes\n   * @param {UdtColumnInfo} columnInfo\n   * @private\n   */\n  this.decodeUdt = function (bytes, columnInfo) {\n    const udtInfo = columnInfo.info;\n    const result = {};\n    let offset = 0;\n    for (let i = 0; i < udtInfo.fields.length && offset < bytes.length; i++) {\n      //bytes length of the field value\n      const length = bytes.readInt32BE(offset);\n      offset += 4;\n      //slice it\n      const field = udtInfo.fields[i];\n      if (length < 0) {\n        result[field.name] = null;\n        continue;\n      }\n      result[field.name] = this.decode(bytes.slice(offset, offset+length), field.type);\n      offset += length;\n    }\n    return result;\n  };\n\n  this.decodeTuple = function (bytes, columnInfo) {\n    const tupleInfo = columnInfo.info;\n    const elements = new Array(tupleInfo.length);\n    let offset = 0;\n\n    for (let i = 0; i < tupleInfo.length && offset < bytes.length; i++) {\n      const length = bytes.readInt32BE(offset);\n      offset += 4;\n\n      if (length < 0) {\n        elements[i] = null;\n        continue;\n      }\n\n      elements[i] = this.decode(bytes.slice(offset, offset+length), tupleInfo[i]);\n      offset += length;\n    }\n\n    return types.Tuple.fromArray(elements);\n  };\n\n  //Encoding methods\n  this.encodeFloat = function (value) {\n    if (typeof value === 'string') {\n      // All numeric types are supported as strings for historical reasons\n      value = parseFloat(value);\n\n      if (Number.isNaN(value)) {\n        throw new TypeError(`Expected string representation of a number, obtained ${util.inspect(value)}`);\n      }\n    }\n\n    if (typeof value !== 'number') {\n      throw new TypeError('Expected Number, obtained ' + util.inspect(value));\n    }\n\n    const buf = utils.allocBufferUnsafe(4);\n    buf.writeFloatBE(value, 0);\n    return buf;\n  };\n\n  this.encodeDouble = function (value) {\n    if (typeof value === 'string') {\n      // All numeric types are supported as strings for historical reasons\n      value = parseFloat(value);\n\n      if (Number.isNaN(value)) {\n        throw new TypeError(`Expected string representation of a number, obtained ${util.inspect(value)}`);\n      }\n    }\n\n    if (typeof value !== 'number') {\n      throw new TypeError('Expected Number, obtained ' + util.inspect(value));\n    }\n\n    const buf = utils.allocBufferUnsafe(8);\n    buf.writeDoubleBE(value, 0);\n    return buf;\n  };\n\n  /**\n   * @param {Date|String|Long|Number} value\n   * @private\n   */\n  this.encodeTimestamp = function (value) {\n    const originalValue = value;\n    if (typeof value === 'string') {\n      value = new Date(value);\n    }\n    if (value instanceof Date) {\n      //milliseconds since epoch\n      value = value.getTime();\n      if (isNaN(value)) {\n        throw new TypeError('Invalid date: ' + originalValue);\n      }\n    }\n    if (this.encodingOptions.useBigIntAsLong) {\n      value = BigInt(value);\n    }\n    return this.encodeLong(value);\n  };\n  /**\n   * @param {Date|String|LocalDate} value\n   * @returns {Buffer}\n   * @throws {TypeError}\n   * @private\n   */\n  this.encodeDate = function (value) {\n    const originalValue = value;\n    try {\n      if (typeof value === 'string') {\n        value = types.LocalDate.fromString(value);\n      }\n      if (value instanceof Date) {\n        value = types.LocalDate.fromDate(value);\n      }\n    }\n    catch (err) {\n      //Wrap into a TypeError\n      throw new TypeError('LocalDate could not be parsed ' + err);\n    }\n    if (!(value instanceof types.LocalDate)) {\n      throw new TypeError('Expected Date/String/LocalDate, obtained ' + util.inspect(originalValue));\n    }\n    return value.toBuffer();\n  };\n  /**\n   * @param {String|LocalDate} value\n   * @returns {Buffer}\n   * @throws {TypeError}\n   * @private\n   */\n  this.encodeTime = function (value) {\n    const originalValue = value;\n    try {\n      if (typeof value === 'string') {\n        value = types.LocalTime.fromString(value);\n      }\n    }\n    catch (err) {\n      //Wrap into a TypeError\n      throw new TypeError('LocalTime could not be parsed ' + err);\n    }\n    if (!(value instanceof types.LocalTime)) {\n      throw new TypeError('Expected String/LocalTime, obtained ' + util.inspect(originalValue));\n    }\n    return value.toBuffer();\n  };\n  /**\n   * @param {Uuid|String|Buffer} value\n   * @private\n   */\n  this.encodeUuid = function (value) {\n    if (typeof value === 'string') {\n      try {\n        value = types.Uuid.fromString(value).getBuffer();\n      }\n      catch (err) {\n        throw new TypeError(err.message);\n      }\n    } else if (value instanceof types.Uuid) {\n      value = value.getBuffer();\n    } else {\n      throw new TypeError('Not a valid Uuid, expected Uuid/String/Buffer, obtained ' + util.inspect(value));\n    }\n\n    return value;\n  };\n  /**\n   * @param {String|InetAddress|Buffer} value\n   * @returns {Buffer}\n   * @private\n   */\n  this.encodeInet = function (value) {\n    if (typeof value === 'string') {\n      value = types.InetAddress.fromString(value);\n    }\n    if (value instanceof types.InetAddress) {\n      value = value.getBuffer();\n    }\n    if (!(value instanceof Buffer)) {\n      throw new TypeError('Not a valid Inet, expected InetAddress/Buffer, obtained ' + util.inspect(value));\n    }\n    return value;\n  };\n\n  /**\n   * @param {Long|Buffer|String|Number} value\n   * @private\n   */\n  this._encodeBigIntFromLong = function (value) {\n    if (typeof value === 'number') {\n      value = Long.fromNumber(value);\n    } else if (typeof value === 'string') {\n      value = Long.fromString(value);\n    }\n\n    let buf = null;\n\n    if (value instanceof Long) {\n      buf = Long.toBuffer(value);\n    } else if (value instanceof MutableLong) {\n      buf = Long.toBuffer(value.toImmutable());\n    }\n\n    if (buf === null) {\n      throw new TypeError('Not a valid bigint, expected Long/Number/String/Buffer, obtained ' + util.inspect(value));\n    }\n\n    return buf;\n  };\n\n  this._encodeBigIntFromBigInt = function (value) {\n    if (typeof value === 'string') {\n      // All numeric types are supported as strings for historical reasons\n      value = BigInt(value);\n    }\n\n    // eslint-disable-next-line valid-typeof\n    if (typeof value !== 'bigint') {\n      // Only BigInt values are supported\n      throw new TypeError('Not a valid BigInt value, obtained ' + util.inspect(value));\n    }\n\n    const buffer = utils.allocBufferUnsafe(8);\n    buffer.writeUInt32BE(Number(value >> bigInt32) >>> 0, 0);\n    buffer.writeUInt32BE(Number(value & bigInt32BitsOn), 4);\n    return buffer;\n  };\n\n  this.encodeLong = this.encodingOptions.useBigIntAsLong\n    ? this._encodeBigIntFromBigInt\n    : this._encodeBigIntFromLong;\n\n  /**\n   * @param {Integer|Buffer|String|Number} value\n   * @returns {Buffer}\n   * @private\n   */\n  this._encodeVarintFromInteger = function (value) {\n    if (typeof value === 'number') {\n      value = Integer.fromNumber(value);\n    }\n    if (typeof value === 'string') {\n      value = Integer.fromString(value);\n    }\n    let buf = null;\n    if (value instanceof Buffer) {\n      buf = value;\n    }\n    if (value instanceof Integer) {\n      buf = Integer.toBuffer(value);\n    }\n    if (buf === null) {\n      throw new TypeError('Not a valid varint, expected Integer/Number/String/Buffer, obtained ' + util.inspect(value));\n    }\n    return buf;\n  };\n\n  this._encodeVarintFromBigInt = function (value) {\n    if (typeof value === 'string') {\n      // All numeric types are supported as strings for historical reasons\n      value = BigInt(value);\n    }\n\n    // eslint-disable-next-line valid-typeof\n    if (typeof value !== 'bigint') {\n      throw new TypeError('Not a valid varint, expected BigInt, obtained ' + util.inspect(value));\n    }\n\n    if (value === bigInt0) {\n      return buffers.int8Zero;\n\n    }\n    else if (value === bigIntMinus1) {\n      return buffers.int8MaxValue;\n    }\n\n    const parts = [];\n\n    if (value > bigInt0){\n      while (value !== bigInt0) {\n        parts.unshift(Number(value & bigInt8BitsOn));\n        value = value >> bigInt8;\n      }\n\n      if (parts[0] > 0x7f) {\n        // Positive value needs a padding\n        parts.unshift(0);\n      }\n    } else {\n      while (value !== bigIntMinus1) {\n        parts.unshift(Number(value & bigInt8BitsOn));\n        value = value >> bigInt8;\n      }\n\n      if (parts[0] <= 0x7f) {\n        // Negative value needs a padding\n        parts.unshift(0xff);\n      }\n    }\n\n    return utils.allocBufferFromArray(parts);\n  };\n\n  this.encodeVarint = this.encodingOptions.useBigIntAsVarint\n    ? this._encodeVarintFromBigInt\n    : this._encodeVarintFromInteger;\n\n  /**\n   * @param {BigDecimal|Buffer|String|Number} value\n   * @returns {Buffer}\n   * @private\n   */\n  this.encodeDecimal = function (value) {\n    if (typeof value === 'number') {\n      value = BigDecimal.fromNumber(value);\n    } else if (typeof value === 'string') {\n      value = BigDecimal.fromString(value);\n    }\n\n    let buf = null;\n\n    if (value instanceof BigDecimal) {\n      buf = BigDecimal.toBuffer(value);\n    } else {\n      throw new TypeError('Not a valid varint, expected BigDecimal/Number/String/Buffer, obtained ' + util.inspect(value));\n    }\n\n    return buf;\n  };\n  this.encodeString = function (value, encoding) {\n    if (typeof value !== 'string') {\n      throw new TypeError('Not a valid text value, expected String obtained ' + util.inspect(value));\n    }\n    return utils.allocBufferFromString(value, encoding);\n  };\n  this.encodeUtf8String = function (value) {\n    return this.encodeString(value, 'utf8');\n  };\n  this.encodeAsciiString = function (value) {\n    return this.encodeString(value, 'ascii');\n  };\n  this.encodeBlob = function (value) {\n    if (!(value instanceof Buffer)) {\n      throw new TypeError('Not a valid blob, expected Buffer obtained ' + util.inspect(value));\n    }\n    return value;\n  };\n\n  /**\n   * \n   * @param {any} value \n   * @param {OtherCustomColumnInfo | VectorColumnInfo} columnInfo\n   * @returns \n   */\n  this.encodeCustom = function (value, columnInfo) {\n\n    if ('customTypeName' in columnInfo && columnInfo.customTypeName === 'vector') {\n      return this.encodeVector(value, columnInfo);\n    }\n\n    if(typeof columnInfo.info === 'string' && columnInfo.info.startsWith(customTypeNames.vector)) {\n      const vectorColumnInfo = /** @type {VectorColumnInfo} */ (this.parseFqTypeName(columnInfo.info));\n      return this.encodeVector(value, vectorColumnInfo);\n    }\n\n    const handler = customEncoders[columnInfo.info];\n    if (handler) {\n      return handler.call(this, value);\n    }\n    throw new TypeError('No encoding handler found for type ' + columnInfo);\n  };\n  /**\n   * @param {Boolean} value\n   * @returns {Buffer}\n   * @private\n   */\n  this.encodeBoolean = function (value) {\n    return value ? buffers.int8One : buffers.int8Zero;\n  };\n  /**\n   * @param {Number|String} value\n   * @private\n   */\n  this.encodeInt = function (value) {\n    if (isNaN(value)) {\n      throw new TypeError('Expected Number, obtained ' + util.inspect(value));\n    }\n    const buf = utils.allocBufferUnsafe(4);\n    buf.writeInt32BE(value, 0);\n    return buf;\n  };\n  /**\n   * @param {Number|String} value\n   * @private\n   */\n  this.encodeSmallint = function (value) {\n    if (isNaN(value)) {\n      throw new TypeError('Expected Number, obtained ' + util.inspect(value));\n    }\n    const buf = utils.allocBufferUnsafe(2);\n    buf.writeInt16BE(value, 0);\n    return buf;\n  };\n  /**\n   * @param {Number} value\n   * @private\n   */\n  this.encodeTinyint = function (value) {\n    if (isNaN(value)) {\n      throw new TypeError('Expected Number, obtained ' + util.inspect(value));\n    }\n    const buf = utils.allocBufferUnsafe(1);\n    buf.writeInt8(value, 0);\n    return buf;\n  };\n  this.encodeList = function (value, columnInfo) {\n    const subtype = columnInfo.info;\n    if (!Array.isArray(value)) {\n      throw new TypeError('Not a valid list value, expected Array obtained ' + util.inspect(value));\n    }\n    if (value.length === 0) {\n      return null;\n    }\n    const parts = [];\n    parts.push(this.getLengthBuffer(value));\n    for (let i = 0;i < value.length;i++) {\n      const val = value[i];\n      if (val === null || typeof val === 'undefined' || val === types.unset) {\n        throw new TypeError('A collection can\\'t contain null or unset values');\n      }\n      const bytes = this.encode(val, subtype);\n      //include item byte length\n      parts.push(this.getLengthBuffer(bytes));\n      //include item\n      parts.push(bytes);\n    }\n    return Buffer.concat(parts);\n  };\n  this.encodeSet = function (value, columnInfo) {\n    if (this.encodingOptions.set && value instanceof this.encodingOptions.set) {\n      const arr = [];\n      value.forEach(function (x) {\n        arr.push(x);\n      });\n      return this.encodeList(arr, columnInfo);\n    }\n    return this.encodeList(value, columnInfo);\n  };\n  /**\n   * Serializes a map into a Buffer\n   * @param value\n   * @param {MapColumnInfo} columnInfo\n   * @returns {Buffer}\n   * @private\n   */\n  this.encodeMap = function (value, columnInfo) {\n    const subtypes = columnInfo.info;\n    const parts = [];\n    let propCounter = 0;\n    let keySubtype = null;\n    let valueSubtype = null;\n    const self = this;\n    if (subtypes) {\n      keySubtype = subtypes[0];\n      valueSubtype = subtypes[1];\n    }\n    function addItem(val, key) {\n      if (key === null || typeof key === 'undefined' || key === types.unset) {\n        throw new TypeError('A map can\\'t contain null or unset keys');\n      }\n      if (val === null || typeof val === 'undefined' || val === types.unset) {\n        throw new TypeError('A map can\\'t contain null or unset values');\n      }\n      const keyBuffer = self.encode(key, keySubtype);\n      //include item byte length\n      parts.push(self.getLengthBuffer(keyBuffer));\n      //include item\n      parts.push(keyBuffer);\n      //value\n      const valueBuffer = self.encode(val, valueSubtype);\n      //include item byte length\n      parts.push(self.getLengthBuffer(valueBuffer));\n      //include item\n      if (valueBuffer !== null) {\n        parts.push(valueBuffer);\n      }\n      propCounter++;\n    }\n    if (this.encodingOptions.map && value instanceof this.encodingOptions.map) {\n      //Use Map#forEach() method to iterate\n      value.forEach(addItem);\n    }\n    else {\n      //Use object\n      for (const key in value) {\n        if (!value.hasOwnProperty(key)) {\n          continue;\n        }\n        const val = value[key];\n        addItem(val, key);\n      }\n    }\n\n    parts.unshift(this.getLengthBuffer(propCounter));\n    return Buffer.concat(parts);\n  };\n  /**\n   * \n   * @param {any} value \n   * @param {UdtColumnInfo} columnInfo \n   * @returns \n   */\n  this.encodeUdt = function (value, columnInfo) {\n    const udtInfo = columnInfo.info;\n    const parts = [];\n    let totalLength = 0;\n    for (let i = 0; i < udtInfo.fields.length; i++) {\n      const field = udtInfo.fields[i];\n      const item = this.encode(value[field.name], field.type);\n      if (!item) {\n        parts.push(nullValueBuffer);\n        totalLength += 4;\n        continue;\n      }\n      if (item === types.unset) {\n        parts.push(unsetValueBuffer);\n        totalLength += 4;\n        continue;\n      }\n      const lengthBuffer = utils.allocBufferUnsafe(4);\n      lengthBuffer.writeInt32BE(item.length, 0);\n      parts.push(lengthBuffer);\n      parts.push(item);\n      totalLength += item.length + 4;\n    }\n    return Buffer.concat(parts, totalLength);\n  };\n  /**\n   * \n   * @param {any} value \n   * @param {TupleColumnInfo} columnInfo\n   * @returns \n   */\n  this.encodeTuple = function (value, columnInfo) {\n    const tupleInfo = columnInfo.info;\n    const parts = [];\n    let totalLength = 0;\n    const length = Math.min(tupleInfo.length, value.length);\n\n    for (let i = 0; i < length; i++) {\n      const type = tupleInfo[i];\n      const item = this.encode(value.get(i), type);\n\n      if (!item) {\n        parts.push(nullValueBuffer);\n        totalLength += 4;\n        continue;\n      }\n\n      if (item === types.unset) {\n        parts.push(unsetValueBuffer);\n        totalLength += 4;\n        continue;\n      }\n\n      const lengthBuffer = utils.allocBufferUnsafe(4);\n      lengthBuffer.writeInt32BE(item.length, 0);\n      parts.push(lengthBuffer);\n      parts.push(item);\n      totalLength += item.length + 4;\n    }\n\n    return Buffer.concat(parts, totalLength);\n  };\n\n  /**\n   * \n   * @param {Buffer} buffer \n   * @param {VectorColumnInfo} params \n   * @returns {Vector}\n   */\n  this.decodeVector = function(buffer, params) {\n    const subtype = params.info[0];\n    const dimension = params.info[1];\n    const elemLength = this.serializationSizeIfFixed(subtype);\n\n    const rv = [];\n    let offset = 0;\n    for (let i = 0; i < dimension; i++) {\n      if (elemLength === -1) {\n        // var sized\n        const [size, bytesRead] = utils.VIntCoding.uvintUnpack(buffer.subarray(offset));\n        offset += bytesRead;\n        if (offset + size > buffer.length) {\n          throw new TypeError('Not enough bytes to decode the vector');\n        }\n        rv[i] = this.decode(buffer.subarray(offset, offset + size), subtype);\n        offset += size;\n      }else{\n        if (offset + elemLength > buffer.length) {\n          throw new TypeError('Not enough bytes to decode the vector');\n        }\n        rv[i] = this.decode(buffer.subarray(offset, offset + elemLength), subtype);\n        offset += elemLength;\n      }\n    }\n    if (offset !== buffer.length) {\n      throw new TypeError('Extra bytes found after decoding the vector');\n    }\n    const typeInfo = (types.getDataTypeNameByCode(subtype));\n    return new Vector(rv, typeInfo);\n  };\n\n  /**\n   * @param {ColumnInfo} cqlType\n   * @returns {Number}\n   */\n  this.serializationSizeIfFixed = function (cqlType) {\n    switch (cqlType.code) {\n      case dataTypes.bigint:\n        return 8;\n      case dataTypes.boolean:\n        return 1;\n      case dataTypes.timestamp:\n        return 8;\n      case dataTypes.double:\n        return 8;\n      case dataTypes.float:\n        return 4;\n      case dataTypes.int:\n        return 4;\n      case dataTypes.timeuuid:\n        return 16;\n      case dataTypes.uuid:\n        return 16;\n      case dataTypes.custom:\n        if ('customTypeName' in cqlType && cqlType.customTypeName === 'vector'){ \n          const subtypeSerialSize = this.serializationSizeIfFixed(cqlType.info[0]);\n          if (subtypeSerialSize === -1){\n            return -1;\n          }\n          return subtypeSerialSize * cqlType.info[1];\n          \n        }\n        return -1;\n      default:\n        return -1;\n    }\n  };\n  /**\n   * @param {Vector} value\n   * @param {VectorColumnInfo} params\n   * @returns {Buffer}\n   */\n  this.encodeVector = function(value, params) {\n\n    if (!(value instanceof Vector)) {\n      throw new TypeError(\"Driver only supports Vector type when encoding a vector\");\n    }\n\n    const dimension = params.info[1];\n    if (value.length !== dimension) {\n      throw new TypeError(`Expected vector with ${dimension} dimensions, observed size of ${value.length}`);\n    }\n\n    if (value.length === 0) {\n      throw new TypeError(\"Cannot encode empty array as vector\");\n    }\n\n    const serializationSize = this.serializationSizeIfFixed(params.info[0]);\n    const encoded = [];\n    for (const elem of value) {\n      const elemBuffer = this.encode(elem, params.info[0]);\n      if (serializationSize === -1) {\n        encoded.push(utils.VIntCoding.uvintPack(elemBuffer.length));\n      }\n      encoded.push(elemBuffer);\n    }\n    return Buffer.concat(encoded);\n  };\n\n  /**\n   * Extract the (typed) arguments from a vector type\n   *\n   * @param {String} typeName\n   * @param {String} stringToExclude Leading string indicating this is a vector type (to be excluded when eval'ing args)\n   * @param {Function} subtypeResolveFn Function used to resolve subtype type; varies depending on type naming convention\n   * @returns {VectorColumnInfo}\n   * @internal\n   */\n  this.parseVectorTypeArgs = function(typeName, stringToExclude, subtypeResolveFn) {\n\n    const argsStartIndex = stringToExclude.length + 1;\n    const argsLength = typeName.length - (stringToExclude.length + 2);\n    const params = parseParams(typeName, argsStartIndex, argsLength);\n    if (params.length === 2) {\n      /** @type {VectorColumnInfo} */\n      const columnInfo = { code: dataTypes.custom, info: [subtypeResolveFn.bind(this)(params[0].trim()), parseInt(params[1].trim(), 10 )], customTypeName : 'vector'};\n      return columnInfo;\n    }\n\n    throw new TypeError('Not a valid type ' + typeName);\n  };\n\n  /**\n   * If not provided, it uses the array of buffers or the parameters and hints to build the routingKey\n   * @param {Array} params\n   * @param {import('..').ExecutionOptions} execOptions\n   * @param [keys] parameter keys and positions in the params array\n   * @throws TypeError\n   * @internal\n   * @ignore\n   */\n  this.setRoutingKeyFromUser = function (params, execOptions, keys) {\n    let totalLength = 0;\n    const userRoutingKey = execOptions.getRoutingKey();\n    if (Array.isArray(userRoutingKey)) {\n      if (userRoutingKey.length === 1) {\n        execOptions.setRoutingKey(userRoutingKey[0]);\n        return;\n      }\n\n      // Its a composite routing key\n      totalLength = 0;\n      for (let i = 0; i < userRoutingKey.length; i++) {\n        const item = userRoutingKey[i];\n        if (!item) {\n          // Invalid routing key part provided by the user, clear the value\n          execOptions.setRoutingKey(null);\n          return;\n        }\n        totalLength += item.length + 3;\n      }\n\n      execOptions.setRoutingKey(concatRoutingKey(userRoutingKey, totalLength));\n      return;\n    }\n    // If routingKey is present, ensure it is a Buffer, Token, or TokenRange.  Otherwise throw an error.\n    if (userRoutingKey) {\n      if (userRoutingKey instanceof Buffer || userRoutingKey instanceof token.Token\n        || userRoutingKey instanceof token.TokenRange) {\n        return;\n      }\n\n      throw new TypeError(`Unexpected routingKey '${util.inspect(userRoutingKey)}' provided. ` +\n        `Expected Buffer, Array<Buffer>, Token, or TokenRange.`);\n    }\n\n    // If no params are present, return as routing key cannot be determined.\n    if (!params || params.length === 0) {\n      return;\n    }\n\n    let routingIndexes = execOptions.getRoutingIndexes();\n    if (execOptions.getRoutingNames()) {\n      routingIndexes = execOptions.getRoutingNames().map(k => keys[k]);\n    }\n    if (!routingIndexes) {\n      return;\n    }\n\n    const parts = [];\n    const hints = execOptions.getHints() || utils.emptyArray;\n\n    const encodeParam = !keys ?\n      (i => this.encode(params[i], hints[i])) :\n      (i => this.encode(params[i].value, hints[i]));\n\n    try {\n      totalLength = this._encodeRoutingKeyParts(parts, routingIndexes, encodeParam);\n    } catch (e) {\n      // There was an error encoding a parameter that is part of the routing key,\n      // ignore now to fail afterwards\n    }\n\n    if (totalLength === 0) {\n      return;\n    }\n\n    execOptions.setRoutingKey(concatRoutingKey(parts, totalLength));\n  };\n\n  /**\n   * Sets the routing key in the options based on the prepared statement metadata.\n   * @param {Object} meta Prepared metadata\n   * @param {Array} params Array of parameters\n   * @param {ExecutionOptions} execOptions\n   * @throws TypeError\n   * @internal\n   * @ignore\n   */\n  this.setRoutingKeyFromMeta = function (meta, params, execOptions) {\n    const routingIndexes = execOptions.getRoutingIndexes();\n    if (!routingIndexes) {\n      return;\n    }\n    const parts = new Array(routingIndexes.length);\n    const encodeParam = i => {\n      const columnInfo = meta.columns[i];\n      return this.encode(params[i], columnInfo ? columnInfo.type : null);\n    };\n\n    let totalLength = 0;\n\n    try {\n      totalLength = this._encodeRoutingKeyParts(parts, routingIndexes, encodeParam);\n    } catch (e) {\n      // There was an error encoding a parameter that is part of the routing key,\n      // ignore now to fail afterwards\n    }\n\n    if (totalLength === 0) {\n      return;\n    }\n\n    execOptions.setRoutingKey(concatRoutingKey(parts, totalLength));\n  };\n\n  /**\n   * @param {Array} parts\n   * @param {Array} routingIndexes\n   * @param {Function} encodeParam\n   * @returns {Number} The total length\n   * @private\n   */\n  this._encodeRoutingKeyParts = function (parts, routingIndexes, encodeParam) {\n    let totalLength = 0;\n    for (let i = 0; i < routingIndexes.length; i++) {\n      const paramIndex = routingIndexes[i];\n      if (paramIndex === undefined) {\n        // Bad input from the user, ignore\n        return 0;\n      }\n\n      const item = encodeParam(paramIndex);\n      if (item === null || item === undefined || item === types.unset) {\n        // The encoded partition key should an instance of Buffer\n        // Let it fail later in the pipeline for null/undefined parameter values\n        return 0;\n      }\n\n      // Per each part of the routing key, 3 extra bytes are needed\n      totalLength += item.length + 3;\n      parts[i] = item;\n    }\n    return totalLength;\n  };\n\n  /**\n   * Parses a CQL name string into data type information\n   * @param {String} keyspace\n   * @param {String} typeName\n   * @param {Number} startIndex\n   * @param {Number|null} length\n   * @param {Function} udtResolver\n   * @async\n   * @returns {Promise.<ColumnInfo>} callback Callback invoked with err and  {{code: number, info: Object|Array|null, options: {frozen: Boolean}}}\n   * @internal\n   * @throws {Error}\n   * @ignore\n   */\n  this.parseTypeName = async function (keyspace, typeName, startIndex, length, udtResolver) {\n    startIndex = startIndex || 0;\n    if (!length) {\n      length = typeName.length;\n    }\n\n    let innerTypes;\n    let frozen = false;\n\n    if (typeName.indexOf(\"'\", startIndex) === startIndex) {\n      //If quoted, this is a custom type.\n      const info = typeName.substr(startIndex+1, length-2);\n      return {\n        code: dataTypes.custom,\n        info: info,\n      };\n    }\n\n    if (!length) {\n      length = typeName.length;\n    }\n\n    if (typeName.indexOf(cqlNames.frozen, startIndex) === startIndex) {\n      //Remove the frozen token\n      startIndex += cqlNames.frozen.length + 1;\n      length -= cqlNames.frozen.length + 2;\n      frozen = true;\n    }\n\n    if (typeName.indexOf(cqlNames.list, startIndex) === startIndex) {\n      //move cursor across the name and bypass the angle brackets\n      startIndex += cqlNames.list.length + 1;\n      length -= cqlNames.list.length + 2;\n      innerTypes = parseParams(typeName, startIndex, length, '<', '>');\n\n      if (innerTypes.length !== 1) {\n        throw new TypeError('Not a valid type ' + typeName);\n      }\n\n      const info = await this.parseTypeName(keyspace, innerTypes[0], 0, null, udtResolver);\n      return {\n        code: dataTypes.list,\n        info: info,\n        options: {\n          frozen: frozen\n        }\n      };\n    }\n\n    if (typeName.indexOf(cqlNames.set, startIndex) === startIndex) {\n      //move cursor across the name and bypass the angle brackets\n      startIndex += cqlNames.set.length + 1;\n      length -= cqlNames.set.length + 2;\n      innerTypes = parseParams(typeName, startIndex, length, '<', '>');\n\n      if (innerTypes.length !== 1) {\n        throw new TypeError('Not a valid type ' + typeName);\n      }\n\n      const info = await this.parseTypeName(keyspace, innerTypes[0], 0, null, udtResolver);\n      return {\n        code: dataTypes.set,\n        info: info,\n        options: {\n          frozen: frozen\n        }\n      };\n    }\n\n    if (typeName.indexOf(cqlNames.map, startIndex) === startIndex) {\n      //move cursor across the name and bypass the angle brackets\n      startIndex += cqlNames.map.length + 1;\n      length -= cqlNames.map.length + 2;\n      innerTypes = parseParams(typeName, startIndex, length, '<', '>');\n\n      //It should contain the key and value types\n      if (innerTypes.length !== 2) {\n        throw new TypeError('Not a valid type ' + typeName);\n      }\n\n      const info = await this._parseChildTypes(keyspace, innerTypes, udtResolver);\n      return {\n        code: dataTypes.map,\n        info: info,\n        options: {\n          frozen: frozen\n        }\n      };\n    }\n\n    if (typeName.indexOf(cqlNames.tuple, startIndex) === startIndex) {\n      //move cursor across the name and bypass the angle brackets\n      startIndex += cqlNames.tuple.length + 1;\n      length -= cqlNames.tuple.length + 2;\n      innerTypes = parseParams(typeName, startIndex, length, '<', '>');\n\n      if (innerTypes.length < 1) {\n        throw new TypeError('Not a valid type ' + typeName);\n      }\n\n      const info = await this._parseChildTypes(keyspace, innerTypes, udtResolver);\n      return {\n        code: dataTypes.tuple,\n        info: info,\n        options: {frozen: frozen}\n      };\n    }\n\n    if (typeName.indexOf(cqlNames.vector, startIndex) === startIndex) {\n      // It's a vector, so record the subtype and dimension.\n\n      // parseVectorTypeArgs is not an async function but we are.  To keep things simple let's ask the\n      // function to just return whatever it finds for an arg and we'll eval it after the fact\n      const params = this.parseVectorTypeArgs.bind(this)(typeName, cqlNames.vector, (arg) => arg );\n      params[\"info\"][0] = await this.parseTypeName(keyspace, params[\"info\"][0]);\n\n      return params;\n    }\n\n    const quoted = typeName.indexOf('\"', startIndex) === startIndex;\n    if (quoted) {\n      // Remove quotes\n      startIndex++;\n      length -= 2;\n    }\n\n    // Quick check if its a single type\n    if (startIndex > 0) {\n      typeName = typeName.substr(startIndex, length);\n    }\n\n    // Un-escape double quotes if quoted.\n    if (quoted) {\n      typeName = typeName.replace('\"\"', '\"');\n    }\n\n    const typeCode = dataTypes[typeName];\n    if (typeof typeCode === 'number') {\n      return {code : typeCode, info: null};\n    }\n\n    if (typeName === cqlNames.duration) {\n      return {code : dataTypes.custom, info : customTypeNames.duration};\n    }\n\n    if (typeName === cqlNames.empty) {\n      // Set as custom\n      return {code : dataTypes.custom, info : 'empty'};\n    }\n\n    const udtInfo = await udtResolver(keyspace, typeName);\n    if (udtInfo) {\n      return {\n        code: dataTypes.udt,\n        info: udtInfo,\n        options: {\n          frozen: frozen\n        }\n      };\n    }\n\n    throw new TypeError('Not a valid type \"' + typeName + '\"');\n  };\n\n  /**\n   * @param {String} keyspace\n   * @param {Array} typeNames\n   * @param {Function} udtResolver\n   * @returns {Promise}\n   * @private\n   */\n  this._parseChildTypes = function (keyspace, typeNames, udtResolver) {\n    return Promise.all(typeNames.map(name => this.parseTypeName(keyspace, name.trim(), 0, null, udtResolver)));\n  };\n\n  /**\n   * Parses a Cassandra fully-qualified class name string into data type information\n   * @param {String} typeName\n   * @param {Number} [startIndex]\n   * @param {Number} [length]\n   * @throws {TypeError}\n   * @returns {ColumnInfo}\n   * @internal\n   * @ignore\n   */\n  this.parseFqTypeName = function (typeName, startIndex, length) {\n    let frozen = false;\n    let reversed = false;\n    startIndex = startIndex || 0;\n    let params;\n    if (!length) {\n      length = typeName.length;\n    }\n    if (length > complexTypeNames.reversed.length && typeName.indexOf(complexTypeNames.reversed) === startIndex) {\n      //Remove the reversed token\n      startIndex += complexTypeNames.reversed.length + 1;\n      length -= complexTypeNames.reversed.length + 2;\n      reversed = true;\n    }\n    if (length > complexTypeNames.frozen.length &&\n        typeName.indexOf(complexTypeNames.frozen, startIndex) === startIndex) {\n      //Remove the frozen token\n      startIndex += complexTypeNames.frozen.length + 1;\n      length -= complexTypeNames.frozen.length + 2;\n      frozen = true;\n    }\n    const options = {\n      frozen: frozen,\n      reversed: reversed\n    };\n    if (typeName === complexTypeNames.empty) {\n      //set as custom\n      return {\n        code: dataTypes.custom,\n        info: 'empty',\n        options: options\n      };\n    }\n    //Quick check if its a single type\n    if (length <= singleFqTypeNamesLength) {\n      if (startIndex > 0) {\n        typeName = typeName.substr(startIndex, length);\n      }\n      const typeCode = singleTypeNames[typeName];\n      if (typeof typeCode === 'number') {\n        return {code : typeCode, info: null, options : options};\n      }\n      // special handling for duration\n      if (typeName === customTypeNames.duration) {\n        return {code: dataTypes.duration, options: options};\n      }\n      throw new TypeError('Not a valid type \"' + typeName + '\"');\n    }\n    if (typeName.indexOf(complexTypeNames.list, startIndex) === startIndex) {\n      //Its a list\n      //org.apache.cassandra.db.marshal.ListType(innerType)\n      //move cursor across the name and bypass the parenthesis\n      startIndex += complexTypeNames.list.length + 1;\n      length -= complexTypeNames.list.length + 2;\n      params = parseParams(typeName, startIndex, length);\n      if (params.length !== 1) {\n        throw new TypeError('Not a valid type ' + typeName);\n      }\n      const info = this.parseFqTypeName(params[0]);\n      return {\n        code: dataTypes.list,\n        info: info,\n        options: options\n      };\n    }\n    if (typeName.indexOf(complexTypeNames.set, startIndex) === startIndex) {\n      //Its a set\n      //org.apache.cassandra.db.marshal.SetType(innerType)\n      //move cursor across the name and bypass the parenthesis\n      startIndex += complexTypeNames.set.length + 1;\n      length -= complexTypeNames.set.length + 2;\n      params = parseParams(typeName, startIndex, length);\n      if (params.length !== 1)\n      {\n        throw new TypeError('Not a valid type ' + typeName);\n      }\n      const info = this.parseFqTypeName(params[0]);\n      return {\n        code : dataTypes.set,\n        info : info,\n        options: options\n      };\n    }\n    if (typeName.indexOf(complexTypeNames.map, startIndex) === startIndex) {\n      //org.apache.cassandra.db.marshal.MapType(keyType,valueType)\n      //move cursor across the name and bypass the parenthesis\n      startIndex += complexTypeNames.map.length + 1;\n      length -= complexTypeNames.map.length + 2;\n      params = parseParams(typeName, startIndex, length);\n      //It should contain the key and value types\n      if (params.length !== 2) {\n        throw new TypeError('Not a valid type ' + typeName);\n      }\n      const info1 = this.parseFqTypeName(params[0]);\n      const info2 = this.parseFqTypeName(params[1]);\n      return {\n        code : dataTypes.map,\n        info : [info1, info2],\n        options: options\n      };\n    }\n    if (typeName.indexOf(complexTypeNames.udt, startIndex) === startIndex) {\n      //move cursor across the name and bypass the parenthesis\n      startIndex += complexTypeNames.udt.length + 1;\n      length -= complexTypeNames.udt.length + 2;\n      const udtType = this._parseUdtName(typeName, startIndex, length);\n      udtType.options = options;\n      return udtType;\n    }\n    if (typeName.indexOf(complexTypeNames.tuple, startIndex) === startIndex) {\n      //move cursor across the name and bypass the parenthesis\n      startIndex += complexTypeNames.tuple.length + 1;\n      length -= complexTypeNames.tuple.length + 2;\n      params = parseParams(typeName, startIndex, length);\n      if (params.length < 1) {\n        throw new TypeError('Not a valid type ' + typeName);\n      }\n      const info = params.map(x => this.parseFqTypeName(x));\n      return {\n        code : dataTypes.tuple,\n        info : info,\n        options: options\n      };\n    }\n\n    if (typeName.indexOf(customTypeNames.vector, startIndex) === startIndex) {\n      // It's a vector, so record the subtype and dimension.\n      const params = this.parseVectorTypeArgs.bind(this)(typeName, customTypeNames.vector, this.parseFqTypeName);\n      params.options = options;\n      return params;\n    }\n\n    // Assume custom type if cannot be parsed up to this point.\n    const info = typeName.substr(startIndex, length);\n    return {\n      code: dataTypes.custom,\n      info: info,\n      options: options\n    };\n  };\n  /**\n   * Parses type names with composites\n   * @param {String} typesString\n   * @returns {{types: Array, isComposite: Boolean, hasCollections: Boolean}}\n   * @internal\n   * @ignore\n   */\n  this.parseKeyTypes = function (typesString) {\n    let i = 0;\n    let length = typesString.length;\n    const isComposite = typesString.indexOf(complexTypeNames.composite) === 0;\n    if (isComposite) {\n      i = complexTypeNames.composite.length + 1;\n      length--;\n    }\n    const types = [];\n    let startIndex = i;\n    let nested = 0;\n    let inCollectionType = false;\n    let hasCollections = false;\n    //as collection types are not allowed, it is safe to split by ,\n    while (++i < length) {\n      switch (typesString[i]) {\n        case ',':\n          if (nested > 0) {\n            break;\n          }\n          if (inCollectionType) {\n            //remove type id\n            startIndex = typesString.indexOf(':', startIndex) + 1;\n          }\n          types.push(typesString.substring(startIndex, i));\n          startIndex = i + 1;\n          break;\n        case '(':\n          if (nested === 0 && typesString.indexOf(complexTypeNames.collection, startIndex) === startIndex) {\n            inCollectionType = true;\n            hasCollections = true;\n            //skip collection type\n            i++;\n            startIndex = i;\n            break;\n          }\n          nested++;\n          break;\n        case ')':\n          if (inCollectionType && nested === 0){\n            types.push(typesString.substring(typesString.indexOf(':', startIndex) + 1, i));\n            startIndex = i + 1;\n            break;\n          }\n          nested--;\n          break;\n      }\n    }\n    if (startIndex < length) {\n      types.push(typesString.substring(startIndex, length));\n    }\n    return {\n      types: types.map(name => this.parseFqTypeName(name)),\n      hasCollections: hasCollections,\n      isComposite: isComposite\n    };\n  };\n  /**\n   * \n   * @param {string} typeName \n   * @param {number} startIndex \n   * @param {number} length \n   * @returns {UdtColumnInfo} \n   */\n  this._parseUdtName = function (typeName, startIndex, length) {\n    const udtParams = parseParams(typeName, startIndex, length);\n    if (udtParams.length < 2) {\n      //It should contain at least the keyspace, name of the udt and a type\n      throw new TypeError('Not a valid type ' + typeName);\n    }\n    /**\n     * @type {{keyspace: String, name: String, fields: Array}}\n     */\n    const udtInfo = {\n      keyspace: udtParams[0],\n      name: utils.allocBufferFromString(udtParams[1], 'hex').toString(),\n      fields: []\n    };\n    for (let i = 2; i < udtParams.length; i++) {\n      const p = udtParams[i];\n      const separatorIndex = p.indexOf(':');\n      const fieldType = this.parseFqTypeName(p, separatorIndex + 1, p.length - (separatorIndex + 1));\n      udtInfo.fields.push({\n        name: utils.allocBufferFromString(p.substr(0, separatorIndex), 'hex').toString(),\n        type: fieldType\n      });\n    }\n    return {\n      code : dataTypes.udt,\n      info : udtInfo\n    };\n  };\n}\n\n/**\n * Sets the encoder and decoder methods for this instance\n * @private\n */\nfunction setEncoders() {\n  this.decoders = {\n    [dataTypes.custom]: this.decodeCustom,\n    [dataTypes.ascii]: this.decodeAsciiString,\n    [dataTypes.bigint]: this.decodeLong,\n    [dataTypes.blob]: this.decodeBlob,\n    [dataTypes.boolean]: this.decodeBoolean,\n    [dataTypes.counter]: this.decodeLong,\n    [dataTypes.decimal]: this.decodeDecimal,\n    [dataTypes.double]: this.decodeDouble,\n    [dataTypes.float]: this.decodeFloat,\n    [dataTypes.int]: this.decodeInt,\n    [dataTypes.text]: this.decodeUtf8String,\n    [dataTypes.timestamp]: this.decodeTimestamp,\n    [dataTypes.uuid]: this.decodeUuid,\n    [dataTypes.varchar]: this.decodeUtf8String,\n    [dataTypes.varint]: this.decodeVarint,\n    [dataTypes.timeuuid]: this.decodeTimeUuid,\n    [dataTypes.inet]: this.decodeInet,\n    [dataTypes.date]: this.decodeDate,\n    [dataTypes.time]: this.decodeTime,\n    [dataTypes.smallint]: this.decodeSmallint,\n    [dataTypes.tinyint]: this.decodeTinyint,\n    [dataTypes.duration]: decodeDuration,\n    [dataTypes.list]: this.decodeList,\n    [dataTypes.map]: this.decodeMap,\n    [dataTypes.set]: this.decodeSet,\n    [dataTypes.udt]: this.decodeUdt,\n    [dataTypes.tuple]: this.decodeTuple\n  };\n\n  this.encoders = {\n    [dataTypes.custom]: this.encodeCustom,\n    [dataTypes.ascii]: this.encodeAsciiString,\n    [dataTypes.bigint]: this.encodeLong,\n    [dataTypes.blob]: this.encodeBlob,\n    [dataTypes.boolean]: this.encodeBoolean,\n    [dataTypes.counter]: this.encodeLong,\n    [dataTypes.decimal]: this.encodeDecimal,\n    [dataTypes.double]: this.encodeDouble,\n    [dataTypes.float]: this.encodeFloat,\n    [dataTypes.int]: this.encodeInt,\n    [dataTypes.text]: this.encodeUtf8String,\n    [dataTypes.timestamp]: this.encodeTimestamp,\n    [dataTypes.uuid]: this.encodeUuid,\n    [dataTypes.varchar]: this.encodeUtf8String,\n    [dataTypes.varint]: this.encodeVarint,\n    [dataTypes.timeuuid]: this.encodeUuid,\n    [dataTypes.inet]: this.encodeInet,\n    [dataTypes.date]: this.encodeDate,\n    [dataTypes.time]: this.encodeTime,\n    [dataTypes.smallint]: this.encodeSmallint,\n    [dataTypes.tinyint]: this.encodeTinyint,\n    [dataTypes.duration]: encodeDuration,\n    [dataTypes.list]: this.encodeList,\n    [dataTypes.map]: this.encodeMap,\n    [dataTypes.set]: this.encodeSet,\n    [dataTypes.udt]: this.encodeUdt,\n    [dataTypes.tuple]: this.encodeTuple\n  };\n}\n\n/**\n * Decodes Cassandra bytes into Javascript values.\n * <p>\n * This is part of an <b>experimental</b> API, this can be changed future releases.\n * </p>\n * @param {Buffer} buffer Raw buffer to be decoded.\n * @param {ColumnInfo} type \n */\nEncoder.prototype.decode = function (buffer, type) {\n  if (buffer === null || (buffer.length === 0 && !zeroLengthTypesSupported.has(type.code))) {\n    return null;\n  }\n\n  const decoder = this.decoders[type.code];\n\n  if (!decoder) {\n    throw new Error('Unknown data type: ' + type.code);\n  }\n\n  return decoder.call(this, buffer, type);\n};\n\n/**\n * Encodes Javascript types into Buffer according to the Cassandra protocol.\n * <p>\n * This is part of an <b>experimental</b> API, this can be changed future releases.\n * </p>\n * @param {*} value The value to be converted.\n * @param {ColumnInfo | Number | String} typeInfo The type information.\n * <p>It can be either a:</p>\n * <ul>\n *   <li>A <code>String</code> representing the data type.</li>\n *   <li>A <code>Number</code> with one of the values of {@link module:types~dataTypes dataTypes}.</li>\n *   <li>An <code>Object</code> containing the <code>type.code</code> as one of the values of\n *   {@link module:types~dataTypes dataTypes} and <code>type.info</code>.\n *   </li>\n * </ul>\n * @returns {Buffer}\n * @throws {TypeError} When there is an encoding error\n */\nEncoder.prototype.encode = function (value, typeInfo) {\n  if (value === undefined) {\n    value = this.encodingOptions.useUndefinedAsUnset && this.protocolVersion >= 4 ? types.unset : null;\n  }\n\n  if (value === types.unset) {\n    if (!types.protocolVersion.supportsUnset(this.protocolVersion)) {\n      throw new TypeError('Unset value can not be used for this version of Cassandra, protocol version: ' +\n        this.protocolVersion);\n    }\n\n    return value;\n  }\n\n  if (value === null || value instanceof Buffer) {\n    return value;\n  }\n\n  /** @type {ColumnInfo | null} */\n  let type = null;\n\n  if (typeInfo) {\n    if (typeof typeInfo === 'number') {\n      type = {\n        code: typeInfo\n      };\n    }\n    else if (typeof typeInfo === 'string') {\n      type = dataTypes.getByName(typeInfo);\n    }\n    else if (typeof typeInfo.code === 'number') {\n      type = typeInfo;\n    }\n    if (type == null || typeof type.code !== 'number') {\n      throw new TypeError('Type information not valid, only String and Number values are valid hints');\n    }\n  }\n  else {\n    //Lets guess\n    type = Encoder.guessDataType(value);\n    if (!type) {\n      throw new TypeError('Target data type could not be guessed, you should use prepared statements for accurate type mapping. Value: ' + util.inspect(value));\n    }\n  }\n\n  const encoder = this.encoders[type.code];\n\n  if (!encoder) {\n    throw new Error('Type not supported ' + type.code);\n  }\n\n  return encoder.call(this, value, type);\n};\n\n/**\n * Try to guess the Cassandra type to be stored, based on the javascript value type\n * @param value\n * @returns {ColumnInfo | null}\n * @ignore\n * @internal\n */\nEncoder.guessDataType = function (value) {\n  const esTypeName = (typeof value);\n  if (esTypeName === 'number') {\n    return {code : dataTypes.double};\n  }\n  else if (esTypeName === 'string') {\n    if (value.length === 36 && uuidRegex.test(value)){\n      return {code : dataTypes.uuid};\n    }\n    return {code : dataTypes.text};\n    \n  }\n  else if (esTypeName === 'boolean') {\n    return {code : dataTypes.boolean};\n  }\n  else if (value instanceof Buffer) {\n    return {code : dataTypes.blob};\n  }\n  else if (value instanceof Date) {\n    return {code : dataTypes.timestamp};\n  }\n  else if (value instanceof Long) {\n    return {code : dataTypes.bigint};\n  }\n  else if (value instanceof Integer) {\n    return {code : dataTypes.varint};\n  }\n  else if (value instanceof BigDecimal) {\n    return {code : dataTypes.decimal};\n  }\n  else if (value instanceof types.Uuid) {\n    return {code : dataTypes.uuid};\n  }\n  else if (value instanceof types.InetAddress) {\n    return {code : dataTypes.inet};\n  }\n  else if (value instanceof types.Tuple) {\n    return {code : dataTypes.tuple};\n  }\n  else if (value instanceof types.LocalDate) {\n    return {code : dataTypes.date};\n  }\n  else if (value instanceof types.LocalTime) {\n    return {code : dataTypes.time};\n  }\n  else if (value instanceof types.Duration) {\n    return {code : dataTypes.custom,\n      info : customTypeNames.duration};\n  }\n  // Map JS TypedArrays onto vectors\n  else if (value instanceof types.Vector) {\n    if (value && value.length > 0) {\n      if (value instanceof Float32Array) {\n        return {\n          code: dataTypes.custom,\n          customTypeName: 'vector',\n          info: [ {code: dataTypes.float}, value.length]\n        };\n      }\n     \n      /** @type {ColumnInfo?} */\n      let subtypeColumnInfo = null;\n      // try to fetch the subtype from the Vector, or else guess\n      if (value.subtype) {\n        try {\n          subtypeColumnInfo = dataTypes.getByName(value.subtype);\n        } catch (TypeError) {\n          // ignore\n        }\n      } \n      if (subtypeColumnInfo == null){\n        subtypeColumnInfo = this.guessDataType(value[0]);\n      }\n      if (subtypeColumnInfo != null) {\n        return {\n          code: dataTypes.custom,\n          customTypeName: 'vector',\n          info: [subtypeColumnInfo, value.length]\n        };\n      }\n      throw new TypeError(\"Cannot guess subtype from element \" + value[0]);\n    } else {\n      throw new TypeError(\"Cannot guess subtype of empty vector\");\n    }\n  }\n  else if (Array.isArray(value)) {\n    return {code : dataTypes.list};\n  }\n  else if (value instanceof Geometry) {\n    if (value instanceof LineString) {\n      return {code : dataTypes.custom,\n        info : customTypeNames.lineString};\n    } else if (value instanceof Point) {\n      return {code : dataTypes.custom,\n        info : customTypeNames.point};\n    } else if (value instanceof Polygon) {\n      return {code : dataTypes.custom,\n        info : customTypeNames.polygon};\n    }\n  }\n  else if (value instanceof DateRange) {\n    return {code : dataTypes.custom,\n      info : customTypeNames.dateRange};\n  }\n\n  return null;\n};\n\n/**\n * Gets a buffer containing with the bytes (BE) representing the collection length for protocol v2 and below\n * @param {Buffer|Number} value\n * @returns {Buffer}\n * @private\n */\nfunction getLengthBufferV2(value) {\n  if (!value) {\n    return buffers.int16Zero;\n  }\n  const lengthBuffer = utils.allocBufferUnsafe(2);\n  if (typeof value === 'number') {\n    lengthBuffer.writeUInt16BE(value, 0);\n  }\n  else {\n    lengthBuffer.writeUInt16BE(value.length, 0);\n  }\n  return lengthBuffer;\n}\n\n/**\n * Gets a buffer containing with the bytes (BE) representing the collection length for protocol v3 and above\n * @param {Buffer|Number} value\n * @returns {Buffer}\n * @private\n */\nfunction getLengthBufferV3(value) {\n  if (!value) {\n    return buffers.int32Zero;\n  }\n  const lengthBuffer = utils.allocBufferUnsafe(4);\n  if (typeof value === 'number') {\n    lengthBuffer.writeInt32BE(value, 0);\n  }\n  else {\n    lengthBuffer.writeInt32BE(value.length, 0);\n  }\n  return lengthBuffer;\n}\n\n/**\n * @param {Buffer} buffer\n * @private\n */\nfunction handleBufferCopy(buffer) {\n  if (buffer === null) {\n    return null;\n  }\n  return utils.copyBuffer(buffer);\n}\n\n/**\n * @param {Buffer} buffer\n * @private\n */\nfunction handleBufferRef(buffer) {\n  return buffer;\n}\n/**\n * Decodes collection length for protocol v3 and above\n * @param bytes\n * @param offset\n * @returns {Number}\n * @private\n */\nfunction decodeCollectionLengthV3(bytes, offset) {\n  return bytes.readInt32BE(offset);\n}\n/**\n * Decodes collection length for protocol v2 and below\n * @param bytes\n * @param offset\n * @returns {Number}\n * @private\n */\nfunction decodeCollectionLengthV2(bytes, offset) {\n  return bytes.readUInt16BE(offset);\n}\n\nfunction decodeDuration(bytes) {\n  return types.Duration.fromBuffer(bytes);\n}\n\nfunction encodeDuration(value) {\n  if (!(value instanceof types.Duration)) {\n    throw new TypeError('Not a valid duration, expected Duration/Buffer obtained ' + util.inspect(value));\n  }\n  return value.toBuffer();\n}\n\n/**\n * @private\n * @param {Buffer} buffer\n */\nfunction decodeLineString(buffer) {\n  return LineString.fromBuffer(buffer);\n}\n\n/**\n * @private\n * @param {LineString} value\n */\nfunction encodeLineString(value) {\n  return value.toBuffer();\n}\n\n/**\n * @private\n * @param {Buffer} buffer\n */\nfunction decodePoint(buffer) {\n  return Point.fromBuffer(buffer);\n}\n\n/**\n * @private\n * @param {LineString} value\n */\nfunction encodePoint(value) {\n  return value.toBuffer();\n}\n\n/**\n * @private\n * @param {Buffer} buffer\n */\nfunction decodePolygon(buffer) {\n  return Polygon.fromBuffer(buffer);\n}\n\n/**\n * @private\n * @param {Polygon} value\n */\nfunction encodePolygon(value) {\n  return value.toBuffer();\n}\n\nfunction decodeDateRange(buffer) {\n  return DateRange.fromBuffer(buffer);\n}\n\n/**\n * @private\n * @param {DateRange} value\n */\nfunction encodeDateRange(value) {\n  return value.toBuffer();\n}\n\n/**\n * @param {String} value\n * @param {Number} startIndex\n * @param {Number} length\n * @param {String} [open]\n * @param {String} [close]\n * @returns {Array<String>}\n * @private\n */\nfunction parseParams(value, startIndex, length, open, close) {\n  open = open || '(';\n  close = close || ')';\n  const types = [];\n  let paramStart = startIndex;\n  let level = 0;\n  for (let i = startIndex; i < startIndex + length; i++) {\n    const c = value[i];\n    if (c === open) {\n      level++;\n    }\n    if (c === close) {\n      level--;\n    }\n    if (level === 0 && c === ',') {\n      types.push(value.substr(paramStart, i - paramStart));\n      paramStart = i + 1;\n    }\n  }\n  //Add the last one\n  types.push(value.substr(paramStart, length - (paramStart - startIndex)));\n  return types;\n}\n\n/**\n * @param {Array.<Buffer>} parts\n * @param {Number} totalLength\n * @returns {Buffer}\n * @private\n */\nfunction concatRoutingKey(parts, totalLength) {\n  if (totalLength === 0) {\n    return null;\n  }\n  if (parts.length === 1) {\n    return parts[0];\n  }\n  const routingKey = utils.allocBufferUnsafe(totalLength);\n  let offset = 0;\n  for (let i = 0; i < parts.length; i++) {\n    const item = parts[i];\n    routingKey.writeUInt16BE(item.length, offset);\n    offset += 2;\n    item.copy(routingKey, offset);\n    offset += item.length;\n    routingKey[offset] = 0;\n    offset++;\n  }\n  return routingKey;\n}\n\nfunction invertObject(obj) {\n  const rv = {};\n  for(const k in obj){\n    if (obj.hasOwnProperty(k)) {\n      rv[obj[k]] = k;\n    }\n  }\n  return rv;\n}\nEncoder.isTypedArray = function(arg) {\n  // The TypedArray superclass isn't available directly so to detect an instance of a TypedArray\n  // subclass we have to access the prototype of a concrete instance.  There's nothing magical about\n  // Uint8Array here; we could just as easily use any of the other TypedArray subclasses.\n  return (arg instanceof Object.getPrototypeOf(Uint8Array));\n};\n\nmodule.exports = Encoder;\n", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst util = require('util');\nconst utils = require('./utils');\nconst types = require('./types');\nconst errors = require('./errors');\n\n/**\n * Information on the formatting of the returned rows\n */\nconst resultFlag = {\n  globalTablesSpec:   0x0001,\n  hasMorePages:       0x0002,\n  noMetadata:         0x0004,\n  metadataChanged:    0x0008,\n  continuousPaging: 0x40000000,\n  lastContinuousPage: 0x80000000,\n};\n\n// templates for derived error messages.\nconst _writeTimeoutQueryMessage = 'Server timeout during write query at consistency %s (%d peer(s) acknowledged the write over %d required)';\nconst _writeTimeoutBatchLogMessage = 'Server timeout during batchlog write at consistency %s (%d peer(s) acknowledged the write over %d required)';\nconst _writeFailureMessage = 'Server failure during write query at consistency %s (%d responses were required but only %d replicas responded, %d failed)';\nconst _unavailableMessage = 'Not enough replicas available for query at consistency %s (%d required but only %d alive)';\nconst _readTimeoutMessage = 'Server timeout during read query at consistency %s (%s)';\nconst _readFailureMessage = 'Server failure during read query at consistency %s (%d responses were required but only %d replicas responded, %d failed)';\n\n/**\n * Buffer forward reader of CQL binary frames\n * @param {FrameHeader} header\n * @param {Buffer} body\n * @param {Number} [offset]\n */\nclass FrameReader {\n\n  /**\n   * Creates a new instance of the reader\n   * @param {FrameHeader} header\n   * @param {Buffer} body\n   * @param {Number} [offset]\n   */\n  constructor(header, body, offset) {\n    this.header = header;\n    this.opcode = header.opcode;\n    this.offset = offset || 0;\n    this.buf = body;\n  }\n\n  remainingLength() {\n    return this.buf.length - this.offset;\n  }\n\n  getBuffer() {\n    return this.buf;\n  }\n\n  /**\n   * Slices the underlining buffer\n   * @param {Number} begin\n   * @param {Number} [end]\n   * @returns {Buffer}\n   */\n  slice(begin, end) {\n    if (typeof end === 'undefined') {\n      end = this.buf.length;\n    }\n    return this.buf.slice(begin, end);\n  }\n\n  /**\n   * Modifies the underlying buffer, it concatenates the given buffer with the original (internalBuffer = concat(bytes, internalBuffer)\n   */\n  unshift(bytes) {\n    if (this.offset > 0) {\n      throw new Error('Can not modify the underlying buffer if already read');\n    }\n    this.buf = Buffer.concat([bytes, this.buf], bytes.length + this.buf.length);\n  }\n\n  /**\n   * Reads any number of bytes and moves the offset.\n   * if length not provided or it's larger than the remaining bytes, reads to end.\n   * @param length\n   * @returns {Buffer}\n   */\n  read(length) {\n    let end = this.buf.length;\n    if (typeof length !== 'undefined' && this.offset + length < this.buf.length) {\n      end = this.offset + length;\n    }\n    const bytes = this.slice(this.offset, end);\n    this.offset = end;\n    return bytes;\n  }\n\n  /**\n   * Moves the reader cursor to the end\n   */\n  toEnd() {\n    this.offset = this.buf.length;\n  }\n\n  /**\n   * Reads a BE Int and moves the offset\n   * @returns {Number}\n   */\n  readInt() {\n    const result = this.buf.readInt32BE(this.offset);\n    this.offset += 4;\n    return result;\n  }\n\n  /** @returns {Number} */\n  readShort() {\n    const result = this.buf.readUInt16BE(this.offset);\n    this.offset += 2;\n    return result;\n  }\n\n  readByte() {\n    const result = this.buf.readUInt8(this.offset);\n    this.offset += 1;\n    return result;\n  }\n\n  readString() {\n    const length = this.readShort();\n    this.checkOffset(length);\n    const result = this.buf.toString('utf8', this.offset, this.offset + length);\n    this.offset += length;\n    return result;\n  }\n\n  /**\n   * Checks that the new length to read is within the range of the buffer length. Throws a RangeError if not.\n   * @param {Number} newLength\n   */\n  checkOffset(newLength) {\n    if (this.offset + newLength > this.buf.length) {\n      const err = new RangeError('Trying to access beyond buffer length');\n      err.expectedLength = newLength;\n      throw err;\n    }\n  }\n\n  /**\n   * Reads a protocol string list\n   * @returns {Array}\n   */\n  readStringList() {\n    const length = this.readShort();\n    const list = new Array(length);\n    for (let i = 0; i < length; i++) {\n      list[i] = this.readString();\n    }\n    return list;\n  }\n\n  /**\n   * Reads the amount of bytes that the field has and returns them (slicing them).\n   * @returns {Buffer}\n   */\n  readBytes() {\n    const length = this.readInt();\n    if (length < 0) {\n      return null;\n    }\n    this.checkOffset(length);\n    return this.read(length);\n  }\n\n  readShortBytes() {\n    const length = this.readShort();\n    if (length < 0) {\n      return null;\n    }\n    this.checkOffset(length);\n    return this.read(length);\n  }\n\n  /**\n   * Reads an associative array of strings as keys and bytes as values\n   * @param {Number} length\n   * @param {Function} keyFn\n   * @param {Function} valueFn\n   * @returns {Object}\n   */\n  readMap(length, keyFn, valueFn) {\n    if (length < 0) {\n      return null;\n    }\n    const map = {};\n    for (let i = 0; i < length; i++) {\n      map[keyFn.call(this)] = valueFn.call(this);\n    }\n    return map;\n  }\n\n  /**\n   * Reads an associative array of strings as keys and string lists as values\n   * @returns {Object}\n   */\n  readStringMultiMap() {\n    //A [short] n, followed by n pair <k><v> where <k> is a\n    //[string] and <v> is a [string[]].\n    const length = this.readShort();\n    if (length < 0) {\n      return null;\n    }\n    const map = {};\n    for (let i = 0; i < length; i++) {\n      map[this.readString()] = this.readStringList();\n    }\n    return map;\n  }\n\n  /**\n   * Reads a data type definition\n   * @returns {{code: Number, info: Object|null}} An array of 2 elements\n   */\n  readType() {\n    let i;\n    const type = {\n      code: this.readShort(),\n      type: null\n    };\n    switch (type.code) {\n      case types.dataTypes.custom:\n        type.info = this.readString();\n        break;\n      case types.dataTypes.list:\n      case types.dataTypes.set:\n        type.info = this.readType();\n        break;\n      case types.dataTypes.map:\n        type.info = [this.readType(), this.readType()];\n        break;\n      case types.dataTypes.udt:\n        type.info = {\n          keyspace: this.readString(),\n          name: this.readString(),\n          fields: new Array(this.readShort())\n        };\n        for (i = 0; i < type.info.fields.length; i++) {\n          type.info.fields[i] = {\n            name: this.readString(),\n            type: this.readType()\n          };\n        }\n        break;\n      case types.dataTypes.tuple:\n        type.info = new Array(this.readShort());\n        for (i = 0; i < type.info.length; i++) {\n          type.info[i] = this.readType();\n        }\n        break;\n    }\n    return type;\n  }\n\n  /**\n   * Reads an Ip address and port\n   * @returns {{address: exports.InetAddress, port: Number}}\n   */\n  readInet() {\n    const length = this.readByte();\n    const address = this.read(length);\n    return { address: new types.InetAddress(address), port: this.readInt() };\n  }\n\n  /**\n   * Reads an Ip address\n   * @returns {InetAddress}\n   */\n  readInetAddress() {\n    const length = this.readByte();\n    return new types.InetAddress(this.read(length));\n  }\n\n  /**\n   * Reads the body bytes corresponding to the flags\n   * @returns {{traceId: Uuid, warnings: Array, customPayload}}\n   * @throws {RangeError}\n   */\n  readFlagsInfo() {\n    if (this.header.flags === 0) {\n      return utils.emptyObject;\n    }\n    const result = {};\n    if (this.header.flags & types.frameFlags.tracing) {\n      this.checkOffset(16);\n      result.traceId = new types.Uuid(utils.copyBuffer(this.read(16)));\n    }\n    if (this.header.flags & types.frameFlags.warning) {\n      result.warnings = this.readStringList();\n    }\n    if (this.header.flags & types.frameFlags.customPayload) {\n      // Custom payload is a Map<string, Buffer>\n      result.customPayload = this.readMap(this.readShort(), this.readString, this.readBytes);\n    }\n    return result;\n  }\n\n  /**\n   * Reads the metadata from a row or a prepared result response\n   * @param {Number} kind\n   * @returns {Object}\n   * @throws {RangeError}\n   */\n  readMetadata(kind) {\n    let i;\n    //Determines if its a prepared metadata\n    const isPrepared = (kind === types.resultKind.prepared);\n    const meta = {};\n    if (types.protocolVersion.supportsResultMetadataId(this.header.version) && isPrepared) {\n      meta.resultId = utils.copyBuffer(this.readShortBytes());\n    }\n    //as used in Rows and Prepared responses\n    const flags = this.readInt();\n    const columnLength = this.readInt();\n    if (types.protocolVersion.supportsPreparedPartitionKey(this.header.version) && isPrepared) {\n      //read the pk columns\n      meta.partitionKeys = new Array(this.readInt());\n      for (i = 0; i < meta.partitionKeys.length; i++) {\n        meta.partitionKeys[i] = this.readShort();\n      }\n    }\n    if (flags & resultFlag.hasMorePages) {\n      meta.pageState = utils.copyBuffer(this.readBytes());\n    }\n    if (flags & resultFlag.metadataChanged) {\n      meta.newResultId = utils.copyBuffer(this.readShortBytes());\n    }\n    if (flags & resultFlag.continuousPaging) {\n      meta.continuousPageIndex = this.readInt();\n      meta.lastContinuousPage = !!(flags & resultFlag.lastContinuousPage);\n    }\n    if (flags & resultFlag.globalTablesSpec) {\n      meta.global_tables_spec = true;\n      meta.keyspace = this.readString();\n      meta.table = this.readString();\n    }\n    meta.columns = new Array(columnLength);\n    meta.columnsByName = utils.emptyObject;\n    if (isPrepared) {\n      //for prepared metadata, we will need a index of the columns (param) by name\n      meta.columnsByName = {};\n    }\n    for (i = 0; i < columnLength; i++) {\n      const col = {};\n      if (!meta.global_tables_spec) {\n        col.ksname = this.readString();\n        col.tablename = this.readString();\n      }\n      col.name = this.readString();\n      col.type = this.readType();\n      meta.columns[i] = col;\n      if (isPrepared) {\n        meta.columnsByName[col.name] = i;\n      }\n    }\n    return meta;\n  }\n\n  /**\n   * Reads the error from the frame\n   * @throws {RangeError}\n   * @returns {ResponseError}\n   */\n  readError() {\n    const code = this.readInt();\n    const message = this.readString();\n    const err = new errors.ResponseError(code, message);\n    //read extra info\n    switch (code) {\n      case types.responseErrorCodes.unavailableException:\n        err.consistencies = this.readShort();\n        err.required = this.readInt();\n        err.alive = this.readInt();\n        err.message = util.format(_unavailableMessage, types.consistencyToString[err.consistencies], err.required, err.alive);\n        break;\n      case types.responseErrorCodes.readTimeout:\n      case types.responseErrorCodes.readFailure:\n        err.consistencies = this.readShort();\n        err.received = this.readInt();\n        err.blockFor = this.readInt();\n        if (code === types.responseErrorCodes.readFailure) {\n          if (types.protocolVersion.supportsFailureReasonMap(this.header.version)) {\n            err.failures = this.readInt();\n            err.reasons = this.readMap(err.failures, this.readInetAddress, this.readShort);\n          }\n          else {\n            err.failures = this.readInt();\n          }\n        }\n        err.isDataPresent = this.readByte();\n        if (code === types.responseErrorCodes.readTimeout) {\n          let details;\n          if (err.received < err.blockFor) {\n            details = util.format('%d replica(s) responded over %d required', err.received, err.blockFor);\n          }\n          else if (!err.isDataPresent) {\n            details = 'the replica queried for the data didn\\'t respond';\n          }\n          else {\n            details = 'timeout while waiting for repair of inconsistent replica';\n          }\n          err.message = util.format(_readTimeoutMessage, types.consistencyToString[err.consistencies], details);\n        }\n        else {\n          err.message = util.format(_readFailureMessage, types.consistencyToString[err.consistencies], err.blockFor, err.received, err.failures);\n        }\n        break;\n      case types.responseErrorCodes.writeTimeout:\n      case types.responseErrorCodes.writeFailure:\n        err.consistencies = this.readShort();\n        err.received = this.readInt();\n        err.blockFor = this.readInt();\n        if (code === types.responseErrorCodes.writeFailure) {\n          if (types.protocolVersion.supportsFailureReasonMap(this.header.version)) {\n            err.failures = this.readInt();\n            err.reasons = this.readMap(err.failures, this.readInetAddress, this.readShort);\n          }\n          else {\n            err.failures = this.readInt();\n          }\n        }\n        err.writeType = this.readString();\n        if (code === types.responseErrorCodes.writeTimeout) {\n          const template = err.writeType === 'BATCH_LOG' ? _writeTimeoutBatchLogMessage : _writeTimeoutQueryMessage;\n          err.message = util.format(template, types.consistencyToString[err.consistencies], err.received, err.blockFor);\n        }\n        else {\n          err.message = util.format(_writeFailureMessage, types.consistencyToString[err.consistencies], err.blockFor, err.received, err.failures);\n        }\n        break;\n      case types.responseErrorCodes.unprepared:\n        err.queryId = utils.copyBuffer(this.readShortBytes());\n        break;\n      case types.responseErrorCodes.functionFailure:\n        err.keyspace = this.readString();\n        err.functionName = this.readString();\n        err.argTypes = this.readStringList();\n        break;\n      case types.responseErrorCodes.alreadyExists: {\n        err.keyspace = this.readString();\n        const table = this.readString();\n        if (table.length > 0) {\n          err.table = table;\n        }\n        break;\n      }\n    }\n    return err;\n  }\n\n  /**\n   * Reads an event from Cassandra and returns the detail\n   * @returns {{eventType: String, inet: {address: Buffer, port: Number}}, *}\n   */\n  readEvent() {\n    const eventType = this.readString();\n    switch (eventType) {\n      case types.protocolEvents.topologyChange:\n        return {\n          added: this.readString() === 'NEW_NODE',\n          inet: this.readInet(),\n          eventType: eventType\n        };\n      case types.protocolEvents.statusChange:\n        return {\n          up: this.readString() === 'UP',\n          inet: this.readInet(),\n          eventType: eventType\n        };\n      case types.protocolEvents.schemaChange:\n        return this.parseSchemaChange();\n    }\n    //Forward compatibility\n    return { eventType: eventType };\n  }\n\n  parseSchemaChange() {\n    let result;\n    if (!types.protocolVersion.supportsSchemaChangeFullMetadata(this.header.version)) {\n      //v1/v2: 3 strings, the table value can be empty\n      result = {\n        eventType: types.protocolEvents.schemaChange,\n        schemaChangeType: this.readString(),\n        keyspace: this.readString(),\n        table: this.readString()\n      };\n      result.isKeyspace = !result.table;\n      return result;\n    }\n    //v3+: 3 or 4 strings: change_type, target, keyspace and (table, type, functionName or aggregate)\n    result = {\n      eventType: types.protocolEvents.schemaChange,\n      schemaChangeType: this.readString(),\n      target: this.readString(),\n      keyspace: this.readString(),\n      table: null,\n      udt: null,\n      signature: null\n    };\n    result.isKeyspace = result.target === 'KEYSPACE';\n    switch (result.target) {\n      case 'TABLE':\n        result.table = this.readString();\n        break;\n      case 'TYPE':\n        result.udt = this.readString();\n        break;\n      case 'FUNCTION':\n        result.functionName = this.readString();\n        result.signature = this.readStringList();\n        break;\n      case 'AGGREGATE':\n        result.aggregate = this.readString();\n        result.signature = this.readStringList();\n    }\n    return result;\n  }\n}\n\nmodule.exports = { FrameReader };\n", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst util = require('util');\nconst { Transform, Writable } = require('stream');\n\nconst types = require('./types');\nconst utils = require('./utils');\nconst errors = require('./errors');\nconst { FrameHeader } = types;\nconst { FrameReader } = require('./readers');\n\n/**\n * Transforms chunks, emits data objects {header, chunk}\n * @param options Stream options\n * @extends Transform\n */\nfunction Protocol (options) {\n  Transform.call(this, options);\n  this.header = null;\n  this.bodyLength = 0;\n  this.clearHeaderChunks();\n  this.version = 0;\n  this.headerSize = 0;\n}\n\nutil.inherits(Protocol, Transform);\n\nProtocol.prototype._transform = function (chunk, encoding, callback) {\n  let error = null;\n  try {\n    this.readItems(chunk);\n  }\n  catch (err) {\n    error = err;\n  }\n  callback(error);\n};\n\n/**\n * Parses the chunk into frames (header and body).\n * Emits (push) complete frames or frames with incomplete bodies. Following chunks containing the rest of the body will\n * be emitted using the same frame.\n * It buffers incomplete headers.\n * @param {Buffer} chunk\n */\nProtocol.prototype.readItems = function (chunk) {\n  if (!chunk || chunk.length === 0) {\n    return;\n  }\n  if (this.version === 0) {\n    //The server replies the first message with the max protocol version supported\n    this.version = FrameHeader.getProtocolVersion(chunk);\n    this.headerSize = FrameHeader.size(this.version);\n  }\n  let offset = 0;\n  let currentHeader = this.header;\n  this.header = null;\n  if (this.headerChunks.byteLength !== 0) {\n    //incomplete header was buffered try to read the header from the buffered chunks\n    this.headerChunks.parts.push(chunk);\n    if (this.headerChunks.byteLength + chunk.length < this.headerSize) {\n      this.headerChunks.byteLength += chunk.length;\n      return;\n    }\n    currentHeader = FrameHeader.fromBuffer(Buffer.concat(this.headerChunks.parts, this.headerSize));\n    offset = this.headerSize - this.headerChunks.byteLength;\n    this.clearHeaderChunks();\n  }\n  const items = [];\n  while (true) {\n    if (!currentHeader) {\n      if (this.headerSize > chunk.length - offset) {\n        if (chunk.length - offset <= 0) {\n          break;\n        }\n        //the header is incomplete, buffer it until the next chunk\n        const headerPart = chunk.slice(offset, chunk.length);\n        this.headerChunks.parts.push(headerPart);\n        this.headerChunks.byteLength = headerPart.length;\n        break;\n      }\n      //read header\n      currentHeader = FrameHeader.fromBuffer(chunk, offset);\n      offset += this.headerSize;\n    }\n    //parse body\n    const remaining = chunk.length - offset;\n    if (currentHeader.bodyLength <= remaining + this.bodyLength) {\n      items.push({ header: currentHeader, chunk: chunk, offset: offset, frameEnded: true });\n      offset += currentHeader.bodyLength - this.bodyLength;\n      //reset the body length\n      this.bodyLength = 0;\n    }\n    else if (remaining >= 0) {\n      //the body is not fully contained in this chunk\n      //will continue later\n      this.header = currentHeader;\n      this.bodyLength += remaining;\n      if (remaining > 0) {\n        //emit if there is at least a byte to emit\n        items.push({ header: currentHeader, chunk: chunk, offset: offset, frameEnded: false });\n      }\n      break;\n    }\n    currentHeader = null;\n  }\n  for (let i = 0; i < items.length; i++) {\n    this.push(items[i]);\n  }\n};\n\nProtocol.prototype.clearHeaderChunks = function () {\n  this.headerChunks = { byteLength: 0, parts: [] };\n};\n\n/**\n * A stream that gets reads header + body chunks and transforms them into header + (row | error)\n * @param {Object} streamOptions Node.js Stream options\n * @param {Encoder} encoder Encoder instance for the parser to use\n * @extends Transform\n */\nfunction Parser (streamOptions, encoder) {\n  Transform.call(this, streamOptions);\n  //frames that are streaming, indexed by id\n  this.frames = {};\n  this.encoder = encoder;\n}\n\nutil.inherits(Parser, Transform);\n\nParser.prototype._transform = function (item, encoding, callback) {\n  const frameInfo = this.frameState(item);\n\n  let error = null;\n  try {\n    this.parseBody(frameInfo, item);\n  }\n  catch (err) {\n    error = err;\n  }\n  callback(error);\n\n  if (item.frameEnded) {\n    if (frameInfo.cellBuffer) {\n      //Frame was being streamed but an error force it to buffer the result\n      this.push({\n        header: frameInfo.header,\n        error: new errors.DriverInternalError('There was an problem while parsing streaming frame, opcode ' +\n          frameInfo.header.opcode)\n      });\n    }\n    //all the parsing finished and it was streamed down\n    //emit an item that signals it\n    this.push({ header: frameInfo.header, frameEnded: true});\n  }\n};\n\n/**\n * @param frameInfo\n * @param {{header: FrameHeader, chunk: Buffer, offset: Number}} item\n */\nParser.prototype.parseBody = function (frameInfo, item) {\n  frameInfo.isStreaming = frameInfo.byRow && item.header.opcode === types.opcodes.result;\n  if (!this.handleFrameBuffers(frameInfo, item)) {\n    // Frame isn't complete and we are not streaming the frame\n    return;\n  }\n  const reader = new FrameReader(item.header, item.chunk, item.offset);\n  // Check that flags have not been parsed yet for this frame\n  if (frameInfo.flagsInfo === undefined) {\n    const originalOffset = reader.offset;\n    try {\n      frameInfo.flagsInfo = reader.readFlagsInfo();\n    }\n    catch (e) {\n      return this.handleParsingError(e, frameInfo, reader, originalOffset);\n    }\n  }\n\n  //All the body for most operations is already buffered at this stage\n  //Except for RESULT\n  switch (item.header.opcode) {\n    case types.opcodes.result:\n      return this.parseResult(frameInfo, reader);\n    case types.opcodes.ready:\n    case types.opcodes.authSuccess:\n      return this.push({ header: frameInfo.header, ready: true });\n    case types.opcodes.authChallenge:\n      return this.push({ header: frameInfo.header, authChallenge: true, token: reader.readBytes()});\n    case types.opcodes.authenticate:\n      return this.push({ header: frameInfo.header, mustAuthenticate: true, authenticatorName: reader.readString()});\n    case types.opcodes.error:\n      return this.push({ header: frameInfo.header, error: reader.readError()});\n    case types.opcodes.supported:\n      return this.push({ header: frameInfo.header, supported: reader.readStringMultiMap()});\n    case types.opcodes.event:\n      return this.push({ header: frameInfo.header, event: reader.readEvent()});\n    default:\n      return this.push({ header: frameInfo.header, error: new Error('Received invalid opcode: ' + item.header.opcode) });\n  }\n};\n\n/**\n * Buffers if needed and returns true if it has all the necessary data to continue parsing the frame.\n * @param frameInfo\n * @param {{header: FrameHeader, chunk: Buffer, offset: Number}} item\n * @returns {Boolean}\n */\nParser.prototype.handleFrameBuffers = function (frameInfo, item) {\n  if (!frameInfo.isStreaming) {\n    // Handle buffering for complete frame bodies\n    const currentLength = (frameInfo.bufferLength || 0) + item.chunk.length - item.offset;\n    if (currentLength < item.header.bodyLength) {\n      //buffer until the frame is completed\n      this.addFrameBuffer(frameInfo, item);\n      return false;\n    }\n    //We have received the full frame body\n    if (frameInfo.buffers) {\n      item.chunk = this.getFrameBuffer(frameInfo, item);\n      item.offset = 0;\n    }\n    return true;\n  }\n  if (frameInfo.cellBuffer) {\n    // Handle buffering for frame cells (row cells or metadata cells)\n    if (item.offset !== 0) {\n      throw new errors.DriverInternalError('Following chunks can not have an offset greater than zero');\n    }\n    frameInfo.cellBuffer.parts.push(item.chunk);\n    if (!frameInfo.cellBuffer.expectedLength) {\n      //Its a buffer outside a row cell (metadata or other)\n      if (frameInfo.cellBuffer.parts.length !== 2) {\n        throw new errors.DriverInternalError('Buffer for streaming frame can not contain more than 1 item');\n      }\n      item.chunk = Buffer.concat(frameInfo.cellBuffer.parts, frameInfo.cellBuffer.byteLength + item.chunk.length);\n      frameInfo.cellBuffer = null;\n      return true;\n    }\n    if (frameInfo.cellBuffer.expectedLength > frameInfo.cellBuffer.byteLength + item.chunk.length) {\n      //We still haven't got the cell data\n      frameInfo.cellBuffer.byteLength += item.chunk.length;\n      return false;\n    }\n    item.chunk = Buffer.concat(frameInfo.cellBuffer.parts, frameInfo.cellBuffer.byteLength + item.chunk.length);\n    frameInfo.cellBuffer = null;\n  }\n  return true;\n};\n\n/**\n * Adds this chunk to the frame buffers.\n * @param frameInfo\n * @param {{header: FrameHeader, chunk: Buffer, offset: Number}} item\n */\nParser.prototype.addFrameBuffer = function (frameInfo, item) {\n  if (!frameInfo.buffers) {\n    frameInfo.buffers = [ item.chunk.slice(item.offset) ];\n    frameInfo.bufferLength = item.chunk.length - item.offset;\n    return;\n  }\n  if (item.offset > 0) {\n    throw new errors.DriverInternalError('Following chunks can not have an offset greater than zero');\n  }\n  frameInfo.buffers.push(item.chunk);\n  frameInfo.bufferLength += item.chunk.length;\n};\n\n/**\n * Adds the last chunk and concatenates the frame buffers\n * @param frameInfo\n * @param {{header: FrameHeader, chunk: Buffer, offset: Number}} item\n */\nParser.prototype.getFrameBuffer = function (frameInfo, item) {\n  frameInfo.buffers.push(item.chunk);\n  const result = Buffer.concat(frameInfo.buffers, frameInfo.bodyLength);\n  frameInfo.buffers = null;\n  return result;\n};\n\n/**\n * Tries to read the result in the body of a message\n * @param frameInfo Frame information, header / metadata\n * @param {FrameReader} reader\n */\nParser.prototype.parseResult = function (frameInfo, reader) {\n  let result;\n  // As we might be streaming and the frame buffer might not be complete,\n  // read the metadata and different types of result values in a try-catch.\n  // Store the reader position\n  const originalOffset = reader.offset;\n  try {\n    if (!frameInfo.meta) {\n      frameInfo.kind = reader.readInt();\n      // Spec 4.2.5\n      switch (frameInfo.kind) {\n        case types.resultKind.voidResult:\n          result = { header: frameInfo.header, flags: frameInfo.flagsInfo };\n          break;\n        case types.resultKind.rows:\n          // Parse the rows metadata, the rest of the response is going to be parsed afterwards\n          frameInfo.meta = reader.readMetadata(frameInfo.kind);\n          break;\n        case types.resultKind.setKeyspace:\n          result = { header: frameInfo.header, keyspaceSet: reader.readString(), flags: frameInfo.flagsInfo };\n          break;\n        case types.resultKind.prepared:\n        {\n          const preparedId = utils.copyBuffer(reader.readShortBytes());\n          frameInfo.meta = reader.readMetadata(frameInfo.kind);\n          result = { header: frameInfo.header, id: preparedId, meta: frameInfo.meta, flags: frameInfo.flagsInfo };\n          break;\n        }\n        case types.resultKind.schemaChange:\n          result = { header: frameInfo.header, schemaChange: reader.parseSchemaChange(), flags: frameInfo.flagsInfo };\n          break;\n        default:\n          throw errors.DriverInternalError('Unexpected result kind: ' + frameInfo.kind);\n      }\n    }\n  }\n  catch (e) {\n    return this.handleParsingError(e, frameInfo, reader, originalOffset);\n  }\n  if (result) {\n    if (frameInfo.emitted) {\n      // It may contain additional metadata and info that it's not being parsed\n      return;\n    }\n    frameInfo.emitted = true;\n    return this.push(result);\n  }\n  if (reader.remainingLength() > 0) {\n    this.parseRows(frameInfo, reader);\n  }\n};\n\n/**\n * @param frameInfo\n * @param {FrameReader} reader\n */\nParser.prototype.parseRows = function (frameInfo, reader) {\n  if (frameInfo.parsingError) {\n    //No more processing on this frame\n    return;\n  }\n  if (frameInfo.rowLength === undefined) {\n    try {\n      frameInfo.rowLength = reader.readInt();\n    }\n    catch (e) {\n      return this.handleParsingError(e, frameInfo, reader);\n    }\n  }\n  if (frameInfo.rowLength === 0) {\n    return this.push({\n      header: frameInfo.header,\n      result: { rows: utils.emptyArray, meta: frameInfo.meta, flags: frameInfo.flagsInfo }\n    });\n  }\n  const meta = frameInfo.meta;\n  frameInfo.rowIndex = frameInfo.rowIndex || 0;\n  for (let i = frameInfo.rowIndex; i < frameInfo.rowLength; i++) {\n    const rowOffset = reader.offset;\n    const row = new types.Row(meta.columns);\n    let cellBuffer;\n    for (let j = 0; j < meta.columns.length; j++ ) {\n      const c = meta.columns[j];\n      try {\n        cellBuffer = reader.readBytes();\n      }\n      catch (e) {\n        return this.handleParsingError(e, frameInfo, reader, rowOffset, i);\n      }\n      try {\n        row[c.name] = this.encoder.decode(cellBuffer, c.type);\n      }\n      catch (e) {\n        //Something went wrong while decoding, we are not going to be able to recover\n        return this.handleParsingError(e, frameInfo, null);\n      }\n    }\n    this.push({\n      header: frameInfo.header,\n      row: row,\n      meta: frameInfo.meta,\n      byRow: frameInfo.byRow,\n      length: frameInfo.rowLength,\n      flags: frameInfo.flagsInfo\n    });\n  }\n  if (frameInfo.byRow) {\n    // Use an event item to identify that all the streaming rows have finished processing\n    this.push({\n      header: frameInfo.header,\n      byRowCompleted: true,\n      meta: frameInfo.meta,\n      length: frameInfo.rowLength,\n      flags: frameInfo.flagsInfo\n    });\n  }\n};\n\n/**\n * Sets parser options (ie: how to yield the results as they are parsed)\n * @param {Number} id Id of the stream\n * @param options\n */\nParser.prototype.setOptions = function (id, options) {\n  if (this.frames[id.toString()]) {\n    throw new types.DriverError('There was already state for this frame');\n  }\n  this.frames[id.toString()] = options;\n};\n\n/**\n * Manually clears the frame options.\n * This class already clears the provided options when the frame ends, so it's usually not required to invoke this\n * method.\n * When manually setting the options for continuous paging, it's possible that the frame options are set while\n * it's being cancelled.\n * @param {Number} id The streamId\n */\nParser.prototype.clearOptions = function (id) {\n  delete this.frames[id.toString()];\n};\n\n/**\n * Gets the frame info from the internal state.\n * In case it is not there, it creates it.\n * In case the frame ended\n */\nParser.prototype.frameState = function (item) {\n  let frameInfo = this.frames[item.header.streamId];\n  if (!frameInfo) {\n    frameInfo = {};\n    if (!item.frameEnded) {\n      //store it in the frames\n      this.frames[item.header.streamId] = frameInfo;\n    }\n  }\n  else if (item.frameEnded) {\n    //if it was already stored, remove it\n    delete this.frames[item.header.streamId];\n  }\n  frameInfo.header = item.header;\n  return frameInfo;\n};\n\n/**\n * Handles parsing error: pushing an error if its unexpected or buffer the cell if its streaming\n * @param {Error} e\n * @param frameInfo\n * @param {FrameReader} reader\n * @param {Number} [originalOffset]\n * @param {Number} [rowIndex]\n */\nParser.prototype.handleParsingError = function (e, frameInfo, reader, originalOffset, rowIndex) {\n  if (reader && frameInfo.isStreaming && (e instanceof RangeError)) {\n    //A controlled error, buffer from offset and move on\n    return this.bufferResultCell(frameInfo, reader, originalOffset, rowIndex, e.expectedLength);\n  }\n  frameInfo.parsingError = true;\n  frameInfo.cellBuffer = null;\n  this.push({ header: frameInfo.header, error: e });\n};\n\n/**\n * When streaming, it buffers data since originalOffset.\n * @param frameInfo\n * @param {FrameReader} reader\n * @param {Number} [originalOffset]\n * @param {Number} [rowIndex]\n * @param {Number} [expectedLength]\n */\nParser.prototype.bufferResultCell = function (frameInfo, reader, originalOffset, rowIndex, expectedLength) {\n  if (!originalOffset && originalOffset !== 0) {\n    originalOffset = reader.offset;\n  }\n  frameInfo.rowIndex = rowIndex;\n  const buffer = reader.slice(originalOffset);\n  frameInfo.cellBuffer = {\n    parts: [ buffer ],\n    byteLength: buffer.length,\n    expectedLength: expectedLength\n  };\n};\n\n/**\n * Represents a writable streams that emits results\n */\nfunction ResultEmitter(options) {\n  Writable.call(this, options);\n  /**\n   * Stores the rows for frames that needs to be yielded as one result with many rows\n   */\n  this.rowBuffer = {};\n}\n\nutil.inherits(ResultEmitter, Writable);\n\nResultEmitter.prototype._write = function (item, encoding, callback) {\n  let error = null;\n  try {\n    this.each(item);\n  }\n  catch (err) {\n    error = err;\n  }\n  callback(error);\n};\n\n\n/**\n * Analyzes the item and emit the corresponding event\n */\nResultEmitter.prototype.each = function (item) {\n  if (item.error || item.result) {\n    //Its either an error or an empty array rows\n    //no transformation needs to be made\n    return this.emit('result', item.header, item.error, item.result);\n  }\n  if (item.frameEnded) {\n    return this.emit('frameEnded', item.header);\n  }\n  if (item.lastContinuousPage) {\n    return this.emit('lastContinuousPage', item.header);\n  }\n  if (item.byRowCompleted) {\n    return this.emit('byRowCompleted', item.header, item.row, item.meta, item.flags);\n  }\n  if (item.byRow) {\n    //it should be yielded by row\n    return this.emit('row', item.header, item.row, item.meta, item.length, item.flags);\n  }\n  if (item.row) {\n    //it should be yielded as a result\n    //it needs to be buffered to an array of rows\n    return this.bufferAndEmit(item);\n  }\n  if (item.event) {\n    //its an event from Cassandra\n    return this.emit('nodeEvent', item.header, item.event);\n  }\n  //its a raw response (object with flags)\n  return this.emit('result', item.header, null, item);\n};\n\n/**\n * Buffers the rows until the result set is completed and emits the result event.\n */\nResultEmitter.prototype.bufferAndEmit = function (item) {\n  let rows = this.rowBuffer[item.header.streamId];\n  if (!rows) {\n    rows = this.rowBuffer[item.header.streamId] = [];\n  }\n  rows.push(item.row);\n  if (rows.length === item.length) {\n    this.emit('result', item.header, null, { rows: rows, meta: item.meta, flags: item.flags});\n    delete this.rowBuffer[item.header.streamId];\n  }\n};\n\nexports.Protocol = Protocol;\nexports.Parser = Parser;\nexports.ResultEmitter = ResultEmitter;\n", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst types = require('./types');\n\n/**\n * Group size\n * @type {number}\n */\nconst groupSize = 128;\n\n/**\n * Number used to right shift ids to allocate them into groups\n * @const\n * @type {number}\n */\nconst shiftToGroup = 7;\n\n/**\n * Amount of groups that can be released per time\n * If it grows larger than 4 groups (128 * 4), groups can be released\n * @const\n * @type {number}\n */\nconst releasableSize = 4;\n\n/**\n * 32K possible stream ids depending for protocol v3 and above\n * @const\n * @type {number}\n */\nconst maxGroupsFor2Bytes = 256;\n\n/**\n * Delay used to check if groups can be released\n * @const\n * @type {number}\n */\nconst defaultReleaseDelay = 5000;\n\n/**\n * Represents a queue of ids from 0 to maximum stream id supported by the protocol version.\n * Clients can dequeue a stream id using {@link StreamIdStack#shift()} and enqueue (release) using\n * {@link StreamIdStack#push()}\n */\nclass StreamIdStack {\n  /**\n   * Creates a new instance of StreamIdStack.\n   * @param {number} version Protocol version\n   * @constructor\n   */\n  constructor(version) {\n    //Ecmascript Number is 64-bit double, it can be optimized by the engine into a 32-bit int, but nothing below that.\n    //We try to allocate as few as possible in arrays of 128\n    this.currentGroup = generateGroup(0);\n    this.groupIndex = 0;\n    this.groups = [this.currentGroup];\n    this.releaseTimeout = null;\n    this.setVersion(version);\n    /**\n     * Returns the amount of ids currently in use\n     * @member {number}\n     */\n    this.inUse = 0;\n    this.releaseDelay = defaultReleaseDelay;\n  }\n\n  /**\n   * Sets the protocol version\n   * @param {Number} version\n   */\n  setVersion(version) {\n    //128 or 32K stream ids depending on the protocol version\n    this.maxGroups = types.protocolVersion.uses2BytesStreamIds(version) ? maxGroupsFor2Bytes : 1;\n  }\n\n  /**\n   * Dequeues an id.\n   * Similar to {@link Array#pop()}.\n   * @returns {Number} Returns an id or null\n   */\n  pop() {\n    let id = this.currentGroup.pop();\n    if (typeof id !== 'undefined') {\n      this.inUse++;\n      return id;\n    }\n    //try to use the following groups\n    while (this.groupIndex < this.groups.length - 1) {\n      //move to the following group\n      this.currentGroup = this.groups[++this.groupIndex];\n      //try dequeue\n      id = this.currentGroup.pop();\n      if (typeof id !== 'undefined') {\n        this.inUse++;\n        return id;\n      }\n    }\n    return this._tryCreateGroup();\n  }\n\n  /**\n   * Enqueue an id for future use.\n   * Similar to {@link Array#push()}.\n   * @param {Number} id\n   */\n  push(id) {\n    this.inUse--;\n    const groupIndex = id >> shiftToGroup;\n    const group = this.groups[groupIndex];\n    group.push(id);\n    if (groupIndex < this.groupIndex) {\n      //Set the lower group to be used to dequeue from\n      this.groupIndex = groupIndex;\n      this.currentGroup = group;\n    }\n    this._tryIssueRelease();\n  }\n\n  /**\n   * Clears all timers\n   */\n  clear() {\n    if (this.releaseTimeout) {\n      clearTimeout(this.releaseTimeout);\n      this.releaseTimeout = null;\n    }\n  }\n\n  /**\n   * Tries to create an additional group and returns a new id\n   * @returns {Number} Returns a new id or null if it's not possible to create a new group\n   * @private\n   */\n  _tryCreateGroup() {\n    if (this.groups.length === this.maxGroups) {\n      //we can have an additional group\n      return null;\n    }\n    //Add a new group at the last position\n    this.groupIndex = this.groups.length;\n    //Using 128 * groupIndex as initial value\n    this.currentGroup = generateGroup(this.groupIndex << shiftToGroup);\n    this.groups.push(this.currentGroup);\n    this.inUse++;\n    return this.currentGroup.pop();\n  }\n\n  _tryIssueRelease() {\n    if (this.releaseTimeout || this.groups.length <= releasableSize) {\n      //Nothing to release or a release delay has been issued\n      return;\n    }\n\n    this.releaseTimeout = setTimeout(() => this._releaseGroups(), this.releaseDelay);\n  }\n\n  _releaseGroups() {\n    let counter = 0;\n    let index = this.groups.length - 1;\n    //only release up to n groups (n = releasable size)\n    //shrink back up to n groups not all the way up to 1\n    while (counter++ < releasableSize && this.groups.length > releasableSize && index > this.groupIndex) {\n      if (this.groups[index].length !== groupSize) {\n        //the group is being used\n        break;\n      }\n      this.groups.pop();\n      index--;\n    }\n    this.releaseTimeout = null;\n    //Issue next release if applies\n    this._tryIssueRelease();\n  }\n}\n\nfunction generateGroup(initialValue) {\n  const arr = new Array(groupSize);\n  const upperBound = initialValue + groupSize - 1;\n  for (let i = 0; i < groupSize; i++) {\n    arr[i] = upperBound - i;\n  }\n  return arr;\n}\n\nmodule.exports = StreamIdStack;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst util = require('util');\nconst utils = require('./utils');\nconst errors = require('./errors');\nconst requests = require('./requests');\nconst ExecuteRequest = requests.ExecuteRequest;\nconst QueryRequest = requests.QueryRequest;\n\nconst state = {\n  init: 0,\n  completed: 1,\n  timedOut: 2,\n  cancelled: 3\n};\n\n/**\n * Maintains the state information of a request inside a Connection.\n */\nclass OperationState {\n  /**\n   * Creates a new instance of OperationState.\n   * @param {Request} request\n   * @param {Function} rowCallback\n   * @param {Function} callback\n   */\n  constructor(request, rowCallback, callback) {\n    this.request = request;\n    this._rowCallback = rowCallback;\n    this._callback = callback;\n    this._timeout = null;\n    this._state = state.init;\n    this._rowIndex = 0;\n    /**\n     * Stream id that is set right before being written.\n     * @type {number}\n     */\n    this.streamId = -1;\n  }\n\n  /**\n   * Marks the operation as cancelled, clearing all callbacks and timeouts.\n   */\n  cancel() {\n    if (this._state !== state.init) {\n      return;\n    }\n    if (this._timeout !== null) {\n      clearTimeout(this._timeout);\n    }\n    this._state = state.cancelled;\n    this._callback = utils.noop;\n  }\n\n  /**\n   * Determines if the operation can be written to the wire (when it hasn't been cancelled or it hasn't timed out).\n   */\n  canBeWritten() {\n    return this._state === state.init;\n  }\n\n  /**\n   * Determines if the response is going to be yielded by row.\n   * @return {boolean}\n   */\n  isByRow() {\n    return this._rowCallback && (this.request instanceof ExecuteRequest || this.request instanceof QueryRequest);\n  }\n\n  /**\n   * Creates the timeout for the request.\n   * @param {ExecutionOptions} execOptions\n   * @param {Number} defaultReadTimeout\n   * @param {String} address\n   * @param {Function} onTimeout The callback to be invoked when it times out.\n   * @param {Function} onResponse The callback to be invoked if a response is obtained after it timed out.\n   */\n  setRequestTimeout(execOptions, defaultReadTimeout, address, onTimeout, onResponse) {\n    if (this._state !== state.init) {\n      // No need to set the timeout\n      return;\n    }\n    const millis = execOptions.getReadTimeout() !== undefined ? execOptions.getReadTimeout() : defaultReadTimeout;\n    if (!(millis > 0)) {\n      // Read timeout disabled\n      return;\n    }\n    const self = this;\n    this._timeout = setTimeout(function requestTimedOut() {\n      onTimeout();\n      const message = util.format('The host %s did not reply before timeout %d ms', address, millis);\n      self._markAsTimedOut(new errors.OperationTimedOutError(message, address), onResponse);\n    }, millis);\n  }\n\n  setResultRow(row, meta, rowLength, flags, header) {\n    this._markAsCompleted();\n    if (!this._rowCallback) {\n      return this.setResult(new errors.DriverInternalError('RowCallback not found for streaming frame handler'));\n    }\n    this._rowCallback(this._rowIndex++, row, rowLength);\n    if (this._rowIndex === rowLength) {\n      this._swapCallbackAndInvoke(null, { rowLength: rowLength, meta: meta, flags: flags }, header.bodyLength);\n    }\n  }\n\n  /**\n   * Marks the current operation as timed out.\n   * @param {Error} err\n   * @param {Function} onResponse\n   * @private\n   */\n  _markAsTimedOut(err, onResponse) {\n    if (this._state !== state.init) {\n      return;\n    }\n    this._state = state.timedOut;\n    this._swapCallbackAndInvoke(err, null, null, onResponse);\n  }\n\n  _markAsCompleted() {\n    if (this._state !== state.init) {\n      return;\n    }\n    if (this._timeout !== null) {\n      clearTimeout(this._timeout);\n    }\n    this._state = state.completed;\n  }\n\n  /**\n   * Sets the result of this operation, declaring that no further input will be processed for this operation.\n   * @param {Error} err\n   * @param {Object} [result]\n   * @param {Number} [length]\n   */\n  setResult(err, result, length) {\n    this._markAsCompleted();\n    this._swapCallbackAndInvoke(err, result, length);\n  }\n\n  _swapCallbackAndInvoke(err, result, length, newCallback) {\n    const callback = this._callback;\n    this._callback = newCallback || utils.noop;\n    callback(err, result, length);\n  }\n}\n\nmodule.exports = OperationState;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst events = require('events');\nconst util = require('util');\nconst tls = require('tls');\nconst net = require('net');\n\nconst Encoder = require('./encoder.js');\nconst { WriteQueue } = require('./writers');\nconst requests = require('./requests');\nconst streams = require('./streams');\nconst utils = require('./utils');\nconst types = require('./types');\nconst errors = require('./errors');\nconst StreamIdStack = require('./stream-id-stack');\nconst OperationState = require('./operation-state');\nconst promiseUtils = require('./promise-utils');\nconst { ExecutionOptions } = require('./execution-options');\n\n/**\n * Represents a connection to a Cassandra node\n */\nclass Connection extends events.EventEmitter {\n\n  /**\n   * Creates a new instance of Connection.\n   * @param {String} endpoint An string containing ip address and port of the host\n   * @param {Number|null} protocolVersion\n   * @param {ClientOptions} options\n   */\n  constructor(endpoint, protocolVersion, options) {\n    super();\n\n    this.setMaxListeners(0);\n\n    if (!options) {\n      throw new Error('options is not defined');\n    }\n\n    /**\n     * Gets the ip and port of the server endpoint.\n     * @type {String}\n     */\n    this.endpoint = endpoint;\n\n    /**\n     * Gets the friendly name of the host, used to identify the connection in log messages.\n     * With direct connect, this is the address and port.\n     * With SNI, this will be the address and port of the proxy, plus the server name.\n     * @type {String}\n     */\n    this.endpointFriendlyName = this.endpoint;\n\n    if (options.sni) {\n      this._serverName = endpoint;\n      this.endpoint = `${options.sni.addressResolver.getIp()}:${options.sni.port}`;\n      this.endpointFriendlyName = `${this.endpoint} (${this._serverName})`;\n    }\n\n    if (!this.endpoint || this.endpoint.indexOf(':') < 0) {\n      throw new Error('EndPoint must contain the ip address and port separated by : symbol');\n    }\n\n    const portSeparatorIndex = this.endpoint.lastIndexOf(':');\n    this.address = this.endpoint.substr(0, portSeparatorIndex);\n    this.port = this.endpoint.substr(portSeparatorIndex + 1);\n\n    Object.defineProperty(this, \"options\", { value: options, enumerable: false, writable: false});\n\n    if (protocolVersion === null) {\n      // Set initial protocol version\n      protocolVersion = types.protocolVersion.maxSupported;\n      if (options.protocolOptions.maxVersion) {\n        // User provided the protocol version\n        protocolVersion = options.protocolOptions.maxVersion;\n      }\n      // Allow to check version using this connection instance\n      this._checkingVersion = true;\n    }\n\n    this.log = utils.log;\n    this.protocolVersion = protocolVersion;\n    this._operations = new Map();\n    this._pendingWrites = [];\n    this._preparing = new Map();\n\n    /**\n     * The timeout state for the idle request (heartbeat)\n     */\n    this._idleTimeout = null;\n    this.timedOutOperations = 0;\n    this._streamIds = new StreamIdStack(this.protocolVersion);\n    this._metrics = options.metrics;\n\n    this.encoder = new Encoder(protocolVersion, options);\n    this.keyspace = null;\n    this.emitDrain = false;\n    /**\n     * Determines if the socket is open and startup succeeded, whether the connection can be used to send requests /\n     * receive events\n     */\n    this.connected = false;\n    /**\n     * Determines if the socket can be considered as open\n     */\n    this.isSocketOpen = false;\n\n    this.send = util.promisify(this.sendStream);\n    this.closeAsync = util.promisify(this.close);\n    this.openAsync = util.promisify(this.open);\n    this.prepareOnceAsync = util.promisify(this.prepareOnce);\n  }\n\n  /**\n   * Binds the necessary event listeners for the socket\n   */\n  bindSocketListeners() {\n    //Remove listeners that were used for connecting\n    this.netClient.removeAllListeners('connect');\n    this.netClient.removeAllListeners('timeout');\n    // The socket is expected to be open at this point\n    this.isSocketOpen = true;\n    this.netClient.on('close', () => {\n      this.log('info', `Connection to ${this.endpointFriendlyName} closed`);\n      this.isSocketOpen = false;\n      const wasConnected = this.connected;\n      this.close();\n      if (wasConnected) {\n        // Emit only when it was closed unexpectedly\n        this.emit('socketClose');\n      }\n    });\n\n    this.protocol = new streams.Protocol({ objectMode: true });\n    this.parser = new streams.Parser({ objectMode: true }, this.encoder);\n    const resultEmitter = new streams.ResultEmitter({objectMode: true});\n    resultEmitter.on('result', this.handleResult.bind(this));\n    resultEmitter.on('row', this.handleRow.bind(this));\n    resultEmitter.on('frameEnded', this.freeStreamId.bind(this));\n    resultEmitter.on('nodeEvent', this.handleNodeEvent.bind(this));\n\n    this.netClient\n      .pipe(this.protocol)\n      .pipe(this.parser)\n      .pipe(resultEmitter);\n\n    this.writeQueue = new WriteQueue(this.netClient, this.encoder, this.options);\n  }\n\n  /**\n   * Connects a socket and sends the startup protocol messages.\n   * Note that when open() callbacks in error, the caller should immediately call {@link Connection#close}.\n   */\n  open(callback) {\n    const self = this;\n    this.log('info', `Connecting to ${this.endpointFriendlyName}`);\n\n    if (!this.options.sslOptions) {\n      this.netClient = new net.Socket({ highWaterMark: this.options.socketOptions.coalescingThreshold });\n      this.netClient.connect(this.port, this.address, function connectCallback() {\n        self.log('verbose', `Socket connected to ${self.endpointFriendlyName}`);\n        self.bindSocketListeners();\n        self.startup(callback);\n      });\n    }\n    else {\n      // Use TLS\n      const sslOptions = utils.extend({ rejectUnauthorized: false }, this.options.sslOptions);\n\n      if (this.options.sni) {\n        sslOptions.servername = this._serverName;\n      }\n\n      this.netClient = tls.connect(this.port, this.address, sslOptions, function tlsConnectCallback() {\n        self.log('verbose', `Secure socket connected to ${self.endpointFriendlyName} with protocol ${self.netClient.getProtocol()}`);\n        self.bindSocketListeners();\n        self.startup(callback);\n      });\n\n      // TLSSocket will validate for values from 512 to 16K (depending on the SSL protocol version)\n      this.netClient.setMaxSendFragment(this.options.socketOptions.coalescingThreshold);\n    }\n\n    this.netClient.once('error', function socketError(err) {\n      self.errorConnecting(err, false, callback);\n    });\n\n    this.netClient.once('timeout', function connectTimedOut() {\n      const err = new types.DriverError('Connection timeout');\n      self.errorConnecting(err, true, callback);\n    });\n\n    this.netClient.setTimeout(this.options.socketOptions.connectTimeout);\n\n    // Improve failure detection with TCP keep-alives\n    if (this.options.socketOptions.keepAlive) {\n      this.netClient.setKeepAlive(true, this.options.socketOptions.keepAliveDelay);\n    }\n\n    this.netClient.setNoDelay(!!this.options.socketOptions.tcpNoDelay);\n  }\n\n  /**\n   * Determines the protocol version to use and sends the STARTUP request\n   * @param {Function} callback\n   */\n  startup(callback) {\n    if (this._checkingVersion) {\n      this.log('info', 'Trying to use protocol version 0x' + this.protocolVersion.toString(16));\n    }\n\n    const self = this;\n    const request = new requests.StartupRequest({\n      noCompact: this.options.protocolOptions.noCompact,\n      clientId: this.options.id,\n      applicationName: this.options.applicationName,\n      applicationVersion: this.options.applicationVersion\n    });\n\n    this.sendStream(request, null, function responseCallback(err, response) {\n      if (err && self._checkingVersion) {\n        let invalidProtocol = (err instanceof errors.ResponseError &&\n          err.code === types.responseErrorCodes.protocolError &&\n          err.message.indexOf('Invalid or unsupported protocol version') >= 0);\n\n        if (!invalidProtocol && types.protocolVersion.canStartupResponseErrorBeWrapped(self.protocolVersion)) {\n          //For some versions of Cassandra, the error is wrapped into a server error\n          //See CASSANDRA-9451\n          invalidProtocol = (err instanceof errors.ResponseError &&\n            err.code === types.responseErrorCodes.serverError &&\n            err.message.indexOf('ProtocolException: Invalid or unsupported protocol version') > 0);\n        }\n\n        if (invalidProtocol) {\n          // The server can respond with a message using the lower protocol version supported\n          // or using the same version as the one provided\n          let lowerVersion = self.protocol.version;\n\n          if (lowerVersion === self.protocolVersion) {\n            lowerVersion = types.protocolVersion.getLowerSupported(self.protocolVersion);\n          } else if (!types.protocolVersion.isSupported(self.protocol.version)) {\n            // If we have an unsupported protocol version or a beta version we need to switch\n            // to something we can support.  Note that dseV1 and dseV2 are excluded from this\n            // logic as they are supported.  Also note that any v5 and greater beta protocols\n            // are included here since the beta flag was introduced in v5.\n            self.log('info',`Protocol version ${self.protocol.version} not supported by this driver, downgrading`);\n            lowerVersion = types.protocolVersion.getLowerSupported(self.protocol.version);\n          }\n\n          if (!lowerVersion) {\n            return startupCallback(\n              new Error('Connection was unable to STARTUP using protocol version ' + self.protocolVersion));\n          }\n\n          self.log('info', 'Protocol 0x' + self.protocolVersion.toString(16) + ' not supported, using 0x' + lowerVersion.toString(16));\n          self.decreaseVersion(lowerVersion);\n\n          // The host closed the connection, close the socket and start the connection flow again\n          setImmediate(function decreasingVersionClosing() {\n            self.close(function decreasingVersionOpening() {\n              // Attempt to open with the correct protocol version\n              self.open(callback);\n            });\n          });\n\n          return;\n        }\n      }\n\n      if (response && response.mustAuthenticate) {\n        return self.startAuthenticating(response.authenticatorName, startupCallback);\n      }\n\n      startupCallback(err);\n    });\n\n    function startupCallback(err) {\n      if (err) {\n        return self.errorConnecting(err, false, callback);\n      }\n      //The socket is connected and the connection is authenticated\n      return self.connectionReady(callback);\n    }\n  }\n\n  errorConnecting(err, destroy, callback) {\n    this.log('warning', `There was an error when trying to connect to the host ${this.endpointFriendlyName}`, err);\n    if (destroy) {\n      //there is a TCP connection that should be killed.\n      this.netClient.destroy();\n    }\n\n    this._metrics.onConnectionError(err);\n\n    callback(err);\n  }\n\n  /**\n   * Sets the connection to ready/connected status\n   */\n  connectionReady(callback) {\n    this.emit('connected');\n    this.connected = true;\n    // Remove existing error handlers as the connection is now ready.\n    this.netClient.removeAllListeners('error');\n    this.netClient.on('error', this.handleSocketError.bind(this));\n    callback();\n  }\n\n  /** @param {Number} lowerVersion */\n  decreaseVersion(lowerVersion) {\n    // The response already has the max protocol version supported by the Cassandra host.\n    this.protocolVersion = lowerVersion;\n    this.encoder.setProtocolVersion(lowerVersion);\n    this._streamIds.setVersion(lowerVersion);\n  }\n\n  /**\n   * Handle socket errors, if the socket is not readable invoke all pending callbacks\n   */\n  handleSocketError(err) {\n    this._metrics.onConnectionError(err);\n    this.clearAndInvokePending(err);\n  }\n\n  /**\n   * Cleans all internal state and invokes all pending callbacks of sent streams\n   */\n  clearAndInvokePending(innerError) {\n    if (this._idleTimeout) {\n      //Remove the idle request\n      clearTimeout(this._idleTimeout);\n      this._idleTimeout = null;\n    }\n    this._streamIds.clear();\n    if (this.emitDrain) {\n      this.emit('drain');\n    }\n    const err = new types.DriverError('Socket was closed');\n    err.isSocketError = true;\n    if (innerError) {\n      err.innerError = innerError;\n    }\n\n    // Get all handlers\n    const operations = Array.from(this._operations.values());\n    // Clear pending operation map\n    this._operations = new Map();\n\n    if (operations.length > 0) {\n      this.log('info', 'Invoking ' + operations.length + ' pending callbacks');\n    }\n\n    // Invoke all handlers\n    utils.each(operations, function (operation, next) {\n      operation.setResult(err);\n      next();\n    });\n\n    const pendingWritesCopy = this._pendingWrites;\n    this._pendingWrites = [];\n    utils.each(pendingWritesCopy, function (operation, next) {\n      operation.setResult(err);\n      next();\n    });\n  }\n\n  /**\n   * Starts the SASL flow\n   * @param {String} authenticatorName\n   * @param {Function} callback\n   */\n  startAuthenticating(authenticatorName, callback) {\n    if (!this.options.authProvider) {\n      return callback(new errors.AuthenticationError('Authentication provider not set'));\n    }\n    const authenticator = this.options.authProvider.newAuthenticator(this.endpoint, authenticatorName);\n    const self = this;\n    authenticator.initialResponse(function initialResponseCallback(err, token) {\n      // Start the flow with the initial token\n      if (err) {\n        return self.onAuthenticationError(callback, err);\n      }\n      self.authenticate(authenticator, token, callback);\n    });\n  }\n\n  /**\n   * Handles authentication requests and responses.\n   * @param {Authenticator} authenticator\n   * @param {Buffer} token\n   * @param {Function} callback\n   */\n  authenticate(authenticator, token, callback) {\n    const self = this;\n    let request = new requests.AuthResponseRequest(token);\n    if (this.protocolVersion === 1) {\n      //No Sasl support, use CREDENTIALS\n      if (!authenticator.username) {\n        return self.onAuthenticationError(\n          callback, new errors.AuthenticationError('Only plain text authenticator providers allowed under protocol v1'));\n      }\n\n      request = new requests.CredentialsRequest(authenticator.username, authenticator.password);\n    }\n\n    this.sendStream(request, null, function authResponseCallback(err, result) {\n      if (err) {\n        if (err instanceof errors.ResponseError && err.code === types.responseErrorCodes.badCredentials) {\n          const authError = new errors.AuthenticationError(err.message);\n          authError.additionalInfo = err;\n          err = authError;\n        }\n        return self.onAuthenticationError(callback, err);\n      }\n\n      if (result.ready) {\n        authenticator.onAuthenticationSuccess();\n        return callback();\n      }\n\n      if (result.authChallenge) {\n        return authenticator.evaluateChallenge(result.token, function evaluateCallback(err, t) {\n          if (err) {\n            return self.onAuthenticationError(callback, err);\n          }\n          //here we go again\n          self.authenticate(authenticator, t, callback);\n        });\n      }\n\n      callback(new errors.DriverInternalError('Unexpected response from Cassandra: ' + util.inspect(result)));\n    });\n  }\n\n  onAuthenticationError(callback, err) {\n    this._metrics.onAuthenticationError(err);\n    callback(err);\n  }\n\n  /**\n   * Executes a 'USE ' query, if keyspace is provided and it is different from the current keyspace\n   * @param {?String} keyspace\n   */\n  async changeKeyspace(keyspace) {\n    if (!keyspace || this.keyspace === keyspace) {\n      return;\n    }\n\n    if (this.toBeKeyspace === keyspace) {\n      // It will be invoked once the keyspace is changed\n      return promiseUtils.fromEvent(this, 'keyspaceChanged');\n    }\n\n    this.toBeKeyspace = keyspace;\n\n    const query = `USE \"${keyspace}\"`;\n\n    try {\n      await this.send(new requests.QueryRequest(query, null, null), null);\n      this.keyspace = keyspace;\n      this.emit('keyspaceChanged', null, keyspace);\n    } catch (err) {\n      this.log('error', `Connection to ${this.endpointFriendlyName} could not switch active keyspace: ${err}`, err);\n      this.emit('keyspaceChanged', err);\n      throw err;\n    } finally {\n      this.toBeKeyspace = null;\n    }\n  }\n\n  /**\n   * Prepares a query on a given connection. If its already being prepared, it queues the callback.\n   * @param {String} query\n   * @param {String} keyspace\n   * @param {function} callback\n   */\n  prepareOnce(query, keyspace, callback) {\n    const name = ( keyspace || '' ) + query;\n    let info = this._preparing.get(name);\n\n    if (info) {\n      // Its being already prepared\n      return info.once('prepared', callback);\n    }\n\n    info = new events.EventEmitter();\n    info.setMaxListeners(0);\n    info.once('prepared', callback);\n    this._preparing.set(name, info);\n\n    this.sendStream(new requests.PrepareRequest(query, keyspace), null, (err, response) => {\n      info.emit('prepared', err, response);\n      this._preparing.delete(name);\n    });\n  }\n\n  /**\n   * Queues the operation to be written to the wire and invokes the callback once the response was obtained or with an\n   * error (socket error or OperationTimedOutError or serialization-related error).\n   * @param {Request} request\n   * @param {ExecutionOptions|null} execOptions\n   * @param {function} callback Function to be called once the response has been received\n   * @return {OperationState}\n   */\n  sendStream(request, execOptions, callback) {\n    execOptions = execOptions || ExecutionOptions.empty();\n\n    // Create a new operation that will contain the request, callback and timeouts\n    const operation = new OperationState(request, execOptions.getRowCallback(), (err, response, length) => {\n      if (!err || !err.isSocketError) {\n        // Emit that a response was obtained when there is a valid response\n        // or when the error is not a socket error\n        this.emit('responseDequeued');\n      }\n      callback(err, response, length);\n    });\n\n    const streamId = this._getStreamId();\n\n    // Start the request timeout without waiting for the request to be written\n    operation.setRequestTimeout(execOptions, this.options.socketOptions.readTimeout, this.endpoint,\n      () => this.timedOutOperations++,\n      () => this.timedOutOperations--);\n\n    if (streamId === null) {\n      this.log('info',\n        'Enqueuing ' +\n        this._pendingWrites.length +\n        ', if this message is recurrent consider configuring more connections per host or lowering the pressure');\n      this._pendingWrites.push(operation);\n      return operation;\n    }\n    this._write(operation, streamId);\n    return operation;\n  }\n\n  /**\n   * Pushes the item into the queue.\n   * @param {OperationState} operation\n   * @param {Number} streamId\n   * @private\n   */\n  _write(operation, streamId) {\n    operation.streamId = streamId;\n    const self = this;\n    this.writeQueue.push(operation, function writeCallback (err) {\n      if (err) {\n        // The request was not written.\n        // There was a serialization error or the operation has already timed out or was cancelled\n        self._streamIds.push(streamId);\n        return operation.setResult(err);\n      }\n      self.log('verbose', 'Sent stream #' + streamId + ' to ' + self.endpointFriendlyName);\n      if (operation.isByRow()) {\n        self.parser.setOptions(streamId, { byRow: true });\n      }\n      self._setIdleTimeout();\n      self._operations.set(streamId, operation);\n    });\n  }\n\n  _setIdleTimeout() {\n    if (!this.options.pooling.heartBeatInterval) {\n      return;\n    }\n    const self = this;\n    // Scheduling the new timeout before de-scheduling the previous performs significantly better\n    // than de-scheduling first, see nodejs implementation: https://github.com/nodejs/node/blob/master/lib/timers.js\n    const previousTimeout = this._idleTimeout;\n    self._idleTimeout = setTimeout(() => self._idleTimeoutHandler(), self.options.pooling.heartBeatInterval);\n    if (previousTimeout) {\n      //remove the previous timeout for the idle request\n      clearTimeout(previousTimeout);\n    }\n  }\n\n  /**\n   * Function that gets executed once the idle timeout has passed to issue a request to keep the connection alive\n   */\n  _idleTimeoutHandler() {\n    if (this.sendingIdleQuery) {\n      //don't issue another\n      //schedule for next time\n      this._idleTimeout = setTimeout(() => this._idleTimeoutHandler(), this.options.pooling.heartBeatInterval);\n      return;\n    }\n\n    this.log('verbose', `Connection to ${this.endpointFriendlyName} idling, issuing a request to prevent disconnects`);\n    this.sendingIdleQuery = true;\n    this.sendStream(requests.options, null, (err) => {\n      this.sendingIdleQuery = false;\n      if (!err) {\n        //The sending succeeded\n        //There is a valid response but we don't care about the response\n        return;\n      }\n      this.log('warning', 'Received heartbeat request error', err);\n      this.emit('idleRequestError', err, this);\n    });\n  }\n\n  /**\n   * Returns an available streamId or null if there isn't any available\n   * @returns {Number}\n   */\n  _getStreamId() {\n    return this._streamIds.pop();\n  }\n\n  freeStreamId(header) {\n    const streamId = header.streamId;\n\n    if (streamId < 0) {\n      // Event ids don't have a matching request operation\n      return;\n    }\n\n    this._operations.delete(streamId);\n    this._streamIds.push(streamId);\n\n    if (this.emitDrain && this._streamIds.inUse === 0 && this._pendingWrites.length === 0) {\n      this.emit('drain');\n    }\n\n    this._writeNext();\n  }\n\n  _writeNext() {\n    if (this._pendingWrites.length === 0) {\n      return;\n    }\n    const streamId = this._getStreamId();\n    if (streamId === null) {\n      // No streamId available\n      return;\n    }\n    const self = this;\n    let operation;\n    while ((operation = this._pendingWrites.shift()) && !operation.canBeWritten()) {\n      // Trying to obtain an pending operation that can be written\n    }\n\n    if (!operation) {\n      // There isn't a pending operation that can be written\n      this._streamIds.push(streamId);\n      return;\n    }\n\n    // Schedule after current I/O callbacks have been executed\n    setImmediate(function writeNextPending() {\n      self._write(operation, streamId);\n    });\n  }\n\n  /**\n   * Returns the number of requests waiting for response\n   * @returns {Number}\n   */\n  getInFlight() {\n    return this._streamIds.inUse;\n  }\n\n  /**\n   * Handles a result and error response\n   */\n  handleResult(header, err, result) {\n    const streamId = header.streamId;\n    if(streamId < 0) {\n      return this.log('verbose', 'event received', header);\n    }\n    const operation = this._operations.get(streamId);\n    if (!operation) {\n      return this.log('error', 'The server replied with a wrong streamId #' + streamId);\n    }\n    this.log('verbose', 'Received frame #' + streamId + ' from ' + this.endpointFriendlyName);\n    operation.setResult(err, result, header.bodyLength);\n  }\n\n  handleNodeEvent(header, event) {\n    switch (event.eventType) {\n      case types.protocolEvents.schemaChange:\n        this.emit('nodeSchemaChange', event);\n        break;\n      case types.protocolEvents.topologyChange:\n        this.emit('nodeTopologyChange', event);\n        break;\n      case types.protocolEvents.statusChange:\n        this.emit('nodeStatusChange', event);\n        break;\n    }\n  }\n\n  /**\n   * Handles a row response\n   */\n  handleRow(header, row, meta, rowLength, flags) {\n    const streamId = header.streamId;\n    if(streamId < 0) {\n      return this.log('verbose', 'Event received', header);\n    }\n    const operation = this._operations.get(streamId);\n    if (!operation) {\n      return this.log('error', 'The server replied with a wrong streamId #' + streamId);\n    }\n    operation.setResultRow(row, meta, rowLength, flags, header);\n  }\n\n  /**\n   * Closes the socket (if not already closed) and cancels all in-flight requests.\n   * Multiple calls to this method have no additional side-effects.\n   * @param {Function} [callback]\n   */\n  close(callback) {\n    callback = callback || utils.noop;\n\n    if (!this.connected && !this.isSocketOpen) {\n      return callback();\n    }\n\n    this.connected = false;\n    // Drain is never going to be emitted, once it is set to closed\n    this.removeAllListeners('drain');\n    this.clearAndInvokePending();\n\n    if (!this.isSocketOpen) {\n      return callback();\n    }\n\n    // Set the socket as closed now (before socket.end() is called) to avoid being invoked more than once\n    this.isSocketOpen = false;\n    this.log('verbose', `Closing connection to ${this.endpointFriendlyName}`);\n    const self = this;\n\n    // If server doesn't acknowledge the half-close within connection timeout, destroy the socket.\n    const endTimeout = setTimeout(() => {\n      this.log('info', `${this.endpointFriendlyName} did not respond to connection close within ` +\n        `${this.options.socketOptions.connectTimeout}ms, destroying connection`);\n      this.netClient.destroy();\n    }, this.options.socketOptions.connectTimeout);\n\n    this.netClient.once('close', function (hadError) {\n      clearTimeout(endTimeout);\n      if (hadError) {\n        self.log('info', 'The socket closed with a transmission error');\n      }\n      setImmediate(callback);\n    });\n\n    // At this point, the error event can be triggered because:\n    // - It's connected and writes haven't completed yet\n    // - The server abruptly closed its end of the connection (ECONNRESET) as a result of protocol error / auth error\n    // We need to remove any listeners and make sure we callback are pending writes\n    this.netClient.removeAllListeners('error');\n    this.netClient.on('error', err => this.clearAndInvokePending(err));\n\n    // Half-close the socket, it will result in 'close' event being fired\n    this.netClient.end();\n  }\n\n  /**\n   * Gets the local IP address to which this connection socket is bound to.\n   * @returns {String|undefined}\n   */\n  getLocalAddress() {\n    if (!this.netClient) {\n      return undefined;\n    }\n\n    return this.netClient.localAddress;\n  }\n}\n\nmodule.exports = Connection;\n", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst util = require('util');\nconst events = require('events');\n\nconst Connection = require('./connection');\nconst utils = require('./utils');\nconst promiseUtils = require('./promise-utils');\nconst errors = require('./errors');\nconst clientOptions = require('./client-options');\n\n// Used to get the index of the connection with less in-flight requests\nlet connectionIndex = 0;\nconst connectionIndexOverflow = Math.pow(2, 15);\n\nlet defaultOptions;\n\n/**\n * Represents the possible states of the pool.\n * Possible state transitions:\n *  - From initial to closing: The pool must be closed because the host is ignored.\n *  - From initial to shuttingDown: The pool is being shutdown as a result of a client shutdown.\n *  - From closing to initial state: The pool finished closing connections (is now ignored) and it resets to\n *    initial state in case the host is marked as local/remote in the future.\n *  - From closing to shuttingDown (rare): It was marked as ignored, now the client is being shutdown.\n *  - From shuttingDown to shutdown: Finished shutting down, the pool should not be reused.\n * @private\n */\nconst state = {\n  // Initial state: open / opening / ready to be opened\n  initial: 0,\n  // When the pool is being closed as part of a distance change\n  closing: 1,\n  // When the pool is being shutdown for good\n  shuttingDown: 2,\n  // When the pool has being shutdown\n  shutDown: 4\n};\n\n/**\n * Represents a pool of connections to a host\n */\nclass HostConnectionPool extends events.EventEmitter {\n  /**\n   * Creates a new instance of HostConnectionPool.\n   * @param {Host} host\n   * @param {Number} protocolVersion Initial protocol version\n   * @extends EventEmitter\n   */\n  constructor(host, protocolVersion) {\n    super();\n    this._address = host.address;\n    this._newConnectionTimeout = null;\n    this._state = state.initial;\n    this._opening = false;\n    this._host = host;\n    this.responseCounter = 0;\n    this.options = host.options;\n    this.protocolVersion = protocolVersion;\n    this.coreConnectionsLength = 1;\n    /**\n     * An immutable array of connections\n     * @type {Array.<Connection>}\n     */\n    this.connections = utils.emptyArray;\n    this.setMaxListeners(0);\n    this.log = utils.log;\n  }\n\n  getInFlight() {\n    const length = this.connections.length;\n    if (length === 1) {\n      return this.connections[0].getInFlight();\n    }\n\n    let sum = 0;\n    for (let i = 0; i < length; i++) {\n      sum += this.connections[i].getInFlight();\n    }\n    return sum;\n  }\n\n  /**\n   * Gets the least busy connection from the pool.\n   * @param {Connection} [previousConnection] When provided, the pool should attempt to obtain a different connection.\n   * @returns {Connection!}\n   * @throws {Error}\n   * @throws {BusyConnectionError}\n   */\n  borrowConnection(previousConnection) {\n    if (this.connections.length === 0) {\n      throw new Error('No connection available');\n    }\n\n    const maxRequests = this.options.pooling.maxRequestsPerConnection;\n    const c = HostConnectionPool.minInFlight(this.connections, maxRequests, previousConnection);\n\n    if (c.getInFlight() >= maxRequests) {\n      throw new errors.BusyConnectionError(this._address, maxRequests, this.connections.length);\n    }\n\n    return c;\n  }\n\n  /**\n   * Gets the connection with the minimum number of in-flight requests.\n   * Only checks for 2 connections (round-robin) and gets the one with minimum in-flight requests, as long as\n   * the amount of in-flight requests is lower than maxRequests.\n   * @param {Array.<Connection>} connections\n   * @param {Number} maxRequests\n   * @param {Connection} previousConnection When provided, it will attempt to obtain a different connection.\n   * @returns {Connection!}\n   */\n  static minInFlight(connections, maxRequests, previousConnection) {\n    const length = connections.length;\n    if (length === 1) {\n      return connections[0];\n    }\n\n    // Use a single index for all hosts as a simplified way to balance the load between connections\n    connectionIndex++;\n    if (connectionIndex >= connectionIndexOverflow) {\n      connectionIndex = 0;\n    }\n\n    let current;\n    for (let index = connectionIndex; index < connectionIndex + length; index++) {\n      current = connections[index % length];\n      if (current === previousConnection) {\n        // Increment the index and skip\n        current = connections[(++index) % length];\n      }\n\n      let next = connections[(index + 1) % length];\n      if (next === previousConnection) {\n        // Skip\n        next = connections[(index + 2) % length];\n      }\n\n      if (next.getInFlight() < current.getInFlight()) {\n        current = next;\n      }\n\n      if (current.getInFlight() < maxRequests) {\n        // Check as few connections as possible, as long as the amount of in-flight\n        // requests is lower than maxRequests\n        break;\n      }\n    }\n    return current;\n  }\n\n  /**\n   * Creates all the connections in the pool and switches the keyspace of each connection if needed.\n   * @param {string} keyspace\n   */\n  async warmup(keyspace) {\n    if (this.connections.length < this.coreConnectionsLength) {\n      while (this.connections.length < this.coreConnectionsLength) {\n        await this._attemptNewConnection();\n      }\n\n      this.log('info',\n        `Connection pool to host ${this._address} created with ${this.connections.length} connection(s)`);\n    } else {\n      this.log('info', `Connection pool to host ${this._address} contains ${this.connections.length} connection(s)`);\n    }\n\n    if (keyspace) {\n      try {\n        for (const connection of this.connections) {\n          await connection.changeKeyspace(keyspace);\n        }\n      } catch (err) {\n        // Log it and move on, it could be a momentary schema mismatch failure\n        this.log('warning', `Connection(s) to host ${this._address} could not be switched to keyspace ${keyspace}`);\n      }\n    }\n  }\n\n  /** @returns {Connection} */\n  _createConnection() {\n    const endpointOrServerName = !this.options.sni\n      ? this._address : this._host.hostId.toString();\n\n    const c = new Connection(endpointOrServerName, this.protocolVersion, this.options);\n    this._addListeners(c);\n    return c;\n  }\n\n  /** @param {Connection} c */\n  _addListeners(c) {\n    c.on('responseDequeued', () => this.responseCounter++);\n\n    const self = this;\n    function connectionErrorCallback() {\n      // The socket is not fully open / can not send heartbeat\n      self.remove(c);\n    }\n    c.on('idleRequestError', connectionErrorCallback);\n    c.on('socketClose', connectionErrorCallback);\n  }\n\n  addExistingConnection(c) {\n    this._addListeners(c);\n    // Use a copy of the connections array\n    this.connections = this.connections.slice(0);\n    this.connections.push(c);\n  }\n\n  /**\n   * Prevents reconnection timeout from triggering\n   */\n  clearNewConnectionAttempt() {\n    if (!this._newConnectionTimeout) {\n      return;\n    }\n    clearTimeout(this._newConnectionTimeout);\n    this._newConnectionTimeout = null;\n  }\n\n  /**\n   * Tries to open a new connection.\n   * If a connection is being opened, it will resolve when the existing open task completes.\n   * @returns {Promise<void>}\n   */\n  async _attemptNewConnection() {\n    if (this._opening) {\n      // Wait for the event to fire\n      return await promiseUtils.fromEvent(this, 'open');\n    }\n\n    this._opening = true;\n\n    const c = this._createConnection();\n    let err;\n\n    try {\n      await c.openAsync();\n    } catch (e) {\n      err = e;\n      this.log('warning', `Connection to ${this._address} could not be created: ${err}`, err);\n    }\n\n    if (this.isClosing()) {\n      this.log('info', `Connection to ${this._address} opened successfully but pool was being closed`);\n      err = new Error('Connection closed');\n    }\n\n    if (!err) {\n      // Append the connection to the pool.\n      // Use a copy of the connections array.\n      const newConnections = this.connections.slice(0);\n      newConnections.push(c);\n      this.connections = newConnections;\n      this.log('info', `Connection to ${this._address} opened successfully`);\n    } else {\n      promiseUtils.toBackground(c.closeAsync());\n    }\n\n    // Notify that creation finished by setting the flag and emitting the event\n    this._opening = false;\n    this.emit('open', err, c);\n\n    if (err) {\n      // Opening failed\n      throw err;\n    }\n  }\n\n  attemptNewConnectionImmediate() {\n    const self = this;\n    function openConnection() {\n      self.clearNewConnectionAttempt();\n      self.scheduleNewConnectionAttempt(0);\n    }\n\n    if (this._state === state.initial) {\n      return openConnection();\n    }\n\n    if (this._state === state.closing) {\n      return this.once('close', openConnection);\n    }\n    // In the case the pool its being / has been shutdown for good\n    // Do not attempt to create a new connection.\n  }\n\n  /**\n   * Closes the connection and removes a connection from the pool.\n   * @param {Connection} connection\n   */\n  remove(connection) {\n    // locating an object by position in the array is O(n), but normally there should be between 1 to 8 connections.\n    const index = this.connections.indexOf(connection);\n    if (index < 0) {\n      // it was already removed from the connections and it's closing\n      return;\n    }\n    // remove the connection from the pool, using an pool copy\n    const newConnections = this.connections.slice(0);\n    newConnections.splice(index, 1);\n    this.connections = newConnections;\n    // close the connection\n    setImmediate(function removeClose() {\n      connection.close();\n    });\n    this.emit('remove');\n  }\n\n  /**\n   * @param {Number} delay\n   */\n  scheduleNewConnectionAttempt(delay) {\n    if (this.isClosing()) {\n      return;\n    }\n\n    const self = this;\n\n    this._newConnectionTimeout = setTimeout(function newConnectionTimeoutExpired() {\n      self._newConnectionTimeout = null;\n      if (self.connections.length >= self.coreConnectionsLength) {\n        // new connection can be scheduled while a new connection is being opened\n        // the pool has the appropriate size\n        return;\n      }\n\n      if (delay > 0 && self.options.sni) {\n        // We use delay > 0 as an indication that it's a reconnection.\n        // A reconnection schedule can use delay = 0 as well, but it's a good enough signal.\n        promiseUtils.toBackground(self.options.sni.addressResolver.refresh().then(() => self._attemptNewConnection()));\n        return;\n      }\n\n      promiseUtils.toBackground(self._attemptNewConnection());\n    }, delay);\n  }\n\n  hasScheduledNewConnection() {\n    return !!this._newConnectionTimeout || this._opening;\n  }\n\n  /**\n   * Increases the size of the connection pool in the background, if needed.\n   */\n  increaseSize() {\n    if (this.connections.length < this.coreConnectionsLength && !this.hasScheduledNewConnection()) {\n      // schedule the next connection in the background\n      this.scheduleNewConnectionAttempt(0);\n    }\n  }\n\n  /**\n   * Gets the amount of responses and resets the internal counter.\n   * @returns {number}\n   */\n  getAndResetResponseCounter() {\n    const temp = this.responseCounter;\n    this.responseCounter = 0;\n    return temp;\n  }\n\n  /**\n   * Gets a boolean indicating if the pool is being closed / shutting down or has been shutdown.\n   */\n  isClosing() {\n    return this._state !== state.initial;\n  }\n\n  /**\n   * Gracefully waits for all in-flight requests to finish and closes the pool.\n   */\n  drainAndShutdown() {\n    if (this.isClosing()) {\n      // Its already closing / shutting down\n      return;\n    }\n\n    this._state = state.closing;\n    this.clearNewConnectionAttempt();\n\n    if (this.connections.length === 0) {\n      return this._afterClosing();\n    }\n\n    const self = this;\n    const connections = this.connections;\n    this.connections = utils.emptyArray;\n    let closedConnections = 0;\n    this.log('info', util.format('Draining and closing %d connections to %s', connections.length, this._address));\n    let wasClosed = false;\n    // eslint-disable-next-line prefer-const\n    let checkShutdownTimeout;\n\n    for (let i = 0; i < connections.length; i++) {\n      const c = connections[i];\n      if (c.getInFlight() === 0) {\n        getDelayedClose(c)();\n        continue;\n      }\n      c.emitDrain = true;\n      c.once('drain', getDelayedClose(c));\n    }\n\n    function getDelayedClose(connection) {\n      return (function delayedClose() {\n        connection.close();\n        if (++closedConnections < connections.length) {\n          return;\n        }\n        if (wasClosed) {\n          return;\n        }\n        wasClosed = true;\n        if (checkShutdownTimeout) {\n          clearTimeout(checkShutdownTimeout);\n        }\n        self._afterClosing();\n      });\n    }\n\n    // Check that after sometime (readTimeout + 100ms) the connections have been drained\n    const delay = (this.options.socketOptions.readTimeout || getDefaultOptions().socketOptions.readTimeout) + 100;\n    checkShutdownTimeout = setTimeout(function checkShutdown() {\n      wasClosed = true;\n      connections.forEach(function connectionEach(c) {\n        c.close();\n      });\n      self._afterClosing();\n    }, delay);\n  }\n\n  _afterClosing() {\n    const self = this;\n\n    function resetState() {\n      if (self._state === state.shuttingDown) {\n        self._state = state.shutDown;\n      } else {\n        self._state = state.initial;\n      }\n\n      self.emit('close');\n\n      if (self._state === state.shutDown) {\n        self.emit('shutdown');\n      }\n    }\n\n    if (this._opening) {\n      // The pool is growing, reset the state back to init once the open finished (without any new connection)\n      return this.once('open', resetState);\n    }\n\n    resetState();\n  }\n\n  /**\n   * @returns {Promise<void>}\n   */\n  async shutdown() {\n    this.clearNewConnectionAttempt();\n\n    if (!this.connections.length) {\n      this._state = state.shutDown;\n      return;\n    }\n\n    const previousState = this._state;\n    this._state = state.shuttingDown;\n\n    if (previousState === state.closing || previousState === state.shuttingDown) {\n      // When previous state was closing, it will drain all connections and close them\n      // When previous state was \"shuttingDown\", it will close all the connections\n      // Once it's completed, shutdown event will be emitted\n      return promiseUtils.fromEvent(this, 'shutdown');\n    }\n\n    await this._closeAllConnections();\n\n    this._state = state.shutDown;\n    this.emit('shutdown');\n  }\n\n  async _closeAllConnections() {\n    const connections = this.connections;\n    // point to an empty array\n    this.connections = utils.emptyArray;\n    if (connections.length === 0) {\n      return;\n    }\n\n    this.log('info', util.format('Closing %d connections to %s', connections.length, this._address));\n\n    await Promise.all(connections.map(c => c.closeAsync()));\n  }\n}\n\n/** Lazily loads the default options */\nfunction getDefaultOptions() {\n  if (defaultOptions === undefined) {\n    defaultOptions = clientOptions.defaultOptions();\n  }\n  return defaultOptions;\n}\n\nmodule.exports = HostConnectionPool;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst errors = require('./errors');\nconst utils = require('./utils');\nconst types = require('./types');\nconst promiseUtils = require('./promise-utils');\n\n/**\n * Encapsulates the logic for dealing with the different prepare request and response flows, including failover when\n * trying to prepare a query.\n */\nclass PrepareHandler {\n  /**\n   * Creates a new instance of PrepareHandler\n   * @param {Client} client\n   * @param {LoadBalancingPolicy} loadBalancing\n   */\n  constructor(client, loadBalancing) {\n    this._client = client;\n    this._loadBalancing = loadBalancing;\n    this.logEmitter = client.options.logEmitter;\n    this.log = utils.log;\n  }\n\n  /**\n   * Gets the query id and metadata for a prepared statement, preparing it on\n   * single host or on all hosts depending on the options.\n   * @param {Client} client\n   * @param {LoadBalancingPolicy} loadBalancing\n   * @param {String} query\n   * @param {String} keyspace\n   * @returns {Promise<{queryId, meta}>}\n   * @static\n   */\n  static async getPrepared(client, loadBalancing, query, keyspace) {\n    const info = client.metadata.getPreparedInfo(keyspace, query);\n    if (info.queryId) {\n      return info;\n    }\n\n    if (info.preparing) {\n      // It's already being prepared\n      return await promiseUtils.fromEvent(info, 'prepared');\n    }\n\n    const instance = new PrepareHandler(client, loadBalancing);\n    return await instance._prepare(info, query, keyspace);\n  }\n\n  /**\n   * @param {Client} client\n   * @param {LoadBalancingPolicy} loadBalancing\n   * @param {Array} queries\n   * @param {String} keyspace\n   * @static\n   */\n  static async getPreparedMultiple(client, loadBalancing, queries, keyspace) {\n    const result = [];\n\n    for (const item of queries) {\n      let query;\n\n      if (item) {\n        query = typeof item === 'string' ? item : item.query;\n      }\n\n      if (typeof query !== 'string') {\n        throw new errors.ArgumentError('Query item should be a string');\n      }\n\n      const { queryId, meta } = await PrepareHandler.getPrepared(client, loadBalancing, query, keyspace);\n      result.push({ query, params: utils.adaptNamedParamsPrepared(item.params, meta.columns), queryId, meta });\n    }\n\n    return result;\n  }\n\n  /**\n   * Prepares the query on a single host or on all hosts depending on the options.\n   * Uses the info 'prepared' event to emit the result.\n   * @param {Object} info\n   * @param {String} query\n   * @param {String} keyspace\n   * @returns {Promise<{queryId, meta}>}\n   */\n  async _prepare(info, query, keyspace) {\n    info.preparing = true;\n    let iterator;\n\n    try {\n      iterator = await promiseUtils.newQueryPlan(this._loadBalancing, keyspace, null);\n      return await this._prepareWithQueryPlan(info, iterator, query, keyspace);\n    } catch (err) {\n      info.preparing = false;\n      err.query = query;\n      info.emit('prepared', err);\n\n      throw err;\n    }\n  }\n\n  /**\n   * Uses the query plan to prepare the query on the first host and optionally on the rest of the hosts.\n   * @param {Object} info\n   * @param {Iterator} iterator\n   * @param {String} query\n   * @param {String} keyspace\n   * @returns {Promise<{queryId, meta}>}\n   * @private\n   */\n  async _prepareWithQueryPlan(info, iterator, query, keyspace) {\n    const triedHosts = {};\n\n    while (true) {\n      const host = PrepareHandler.getNextHost(iterator, this._client.profileManager, triedHosts);\n\n      if (host === null) {\n        throw new errors.NoHostAvailableError(triedHosts);\n      }\n\n      try {\n        const connection = await PrepareHandler._borrowWithKeyspace(host, keyspace);\n        const response = await connection.prepareOnceAsync(query, keyspace);\n\n        if (this._client.options.prepareOnAllHosts) {\n          await this._prepareOnAllHosts(iterator, query, keyspace);\n        }\n\n        // Set the prepared metadata\n        info.preparing = false;\n        info.queryId = response.id;\n        info.meta = response.meta;\n        this._client.metadata.setPreparedById(info);\n        info.emit('prepared', null, info);\n\n        return info;\n\n      } catch (err) {\n        triedHosts[host.address] = err;\n\n        if (!err.isSocketError && !(err instanceof errors.OperationTimedOutError)) {\n          // There's no point in retrying syntax errors and other response errors\n          throw err;\n        }\n      }\n    }\n  }\n\n  /**\n   * Gets the next host from the query plan.\n   * @param {Iterator} iterator\n   * @param {ProfileManager} profileManager\n   * @param {Object} [triedHosts]\n   * @return {Host|null}\n   */\n  static getNextHost(iterator, profileManager, triedHosts) {\n    let host;\n    // Get a host that is UP in a sync loop\n    while (true) {\n      const item = iterator.next();\n      if (item.done) {\n        return null;\n      }\n\n      host = item.value;\n\n      // set the distance relative to the client first\n      const distance = profileManager.getDistance(host);\n      if (distance === types.distance.ignored) {\n        //If its marked as ignore by the load balancing policy, move on.\n        continue;\n      }\n\n      if (host.isUp()) {\n        break;\n      }\n\n      if (triedHosts) {\n        triedHosts[host.address] = 'Host considered as DOWN';\n      }\n    }\n\n    return host;\n  }\n\n  /**\n   * Prepares all queries on a single host.\n   * @param {Host} host\n   * @param {Array} allPrepared\n   */\n  static async prepareAllQueries(host, allPrepared) {\n    const anyKeyspaceQueries = [];\n\n    const queriesByKeyspace = new Map();\n    allPrepared.forEach(info => {\n      let arr;\n      if (info.keyspace) {\n        arr = queriesByKeyspace.get(info.keyspace);\n\n        if (!arr) {\n          arr = [];\n          queriesByKeyspace.set(info.keyspace, arr);\n        }\n      } else {\n        arr = anyKeyspaceQueries;\n      }\n\n      arr.push(info.query);\n    });\n\n    for (const [keyspace, queries] of queriesByKeyspace) {\n      await PrepareHandler._borrowAndPrepare(host, keyspace, queries);\n    }\n\n    await PrepareHandler._borrowAndPrepare(host, null, anyKeyspaceQueries);\n  }\n\n  /**\n   * Borrows a connection from the host and prepares the queries provided.\n   * @param {Host} host\n   * @param {String} keyspace\n   * @param {Array} queries\n   * @returns {Promise<void>}\n   * @private\n   */\n  static async _borrowAndPrepare(host, keyspace, queries) {\n    if (queries.length === 0) {\n      return;\n    }\n\n    const connection = await PrepareHandler._borrowWithKeyspace(host, keyspace);\n\n    for (const query of queries) {\n      await connection.prepareOnceAsync(query, keyspace);\n    }\n  }\n\n  /**\n   * Borrows a connection and changes the active keyspace on the connection, if needed.\n   * It does not perform any retry or error handling.\n   * @param {Host!} host\n   * @param {string} keyspace\n   * @returns {Promise<Connection>}\n   * @throws {errors.BusyConnectionError} When the connection is busy.\n   * @throws {errors.ResponseError} For invalid keyspaces.\n   * @throws {Error} For socket errors.\n   * @private\n   */\n  static async _borrowWithKeyspace(host, keyspace) {\n    const connection = host.borrowConnection();\n\n    if (keyspace && connection.keyspace !== keyspace) {\n      await connection.changeKeyspace(keyspace);\n    }\n\n    return connection;\n  }\n\n  /**\n   * Prepares the provided query on all hosts, except the host provided.\n   * @param {Iterator} iterator\n   * @param {String} query\n   * @param {String} keyspace\n   * @private\n   */\n  _prepareOnAllHosts(iterator, query, keyspace) {\n    const queries = [ query ];\n    let h;\n    const hosts = [];\n\n    while ((h = PrepareHandler.getNextHost(iterator, this._client.profileManager)) !== null) {\n      hosts.push(h);\n    }\n\n    return Promise.all(hosts.map(h =>\n      PrepareHandler\n        ._borrowAndPrepare(h, keyspace, queries)\n        .catch(err => this.log('verbose', `Unexpected error while preparing query (${query}) on ${h.address}`, err))));\n  }\n}\n\nmodule.exports = PrepareHandler;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst events = require('events');\n\nconst utils = require('./utils');\nconst types = require('./types');\nconst HostConnectionPool = require('./host-connection-pool');\nconst PrepareHandler = require('./prepare-handler');\nconst promiseUtils = require('./promise-utils');\n\nconst healthResponseCountInterval = 200;\n\n/**\n * Represents a Cassandra node.\n * @extends EventEmitter\n */\nclass Host extends events.EventEmitter {\n\n  /**\n   * Creates a new Host instance.\n   */\n  constructor(address, protocolVersion, options, metadata) {\n    super();\n    /**\n     * Gets ip address and port number of the node separated by `:`.\n     * @type {String}\n     */\n    this.address = address;\n    this.setDownAt = 0;\n    this.log = utils.log;\n\n    /**\n     * Gets the timestamp of the moment when the Host was marked as UP.\n     * @type {Number|null}\n     * @ignore\n     * @internal\n     */\n    this.isUpSince = null;\n    Object.defineProperty(this, 'options', { value: options, enumerable: false, writable: false });\n\n    /**\n     * The host pool.\n     * @internal\n     * @ignore\n     * @type {HostConnectionPool}\n     */\n    Object.defineProperty(this, 'pool', { value: new HostConnectionPool(this, protocolVersion), enumerable: false });\n\n    this.pool.on('open', err => promiseUtils.toBackground(this._onNewConnectionOpen(err)));\n    this.pool.on('remove', () => this._checkPoolState());\n\n    /**\n     * Gets string containing the Cassandra version.\n     * @type {String}\n     */\n    this.cassandraVersion = null;\n\n    /**\n     * Gets data center name of the node.\n     * @type {String}\n     */\n    this.datacenter = null;\n\n    /**\n     * Gets rack name of the node.\n     * @type {String}\n     */\n    this.rack = null;\n\n    /**\n     * Gets the tokens assigned to the node.\n     * @type {Array}\n     */\n    this.tokens = null;\n\n    /**\n     * Gets the id of the host.\n     * <p>This identifier is used by the server for internal communication / gossip.</p>\n     * @type {Uuid}\n     */\n    this.hostId = null;\n\n    /**\n     * Gets string containing the DSE version or null if not set.\n     * @type {String}\n     */\n    this.dseVersion = null;\n\n    /**\n     * Gets the DSE Workloads the host is running.\n     * <p>\n     *   This is based on the \"workload\" or \"workloads\" columns in {@code system.local} and {@code system.peers}.\n     * <p/>\n     * <p>\n     *   Workload labels may vary depending on the DSE version in use;e.g. DSE 5.1 may report two distinct workloads:\n     *   <code>Search</code> and <code>Analytics</code>, while DSE 5.0 would report a single\n     *   <code>SearchAnalytics</code> workload instead. The driver simply returns the workload labels as reported by\n     *   DSE, without any form of pre-processing.\n     * <p/>\n     * <p>When the information is unavailable, this property returns an empty array.</p>\n     * @type {Array<string>}\n     */\n    this.workloads = utils.emptyArray;\n\n    // the distance as last set using the load balancing policy\n    this._distance = types.distance.ignored;\n    this._healthResponseCounter = 0;\n\n    // Make some of the private instance variables not enumerable to prevent from showing when inspecting\n    Object.defineProperty(this, '_metadata', { value: metadata, enumerable: false });\n    Object.defineProperty(this, '_healthResponseCountTimer', { value: null, enumerable: false, writable: true });\n\n    this.reconnectionSchedule = this.options.policies.reconnection.newSchedule();\n    this.reconnectionDelay = 0;\n  }\n\n  /**\n   * Marks this host as not available for query coordination, when the host was previously marked as UP, otherwise its\n   * a no-op.\n   * @internal\n   * @ignore\n   */\n  setDown() {\n    // Multiple events signaling that a host is failing could cause multiple calls to this method\n    if (this.setDownAt !== 0) {\n      // the host is already marked as Down\n      return;\n    }\n    if (this.pool.isClosing()) {\n      // the pool is being closed/shutdown, don't mind\n      return;\n    }\n    this.setDownAt = Date.now();\n    if (this.pool.coreConnectionsLength > 0) {\n      // According to the distance, there should be connections open to it => issue a warning\n      this.log('warning', `Host ${this.address} considered as DOWN. Reconnection delay ${this.reconnectionDelay}ms.`);\n    }\n    else {\n      this.log('info', `Host ${this.address} considered as DOWN.`);\n    }\n    this.emit('down');\n    this._checkPoolState();\n  }\n\n  /**\n   * Marks this host as available for querying.\n   * @param {Boolean} [clearReconnection]\n   * @internal\n   * @ignore\n   */\n  setUp(clearReconnection) {\n    if (!this.setDownAt) {\n      //The host is already marked as UP\n      return;\n    }\n    this.log('info', `Setting host ${this.address} as UP`);\n    this.setDownAt = 0;\n    this.isUpSince = Date.now();\n    //if it was unhealthy and now it is not, lets reset the reconnection schedule.\n    this.reconnectionSchedule = this.options.policies.reconnection.newSchedule();\n    if (clearReconnection) {\n      this.pool.clearNewConnectionAttempt();\n    }\n    this.emit('up');\n  }\n\n  /**\n   * Resets the reconnectionSchedule and tries to issue a reconnection immediately.\n   * @internal\n   * @ignore\n   */\n  checkIsUp() {\n    if (this.isUp()) {\n      return;\n    }\n    this.reconnectionSchedule = this.options.policies.reconnection.newSchedule();\n    this.reconnectionDelay = 0;\n    this.pool.attemptNewConnectionImmediate();\n  }\n\n  /**\n   * @param {Boolean} [waitForPending] When true, it waits for in-flight operations to be finish before closing the\n   * connections.\n   * @returns {Promise<void>}\n   * @internal\n   * @ignore\n   */\n  shutdown(waitForPending) {\n    if (this._healthResponseCountTimer) {\n      clearInterval(this._healthResponseCountTimer);\n    }\n    if (waitForPending) {\n      this.pool.drainAndShutdown();\n      // Gracefully draining and shutting down the pool is being done in the background\n      return Promise.resolve();\n    }\n    return this.pool.shutdown();\n  }\n\n  /**\n   * Determines if the node is UP now (seen as UP by the driver).\n   * @returns {boolean}\n   */\n  isUp() {\n    return !this.setDownAt;\n  }\n\n  /**\n   * Determines if the host can be considered as UP.\n   * Deprecated: Use {@link Host#isUp()} instead.\n   * @returns {boolean}\n   */\n  canBeConsideredAsUp() {\n    const self = this;\n    function hasTimePassed() {\n      return new Date().getTime() - self.setDownAt >= self.reconnectionDelay;\n    }\n    return !this.setDownAt || hasTimePassed();\n  }\n\n  /**\n   * Sets the distance of the host relative to the client using the load balancing policy.\n   * @param {Number} distance\n   * @internal\n   * @ignore\n   */\n  setDistance(distance) {\n    const previousDistance = this._distance;\n    this._distance = distance || types.distance.local;\n    if (this.options.pooling.coreConnectionsPerHost) {\n      this.pool.coreConnectionsLength = this.options.pooling.coreConnectionsPerHost[this._distance] || 0;\n    }\n    else {\n      this.pool.coreConnectionsLength = 1;\n    }\n    if (this._distance === previousDistance) {\n      return this._distance;\n    }\n    if (this._healthResponseCountTimer) {\n      clearInterval(this._healthResponseCountTimer);\n    }\n    if (this._distance === types.distance.ignored) {\n      // this host was local/remote and now must be ignored\n      this.emit('ignore');\n      this.pool.drainAndShutdown();\n    }\n    else {\n      if (!this.isUp()) {\n        this.checkIsUp();\n      }\n      // Reset the health check timer\n      this._healthResponseCountTimer = setInterval(() => {\n        this._healthResponseCounter = this.pool.getAndResetResponseCounter();\n      }, healthResponseCountInterval);\n    }\n    return this._distance;\n  }\n\n  /**\n   * Changes the protocol version of a given host\n   * @param {Number} value\n   * @internal\n   * @ignore\n   */\n  setProtocolVersion(value) {\n    this.pool.protocolVersion = value;\n  }\n\n  /**\n   * Gets the least busy connection from the pool.\n   * @param {Connection} [previousConnection] When provided, the pool should attempt to obtain a different connection.\n   * @returns {Connection!}\n   * @throws {Error}\n   * @throws {BusyConnectionError}\n   * @internal\n   * @ignore\n   */\n  borrowConnection(previousConnection) {\n    return this.pool.borrowConnection(previousConnection);\n  }\n\n  /**\n   * Creates all the connection in the pool.\n   * @param {string} keyspace\n   * @internal\n   * @ignore\n   */\n  warmupPool(keyspace) {\n    return this.pool.warmup(keyspace);\n  }\n\n  /**\n   * Starts creating the pool in the background.\n   * @internal\n   * @ignore\n   */\n  initializePool() {\n    this.pool.increaseSize();\n  }\n  /**\n   * Gets any connection that is already opened or null if not found.\n   * @returns {Connection}\n   * @internal\n   * @ignore\n   */\n  getActiveConnection() {\n    if (!this.isUp() || !this.pool.connections.length) {\n      return null;\n    }\n    return this.pool.connections[0];\n  }\n\n  /**\n   * Internal method to get the amount of responses dequeued in the last interval (between 200ms and 400ms) on all\n   * connections to the host.\n   * @returns {Number}\n   * @internal\n   * @ignore\n   */\n  getResponseCount() {\n    // Last interval plus the current count\n    return this._healthResponseCounter + this.pool.responseCounter;\n  }\n\n  /**\n   * Checks the health of a connection in the pool\n   * @param {Connection} connection\n   * @internal\n   * @ignore\n   */\n  checkHealth(connection) {\n    if (connection.timedOutOperations <= this.options.socketOptions.defunctReadTimeoutThreshold) {\n      return;\n    }\n    this.removeFromPool(connection);\n  }\n\n  /**\n   * @param {Connection} connection\n   * @internal\n   * @ignore\n   */\n  removeFromPool(connection) {\n    this.pool.remove(connection);\n    this._checkPoolState();\n  }\n\n  /**\n   * Internal method that gets the amount of in-flight requests on all connections to the host.\n   * @internal\n   * @ignore\n   */\n  getInFlight() {\n    return this.pool.getInFlight();\n  }\n\n  /**\n   * Validates that the internal state of the connection pool.\n   * If the pool size is smaller than expected, schedule a new connection attempt.\n   * If the amount of connections is 0 for not ignored hosts, the host must be down.\n   * @private\n   */\n  _checkPoolState() {\n    if (this.pool.isClosing()) {\n      return;\n    }\n    if (this.pool.connections.length < this.pool.coreConnectionsLength) {\n      // the pool needs to grow / reconnect\n      if (!this.pool.hasScheduledNewConnection()) {\n        this.reconnectionDelay = this.reconnectionSchedule.next().value;\n        this.pool.scheduleNewConnectionAttempt(this.reconnectionDelay);\n      }\n    }\n    const shouldHaveConnections = this._distance !== types.distance.ignored && this.pool.coreConnectionsLength > 0;\n    if (shouldHaveConnections && this.pool.connections.length === 0) {\n      // Mark as DOWN, if its UP\n      this.setDown();\n    }\n  }\n\n  /**\n   * Executed after an scheduled new connection attempt finished\n   * @private\n   */\n  async _onNewConnectionOpen(err) {\n    if (err) {\n      this._checkPoolState();\n      return;\n    }\n    if (!this.isUp() && this.options.rePrepareOnUp) {\n      this.log('info', `Re-preparing all queries on host ${this.address} before setting it as UP`);\n      const allPrepared = this._metadata.getAllPrepared();\n      try {\n        await PrepareHandler.prepareAllQueries(this, allPrepared);\n      }\n      catch (err) {\n        this.log('warning', `Failed re-preparing on host ${this.address}: ${err}`, err);\n      }\n    }\n    this.setUp();\n    this.pool.increaseSize();\n  }\n\n  /**\n   * Returns an array containing the Cassandra Version as an Array of Numbers having the major version in the first\n   * position.\n   * @returns {Array.<Number>}\n   */\n  getCassandraVersion() {\n    if (!this.cassandraVersion) {\n      return utils.emptyArray;\n    }\n    return this.cassandraVersion.split('-')[0].split('.').map(x => parseInt(x, 10));\n  }\n\n  /**\n   * Gets the DSE version of the host as an Array, containing the major version in the first position.\n   * In case the cluster is not a DSE cluster, it returns an empty Array.\n   * @returns {Array}\n   */\n  getDseVersion() {\n    if (!this.dseVersion) {\n      return utils.emptyArray;\n    }\n    return this.dseVersion.split('-')[0].split('.').map(x => parseInt(x, 10));\n  }\n}\n\n/**\n * Represents an associative-array of {@link Host hosts} that can be iterated.\n * It creates an internal copy when adding or removing, making it safe to iterate using the values()\n * method within async operations.\n * @extends events.EventEmitter\n * @constructor\n */\nclass HostMap extends events.EventEmitter{\n  constructor() {\n    super();\n\n    this._items = new Map();\n    this._values = null;\n\n    Object.defineProperty(this, 'length', { get: () => this.values().length, enumerable: true });\n\n    /**\n     * Emitted when a host is added to the map\n     * @event HostMap#add\n     */\n    /**\n     * Emitted when a host is removed from the map\n     * @event HostMap#remove\n     */\n  }\n\n  /**\n   * Executes a provided function once per map element.\n   * @param callback\n   */\n  forEach(callback) {\n    const items = this._items;\n    for (const [ key, value ] of items) {\n      callback(value, key);\n    }\n  }\n\n  /**\n   * Gets a {@link Host host} by key or undefined if not found.\n   * @param {String} key\n   * @returns {Host}\n   */\n  get(key) {\n    return this._items.get(key);\n  }\n\n  /**\n   * Returns an array of host addresses.\n   * @returns {Array.<String>}\n   */\n  keys() {\n    return Array.from(this._items.keys());\n  }\n\n  /**\n   * Removes an item from the map.\n   * @param {String} key The key of the host\n   * @fires HostMap#remove\n   */\n  remove(key) {\n    const value = this._items.get(key);\n    if (value === undefined) {\n      return;\n    }\n\n    // Clear cache\n    this._values = null;\n\n    // Copy the values\n    const copy = new Map(this._items);\n    copy.delete(key);\n\n    this._items = copy;\n    this.emit('remove', value);\n  }\n\n  /**\n   * Removes multiple hosts from the map.\n   * @param {Array.<String>} keys\n   * @fires HostMap#remove\n   */\n  removeMultiple(keys) {\n    // Clear value cache\n    this._values = null;\n\n    // Copy the values\n    const copy = new Map(this._items);\n    const removedHosts = [];\n\n    for (const key of keys) {\n      const h = copy.get(key);\n\n      if (!h) {\n        continue;\n      }\n\n      removedHosts.push(h);\n      copy.delete(key);\n    }\n\n    this._items = copy;\n    removedHosts.forEach(h => this.emit('remove', h));\n  }\n\n  /**\n   * Adds a new item to the map.\n   * @param {String} key The key of the host\n   * @param {Host} value The host to be added\n   * @fires HostMap#remove\n   * @fires HostMap#add\n   */\n  set(key, value) {\n    // Clear values cache\n    this._values = null;\n\n    const originalValue = this._items.get(key);\n    if (originalValue) {\n      //The internal structure does not change\n      this._items.set(key, value);\n      //emit a remove followed by a add\n      this.emit('remove', originalValue);\n      this.emit('add', value);\n      return;\n    }\n\n    // Copy the values\n    const copy = new Map(this._items);\n    copy.set(key, value);\n    this._items = copy;\n    this.emit('add', value);\n    return value;\n  }\n\n  /**\n   * Returns a shallow copy of a portion of the items into a new array object.\n   * Backward-compatibility.\n   * @param {Number} [begin]\n   * @param {Number} [end]\n   * @returns {Array}\n   * @ignore\n   */\n  slice(begin, end) {\n    if (!begin && !end) {\n      // Avoid making a copy of the copy\n      return this.values();\n    }\n\n    return this.values().slice(begin || 0, end);\n  }\n\n  /**\n   * Deprecated: Use set() instead.\n   * @ignore\n   * @deprecated\n   */\n  push(k, v) {\n    this.set(k, v);\n  }\n\n  /**\n   * Returns a shallow copy of the values of the map.\n   * @returns {Array.<Host>}\n   */\n  values() {\n    if (!this._values) {\n      // Cache the values\n      this._values = Object.freeze(Array.from(this._items.values()));\n    }\n\n    return this._values;\n  }\n\n  /**\n   * Removes all items from the map.\n   * @returns {Array.<Host>} The previous items\n   */\n  clear() {\n    const previousItems = this.values();\n\n    // Clear cache\n    this._values = null;\n\n    // Clear items\n    this._items = new Map();\n\n    // Emit events\n    previousItems.forEach(h => this.emit('remove', h));\n\n    return previousItems;\n  }\n\n  inspect() {\n    return this._items;\n  }\n\n  toJSON() {\n    // Node.js 10 and below don't support Object.fromEntries()\n    if (Object.fromEntries) {\n      return Object.fromEntries(this._items);\n    }\n\n    const obj = {};\n    for (const [ key, value ] of this._items) {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n}\n\nmodule.exports = {\n  Host,\n  HostMap\n};", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst types = require('./types');\nconst token = require('./token');\nconst utils = require('./utils');\nconst MutableLong = require('./types/mutable-long');\nconst { Integer } = types;\n\n// Murmur3 constants\n//-0x783C846EEEBDAC2B\nconst mconst1 = new MutableLong(0x53d5, 0x1142, 0x7b91, 0x87c3);\n//0x4cf5ad432745937f\nconst mconst2 = new MutableLong(0x937f, 0x2745, 0xad43, 0x4cf5);\nconst mlongFive = MutableLong.fromNumber(5);\n//0xff51afd7ed558ccd\nconst mconst3 = new MutableLong(0x8ccd, 0xed55, 0xafd7, 0xff51);\n//0xc4ceb9fe1a85ec53\nconst mconst4 = new MutableLong(0xec53, 0x1a85, 0xb9fe, 0xc4ce);\nconst mconst5 = MutableLong.fromNumber(0x52dce729);\nconst mconst6 = MutableLong.fromNumber(0x38495ab5);\n\n/**\n * Represents a set of methods that are able to generate and parse tokens for the C* partitioner.\n * @abstract\n */\nclass Tokenizer {\n  constructor() {\n\n  }\n\n  /**\n   * Creates a token based on the Buffer value provided\n   * @abstract\n   * @param {Buffer|Array} value\n   * @returns {Token} Computed token\n   */\n  hash(value) {\n    throw new Error('You must implement a hash function for the tokenizer');\n  }\n\n  /**\n   * Parses a token string and returns a representation of the token\n   * @abstract\n   * @param {String} value\n   */\n  parse(value) {\n    throw new Error('You must implement a parse function for the tokenizer');\n  }\n\n  minToken() {\n    throw new Error('You must implement a minToken function for the tokenizer');\n  }\n\n  /**\n   * Splits the range specified by start and end into numberOfSplits equal parts.\n   * @param {Token} start Starting token\n   * @param {Token} end  End token\n   * @param {Number} numberOfSplits Number of splits to make.\n   */\n  split(start, end, numberOfSplits) {\n    throw new Error('You must implement a split function for the tokenizer');\n  }\n\n  /**\n   * Common implementation for splitting token ranges when start is in\n   * a shared Integer format.\n   *\n   * @param {Integer} start Starting token\n   * @param {Integer} range How large the range of the split is\n   * @param {Integer} ringEnd The end point of the ring so we know where to wrap\n   * @param {Integer} ringLength The total size of the ring\n   * @param {Number} numberOfSplits The number of splits to make\n   * @returns {Array<Integer>} The evenly-split points on the range\n   */\n  splitBase(start, range, ringEnd, ringLength, numberOfSplits) {\n    const numberOfSplitsInt = Integer.fromInt(numberOfSplits);\n    const divider = range.divide(numberOfSplitsInt);\n    let remainder = range.modulo(numberOfSplitsInt);\n\n    const results = [];\n    let current = start;\n    const dividerPlusOne = divider.add(Integer.ONE);\n\n    for(let i = 1; i < numberOfSplits; i++) {\n      if (remainder.greaterThan(Integer.ZERO)) {\n        current = current.add(dividerPlusOne);\n      } else {\n        current = current.add(divider);\n      }\n      if (ringLength && current.greaterThan(ringEnd)) {\n        current = current.subtract(ringLength);\n      }\n      results.push(current);\n      remainder = remainder.subtract(Integer.ONE);\n    }\n    return results;\n  }\n\n  /**\n   * Return internal string based representation of a Token.\n   * @param {Token} token \n   */\n  stringify(token) {\n    return token.getValue().toString();\n  }\n}\n\n/**\n * Uniformly distributes data across the cluster based on Cassandra flavored Murmur3 hashed values.\n */\nclass Murmur3Tokenizer extends Tokenizer {\n\n  constructor() {\n    super();\n  }\n\n  /**\n   * @param {Buffer} value\n   * @return {Murmur3Token}\n   */\n  hash(value) {\n    // This is an adapted version of the MurmurHash.hash3_x64_128 from Cassandra used\n    // for M3P. Compared to that methods, there's a few inlining of arguments and we\n    // only return the first 64-bits of the result since that's all M3 partitioner uses.\n\n    const data = value;\n    let offset = 0;\n    const length = data.length;\n\n    const nblocks = length >> 4; // Process as 128-bit blocks.\n\n    const h1 = new MutableLong();\n    const h2 = new MutableLong();\n    let k1 = new MutableLong();\n    let k2 = new MutableLong();\n\n    for (let i = 0; i < nblocks; i++) {\n      k1 = this.getBlock(data, offset, i * 2);\n      k2 = this.getBlock(data, offset, i * 2 + 1);\n\n      k1.multiply(mconst1);\n      this.rotl64(k1, 31);\n      k1.multiply(mconst2);\n\n      h1.xor(k1);\n      this.rotl64(h1, 27);\n      h1.add(h2);\n      h1.multiply(mlongFive).add(mconst5);\n\n      k2.multiply(mconst2);\n      this.rotl64(k2, 33);\n      k2.multiply(mconst1);\n      h2.xor(k2);\n      this.rotl64(h2, 31);\n      h2.add(h1);\n      h2.multiply(mlongFive).add(mconst6);\n    }\n    //----------\n    // tail\n\n    // Advance offset to the unprocessed tail of the data.\n    offset += nblocks * 16;\n\n    k1 = new MutableLong();\n    k2 = new MutableLong();\n\n    /* eslint-disable no-fallthrough */\n    switch(length & 15) {\n      case 15:\n        k2.xor(fromSignedByte(data[offset+14]).shiftLeft(48));\n      case 14:\n        k2.xor(fromSignedByte(data[offset+13]).shiftLeft(40));\n      case 13:\n        k2.xor(fromSignedByte(data[offset+12]).shiftLeft(32));\n      case 12:\n        k2.xor(fromSignedByte(data[offset+11]).shiftLeft(24));\n      case 11:\n        k2.xor(fromSignedByte(data[offset+10]).shiftLeft(16));\n      case 10:\n        k2.xor(fromSignedByte(data[offset+9]).shiftLeft(8));\n      case 9:\n        k2.xor(fromSignedByte(data[offset+8]));\n        k2.multiply(mconst2);\n        this.rotl64(k2, 33);\n        k2.multiply(mconst1);\n        h2.xor(k2);\n      case 8:\n        k1.xor(fromSignedByte(data[offset+7]).shiftLeft(56));\n      case 7:\n        k1.xor(fromSignedByte(data[offset+6]).shiftLeft(48));\n      case 6:\n        k1.xor(fromSignedByte(data[offset+5]).shiftLeft(40));\n      case 5:\n        k1.xor(fromSignedByte(data[offset+4]).shiftLeft(32));\n      case 4:\n        k1.xor(fromSignedByte(data[offset+3]).shiftLeft(24));\n      case 3:\n        k1.xor(fromSignedByte(data[offset+2]).shiftLeft(16));\n      case 2:\n        k1.xor(fromSignedByte(data[offset+1]).shiftLeft(8));\n      case 1:\n        k1.xor(fromSignedByte(data[offset]));\n        k1.multiply(mconst1);\n        this.rotl64(k1,31);\n        k1.multiply(mconst2);\n        h1.xor(k1);\n    }\n    /* eslint-enable no-fallthrough */\n\n    h1.xor(MutableLong.fromNumber(length));\n    h2.xor(MutableLong.fromNumber(length));\n\n    h1.add(h2);\n    h2.add(h1);\n\n\n    this.fmix(h1);\n    this.fmix(h2);\n\n    h1.add(h2);\n\n    return new token.Murmur3Token(h1);\n  }\n\n  /**\n   *\n   * @param {Array<Number>} key\n   * @param {Number} offset\n   * @param {Number} index\n   * @return {MutableLong}\n   */\n  getBlock(key, offset, index) {\n    const i8 = index << 3;\n    const blockOffset = offset + i8;\n    return new MutableLong(\n      (key[blockOffset]) | (key[blockOffset + 1] << 8),\n      (key[blockOffset + 2]) | (key[blockOffset + 3] << 8),\n      (key[blockOffset + 4]) | (key[blockOffset + 5] << 8),\n      (key[blockOffset + 6]) | (key[blockOffset + 7] << 8)\n    );\n  }\n\n  /**\n   * @param {MutableLong} v\n   * @param {Number} n\n   */\n  rotl64(v, n) {\n    const left = v.clone().shiftLeft(n);\n    v.shiftRightUnsigned(64 - n).or(left);\n  }\n\n  /** @param {MutableLong} k */\n  fmix(k) {\n    k.xor(new MutableLong(k.getUint16(2) >>> 1 | ((k.getUint16(3) << 15) & 0xffff), k.getUint16(3) >>> 1, 0, 0));\n    k.multiply(mconst3);\n    const other = new MutableLong(\n      (k.getUint16(2) >>> 1) | ((k.getUint16(3) << 15) & 0xffff),\n      k.getUint16(3) >>> 1,\n      0,\n      0\n    );\n    k.xor(other);\n    k.multiply(mconst4);\n    k.xor(new MutableLong(k.getUint16(2) >>> 1 | (k.getUint16(3) << 15 & 0xffff), k.getUint16(3) >>> 1, 0, 0));\n  }\n\n  /**\n   * Parses a int64 decimal string representation into a MutableLong.\n   * @param {String} value\n   * @returns {Murmur3Token}\n   */\n  parse(value) {\n    return new token.Murmur3Token(MutableLong.fromString(value));\n  }\n\n  minToken() {\n    if (!this._minToken) {\n      // minimum long value.\n      this._minToken = this.parse('-9223372036854775808');\n    }\n    return this._minToken;\n  }\n\n  maxToken() {\n    if (!this._maxToken) {\n      this._maxToken = this.parse('9223372036854775807');\n    }\n    return this._maxToken;\n  }\n\n  maxValue() {\n    if (!this._maxValue) {\n      this._maxValue = Integer.fromString('9223372036854775807');\n    }\n    return this._maxValue;\n  }\n\n  minValue() {\n    if (!this._minValue) {\n      this._minValue = Integer.fromString('-9223372036854775808');\n    }\n    return this._minValue;\n  }\n\n  ringLength() {\n    if (!this._ringLength) {\n      this._ringLength = this.maxValue().subtract(this.minValue());\n    }\n    return this._ringLength;\n  }\n\n  split(start, end, numberOfSplits) {\n    // ]min, min] means the whole ring.\n    if (start.equals(end) && start.equals(this.minToken())) {\n      end = this.maxToken();\n    }\n\n    const startVal = Integer.fromString(start.getValue().toString());\n    const endVal = Integer.fromString(end.getValue().toString());\n\n    let range = endVal.subtract(startVal);\n    if (range.isNegative()) {\n      range = range.add(this.ringLength());\n    }\n\n    const values = this.splitBase(startVal, range, this.maxValue(), this.ringLength(), numberOfSplits);\n    return values.map(v => this.parse(v.toString()));\n  }\n\n  stringify(token) {\n    // Get the underlying MutableLong\n    const value = token.getValue();\n    // We need a way to uniquely represent a token, it doesn't have to be the decimal string representation\n    // Using the uint16 avoids divisions and other expensive operations on the longs\n    return value.getUint16(0) + ',' + value.getUint16(1) + ',' + value.getUint16(2) + ',' + value.getUint16(3);\n  }\n}\n\n/**\n * Uniformly distributes data across the cluster based on MD5 hash values.\n */\nclass RandomTokenizer extends Tokenizer {\n  constructor() {\n    super();\n    // eslint-disable-next-line\n    this._crypto = require('crypto');\n  }\n\n  /**\n   * @param {Buffer|Array} value\n   * @returns {RandomToken}\n   */\n  hash(value) {\n    if (Array.isArray(value)) {\n      value = utils.allocBufferFromArray(value);\n    }\n    const hashedValue = this._crypto.createHash('md5').update(value).digest();\n    return new token.RandomToken(Integer.fromBuffer(hashedValue).abs());\n  }\n\n  /**\n   * @returns {Token}\n   */\n  parse(value) {\n    return new token.RandomToken(Integer.fromString(value));\n  }\n\n  minToken() {\n    if (!this._minToken) {\n      this._minToken = this.parse('-1');\n    }\n    return this._minToken;\n  }\n\n  maxValue() {\n    if (!this._maxValue) {\n      this._maxValue = Integer.fromNumber(Math.pow(2, 127));\n    }\n    return this._maxValue;\n  }\n\n  maxToken() {\n    if (!this._maxToken) {\n      this._maxToken = new token.RandomToken(this.maxValue());\n    }\n    return this._maxToken;\n  }\n\n  ringLength() {\n    if (!this._ringLength) {\n      this._ringLength = this.maxValue().add(Integer.ONE);\n    }\n    return this._ringLength;\n  }\n\n  split(start, end, numberOfSplits) {\n    // ]min, min] means the whole ring.\n    if (start.equals(end) && start.equals(this.minToken())) {\n      end = this.maxToken();\n    }\n\n    const startVal = start.getValue();\n    const endVal = end.getValue();\n\n    let range = endVal.subtract(startVal);\n    if (range.lessThan(Integer.ZERO)) {\n      range = range.add(this.ringLength());\n    }\n\n    const values = this.splitBase(startVal, range, this.maxValue(), this.ringLength(), numberOfSplits);\n    return values.map(v => new token.RandomToken(v));\n  }\n}\n\nclass ByteOrderedTokenizer extends Tokenizer {\n  constructor() {\n    super();\n  }\n\n  /**\n   * @param {Buffer} value\n   * @returns {ByteOrderedToken}\n   */\n  hash(value) {\n    // strip any trailing zeros as tokens with trailing zeros are equivalent\n    // to those who don't have them.\n    if (Array.isArray(value)) {\n      value = utils.allocBufferFromArray(value);\n    }\n    let zeroIndex = value.length;\n    for(let i = value.length - 1; i > 0; i--) {\n      if(value[i] === 0) {\n        zeroIndex = i;\n      } else {\n        break;\n      }\n    }\n    return new token.ByteOrderedToken(value.slice(0, zeroIndex));\n  }\n\n  stringify(token) {\n    return token.getValue().toString('hex');\n  }\n\n  parse(value) {\n    return this.hash(utils.allocBufferFromString(value, 'hex'));\n  }\n\n  minToken() {\n    if (!this._minToken) {\n      this._minToken = this.hash([]);\n    }\n    return this._minToken;\n  }\n\n  _toNumber(buffer, significantBytes) {\n    // Convert a token's byte array to a number in order to perform computations.\n    // This depends on the number of significant bytes that is used to normalize all tokens\n    // to the same size.  For example if the token is 0x01 but significant bytes is 2, the\n    // result is 0x0100.\n    let target = buffer;\n    if(buffer.length !== significantBytes) {\n      target = Buffer.alloc(significantBytes);\n      buffer.copy(target);\n    }\n\n    // similar to Integer.fromBuffer except we force the sign to 0.\n    const bits = new Array(Math.ceil(target.length / 4));\n    for (let i = 0; i < bits.length; i++) {\n      let offset = target.length - ((i + 1) * 4);\n      let value;\n      if (offset < 0) {\n        //The buffer length is not multiple of 4\n        offset = offset + 4;\n        value = 0;\n        for (let j = 0; j < offset; j++) {\n          const byte = target[j];\n          value = value | (byte << (offset - j - 1) * 8);\n        }\n      }\n      else {\n        value = target.readInt32BE(offset);\n      }\n      bits[i] = value;\n    }\n    return new Integer(bits, 0);\n  }\n\n  _toBuffer(number, significantBytes) {\n    // Convert numeric representation back to a buffer.\n    const buffer = Integer.toBuffer(number);\n    if (buffer.length === significantBytes) {\n      return buffer;\n    }\n\n    // if first byte is a sign byte, skip it.\n    let start, length;\n    if (buffer[0] === 0) {\n      start = 1;\n      length = buffer.length - 1;\n    } else {\n      start = 0;\n      length = buffer.length;\n    }\n\n    const target = Buffer.alloc(significantBytes);\n    buffer.copy(target, significantBytes - length, start, length + start);\n    return target;\n  }\n\n  split(start, end, numberOfSplits) {\n    const tokenOrder = start.compare(end);\n\n    if (tokenOrder === 0 && start.equals(this.minToken())) {\n      throw new Error(\"Cannot split whole ring with ordered partitioner\");\n    }\n\n    let startVal, endVal, range, ringLength, ringEnd;\n    const intNumberOfSplits = Integer.fromNumber(numberOfSplits);\n    // Since tokens are compared lexicographically, convert to numbers using the\n    // largest length (i.e. given 0x0A and 0x0BCD, switch to 0x0A00 and 0x0BCD)\n    let significantBytes = Math.max(start.getValue().length, end.getValue().length);\n    if (tokenOrder < 0) {\n      let addedBytes = 0;\n      while (true) {\n        startVal = this._toNumber(start.getValue(), significantBytes);\n        endVal = this._toNumber(end.getValue(), significantBytes);\n        range = endVal.subtract(startVal);\n        if (addedBytes === 4 || range.compare(intNumberOfSplits) >= 0) {\n          break;\n        }\n        significantBytes += 1;\n        addedBytes += 1;\n      }\n    } else {\n      let addedBytes = 0;\n      while (true) {\n        startVal = this._toNumber(start.getValue(), significantBytes);\n        endVal = this._toNumber(end.getValue(), significantBytes);\n        ringLength = Integer.fromNumber(Math.pow(2, significantBytes * 8));\n        ringEnd = ringLength.subtract(Integer.ONE);\n        range = endVal.subtract(startVal).add(ringLength);\n        if (addedBytes === 4 || range.compare(intNumberOfSplits) >= 0) {\n          break;\n        }\n        significantBytes += 1;\n        addedBytes += 1;\n      }\n    }\n\n    const values = this.splitBase(startVal, range, ringEnd, ringLength, numberOfSplits);\n    return values.map(v => new token.ByteOrderedToken(this._toBuffer(v, significantBytes)));\n  }\n}\n\n/**\n * @param {Number} value\n * @return {MutableLong}\n */\nfunction fromSignedByte(value) {\n  if (value < 128) {\n    return new MutableLong(value, 0, 0, 0);\n  }\n  return new MutableLong((value - 256) & 0xffff, 0xffff, 0xffff, 0xffff);\n}\n\nexports.Murmur3Tokenizer = Murmur3Tokenizer;\nexports.RandomTokenizer = RandomTokenizer;\nexports.ByteOrderedTokenizer = ByteOrderedTokenizer;\n", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst util = require('util');\nconst events = require('events');\n/**\n * Creates a new instance of DataCollection\n * @param {String} name Name of the data object.\n * @classdesc Describes a table or a view\n * @alias module:metadata~DataCollection\n * @constructor\n * @abstract\n */\nfunction DataCollection(name) {\n  events.EventEmitter.call(this);\n  this.setMaxListeners(0);\n  //private\n  Object.defineProperty(this, 'loading', { value: false, enumerable: false, writable: true });\n  Object.defineProperty(this, 'loaded', { value: false, enumerable: false, writable: true });\n  /**\n   * Name of the object\n   * @type {String}\n   */\n  this.name = name;\n  /**\n   * False-positive probability for SSTable Bloom filters.\n   * @type {number}\n   */\n  this.bloomFilterFalsePositiveChance = 0;\n  /**\n   * Level of caching: all, keys_only, rows_only, none\n   * @type {String}\n   */\n  this.caching = null;\n  /**\n   * A human readable comment describing the table.\n   * @type {String}\n   */\n  this.comment = null;\n  /**\n   * Specifies the time to wait before garbage collecting tombstones (deletion markers)\n   * @type {number}\n   */\n  this.gcGraceSeconds = 0;\n  /**\n   * Compaction strategy class used for the table.\n   * @type {String}\n   */\n  this.compactionClass = null;\n  /**\n   * Associative-array containing the compaction options keys and values.\n   * @type {Object}\n   */\n  this.compactionOptions = null;\n  /**\n   * Associative-array containing the compression options.\n   * @type {Object}\n   */\n  this.compression = null;\n  /**\n   * Specifies the probability of read repairs being invoked over all replicas in the current data center.\n   * @type {number}\n   */\n  this.localReadRepairChance = 0;\n  /**\n   * Specifies the probability with which read repairs should be invoked on non-quorum reads. The value must be\n   * between 0 and 1.\n   * @type {number}\n   */\n  this.readRepairChance = 0;\n  /**\n   * An associative Array containing extra metadata for the table.\n   * <p>\n   * For Apache Cassandra versions prior to 3.0.0, this method always returns <code>null</code>.\n   * </p>\n   * @type {Object}\n   */\n  this.extensions = null;\n  /**\n   * When compression is enabled, this option defines the probability\n   * with which checksums for compressed blocks are checked during reads.\n   * The default value for this options is 1.0 (always check).\n   * <p>\n   *   For Apache Cassandra versions prior to 3.0.0, this method always returns <code>null</code>.\n   * </p>\n   * @type {Number|null}\n   */\n  this.crcCheckChance = null;\n  /**\n   * Whether the populate I/O cache on flush is set on this table.\n   * @type {Boolean}\n   */\n  this.populateCacheOnFlush = false;\n  /**\n   * Returns the default TTL for this table.\n   * @type {Number}\n   */\n  this.defaultTtl = 0;\n  /**\n   * * Returns the speculative retry option for this table.\n   * @type {String}\n   */\n  this.speculativeRetry = 'NONE';\n  /**\n   * Returns the minimum index interval option for this table.\n   * <p>\n   *   Note: this option is available in Apache Cassandra 2.1 and above, and will return <code>null</code> for\n   *   earlier versions.\n   * </p>\n   * @type {Number|null}\n   */\n  this.minIndexInterval = 128;\n  /**\n   * Returns the maximum index interval option for this table.\n   * <p>\n   * Note: this option is available in Apache Cassandra 2.1 and above, and will return <code>null</code> for\n   * earlier versions.\n   * </p>\n   * @type {Number|null}\n   */\n  this.maxIndexInterval = 2048;\n  /**\n   * Array describing the table columns.\n   * @type {Array}\n   */\n  this.columns = null;\n  /**\n   * An associative Array of columns by name.\n   * @type {Object}\n   */\n  this.columnsByName = null;\n  /**\n   * Array describing the columns that are part of the partition key.\n   * @type {Array}\n   */\n  this.partitionKeys = [];\n  /**\n   * Array describing the columns that form the clustering key.\n   * @type {Array}\n   */\n  this.clusteringKeys = [];\n  /**\n   * Array describing the clustering order of the columns in the same order as the clusteringKeys.\n   * @type {Array}\n   */\n  this.clusteringOrder = [];\n  /**\n   * An associative Array containing nodesync options for this table.\n   * <p>\n   * For DSE versions prior to 6.0.0, this method always returns {@code null}.  If nodesync\n   * was not explicitly configured for this table this method will also return {@code null}.\n   * </p>\n   * @type {Object}\n   */\n  this.nodesync = null;\n}\n\nutil.inherits(DataCollection, events.EventEmitter);\n\nmodule.exports = DataCollection;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst util = require('util');\nconst DataCollection = require('./data-collection');\n/**\n * Creates a new instance of TableMetadata\n * @classdesc Describes a table\n * @param {String} name Name of the Table\n * @augments {module:metadata~DataCollection}\n * @alias module:metadata~TableMetadata\n * @constructor\n */\nfunction TableMetadata(name) {\n  DataCollection.call(this, name);\n  /**\n   * Applies only to counter tables.\n   * When set to true, replicates writes to all affected replicas regardless of the consistency level specified by\n   * the client for a write request. For counter tables, this should always be set to true.\n   * @type {Boolean}\n   */\n  this.replicateOnWrite = true;\n  /**\n   * Returns the memtable flush period (in milliseconds) option for this table.\n   * @type {Number}\n   */\n  this.memtableFlushPeriod = 0;\n  /**\n   * Returns the index interval option for this table.\n   * <p>\n   * Note: this option is only available in Apache Cassandra 2.0. It is deprecated in Apache Cassandra 2.1 and\n   * above, and will therefore return <code>null</code> for 2.1 nodes.\n   * </p>\n   * @type {Number|null}\n   */\n  this.indexInterval = null;\n  /**\n   * Determines  whether the table uses the COMPACT STORAGE option.\n   * @type {Boolean}\n   */\n  this.isCompact = false;\n  /**\n   *\n   * @type {Array.<Index>}\n   */\n  this.indexes = null;\n\n  /**\n   * Determines whether the Change Data Capture (CDC) flag is set for the table.\n   * @type {Boolean|null}\n   */\n  this.cdc = null;\n\n  /**\n   * Determines whether the table is a virtual table or not.\n   * @type {Boolean}\n   */\n  this.virtual = false;\n}\n\nutil.inherits(TableMetadata, DataCollection);\n\nmodule.exports = TableMetadata;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n/**\n * Creates a new Aggregate.\n * @classdesc Describes a CQL aggregate.\n * @alias module:metadata~Aggregate\n * @constructor\n */\nfunction Aggregate() {\n  /**\n   * Name of the aggregate.\n   * @type {String}\n   */\n  this.name = null;\n  /**\n   * Name of the keyspace where the aggregate is declared.\n   */\n  this.keyspaceName = null;\n  /**\n   * Signature of the aggregate.\n   * @type {Array.<String>}\n   */\n  this.signature = null;\n  /**\n   * List of the CQL aggregate argument types.\n   * @type {Array.<{code, info}>}\n   */\n  this.argumentTypes = null;\n  /**\n   * State Function.\n   * @type {String}\n   */\n  this.stateFunction = null;\n  /**\n   * State Type.\n   * @type {{code, info}}\n   */\n  this.stateType = null;\n  /**\n   * Final Function.\n   * @type {String}\n   */\n  this.finalFunction = null;\n  this.initConditionRaw = null;\n  /**\n   * Initial state value of this aggregate.\n   * @type {String}\n   */\n  this.initCondition = null;\n  /**\n   * Type of the return value.\n   * @type {{code: number, info: (Object|Array|null)}}\n   */\n  this.returnType = null;\n  /**\n   * Indicates whether or not this aggregate is deterministic.  This means that\n   * given a particular input, the aggregate will always produce the same output.\n   * @type {Boolean}\n   */\n  this.deterministic = null;\n}\n\nmodule.exports = Aggregate;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n/**\n * Creates a new SchemaFunction.\n * @classdesc Describes a CQL function.\n * @alias module:metadata~SchemaFunction\n * @constructor\n */\nfunction SchemaFunction() {\n  /**\n   * Name of the cql function.\n   * @type {String}\n   */\n  this.name = null;\n  /**\n   * Name of the keyspace where the cql function is declared.\n   */\n  this.keyspaceName = null;\n  /**\n   * Signature of the function.\n   * @type {Array.<String>}\n   */\n  this.signature = null;\n  /**\n   * List of the function argument names.\n   * @type {Array.<String>}\n   */\n  this.argumentNames = null;\n  /**\n   * List of the function argument types.\n   * @type {Array.<{code, info}>}\n   */\n  this.argumentTypes = null;\n  /**\n   * Body of the function.\n   * @type {String}\n   */\n  this.body = null;\n  /**\n   * Determines if the function is called when the input is null.\n   * @type {Boolean}\n   */\n  this.calledOnNullInput = null;\n  /**\n   * Name of the programming language, for example: java, javascript, ...\n   * @type {String}\n   */\n  this.language = null;\n  /**\n   * Type of the return value.\n   * @type {{code: number, info: (Object|Array|null)}}\n   */\n  this.returnType = null;\n  /**\n   * Indicates whether or not this function is deterministic.  This means that\n   * given a particular input, the function will always produce the same output.\n   * @type {Boolean}\n   */\n  this.deterministic = null;\n  /**\n   * Indicates whether or not this function is monotonic on all of its\n   * arguments.  This means that it is either entirely non-increasing or\n   * non-decreasing.  Even if the function is not monotonic on all of its\n   * arguments, it's possible to specify that it is monotonic on one of\n   * its arguments, meaning that partial applications of the function over\n   * that argument will be monotonic.\n   * \n   * Monotonicity is required to use the function in a GROUP BY clause.\n   * @type {Boolean}\n   */\n  this.monotonic = null;\n  /**\n   * The argument names that the function is monotonic on.\n   * \n   * If {@link monotonic} is true, this will return all argument names.\n   * Otherwise, this will return either one argument or an empty array.\n   * @type {Array.<String>}\n   */\n  this.monotonicOn = null;\n}\n\nmodule.exports = SchemaFunction;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst util = require('util');\nconst utils = require('../utils');\nconst types = require('../types');\n\n/** @private */\nconst kind = {\n  custom: 0,\n  keys: 1,\n  composites: 2\n};\n/**\n * Creates a new Index instance.\n * @classdesc Describes a CQL index.\n * @param {String} name\n * @param {String} target\n * @param {Number|String} kind\n * @param {Object} options\n * @alias module:metadata~Index\n * @constructor\n */\nfunction Index(name, target, kind, options) {\n  /**\n   * Name of the index.\n   * @type {String}\n   */\n  this.name = name;\n  /**\n   * Target of the index.\n   * @type {String}\n   */\n  this.target = target;\n  /**\n   * A numeric value representing index kind (0: custom, 1: keys, 2: composite);\n   * @type {Number}\n   */\n  this.kind = typeof kind === 'string' ? getKindByName(kind) : kind;\n  /**\n   * An associative array containing the index options\n   * @type {Object}\n   */\n  this.options = options;\n}\n\n/**\n * Determines if the index is of composites kind\n * @returns {Boolean}\n */\nIndex.prototype.isCompositesKind = function () {\n  return this.kind === kind.composites;\n};\n\n/**\n * Determines if the index is of keys kind\n * @returns {Boolean}\n */\nIndex.prototype.isKeysKind = function () {\n  return this.kind === kind.keys;\n};\n\n/**\n * Determines if the index is of custom kind\n * @returns {Boolean}\n */\nIndex.prototype.isCustomKind = function () {\n  return this.kind === kind.custom;\n};\n\n/**\n * Parses Index information from rows in the 'system_schema.indexes' table\n * @deprecated It will be removed in the next major version.\n * @param {Array.<Row>} indexRows\n * @returns {Array.<Index>}\n */\nIndex.fromRows = function (indexRows) {\n  if (!indexRows || indexRows.length === 0) {\n    return utils.emptyArray;\n  }\n  return indexRows.map(function (row) {\n    const options = row['options'];\n    return new Index(row['index_name'], options['target'], getKindByName(row['kind']), options);\n  });\n};\n\n/**\n * Parses Index information from rows in the legacy 'system.schema_columns' table.\n * @deprecated It will be removed in the next major version.\n * @param {Array.<Row>} columnRows\n * @param {Object.<String, {name, type}>} columnsByName\n * @returns {Array.<Index>}\n */\nIndex.fromColumnRows = function (columnRows, columnsByName) {\n  const result = [];\n  for (let i = 0; i < columnRows.length; i++) {\n    const row = columnRows[i];\n    const indexName = row['index_name'];\n    if (!indexName) {\n      continue;\n    }\n    const c = columnsByName[row['column_name']];\n    let target;\n    const options = JSON.parse(row['index_options']);\n    if (options !== null && options['index_keys'] !== undefined) {\n      target = util.format(\"keys(%s)\", c.name);\n    }\n    else if (options !== null && options['index_keys_and_values'] !== undefined) {\n      target = util.format(\"entries(%s)\", c.name);\n    }\n    else if (c.type.options.frozen && (c.type.code === types.dataTypes.map || c.type.code === types.dataTypes.list ||\n      c.type.code === types.dataTypes.set)) {\n      target = util.format(\"full(%s)\", c.name);\n    }\n    else {\n      target = c.name;\n    }\n    result.push(new Index(indexName, target, getKindByName(row['index_type']), options));\n  }\n  return result;\n};\n\n/**\n * Gets the number representing the kind based on the name\n * @param {String} name\n * @returns {Number}\n * @private\n */\nfunction getKindByName(name) {\n  if (!name) {\n    return kind.custom;\n  }\n  return kind[name.toLowerCase()];\n}\n\nmodule.exports = Index;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst util = require('util');\nconst DataCollection = require('./data-collection');\n/**\n * Creates a new MaterializedView.\n * @param {String} name Name of the View.\n * @classdesc Describes a CQL materialized view.\n * @alias module:metadata~MaterializedView\n * @augments {module:metadata~DataCollection}\n * @constructor\n */\nfunction MaterializedView(name) {\n  DataCollection.call(this, name);\n  /**\n   * Name of the table.\n   * @type {String}\n   */\n  this.tableName = null;\n  /**\n   * View where clause.\n   * @type {String}\n   */\n  this.whereClause = null;\n  /**\n   * Determines if all the table columns where are included in the view.\n   * @type {boolean}\n   */\n  this.includeAllColumns = false;\n}\n\nutil.inherits(MaterializedView, DataCollection);\n\nmodule.exports = MaterializedView;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\nconst util = require('util');\nconst events = require('events');\nconst types = require('../types');\nconst utils = require('../utils');\nconst errors = require('../errors');\nconst promiseUtils = require('../promise-utils');\nconst TableMetadata = require('./table-metadata');\nconst Aggregate = require('./aggregate');\nconst SchemaFunction = require('./schema-function');\nconst Index = require('./schema-index');\nconst MaterializedView = require('./materialized-view');\nconst { format } = util;\n\n/**\n * @module metadata/schemaParser\n * @ignore\n */\n\nconst _selectAllKeyspacesV1 = \"SELECT * FROM system.schema_keyspaces\";\nconst _selectSingleKeyspaceV1 = \"SELECT * FROM system.schema_keyspaces where keyspace_name = '%s'\";\nconst _selectAllKeyspacesV2 = \"SELECT * FROM system_schema.keyspaces\";\nconst _selectSingleKeyspaceV2 = \"SELECT * FROM system_schema.keyspaces where keyspace_name = '%s'\";\nconst _selectTableV1 = \"SELECT * FROM system.schema_columnfamilies WHERE keyspace_name='%s' AND columnfamily_name='%s'\";\nconst _selectTableV2 = \"SELECT * FROM system_schema.tables WHERE keyspace_name='%s' AND table_name='%s'\";\nconst _selectColumnsV1 = \"SELECT * FROM system.schema_columns WHERE keyspace_name='%s' AND columnfamily_name='%s'\";\nconst _selectColumnsV2 = \"SELECT * FROM system_schema.columns WHERE keyspace_name='%s' AND table_name='%s'\";\nconst _selectIndexesV2 = \"SELECT * FROM system_schema.indexes WHERE keyspace_name='%s' AND table_name='%s'\";\nconst _selectUdtV1 = \"SELECT * FROM system.schema_usertypes WHERE keyspace_name='%s' AND type_name='%s'\";\nconst _selectUdtV2 = \"SELECT * FROM system_schema.types WHERE keyspace_name='%s' AND type_name='%s'\";\nconst _selectFunctionsV1 = \"SELECT * FROM system.schema_functions WHERE keyspace_name = '%s' AND function_name = '%s'\";\nconst _selectFunctionsV2 = \"SELECT * FROM system_schema.functions WHERE keyspace_name = '%s' AND function_name = '%s'\";\nconst _selectAggregatesV1 = \"SELECT * FROM system.schema_aggregates WHERE keyspace_name = '%s' AND aggregate_name = '%s'\";\nconst _selectAggregatesV2 = \"SELECT * FROM system_schema.aggregates WHERE keyspace_name = '%s' AND aggregate_name = '%s'\";\nconst _selectMaterializedViewV2 = \"SELECT * FROM system_schema.views WHERE keyspace_name = '%s' AND view_name = '%s'\";\n\nconst _selectAllVirtualKeyspaces = \"SELECT * FROM system_virtual_schema.keyspaces\";\nconst _selectSingleVirtualKeyspace = \"SELECT * FROM system_virtual_schema.keyspaces where keyspace_name = '%s'\";\nconst _selectVirtualTable = \"SELECT * FROM system_virtual_schema.tables where keyspace_name = '%s' and table_name='%s'\";\nconst _selectVirtualColumns = \"SELECT * FROM system_virtual_schema.columns where keyspace_name = '%s' and table_name='%s'\";\n\n\n/**\n * @abstract\n * @param {ClientOptions} options The client options\n * @param {ControlConnection} cc\n * @constructor\n * @ignore\n */\nclass SchemaParser {\n  constructor(options, cc) {\n    this.cc = cc;\n    this.encodingOptions = options.encoding;\n    this.selectTable = null;\n    this.selectColumns = null;\n    this.selectIndexes = null;\n    this.selectUdt = null;\n    this.selectAggregates = null;\n    this.selectFunctions = null;\n    this.supportsVirtual = false;\n  }\n\n  /**\n   * @param name\n   * @param durableWrites\n   * @param strategy\n   * @param strategyOptions\n   * @param virtual\n   * @returns {{name, durableWrites, strategy, strategyOptions, tokenToReplica, udts, tables, functions, aggregates}}\n   * @protected\n   */\n  _createKeyspace(name, durableWrites, strategy, strategyOptions, virtual) {\n    return {\n      name,\n      durableWrites,\n      strategy,\n      strategyOptions,\n      virtual: virtual === true,\n      udts: {},\n      tables: {},\n      functions: {},\n      aggregates: {},\n      views: {},\n      tokenToReplica: getTokenToReplicaMapper(strategy, strategyOptions),\n      graphEngine: undefined\n    };\n  }\n\n  /**\n   * @abstract\n   * @param {String} name\n   * @returns {Promise<Object>}\n   */\n  getKeyspace(name) {\n  }\n\n  /**\n   * @abstract\n   * @param {Boolean} waitReconnect\n   * @returns {Promise<Object<string, Object>>}\n   */\n  getKeyspaces(waitReconnect) {\n  }\n\n  /**\n   * @param {String} keyspaceName\n   * @param {String} name\n   * @param {Object} cache\n   * @param {Boolean} virtual\n   * @returns {Promise<TableMetadata|null>}\n   */\n  async getTable(keyspaceName, name, cache, virtual) {\n    let tableInfo = cache && cache[name];\n    if (!tableInfo) {\n      tableInfo = new TableMetadata(name);\n      if (cache) {\n        cache[name] = tableInfo;\n      }\n    }\n    if (tableInfo.loaded) {\n      return tableInfo;\n    }\n    if (tableInfo.loading) {\n      // Wait for it to emit\n      return promiseUtils.fromEvent(tableInfo, 'load');\n    }\n    try {\n      // its not cached and not being retrieved\n      tableInfo.loading = true;\n      let indexRows;\n      let virtualTable = virtual;\n      const selectTable = virtualTable ? _selectVirtualTable : this.selectTable;\n      const query = util.format(selectTable, keyspaceName, name);\n      let tableRow = await this._getFirstRow(query);\n      // if we weren't sure if table was virtual or not, query virtual schema.\n      if (!tableRow && this.supportsVirtual && virtualTable === undefined) {\n        const query = util.format(_selectVirtualTable, keyspaceName, name);\n        try {\n          tableRow = await this._getFirstRow(query);\n        }\n        catch (err) {\n          // we can't error here as we can't be sure if the node\n          // supports virtual tables, in this case it is adequate\n          // to act as if there was no matching table.\n        }\n        if (tableRow) {\n          // We are fetching a virtual table\n          virtualTable = true;\n        }\n      }\n      if (!tableRow) {\n        tableInfo.loading = false;\n        tableInfo.emit('load', null, null);\n        return null;\n      }\n      const selectColumns = virtualTable ? _selectVirtualColumns : this.selectColumns;\n      const columnRows = await this._getRows(util.format(selectColumns, keyspaceName, name));\n      if (this.selectIndexes && !virtualTable) {\n        indexRows = await this._getRows(util.format(this.selectIndexes, keyspaceName, name));\n      }\n      await this._parseTableOrView(tableInfo, tableRow, columnRows, indexRows, virtualTable);\n      tableInfo.loaded = true;\n      tableInfo.emit('load', null, tableInfo);\n      return tableInfo;\n    }\n    catch (err) {\n      tableInfo.emit('load', err, null);\n      throw err;\n    }\n    finally {\n      tableInfo.loading = false;\n    }\n  }\n\n  async _getFirstRow(query) {\n    const rows = await this._getRows(query);\n    return rows[0];\n  }\n\n  async _getRows(query) {\n    const response = await this.cc.query(query);\n    return response.rows;\n  }\n\n  /**\n   * @param {String} keyspaceName\n   * @param {String} name\n   * @param {Object} cache\n   * @returns {Promise<Object|null>}\n   */\n  async getUdt(keyspaceName, name, cache) {\n    let udtInfo = cache && cache[name];\n    if (!udtInfo) {\n      udtInfo = new events.EventEmitter();\n      if (cache) {\n        cache[name] = udtInfo;\n      }\n      udtInfo.setMaxListeners(0);\n      udtInfo.loading = false;\n      udtInfo.name = name;\n      udtInfo.keyspace = keyspaceName;\n      udtInfo.fields = null;\n    }\n    if (udtInfo.fields) {\n      return udtInfo;\n    }\n    if (udtInfo.loading) {\n      return promiseUtils.fromEvent(udtInfo, 'load');\n    }\n    udtInfo.loading = true;\n    const query = format(this.selectUdt, keyspaceName, name);\n    try {\n      const row = await this._getFirstRow(query);\n      if (!row) {\n        udtInfo.loading = false;\n        udtInfo.emit('load', null, null);\n        return null;\n      }\n      await this._parseUdt(udtInfo, row);\n      udtInfo.emit('load', null, udtInfo);\n      return udtInfo;\n    }\n    catch (err) {\n      udtInfo.emit('load', err);\n      throw err;\n    }\n    finally {\n      udtInfo.loading = false;\n    }\n  }\n\n  /**\n   * Parses the udt information from the row\n   * @param udtInfo\n   * @param {Row} row\n   * @returns {Promise<void>}\n   * @abstract\n   */\n  _parseUdt(udtInfo, row) {\n  }\n\n  /**\n   * Builds the metadata based on the table and column rows\n   * @abstract\n   * @param {module:metadata~TableMetadata} tableInfo\n   * @param {Row} tableRow\n   * @param {Array.<Row>} columnRows\n   * @param {Array.<Row>} indexRows\n   * @param {Boolean} virtual\n   * @returns {Promise<void>}\n   * @throws {Error}\n   */\n  async _parseTableOrView(tableInfo, tableRow, columnRows, indexRows, virtual) {\n  }\n\n  /**\n   * @abstract\n   * @param {String} keyspaceName\n   * @param {String} name\n   * @param {Object} cache\n   * @returns {Promise<MaterializedView|null>}\n   */\n  getMaterializedView(keyspaceName, name, cache) {\n  }\n\n  /**\n   * @param {String} keyspaceName\n   * @param {String} name\n   * @param {Boolean} aggregate\n   * @param {Object} cache\n   * @returns {Promise<Map>}\n   */\n  async getFunctions(keyspaceName, name, aggregate, cache) {\n    /** @type {String} */\n    let query = this.selectFunctions;\n    let parser = row => this._parseFunction(row);\n    if (aggregate) {\n      query = this.selectAggregates;\n      parser = row => this._parseAggregate(row);\n    }\n    // if it's not already loaded, get all functions with that name\n    // cache it by name and, within name, by signature\n    let functionsInfo = cache && cache[name];\n    if (!functionsInfo) {\n      functionsInfo = new events.EventEmitter();\n      if (cache) {\n        cache[name] = functionsInfo;\n      }\n      functionsInfo.setMaxListeners(0);\n    }\n    if (functionsInfo.values) {\n      return functionsInfo.values;\n    }\n    if (functionsInfo.loading) {\n      return promiseUtils.fromEvent(functionsInfo, 'load');\n    }\n    functionsInfo.loading = true;\n    try {\n      const rows = await this._getRows(format(query, keyspaceName, name));\n      const funcs = await Promise.all(rows.map(parser));\n      const result = new Map();\n      if (rows.length > 0) {\n        // Cache positive hits\n        functionsInfo.values = result;\n      }\n\n      funcs.forEach(f => functionsInfo.values.set(f.signature.join(','), f));\n      functionsInfo.emit('load', null, result);\n      return result;\n    }\n    catch (err) {\n      functionsInfo.emit('load', err);\n      throw err;\n    }\n    finally {\n      functionsInfo.loading = false;\n    }\n  }\n\n  /**\n   * @abstract\n   * @param {Row} row\n   * @returns {Promise}\n   */\n  _parseAggregate(row) {\n  }\n\n  /**\n   * @abstract\n   * @param {Row} row\n   * @returns {Promise}\n   */\n  _parseFunction(row) {\n  }\n\n  /** @returns {Map} */\n  _asMap(obj) {\n    if (!obj) {\n      return new Map();\n    }\n    if (this.encodingOptions.map && obj instanceof this.encodingOptions.map) {\n      // Its already a Map or a polyfill of a Map\n      return obj;\n    }\n    return new Map(Object.keys(obj).map(k => [k, obj[k]]));\n  }\n\n  _mapAsObject(map) {\n    if (!map) {\n      return map;\n    }\n    if (this.encodingOptions.map && map instanceof this.encodingOptions.map) {\n      const result = {};\n      map.forEach((value, key) => result[key] = value);\n      return result;\n    }\n    return map;\n  }\n}\n\n/**\n * Used to parse schema information for Cassandra versions 1.2.x, and 2.x\n * @ignore\n */\nclass SchemaParserV1 extends SchemaParser {\n\n  /**\n   * @param {ClientOptions} options\n   * @param {ControlConnection} cc\n   */\n  constructor(options, cc) {\n    super(options, cc);\n    this.selectTable = _selectTableV1;\n    this.selectColumns = _selectColumnsV1;\n    this.selectUdt = _selectUdtV1;\n    this.selectAggregates = _selectAggregatesV1;\n    this.selectFunctions = _selectFunctionsV1;\n  }\n\n  async getKeyspaces(waitReconnect) {\n    const keyspaces = {};\n    const result = await this.cc.query(_selectAllKeyspacesV1, waitReconnect);\n    for (let i = 0; i < result.rows.length; i++) {\n      const row = result.rows[i];\n      const ksInfo = this._createKeyspace(row['keyspace_name'], row['durable_writes'], row['strategy_class'], JSON.parse(row['strategy_options'] || null));\n      keyspaces[ksInfo.name] = ksInfo;\n    }\n    return keyspaces;\n  }\n\n  async getKeyspace(name) {\n    const row = await this._getFirstRow(format(_selectSingleKeyspaceV1, name));\n    if (!row) {\n      return null;\n    }\n    return this._createKeyspace(row['keyspace_name'], row['durable_writes'], row['strategy_class'], JSON.parse(row['strategy_options']));\n  }\n\n  // eslint-disable-next-line require-await\n  async _parseTableOrView(tableInfo, tableRow, columnRows, indexRows, virtual) {\n    // All the tableInfo parsing in V1 is sync, it uses a async function because the super class defines one\n    // to support other versions.\n    let c, name, types;\n    const encoder = this.cc.getEncoder();\n    const columnsKeyed = {};\n    let partitionKeys = [];\n    let clusteringKeys = [];\n    tableInfo.bloomFilterFalsePositiveChance = tableRow['bloom_filter_fp_chance'];\n    tableInfo.caching = tableRow['caching'];\n    tableInfo.comment = tableRow['comment'];\n    tableInfo.compactionClass = tableRow['compaction_strategy_class'];\n    tableInfo.compactionOptions = JSON.parse(tableRow['compaction_strategy_options']);\n    tableInfo.compression = JSON.parse(tableRow['compression_parameters']);\n    tableInfo.gcGraceSeconds = tableRow['gc_grace_seconds'];\n    tableInfo.localReadRepairChance = tableRow['local_read_repair_chance'];\n    tableInfo.readRepairChance = tableRow['read_repair_chance'];\n    tableInfo.populateCacheOnFlush = tableRow['populate_io_cache_on_flush'] || tableInfo.populateCacheOnFlush;\n    tableInfo.memtableFlushPeriod = tableRow['memtable_flush_period_in_ms'] || tableInfo.memtableFlushPeriod;\n    tableInfo.defaultTtl = tableRow['default_time_to_live'] || tableInfo.defaultTtl;\n    tableInfo.speculativeRetry = tableRow['speculative_retry'] || tableInfo.speculativeRetry;\n    tableInfo.indexInterval = tableRow['index_interval'] || tableInfo.indexInterval;\n    if (typeof tableRow['min_index_interval'] !== 'undefined') {\n      //Cassandra 2.1+\n      tableInfo.minIndexInterval = tableRow['min_index_interval'] || tableInfo.minIndexInterval;\n      tableInfo.maxIndexInterval = tableRow['max_index_interval'] || tableInfo.maxIndexInterval;\n    }\n    else {\n      //set to null\n      tableInfo.minIndexInterval = null;\n      tableInfo.maxIndexInterval = null;\n    }\n    if (typeof tableRow['replicate_on_write'] !== 'undefined') {\n      //leave the default otherwise\n      tableInfo.replicateOnWrite = tableRow['replicate_on_write'];\n    }\n    tableInfo.columns = [];\n    for (let i = 0; i < columnRows.length; i++) {\n      const row = columnRows[i];\n      const type = encoder.parseFqTypeName(row['validator']);\n      c = {\n        name: row['column_name'],\n        type: type,\n        isStatic: false\n      };\n      tableInfo.columns.push(c);\n      columnsKeyed[c.name] = c;\n      switch (row['type']) {\n        case 'partition_key':\n          partitionKeys.push({ c: c, index: (row['component_index'] || 0) });\n          break;\n        case 'clustering_key':\n          clusteringKeys.push({\n            c: c,\n            index: (row['component_index'] || 0),\n            order: c.type.options.reversed ? 'DESC' : 'ASC'\n          });\n          break;\n        case 'static':\n          // C* 2.0.6+ supports static columns\n          c.isStatic = true;\n          break;\n      }\n    }\n    if (partitionKeys.length > 0) {\n      tableInfo.partitionKeys = partitionKeys.sort(utils.propCompare('index')).map(item => item.c);\n      clusteringKeys.sort(utils.propCompare('index'));\n      tableInfo.clusteringKeys = clusteringKeys.map(item => item.c);\n      tableInfo.clusteringOrder = clusteringKeys.map(item => item.order);\n    }\n    // In C* 1.2, keys are not stored on the schema_columns table\n    const keysStoredInTableRow = (tableInfo.partitionKeys.length === 0);\n    if (keysStoredInTableRow && tableRow['key_aliases']) {\n      //In C* 1.2, keys are not stored on the schema_columns table\n      partitionKeys = JSON.parse(tableRow['key_aliases']);\n      types = encoder.parseKeyTypes(tableRow['key_validator']).types;\n      for (let i = 0; i < partitionKeys.length; i++) {\n        name = partitionKeys[i];\n        c = columnsKeyed[name];\n        if (!c) {\n          c = {\n            name: name,\n            type: types[i]\n          };\n          tableInfo.columns.push(c);\n        }\n        tableInfo.partitionKeys.push(c);\n      }\n    }\n    const comparator = encoder.parseKeyTypes(tableRow['comparator']);\n    if (keysStoredInTableRow && tableRow['column_aliases']) {\n      clusteringKeys = JSON.parse(tableRow['column_aliases']);\n      for (let i = 0; i < clusteringKeys.length; i++) {\n        name = clusteringKeys[i];\n        c = columnsKeyed[name];\n        if (!c) {\n          c = {\n            name: name,\n            type: comparator.types[i]\n          };\n          tableInfo.columns.push(c);\n        }\n        tableInfo.clusteringKeys.push(c);\n        tableInfo.clusteringOrder.push(c.type.options.reversed ? 'DESC' : 'ASC');\n      }\n    }\n    tableInfo.isCompact = !!tableRow['is_dense'];\n    if (!tableInfo.isCompact) {\n      //is_dense column does not exist in previous versions of Cassandra\n      //also, compact pk, ck and val appear as is_dense false\n      // clusteringKeys != comparator types - 1\n      // or not composite (comparator)\n      tableInfo.isCompact = (\n        //clustering keys are not marked as composite\n        !comparator.isComposite ||\n        //only 1 column not part of the partition or clustering keys\n        (!comparator.hasCollections && tableInfo.clusteringKeys.length !== comparator.types.length - 1));\n    }\n    name = tableRow['value_alias'];\n    if (tableInfo.isCompact && name && !columnsKeyed[name]) {\n      //additional column in C* 1.2 as value_alias\n      c = {\n        name: name,\n        type: encoder.parseFqTypeName(tableRow['default_validator'])\n      };\n      tableInfo.columns.push(c);\n      columnsKeyed[name] = c;\n    }\n    tableInfo.columnsByName = columnsKeyed;\n    tableInfo.indexes = Index.fromColumnRows(columnRows, tableInfo.columnsByName);\n  }\n\n  getMaterializedView(keyspaceName, name, cache) {\n    return Promise.reject(new errors.NotSupportedError('Materialized views are not supported on Cassandra versions below 3.0'));\n  }\n\n  // eslint-disable-next-line require-await\n  async _parseAggregate(row) {\n    const encoder = this.cc.getEncoder();\n    const aggregate = new Aggregate();\n    aggregate.name = row['aggregate_name'];\n    aggregate.keyspaceName = row['keyspace_name'];\n    aggregate.signature = row['signature'] || utils.emptyArray;\n    aggregate.stateFunction = row['state_func'];\n    aggregate.finalFunction = row['final_func'];\n    aggregate.initConditionRaw = row['initcond'];\n    aggregate.argumentTypes = (row['argument_types'] || utils.emptyArray).map(name => encoder.parseFqTypeName(name));\n    aggregate.stateType = encoder.parseFqTypeName(row['state_type']);\n    const initConditionValue = encoder.decode(aggregate.initConditionRaw, aggregate.stateType);\n    if (initConditionValue !== null && typeof initConditionValue !== 'undefined') {\n      aggregate.initCondition = initConditionValue.toString();\n    }\n    aggregate.returnType = encoder.parseFqTypeName(row['return_type']);\n    return aggregate;\n  }\n\n  // eslint-disable-next-line require-await\n  async _parseFunction(row) {\n    const encoder = this.cc.getEncoder();\n    const func = new SchemaFunction();\n    func.name = row['function_name'];\n    func.keyspaceName = row['keyspace_name'];\n    func.signature = row['signature'] || utils.emptyArray;\n    func.argumentNames = row['argument_names'] || utils.emptyArray;\n    func.body = row['body'];\n    func.calledOnNullInput = row['called_on_null_input'];\n    func.language = row['language'];\n    func.argumentTypes = (row['argument_types'] || utils.emptyArray).map(name => encoder.parseFqTypeName(name));\n    func.returnType = encoder.parseFqTypeName(row['return_type']);\n    return func;\n  }\n\n  // eslint-disable-next-line require-await\n  async _parseUdt(udtInfo, row) {\n    const encoder = this.cc.getEncoder();\n    const fieldNames = row['field_names'];\n    const fieldTypes = row['field_types'];\n    const fields = new Array(fieldNames.length);\n    for (let i = 0; i < fieldNames.length; i++) {\n      fields[i] = {\n        name: fieldNames[i],\n        type: encoder.parseFqTypeName(fieldTypes[i])\n      };\n    }\n    udtInfo.fields = fields;\n    return udtInfo;\n  }\n}\n\n\n/**\n * Used to parse schema information for Cassandra versions 3.x and above\n * @param {ClientOptions} options The client options\n * @param {ControlConnection} cc The control connection to be used\n * @param {Function} udtResolver The function to be used to retrieve the udts.\n * @ignore\n */\nclass SchemaParserV2 extends SchemaParser {\n\n  /**\n   * @param {ClientOptions} options The client options\n   * @param {ControlConnection} cc The control connection to be used\n   * @param {Function} udtResolver The function to be used to retrieve the udts.\n   */\n  constructor(options, cc, udtResolver) {\n    super(options, cc);\n    this.udtResolver = udtResolver;\n    this.selectTable = _selectTableV2;\n    this.selectColumns = _selectColumnsV2;\n    this.selectUdt = _selectUdtV2;\n    this.selectAggregates = _selectAggregatesV2;\n    this.selectFunctions = _selectFunctionsV2;\n    this.selectIndexes = _selectIndexesV2;\n  }\n\n  async getKeyspaces(waitReconnect) {\n    const keyspaces = {};\n    const result = await this.cc.query(_selectAllKeyspacesV2, waitReconnect);\n    for (let i = 0; i < result.rows.length; i++) {\n      const ksInfo = this._parseKeyspace(result.rows[i]);\n      keyspaces[ksInfo.name] = ksInfo;\n    }\n    return keyspaces;\n  }\n\n  async getKeyspace(name) {\n    const row = await this._getFirstRow(format(_selectSingleKeyspaceV2, name));\n    if (!row) {\n      return null;\n    }\n    return this._parseKeyspace(row);\n  }\n\n  async getMaterializedView(keyspaceName, name, cache) {\n    let viewInfo = cache && cache[name];\n    if (!viewInfo) {\n      viewInfo = new MaterializedView(name);\n      if (cache) {\n        cache[name] = viewInfo;\n      }\n    }\n    if (viewInfo.loaded) {\n      return viewInfo;\n    }\n    if (viewInfo.loading) {\n      return promiseUtils.fromEvent(viewInfo, 'load');\n    }\n    viewInfo.loading = true;\n    try {\n      const tableRow = await this._getFirstRow(format(_selectMaterializedViewV2, keyspaceName, name));\n      if (!tableRow) {\n        viewInfo.emit('load', null, null);\n        viewInfo.loading = false;\n        return null;\n      }\n      const columnRows = await this._getRows(format(this.selectColumns, keyspaceName, name));\n      await this._parseTableOrView(viewInfo, tableRow, columnRows, null, false);\n      viewInfo.loaded = true;\n      viewInfo.emit('load', null, viewInfo);\n      return viewInfo;\n    }\n    catch (err) {\n      viewInfo.emit('load', err);\n      throw err;\n    }\n    finally {\n      viewInfo.loading = false;\n    }\n  }\n\n  _parseKeyspace(row, virtual) {\n    const replication = row['replication'];\n    let strategy;\n    let strategyOptions;\n    if (replication) {\n      strategy = replication['class'];\n      strategyOptions = {};\n      for (const key in replication) {\n        if (!replication.hasOwnProperty(key) || key === 'class') {\n          continue;\n        }\n        strategyOptions[key] = replication[key];\n      }\n    }\n\n    const ks = this._createKeyspace(row['keyspace_name'], row['durable_writes'], strategy, strategyOptions, virtual);\n    ks.graphEngine = row['graph_engine'];\n    return ks;\n  }\n\n  async _parseTableOrView(tableInfo, tableRow, columnRows, indexRows, virtual) {\n    const encoder = this.cc.getEncoder();\n    const columnsKeyed = {};\n    const partitionKeys = [];\n    const clusteringKeys = [];\n    tableInfo.columns = await Promise.all(columnRows.map(async (row) => {\n      const type = await encoder.parseTypeName(tableRow['keyspace_name'], row['type'], 0, null, this.udtResolver);\n      const c = {\n        name: row['column_name'],\n        type: type,\n        isStatic: false\n      };\n      columnsKeyed[c.name] = c;\n      switch (row['kind']) {\n        case 'partition_key':\n          partitionKeys.push({ c, index: (row['position'] || 0) });\n          break;\n        case 'clustering':\n          clusteringKeys.push({\n            c, index: (row['position'] || 0), order: row['clustering_order'] === 'desc' ? 'DESC' : 'ASC'\n          });\n          break;\n        case 'static':\n          c.isStatic = true;\n          break;\n      }\n      return c;\n    }));\n    tableInfo.columnsByName = columnsKeyed;\n    tableInfo.partitionKeys = partitionKeys.sort(utils.propCompare('index')).map(item => item.c);\n    clusteringKeys.sort(utils.propCompare('index'));\n    tableInfo.clusteringKeys = clusteringKeys.map(item => item.c);\n    tableInfo.clusteringOrder = clusteringKeys.map(item => item.order);\n    if (virtual) {\n      // When table is virtual, the only relevant information to parse are the columns\n      // as the table itself has no configuration\n      tableInfo.virtual = true;\n      return;\n    }\n    const isView = tableInfo instanceof MaterializedView;\n    tableInfo.bloomFilterFalsePositiveChance = tableRow['bloom_filter_fp_chance'];\n    tableInfo.caching = JSON.stringify(tableRow['caching']);\n    tableInfo.comment = tableRow['comment'];\n    // Regardless of the encoding options, use always an Object to represent an associative Array\n    const compaction = this._asMap(tableRow['compaction']);\n    if (compaction) {\n      // compactionOptions as an Object<String, String>\n      tableInfo.compactionOptions = {};\n      tableInfo.compactionClass = compaction.get('class');\n      compaction.forEach((value, key) => {\n        if (key === 'class') {\n          return;\n        }\n        tableInfo.compactionOptions[key] = compaction.get(key);\n      });\n    }\n    // Convert compression to an Object<String, String>\n    tableInfo.compression = this._mapAsObject(tableRow['compression']);\n    tableInfo.gcGraceSeconds = tableRow['gc_grace_seconds'];\n    tableInfo.localReadRepairChance = tableRow['dclocal_read_repair_chance'];\n    tableInfo.readRepairChance = tableRow['read_repair_chance'];\n    tableInfo.extensions = this._mapAsObject(tableRow['extensions']);\n    tableInfo.crcCheckChance = tableRow['crc_check_chance'];\n    tableInfo.memtableFlushPeriod = tableRow['memtable_flush_period_in_ms'] || tableInfo.memtableFlushPeriod;\n    tableInfo.defaultTtl = tableRow['default_time_to_live'] || tableInfo.defaultTtl;\n    tableInfo.speculativeRetry = tableRow['speculative_retry'] || tableInfo.speculativeRetry;\n    tableInfo.minIndexInterval = tableRow['min_index_interval'] || tableInfo.minIndexInterval;\n    tableInfo.maxIndexInterval = tableRow['max_index_interval'] || tableInfo.maxIndexInterval;\n    tableInfo.nodesync = tableRow['nodesync'] || tableInfo.nodesync;\n    if (!isView) {\n      const cdc = tableRow['cdc'];\n      if (cdc !== undefined) {\n        tableInfo.cdc = cdc;\n      }\n    }\n    if (isView) {\n      tableInfo.tableName = tableRow['base_table_name'];\n      tableInfo.whereClause = tableRow['where_clause'];\n      tableInfo.includeAllColumns = tableRow['include_all_columns'];\n      return;\n    }\n    tableInfo.indexes = this._getIndexes(indexRows);\n    // flags can be an instance of Array or Set (real or polyfill)\n    let flags = tableRow['flags'];\n    if (Array.isArray(flags)) {\n      flags = new Set(flags);\n    }\n    const isDense = flags.has('dense');\n    const isSuper = flags.has('super');\n    const isCompound = flags.has('compound');\n    tableInfo.isCompact = isSuper || isDense || !isCompound;\n    // Remove the columns related to Thrift\n    const isStaticCompact = !isSuper && !isDense && !isCompound;\n    if (isStaticCompact) {\n      pruneStaticCompactTableColumns(tableInfo);\n    }\n    else if (isDense) {\n      pruneDenseTableColumns(tableInfo);\n    }\n  }\n\n  _getIndexes(indexRows) {\n    if (!indexRows || indexRows.length === 0) {\n      return utils.emptyArray;\n    }\n    return indexRows.map((row) => {\n      const options = this._mapAsObject(row['options']);\n      return new Index(row['index_name'], options['target'], row['kind'], options);\n    });\n  }\n\n  async _parseAggregate(row) {\n    const encoder = this.cc.getEncoder();\n    const aggregate = new Aggregate();\n    aggregate.name = row['aggregate_name'];\n    aggregate.keyspaceName = row['keyspace_name'];\n    aggregate.signature = row['argument_types'] || utils.emptyArray;\n    aggregate.stateFunction = row['state_func'];\n    aggregate.finalFunction = row['final_func'];\n    aggregate.initConditionRaw = row['initcond'];\n    aggregate.initCondition = aggregate.initConditionRaw;\n    aggregate.deterministic = row['deterministic'] || false;\n    aggregate.argumentTypes = await Promise.all(aggregate.signature.map(name => encoder.parseTypeName(row['keyspace_name'], name, 0, null, this.udtResolver)));\n    aggregate.stateType = await encoder.parseTypeName(row['keyspace_name'], row['state_type'], 0, null, this.udtResolver);\n    aggregate.returnType = await encoder.parseTypeName(row['keyspace_name'], row['return_type'], 0, null, this.udtResolver);\n    return aggregate;\n  }\n\n  async _parseFunction(row) {\n    const encoder = this.cc.getEncoder();\n    const func = new SchemaFunction();\n    func.name = row['function_name'];\n    func.keyspaceName = row['keyspace_name'];\n    func.signature = row['argument_types'] || utils.emptyArray;\n    func.argumentNames = row['argument_names'] || utils.emptyArray;\n    func.body = row['body'];\n    func.calledOnNullInput = row['called_on_null_input'];\n    func.language = row['language'];\n    func.deterministic = row['deterministic'] || false;\n    func.monotonic = row['monotonic'] || false;\n    func.monotonicOn = row['monotonic_on'] || utils.emptyArray;\n    func.argumentTypes = await Promise.all(func.signature.map(name => encoder.parseTypeName(row['keyspace_name'], name, 0, null, this.udtResolver)));\n    func.returnType = await encoder.parseTypeName(row['keyspace_name'], row['return_type'], 0, null, this.udtResolver);\n    return func;\n  }\n\n  async _parseUdt(udtInfo, row) {\n    const encoder = this.cc.getEncoder();\n    const fieldTypes = row['field_types'];\n    const keyspace = row['keyspace_name'];\n    udtInfo.fields = await Promise.all(row['field_names'].map(async (name, i) => {\n      const type = await encoder.parseTypeName(keyspace, fieldTypes[i], 0, null, this.udtResolver);\n      return { name, type };\n    }));\n    return udtInfo;\n  }\n}\n\n/**\n * Used to parse schema information for Cassandra versions 4.x and above.\n *\n * This parser similar to [SchemaParserV2] expect it also parses virtual\n * keyspaces.\n * @ignore\n */\nclass SchemaParserV3 extends SchemaParserV2 {\n  /**\n   * @param {ClientOptions} options The client options\n   * @param {ControlConnection} cc The control connection to be used\n   * @param {Function} udtResolver The function to be used to retrieve the udts.\n   */\n  constructor(options, cc, udtResolver) {\n    super(options, cc, udtResolver);\n    this.supportsVirtual = true;\n  }\n\n  async getKeyspaces(waitReconnect) {\n    const keyspaces = {};\n    const queries = [\n      { query: _selectAllKeyspacesV2, virtual: false },\n      { query: _selectAllVirtualKeyspaces, virtual: true }\n    ];\n\n    await Promise.all(queries.map(async (q) => {\n      let result = null;\n      try {\n        result = await this.cc.query(q.query, waitReconnect);\n      }\n      catch (err) {\n        if (q.virtual) {\n          // Only throw error for non-virtual query as\n          // server reporting C* 4.0 may not actually implement\n          // virtual tables.\n          return;\n        }\n        throw err;\n      }\n      for (let i = 0; i < result.rows.length; i++) {\n        const ksInfo = this._parseKeyspace(result.rows[i], q.virtual);\n        keyspaces[ksInfo.name] = ksInfo;\n      }\n    }));\n    return keyspaces;\n  }\n\n  async getKeyspace(name) {\n    const ks = await this._getKeyspace(_selectSingleKeyspaceV2, name, false);\n    if (!ks) {\n      // if not found, attempt to retrieve as virtual keyspace.\n      return this._getKeyspace(_selectSingleVirtualKeyspace, name, true);\n    }\n    return ks;\n  }\n\n  async _getKeyspace(query, name, virtual) {\n    try {\n      const row = await this._getFirstRow(format(query, name));\n\n      if (!row) {\n        return null;\n      }\n\n      return this._parseKeyspace(row, virtual);\n    }\n    catch (err) {\n      if (virtual) {\n        // only throw error for non-virtual query as\n        // server reporting C* 4.0 may not actually implement\n        // virtual tables.\n        return null;\n      }\n      throw err;\n    }\n  }\n}\n\n/**\n * Upon migration from thrift to CQL, we internally create a pair of surrogate clustering/regular columns\n * for compact static tables. These columns shouldn't be exposed to the user but are currently returned by C*.\n * We also need to remove the static keyword for all other columns in the table.\n * @param {module:metadata~TableMetadata} tableInfo\n*/\nfunction pruneStaticCompactTableColumns(tableInfo) {\n  let i;\n  let c;\n  //remove \"column1 text\" clustering column\n  for (i = 0; i < tableInfo.clusteringKeys.length; i++) {\n    c = tableInfo.clusteringKeys[i];\n    const index = tableInfo.columns.indexOf(c);\n    tableInfo.columns.splice(index, 1);\n    delete tableInfo.columnsByName[c.name];\n  }\n  tableInfo.clusteringKeys = utils.emptyArray;\n  tableInfo.clusteringOrder = utils.emptyArray;\n  //remove regular columns and set the static columns to non-static\n  i = tableInfo.columns.length;\n  while (i--) {\n    c = tableInfo.columns[i];\n    if (!c.isStatic && tableInfo.partitionKeys.indexOf(c) === -1) {\n      // remove \"value blob\" regular column\n      tableInfo.columns.splice(i, 1);\n      delete tableInfo.columnsByName[c.name];\n      continue;\n    }\n    c.isStatic = false;\n  }\n}\n\n/**\n * Upon migration from thrift to CQL, we internally create a surrogate column \"value\" of type custom.\n * This column shouldn't be exposed to the user but is currently returned by C*.\n * @param {module:metadata~TableMetadata} tableInfo\n */\nfunction pruneDenseTableColumns(tableInfo) {\n  let i = tableInfo.columns.length;\n  while (i--) {\n    const c = tableInfo.columns[i];\n    if (!c.isStatic && c.type.code === types.dataTypes.custom && c.type.info === 'empty') {\n      // remove \"value blob\" regular column\n      tableInfo.columns.splice(i, 1);\n      delete tableInfo.columnsByName[c.name];\n      continue;\n    }\n    c.isStatic = false;\n  }\n}\n\nfunction getTokenToReplicaMapper(strategy, strategyOptions) {\n  if (/SimpleStrategy$/.test(strategy)) {\n    const rf = parseInt(strategyOptions['replication_factor'], 10);\n    if (rf > 1) {\n      return getTokenToReplicaSimpleMapper(rf);\n    }\n  }\n  if (/NetworkTopologyStrategy$/.test(strategy)) {\n    return getTokenToReplicaNetworkMapper(strategyOptions);\n  }\n  //default, wrap in an Array\n  return (function noStrategy(tokenizer, ring, primaryReplicas) {\n    const replicas = {};\n    for (const key in primaryReplicas) {\n      if (!primaryReplicas.hasOwnProperty(key)) {\n        continue;\n      }\n      replicas[key] = [primaryReplicas[key]];\n    }\n    return replicas;\n  });\n}\n\n/**\n * @param {Number} replicationFactor\n * @returns {function}\n */\nfunction getTokenToReplicaSimpleMapper(replicationFactor) {\n  return (function tokenSimpleStrategy(tokenizer, ringTokensAsStrings, primaryReplicas) {\n    const ringLength = ringTokensAsStrings.length;\n    const rf = Math.min(replicationFactor, ringLength);\n    const replicas = {};\n    for (let i = 0; i < ringLength; i++) {\n      const key = ringTokensAsStrings[i];\n      const tokenReplicas = [primaryReplicas[key]];\n      for (let j = 1; j < ringLength && tokenReplicas.length < rf; j++) {\n        let nextReplicaIndex = i + j;\n        if (nextReplicaIndex >= ringLength) {\n          //circle back\n          nextReplicaIndex = nextReplicaIndex % ringLength;\n        }\n        const nextReplica = primaryReplicas[ringTokensAsStrings[nextReplicaIndex]];\n        // In the case of vnodes, consecutive sections of the ring can be assigned to the same host.\n        if (tokenReplicas.indexOf(nextReplica) === -1) {\n          tokenReplicas.push(nextReplica);\n        }\n      }\n      replicas[key] = tokenReplicas;\n    }\n    return replicas;\n  });\n}\n\n/**\n * @param {Object} replicationFactors\n * @returns {Function}\n * @private\n */\nfunction getTokenToReplicaNetworkMapper(replicationFactors) {\n  //                A(DC1)\n  //\n  //           H         B(DC2)\n  //                |\n  //      G       --+--       C(DC1)\n  //                |\n  //           F         D(DC2)\n  //\n  //                E(DC1)\n  return (function tokenNetworkStrategy(tokenizer, ringTokensAsStrings, primaryReplicas, datacenters) {\n    const replicas = {};\n    const ringLength = ringTokensAsStrings.length;\n\n    for (let i = 0; i < ringLength; i++) {\n      const key = ringTokensAsStrings[i];\n      const tokenReplicas = [];\n      const replicasByDc = {};\n      const racksPlaced = {};\n      const skippedHosts = [];\n      for (let j = 0; j < ringLength; j++) {\n        let nextReplicaIndex = i + j;\n        if (nextReplicaIndex >= ringLength) {\n          //circle back\n          nextReplicaIndex = nextReplicaIndex % ringLength;\n        }\n        const h = primaryReplicas[ringTokensAsStrings[nextReplicaIndex]];\n        // In the case of vnodes, consecutive sections of the ring can be assigned to the same host.\n        if (tokenReplicas.indexOf(h) !== -1) {\n          continue;\n        }\n        const dc = h.datacenter;\n        //Check if the next replica belongs to one of the targeted dcs\n        let dcRf = parseInt(replicationFactors[dc], 10);\n        if (!dcRf) {\n          continue;\n        }\n        dcRf = Math.min(dcRf, datacenters[dc].hostLength);\n        let dcReplicas = replicasByDc[dc] || 0;\n        //Amount of replicas per dc is greater than rf or the amount of host in the datacenter\n        if (dcReplicas >= dcRf) {\n          continue;\n        }\n        let racksPlacedInDc = racksPlaced[dc];\n        if (!racksPlacedInDc) {\n          racksPlacedInDc = racksPlaced[dc] = new utils.HashSet();\n        }\n        if (h.rack &&\n            racksPlacedInDc.contains(h.rack) &&\n            racksPlacedInDc.length < datacenters[dc].racks.length) {\n          // We already selected a replica for this rack\n          // Skip until replicas in other racks are added\n          if (skippedHosts.length < dcRf - dcReplicas) {\n            skippedHosts.push(h);\n          }\n          continue;\n        }\n        replicasByDc[h.datacenter] = ++dcReplicas;\n        tokenReplicas.push(h);\n        if (h.rack && racksPlacedInDc.add(h.rack) && racksPlacedInDc.length === datacenters[dc].racks.length) {\n          // We finished placing all replicas for all racks in this dc\n          // Add the skipped hosts\n          replicasByDc[dc] += addSkippedHosts(dcRf, dcReplicas, tokenReplicas, skippedHosts);\n        }\n        if (isDoneForToken(replicationFactors, datacenters, replicasByDc)) {\n          break;\n        }\n      }\n      replicas[key] = tokenReplicas;\n    }\n    return replicas;\n  });\n}\n\n/**\n * @returns {Number} The number of skipped hosts added.\n */\nfunction addSkippedHosts(dcRf, dcReplicas, tokenReplicas, skippedHosts) {\n  let i;\n  for (i = 0; i < dcRf - dcReplicas && i < skippedHosts.length; i++) {\n    tokenReplicas.push(skippedHosts[i]);\n  }\n  return i;\n}\n\nfunction isDoneForToken(replicationFactors, datacenters, replicasByDc) {\n  const keys = Object.keys(replicationFactors);\n  for (let i = 0; i < keys.length; i++) {\n    const dcName = keys[i];\n    const dc = datacenters[dcName];\n    if (!dc) {\n      // A DC is included in the RF but the DC does not exist in the topology\n      continue;\n    }\n    const rf = Math.min(parseInt(replicationFactors[dcName], 10), dc.hostLength);\n    if (rf > 0 && (!replicasByDc[dcName] || replicasByDc[dcName] < rf)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Creates a new instance if the currentInstance is not valid for the\n * provided Cassandra version\n * @param {ClientOptions} options The client options\n * @param {ControlConnection} cc The control connection to be used\n * @param {Function} udtResolver The function to be used to retrieve the udts.\n * @param {Array.<Number>} [version] The cassandra version\n * @param {SchemaParser} [currentInstance] The current instance\n * @returns {SchemaParser}\n */\nfunction getByVersion(options, cc, udtResolver, version, currentInstance) {\n  let parserConstructor = SchemaParserV1;\n  if (version && version[0] === 3) {\n    parserConstructor = SchemaParserV2;\n  } else if (version && version[0] >= 4) {\n    parserConstructor = SchemaParserV3;\n  }\n  if (!currentInstance || !(currentInstance instanceof parserConstructor)){\n    return new parserConstructor(options, cc, udtResolver);\n  }\n  return currentInstance;\n}\n\nexports.getByVersion = getByVersion;\nexports.isDoneForToken = isDoneForToken;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst events = require('events');\nconst util = require('util');\n\n/**\n * Module containing classes and fields related to metadata.\n * @module metadata\n */\n\nconst t = require('../tokenizer');\nconst utils = require('../utils');\nconst errors = require('../errors');\nconst types = require('../types');\nconst requests = require('../requests');\nconst schemaParserFactory = require('./schema-parser');\nconst promiseUtils = require('../promise-utils');\nconst { TokenRange } = require('../token');\nconst { ExecutionOptions } = require('../execution-options');\n\n/**\n * @const\n * @private\n */\nconst _selectTraceSession = \"SELECT * FROM system_traces.sessions WHERE session_id=%s\";\n/**\n * @const\n * @private\n */\nconst _selectTraceEvents = \"SELECT * FROM system_traces.events WHERE session_id=%s\";\n/**\n * @const\n * @private\n */\nconst _selectSchemaVersionPeers = \"SELECT schema_version FROM system.peers\";\n/**\n * @const\n * @private\n */\nconst _selectSchemaVersionLocal = \"SELECT schema_version FROM system.local\";\n/**\n * @const\n * @private\n */\nconst _traceMaxAttemps = 5;\n/**\n * @const\n * @private\n */\nconst _traceAttemptDelay = 400;\n\n/**\n * Represents cluster and schema information.\n * The metadata class acts as a internal state of the driver.\n */\nclass Metadata {\n\n  /**\n   * Creates a new instance of {@link Metadata}.\n   * @param {ClientOptions} options\n   * @param {ControlConnection} controlConnection Control connection used to retrieve information.\n   */\n  constructor(options, controlConnection) {\n    if (!options) {\n      throw new errors.ArgumentError('Options are not defined');\n    }\n\n    Object.defineProperty(this, 'options', { value: options, enumerable: false, writable: false });\n    Object.defineProperty(this, 'controlConnection', { value: controlConnection, enumerable: false, writable: false });\n    this.keyspaces = {};\n    this.initialized = false;\n    this._isDbaas = false;\n    this._schemaParser = schemaParserFactory.getByVersion(options, controlConnection, this.getUdt.bind(this));\n    this.log = utils.log;\n    this._preparedQueries = new PreparedQueries(options.maxPrepared, (...args) => this.log(...args));\n  }\n\n  /**\n   * Sets the cassandra version\n   * @internal\n   * @ignore\n   * @param {Array.<Number>} version\n   */\n  setCassandraVersion(version) {\n    this._schemaParser = schemaParserFactory.getByVersion(\n      this.options, this.controlConnection, this.getUdt.bind(this), version, this._schemaParser);\n  }\n\n  /**\n   * Determines whether the cluster is provided as a service.\n   * @returns {boolean} true when the cluster is provided as a service (DataStax Astra), <code>false<code> when it's a\n   * different deployment (on-prem).\n   */\n  isDbaas() {\n    return this._isDbaas;\n  }\n\n  /**\n   * Sets the product type as DBaaS.\n   * @internal\n   * @ignore\n   */\n  setProductTypeAsDbaas() {\n    this._isDbaas = true;\n  }\n\n  /**\n   * @ignore\n   * @param {String} partitionerName\n   */\n  setPartitioner(partitionerName) {\n    if (/RandomPartitioner$/.test(partitionerName)) {\n      return this.tokenizer = new t.RandomTokenizer();\n    }\n    if (/ByteOrderedPartitioner$/.test(partitionerName)) {\n      return this.tokenizer = new t.ByteOrderedTokenizer();\n    }\n    return this.tokenizer = new t.Murmur3Tokenizer();\n  }\n\n  /**\n   * Populates the information regarding primary replica per token, datacenters (+ racks) and sorted token ring.\n   * @ignore\n   * @param {HostMap} hosts\n   */\n  buildTokens(hosts) {\n    if (!this.tokenizer) {\n      return this.log('error', 'Tokenizer could not be determined');\n    }\n    //Get a sorted array of tokens\n    const allSorted = [];\n    //Get a map of <token, primaryHost>\n    const primaryReplicas = {};\n    //Depending on the amount of tokens, this could be an expensive operation\n    const hostArray = hosts.values();\n    const stringify = this.tokenizer.stringify;\n    const datacenters = {};\n    hostArray.forEach((h) => {\n      if (!h.tokens) {\n        return;\n      }\n      h.tokens.forEach((tokenString) => {\n        const token = this.tokenizer.parse(tokenString);\n        utils.insertSorted(allSorted, token, (t1, t2) => t1.compare(t2));\n        primaryReplicas[stringify(token)] = h;\n      });\n      let dc = datacenters[h.datacenter];\n      if (!dc) {\n        dc = datacenters[h.datacenter] = {\n          hostLength: 0,\n          racks: new utils.HashSet()\n        };\n      }\n      dc.hostLength++;\n      dc.racks.add(h.rack);\n    });\n    //Primary replica for given token\n    this.primaryReplicas = primaryReplicas;\n    //All the tokens in ring order\n    this.ring = allSorted;\n    // Build TokenRanges.\n    const tokenRanges = new Set();\n    if (this.ring.length === 1) {\n      // If there is only one token, return the range ]minToken, minToken]\n      const min = this.tokenizer.minToken();\n      tokenRanges.add(new TokenRange(min, min, this.tokenizer));\n    }\n    else {\n      for (let i = 0; i < this.ring.length; i++) {\n        const start = this.ring[i];\n        const end = this.ring[(i + 1) % this.ring.length];\n        tokenRanges.add(new TokenRange(start, end, this.tokenizer));\n      }\n    }\n    this.tokenRanges = tokenRanges;\n    //Compute string versions as it's potentially expensive and frequently reused later\n    this.ringTokensAsStrings = new Array(allSorted.length);\n    for (let i = 0; i < allSorted.length; i++) {\n      this.ringTokensAsStrings[i] = stringify(allSorted[i]);\n    }\n    //Datacenter metadata (host length and racks)\n    this.datacenters = datacenters;\n  }\n\n  /**\n   * Gets the keyspace metadata information and updates the internal state of the driver.\n   * <p>\n   *   If a <code>callback</code> is provided, the callback is invoked when the keyspaces metadata refresh completes.\n   *   Otherwise, it returns a <code>Promise</code>.\n   * </p>\n   * @param {String} name Name of the keyspace.\n   * @param {Function} [callback] Optional callback.\n   */\n  refreshKeyspace(name, callback) {\n    return promiseUtils.optionalCallback(this._refreshKeyspace(name), callback);\n  }\n\n  /**\n   * @param {String} name\n   * @private\n   */\n  async _refreshKeyspace(name) {\n    if (!this.initialized) {\n      throw this._uninitializedError();\n    }\n    this.log('info', util.format('Retrieving keyspace %s metadata', name));\n    try {\n      const ksInfo = await this._schemaParser.getKeyspace(name);\n      if (!ksInfo) {\n        // the keyspace was dropped\n        delete this.keyspaces[name];\n        return null;\n      }\n      // Tokens are lazily init on the keyspace, once a replica from that keyspace is retrieved.\n      this.keyspaces[ksInfo.name] = ksInfo;\n      return ksInfo;\n    }\n    catch (err) {\n      this.log('error', 'There was an error while trying to retrieve keyspace information', err);\n      throw err;\n    }\n  }\n\n  /**\n   * Gets the metadata information of all the keyspaces and updates the internal state of the driver.\n   * <p>\n   *   If a <code>callback</code> is provided, the callback is invoked when the keyspace metadata refresh completes.\n   *   Otherwise, it returns a <code>Promise</code>.\n   * </p>\n   * @param {Boolean|Function} [waitReconnect] Determines if it should wait for reconnection in case the control connection is not\n   * connected at the moment. Default: true.\n   * @param {Function} [callback] Optional callback.\n   */\n  refreshKeyspaces(waitReconnect, callback) {\n    if (typeof waitReconnect === 'function' || typeof waitReconnect === 'undefined') {\n      callback = waitReconnect;\n      waitReconnect = true;\n    }\n    if (!this.initialized) {\n      const err = this._uninitializedError();\n      if (callback) {\n        return callback(err);\n      }\n      return Promise.reject(err);\n    }\n    return promiseUtils.optionalCallback(this.refreshKeyspacesInternal(waitReconnect), callback);\n  }\n\n  /**\n   * @param {Boolean} waitReconnect\n   * @returns {Promise<Object<string, Object>>}\n   * @ignore\n   * @internal\n   */\n  async refreshKeyspacesInternal(waitReconnect) {\n    this.log('info', 'Retrieving keyspaces metadata');\n    try {\n      this.keyspaces = await this._schemaParser.getKeyspaces(waitReconnect);\n      return this.keyspaces;\n    }\n    catch (err) {\n      this.log('error', 'There was an error while trying to retrieve keyspaces information', err);\n      throw err;\n    }\n  }\n\n  _getKeyspaceReplicas(keyspace) {\n    if (!keyspace.replicas) {\n      //Calculate replicas the first time for the keyspace\n      keyspace.replicas =\n        keyspace.tokenToReplica(this.tokenizer, this.ringTokensAsStrings, this.primaryReplicas, this.datacenters);\n    }\n    return keyspace.replicas;\n  }\n\n  /**\n   * Gets the host list representing the replicas that contain the given partition key, token or token range.\n   * <p>\n   *   It uses the pre-loaded keyspace metadata to retrieve the replicas for a token for a given keyspace.\n   *   When the keyspace metadata has not been loaded, it returns null.\n   * </p>\n   * @param {String} keyspaceName\n   * @param {Buffer|Token|TokenRange} token Can be Buffer (serialized partition key), Token or TokenRange\n   * @returns {Array}\n   */\n  getReplicas(keyspaceName, token) {\n    if (!this.ring) {\n      return null;\n    }\n    if (Buffer.isBuffer(token)) {\n      token = this.tokenizer.hash(token);\n    }\n    if (token instanceof TokenRange) {\n      token = token.end;\n    }\n    let keyspace;\n    if (keyspaceName) {\n      keyspace = this.keyspaces[keyspaceName];\n      if (!keyspace) {\n        // the keyspace was not found, the metadata should be loaded beforehand\n        return null;\n      }\n    }\n    let i = utils.binarySearch(this.ring, token, (t1, t2) => t1.compare(t2));\n    if (i < 0) {\n      i = ~i;\n    }\n    if (i >= this.ring.length) {\n      //it circled back\n      i = i % this.ring.length;\n    }\n    const closestToken = this.ringTokensAsStrings[i];\n    if (!keyspaceName) {\n      return [this.primaryReplicas[closestToken]];\n    }\n    const replicas = this._getKeyspaceReplicas(keyspace);\n    return replicas[closestToken];\n  }\n\n  /**\n   * Gets the token ranges that define data distribution in the ring.\n   *\n   * @returns {Set<TokenRange>} The ranges of the ring or empty set if schema metadata is not enabled.\n   */\n  getTokenRanges() {\n    return this.tokenRanges;\n  }\n\n  /**\n   * Gets the token ranges that are replicated on the given host, for\n   * the given keyspace.\n   *\n   * @param {String} keyspaceName The name of the keyspace to get ranges for.\n   * @param {Host} host The host.\n   * @returns {Set<TokenRange>|null} Ranges for the keyspace on this host or null if keyspace isn't found or hasn't been loaded.\n   */\n  getTokenRangesForHost(keyspaceName, host) {\n    if (!this.ring) {\n      return null;\n    }\n    let keyspace;\n    if (keyspaceName) {\n      keyspace = this.keyspaces[keyspaceName];\n      if (!keyspace) {\n        // the keyspace was not found, the metadata should be loaded beforehand\n        return null;\n      }\n    }\n    // If the ring has only 1 token, just return the ranges as we should only have a single node cluster.\n    if (this.ring.length === 1) {\n      return this.getTokenRanges();\n    }\n    const replicas = this._getKeyspaceReplicas(keyspace);\n    const ranges = new Set();\n    // for each range, find replicas for end token, if replicas include host, add range.\n    this.tokenRanges.forEach((tokenRange) => {\n      const replicasForToken = replicas[this.tokenizer.stringify(tokenRange.end)];\n      if (replicasForToken.indexOf(host) !== -1) {\n        ranges.add(tokenRange);\n      }\n    });\n    return ranges;\n  }\n\n  /**\n   * Constructs a Token from the input buffer(s) or string input.  If a string is passed in\n   * it is assumed this matches the token representation reported by cassandra.\n   * @param {Array<Buffer>|Buffer|String} components\n   * @returns {Token} constructed token from the input buffer.\n   */\n  newToken(components) {\n    if (!this.tokenizer) {\n      throw new Error('Partitioner not established.  This should only happen if metadata was disabled or you have not connected yet.');\n    }\n    if (Array.isArray(components)) {\n      return this.tokenizer.hash(Buffer.concat(components));\n    }\n    else if (typeof components === \"string\") {\n      return this.tokenizer.parse(components);\n    }\n    return this.tokenizer.hash(components);\n  }\n\n  /**\n   * Constructs a TokenRange from the given start and end tokens.\n   * @param {Token} start\n   * @param {Token} end\n   * @returns TokenRange build range spanning from start (exclusive) to end (inclusive).\n   */\n  newTokenRange(start, end) {\n    if (!this.tokenizer) {\n      throw new Error('Partitioner not established.  This should only happen if metadata was disabled or you have not connected yet.');\n    }\n    return new TokenRange(start, end, this.tokenizer);\n  }\n\n  /**\n   * Gets the metadata information already stored associated to a prepared statement\n   * @param {String} keyspaceName\n   * @param {String} query\n   * @internal\n   * @ignore\n   */\n  getPreparedInfo(keyspaceName, query) {\n    return this._preparedQueries.getOrAdd(keyspaceName, query);\n  }\n\n  /**\n   * Clears the internal state related to the prepared statements.\n   * Following calls to the Client using the prepare flag will re-prepare the statements.\n   */\n  clearPrepared() {\n    this._preparedQueries.clear();\n  }\n\n  /** @ignore */\n  getPreparedById(id) {\n    return this._preparedQueries.getById(id);\n  }\n\n  /** @ignore */\n  setPreparedById(info) {\n    return this._preparedQueries.setById(info);\n  }\n\n  /** @ignore */\n  getAllPrepared() {\n    return this._preparedQueries.getAll();\n  }\n\n  /** @ignore */\n  _uninitializedError() {\n    return new Error('Metadata has not been initialized.  This could only happen if you have not connected yet.');\n  }\n\n  /**\n   * Gets the definition of an user-defined type.\n   * <p>\n   *   If a <code>callback</code> is provided, the callback is invoked when the metadata retrieval completes.\n   *   Otherwise, it returns a <code>Promise</code>.\n   * </p>\n   * <p>\n   * When trying to retrieve the same UDT definition concurrently, it will query once and invoke all callbacks\n   * with the retrieved information.\n   * </p>\n   * @param {String} keyspaceName Name of the keyspace.\n   * @param {String} name Name of the UDT.\n   * @param {Function} [callback] The callback to invoke when retrieval completes.\n   */\n  getUdt(keyspaceName, name, callback) {\n    return promiseUtils.optionalCallback(this._getUdt(keyspaceName, name), callback);\n  }\n\n  /**\n   * @param {String} keyspaceName\n   * @param {String} name\n   * @returns {Promise<Object|null>}\n   * @private\n   */\n  async _getUdt(keyspaceName, name) {\n    if (!this.initialized) {\n      throw this._uninitializedError();\n    }\n    let cache;\n    if (this.options.isMetadataSyncEnabled) {\n      const keyspace = this.keyspaces[keyspaceName];\n      if (!keyspace) {\n        return null;\n      }\n      cache = keyspace.udts;\n    }\n    return await this._schemaParser.getUdt(keyspaceName, name, cache);\n  }\n\n  /**\n   * Gets the definition of a table.\n   * <p>\n   *   If a <code>callback</code> is provided, the callback is invoked when the metadata retrieval completes.\n   *   Otherwise, it returns a <code>Promise</code>.\n   * </p>\n   * <p>\n   * When trying to retrieve the same table definition concurrently, it will query once and invoke all callbacks\n   * with the retrieved information.\n   * </p>\n   * @param {String} keyspaceName Name of the keyspace.\n   * @param {String} name Name of the Table.\n   * @param {Function} [callback] The callback with the err as a first parameter and the {@link TableMetadata} as\n   * second parameter.\n   */\n  getTable(keyspaceName, name, callback) {\n    return promiseUtils.optionalCallback(this._getTable(keyspaceName, name), callback);\n  }\n\n  /**\n   * @param {String} keyspaceName\n   * @param {String} name\n   * @private\n   */\n  async _getTable(keyspaceName, name) {\n    if (!this.initialized) {\n      throw this._uninitializedError();\n    }\n    let cache;\n    let virtual;\n    if (this.options.isMetadataSyncEnabled) {\n      const keyspace = this.keyspaces[keyspaceName];\n      if (!keyspace) {\n        return null;\n      }\n      cache = keyspace.tables;\n      virtual = keyspace.virtual;\n    }\n    return await this._schemaParser.getTable(keyspaceName, name, cache, virtual);\n  }\n\n  /**\n   * Gets the definition of CQL functions for a given name.\n   * <p>\n   *   If a <code>callback</code> is provided, the callback is invoked when the metadata retrieval completes.\n   *   Otherwise, it returns a <code>Promise</code>.\n   * </p>\n   * <p>\n   * When trying to retrieve the same function definition concurrently, it will query once and invoke all callbacks\n   * with the retrieved information.\n   * </p>\n   * @param {String} keyspaceName Name of the keyspace.\n   * @param {String} name Name of the Function.\n   * @param {Function} [callback] The callback with the err as a first parameter and the array of {@link SchemaFunction}\n   * as second parameter.\n   */\n  getFunctions(keyspaceName, name, callback) {\n    return promiseUtils.optionalCallback(this._getFunctionsWrapper(keyspaceName, name), callback);\n  }\n\n  /**\n   * @param {String} keyspaceName\n   * @param {String} name\n   * @private\n   */\n  async _getFunctionsWrapper(keyspaceName, name) {\n    if (!keyspaceName || !name) {\n      throw new errors.ArgumentError('You must provide the keyspace name and cql function name to retrieve the metadata');\n    }\n    const functionsMap = await this._getFunctions(keyspaceName, name, false);\n    return Array.from(functionsMap.values());\n  }\n\n  /**\n   * Gets a definition of CQL function for a given name and signature.\n   * <p>\n   *   If a <code>callback</code> is provided, the callback is invoked when the metadata retrieval completes.\n   *   Otherwise, it returns a <code>Promise</code>.\n   * </p>\n   * <p>\n   * When trying to retrieve the same function definition concurrently, it will query once and invoke all callbacks\n   * with the retrieved information.\n   * </p>\n   * @param {String} keyspaceName Name of the keyspace\n   * @param {String} name Name of the Function\n   * @param {Array.<String>|Array.<{code, info}>} signature Array of types of the parameters.\n   * @param {Function} [callback] The callback with the err as a first parameter and the {@link SchemaFunction} as second\n   * parameter.\n   */\n  getFunction(keyspaceName, name, signature, callback) {\n    return promiseUtils.optionalCallback(this._getSingleFunction(keyspaceName, name, signature, false), callback);\n  }\n\n  /**\n   * Gets the definition of CQL aggregate for a given name.\n   * <p>\n   *   If a <code>callback</code> is provided, the callback is invoked when the metadata retrieval completes.\n   *   Otherwise, it returns a <code>Promise</code>.\n   * </p>\n   * <p>\n   * When trying to retrieve the same aggregates definition concurrently, it will query once and invoke all callbacks\n   * with the retrieved information.\n   * </p>\n   * @param {String} keyspaceName Name of the keyspace\n   * @param {String} name Name of the Function\n   * @param {Function} [callback] The callback with the err as a first parameter and the array of {@link Aggregate} as\n   * second parameter.\n   */\n  getAggregates(keyspaceName, name, callback) {\n    return promiseUtils.optionalCallback(this._getAggregates(keyspaceName, name), callback);\n  }\n\n  /**\n   * @param {String} keyspaceName\n   * @param {String} name\n   * @private\n   */\n  async _getAggregates(keyspaceName, name) {\n    if (!keyspaceName || !name) {\n      throw new errors.ArgumentError('You must provide the keyspace name and cql aggregate name to retrieve the metadata');\n    }\n    const functionsMap = await this._getFunctions(keyspaceName, name, true);\n    return Array.from(functionsMap.values());\n  }\n\n  /**\n   * Gets a definition of CQL aggregate for a given name and signature.\n   * <p>\n   *   If a <code>callback</code> is provided, the callback is invoked when the metadata retrieval completes.\n   *   Otherwise, it returns a <code>Promise</code>.\n   * </p>\n   * <p>\n   * When trying to retrieve the same aggregate definition concurrently, it will query once and invoke all callbacks\n   * with the retrieved information.\n   * </p>\n   * @param {String} keyspaceName Name of the keyspace\n   * @param {String} name Name of the aggregate\n   * @param {Array.<String>|Array.<{code, info}>} signature Array of types of the parameters.\n   * @param {Function} [callback] The callback with the err as a first parameter and the {@link Aggregate} as second parameter.\n   */\n  getAggregate(keyspaceName, name, signature, callback) {\n    return promiseUtils.optionalCallback(this._getSingleFunction(keyspaceName, name, signature, true), callback);\n  }\n\n  /**\n   * Gets the definition of a CQL materialized view for a given name.\n   * <p>\n   *   If a <code>callback</code> is provided, the callback is invoked when the metadata retrieval completes.\n   *   Otherwise, it returns a <code>Promise</code>.\n   * </p>\n   * <p>\n   *   Note that, unlike the rest of the {@link Metadata} methods, this method does not cache the result for following\n   *   calls, as the current version of the Cassandra native protocol does not support schema change events for\n   *   materialized views. Each call to this method will produce one or more queries to the cluster.\n   * </p>\n   * @param {String} keyspaceName Name of the keyspace\n   * @param {String} name Name of the materialized view\n   * @param {Function} [callback] The callback with the err as a first parameter and the {@link MaterializedView} as\n   * second parameter.\n   */\n  getMaterializedView(keyspaceName, name, callback) {\n    return promiseUtils.optionalCallback(this._getMaterializedView(keyspaceName, name), callback);\n  }\n\n  /**\n   * @param {String} keyspaceName\n   * @param {String} name\n   * @returns {Promise<MaterializedView|null>}\n   * @private\n   */\n  async _getMaterializedView(keyspaceName, name) {\n    if (!this.initialized) {\n      throw this._uninitializedError();\n    }\n    let cache;\n    if (this.options.isMetadataSyncEnabled) {\n      const keyspace = this.keyspaces[keyspaceName];\n      if (!keyspace) {\n        return null;\n      }\n      cache = keyspace.views;\n    }\n    return await this._schemaParser.getMaterializedView(keyspaceName, name, cache);\n  }\n\n  /**\n   * Gets a map of cql function definitions or aggregates based on signature.\n   * @param {String} keyspaceName\n   * @param {String} name Name of the function or aggregate\n   * @param {Boolean} aggregate\n   * @returns {Promise<Map>}\n   * @private\n   */\n  async _getFunctions(keyspaceName, name, aggregate) {\n    if (!this.initialized) {\n      throw this._uninitializedError();\n    }\n    let cache;\n    if (this.options.isMetadataSyncEnabled) {\n      const keyspace = this.keyspaces[keyspaceName];\n      if (!keyspace) {\n        return new Map();\n      }\n      cache = aggregate ? keyspace.aggregates : keyspace.functions;\n    }\n    return await this._schemaParser.getFunctions(keyspaceName, name, aggregate, cache);\n  }\n\n  /**\n   * Gets a single cql function or aggregate definition\n   * @param {String} keyspaceName\n   * @param {String} name\n   * @param {Array} signature\n   * @param {Boolean} aggregate\n   * @returns {Promise<SchemaFunction|Aggregate|null>}\n   * @private\n   */\n  async _getSingleFunction(keyspaceName, name, signature, aggregate) {\n    if (!keyspaceName || !name) {\n      throw new errors.ArgumentError('You must provide the keyspace name and cql function name to retrieve the metadata');\n    }\n    if (!Array.isArray(signature)) {\n      throw new errors.ArgumentError('Signature must be an array of types');\n    }\n    signature = signature.map(item => {\n      if (typeof item === 'string') {\n        return item;\n      }\n      return types.getDataTypeNameByCode(item);\n    });\n    const functionsMap = await this._getFunctions(keyspaceName, name, aggregate);\n    return functionsMap.get(signature.join(',')) || null;\n  }\n\n  /**\n   * Gets the trace session generated by Cassandra when query tracing is enabled for the\n   * query. The trace itself is stored in Cassandra in the <code>sessions</code> and\n   * <code>events</code> table in the <code>system_traces</code> keyspace and can be\n   * retrieve manually using the trace identifier.\n   * <p>\n   *   If a <code>callback</code> is provided, the callback is invoked when the metadata retrieval completes.\n   *   Otherwise, it returns a <code>Promise</code>.\n   * </p>\n   * @param {Uuid} traceId Identifier of the trace session.\n   * @param {Number} [consistency] The consistency level to obtain the trace.\n   * @param {Function} [callback] The callback with the err as first parameter and the query trace as second parameter.\n   */\n  getTrace(traceId, consistency, callback) {\n    if (!callback && typeof consistency === 'function') {\n      // Both callback and consistency are optional parameters\n      // In this case, the second parameter is the callback\n      callback = consistency;\n      consistency = null;\n    }\n\n    return promiseUtils.optionalCallback(this._getTrace(traceId, consistency), callback);\n  }\n\n  /**\n   * @param {Uuid} traceId\n   * @param {Number} consistency\n   * @returns {Promise<Object>}\n   * @private\n   */\n  async _getTrace(traceId, consistency) {\n    if (!this.initialized) {\n      throw this._uninitializedError();\n    }\n\n    let trace;\n    let attempts = 0;\n    const info = ExecutionOptions.empty();\n    info.getConsistency = () => consistency;\n\n    const sessionRequest = new requests.QueryRequest(util.format(_selectTraceSession, traceId), null, info);\n    const eventsRequest = new requests.QueryRequest(util.format(_selectTraceEvents, traceId), null, info);\n\n    while (!trace && (attempts++ < _traceMaxAttemps)) {\n      const sessionResponse = await this.controlConnection.query(sessionRequest);\n      const sessionRow = sessionResponse.rows[0];\n\n      if (!sessionRow || typeof sessionRow['duration'] !== 'number') {\n        await promiseUtils.delay(_traceAttemptDelay);\n        continue;\n      }\n\n      trace = {\n        requestType: sessionRow['request'],\n        coordinator: sessionRow['coordinator'],\n        parameters: sessionRow['parameters'],\n        startedAt: sessionRow['started_at'],\n        duration: sessionRow['duration'],\n        clientAddress: sessionRow['client'],\n        events: null\n      };\n\n      const eventsResponse = await this.controlConnection.query(eventsRequest);\n      trace.events = eventsResponse.rows.map(row => ({\n        id: row['event_id'],\n        activity: row['activity'],\n        source: row['source'],\n        elapsed: row['source_elapsed'],\n        thread: row['thread']\n      }));\n    }\n\n    if (!trace) {\n      throw new Error(`Trace ${traceId.toString()} could not fully retrieved after ${_traceMaxAttemps} attempts`);\n    }\n\n    return trace;\n  }\n\n  /**\n   * Checks whether hosts that are currently up agree on the schema definition.\n   * <p>\n   *   This method performs a one-time check only, without any form of retry; therefore\n   *   <code>protocolOptions.maxSchemaAgreementWaitSeconds</code> setting does not apply in this case.\n   * </p>\n   * @param {Function} [callback] A function that is invoked with a value\n   * <code>true</code> when all hosts agree on the schema and <code>false</code> when there is no agreement or when\n   * the check could not be performed (for example, if the control connection is down).\n   * @returns {Promise} Returns a <code>Promise</code> when a callback is not provided. The promise resolves to\n   * <code>true</code> when all hosts agree on the schema and <code>false</code> when there is no agreement or when\n   * the check could not be performed (for example, if the control connection is down).\n   */\n  checkSchemaAgreement(callback) {\n    return promiseUtils.optionalCallback(this._checkSchemaAgreement(), callback);\n  }\n\n  /**\n   * Async-only version of check schema agreement.\n   * @private\n   */\n  async _checkSchemaAgreement() {\n    const connection = this.controlConnection.connection;\n    if (!connection) {\n      return false;\n    }\n    try {\n      return await this.compareSchemaVersions(connection);\n    }\n    catch (err) {\n      return false;\n    }\n  }\n\n  /**\n   * Uses the metadata to fill the user provided parameter hints\n   * @param {String} keyspace\n   * @param {Array} hints\n   * @internal\n   * @ignore\n   */\n  async adaptUserHints(keyspace, hints) {\n    if (!Array.isArray(hints)) {\n      return;\n    }\n    const udts = [];\n    // Check for udts and get the metadata\n    for (let i = 0; i < hints.length; i++) {\n      const hint = hints[i];\n      if (typeof hint !== 'string') {\n        continue;\n      }\n\n      const type = types.dataTypes.getByName(hint);\n      this._checkUdtTypes(udts, type, keyspace);\n      hints[i] = type;\n    }\n\n    for (const type of udts) {\n      const udtInfo = await this.getUdt(type.info.keyspace, type.info.name);\n      if (!udtInfo) {\n        throw new TypeError('User defined type not found: ' + type.info.keyspace + '.' + type.info.name);\n      }\n      type.info = udtInfo;\n    }\n  }\n\n  /**\n   * @param {Array} udts\n   * @param {{code, info}} type\n   * @param {string} keyspace\n   * @private\n   */\n  _checkUdtTypes(udts, type, keyspace) {\n    if (type.code === types.dataTypes.udt) {\n      const udtName = type.info.split('.');\n      type.info = {\n        keyspace: udtName[0],\n        name: udtName[1]\n      };\n      if (!type.info.name) {\n        if (!keyspace) {\n          throw new TypeError('No keyspace specified for udt: ' + udtName.join('.'));\n        }\n        //use the provided keyspace\n        type.info.name = type.info.keyspace;\n        type.info.keyspace = keyspace;\n      }\n      udts.push(type);\n      return;\n    }\n\n    if (!type.info) {\n      return;\n    }\n    if (type.code === types.dataTypes.list || type.code === types.dataTypes.set) {\n      return this._checkUdtTypes(udts, type.info, keyspace);\n    }\n    if (type.code === types.dataTypes.map) {\n      this._checkUdtTypes(udts, type.info[0], keyspace);\n      this._checkUdtTypes(udts, type.info[1], keyspace);\n    }\n  }\n\n  /**\n   * Uses the provided connection to query the schema versions and compare them.\n   * @param {Connection} connection\n   * @internal\n   * @ignore\n   */\n  async compareSchemaVersions(connection) {\n    const versions = new Set();\n    const response1 = await connection.send(new requests.QueryRequest(_selectSchemaVersionLocal), null);\n    if (response1 && response1.rows && response1.rows.length === 1) {\n      versions.add(response1.rows[0]['schema_version'].toString());\n    }\n    const response2 = await connection.send(new requests.QueryRequest(_selectSchemaVersionPeers), null);\n    if (response2 && response2.rows) {\n      for (const row of response2.rows) {\n        const value = row['schema_version'];\n        if (!value) {\n          continue;\n        }\n        versions.add(value.toString());\n      }\n    }\n    return versions.size === 1;\n  }\n}\n\n/**\n * Allows to store prepared queries and retrieval by query or query id.\n * @ignore\n */\nclass PreparedQueries {\n\n  /**\n   * @param {Number} maxPrepared\n   * @param {Function} logger\n   */\n  constructor(maxPrepared, logger) {\n    this.length = 0;\n    this._maxPrepared = maxPrepared;\n    this._mapByKey = new Map();\n    this._mapById = new Map();\n    this._logger = logger;\n  }\n\n  _getKey(keyspace, query) {\n    return (keyspace || '') + query;\n  }\n\n  getOrAdd(keyspace, query) {\n    const key = this._getKey(keyspace, query);\n    let info = this._mapByKey.get(key);\n    if (info) {\n      return info;\n    }\n\n    this._validateOverflow();\n\n    info = new events.EventEmitter();\n    info.setMaxListeners(0);\n    info.query = query;\n    // The keyspace in which it was prepared\n    info.keyspace = keyspace;\n    this._mapByKey.set(key, info);\n    this.length++;\n    return info;\n  }\n\n  _validateOverflow() {\n    if (this.length < this._maxPrepared) {\n      return;\n    }\n\n    const toRemove = [];\n    this._logger('warning',\n      'Prepared statements exceeded maximum. This could be caused by preparing queries that contain parameters');\n\n    const toRemoveLength = this.length - this._maxPrepared + 1;\n\n    for (const [key, info] of this._mapByKey) {\n      if (!info.queryId) {\n        // Only remove queries that contain queryId\n        continue;\n      }\n\n      const length = toRemove.push([key, info]);\n      if (length >= toRemoveLength) {\n        break;\n      }\n    }\n\n    for (const [key, info] of toRemove) {\n      this._mapByKey.delete(key);\n      this._mapById.delete(info.queryId.toString('hex'));\n      this.length--;\n    }\n  }\n\n  setById(info) {\n    this._mapById.set(info.queryId.toString('hex'), info);\n  }\n\n  getById(id) {\n    return this._mapById.get(id.toString('hex'));\n  }\n\n  clear() {\n    this._mapByKey = new Map();\n    this._mapById = new Map();\n    this.length = 0;\n  }\n\n  getAll() {\n    return Array.from(this._mapByKey.values()).filter(info => !!info.queryId);\n  }\n}\n\nmodule.exports = Metadata;\n", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst util = require('util');\nconst utils = require('../utils');\nconst promiseUtils = require('../promise-utils');\n\nconst _queueOverflowThreshold = 1000;\n\n/**\n * Debounce protocol events by acting on those events with a sliding delay.\n * @ignore\n * @constructor\n */\nclass EventDebouncer {\n\n  /**\n   * Creates a new instance of the event debouncer.\n   * @param {Number} delay\n   * @param {Function} logger\n   */\n  constructor(delay, logger) {\n    this._delay = delay;\n    this._logger = logger;\n    this._queue = null;\n    this._timeout = null;\n  }\n\n  /**\n   * Adds a new event to the queue and moves the delay.\n   * @param {{ handler: Function, all: boolean|undefined, keyspace: String|undefined,\n   * cqlObject: String|null|undefined }} event\n   * @param {Boolean} processNow\n   * @returns {Promise}\n   */\n  eventReceived(event, processNow) {\n    return new Promise((resolve, reject) => {\n      event.callback = promiseUtils.getCallback(resolve, reject);\n      this._queue = this._queue || { callbacks: [], keyspaces: {} };\n      const delay = !processNow ? this._delay : 0;\n      if (event.all) {\n        // when an event marked with all is received, it supersedes all the rest of events\n        // a full update (hosts + keyspaces + tokens) is going to be made\n        this._queue.mainEvent = event;\n      }\n      if (this._queue.callbacks.length === _queueOverflowThreshold) {\n        // warn once\n        this._logger('warn', util.format('Event debouncer queue exceeded %d events', _queueOverflowThreshold));\n      }\n      this._queue.callbacks.push(event.callback);\n      if (this._queue.mainEvent) {\n        // a full refresh is scheduled and the callback was added, nothing else to do.\n        return this._slideDelay(delay);\n      }\n      // Insert at keyspace level\n      let keyspaceEvents = this._queue.keyspaces[event.keyspace];\n      if (!keyspaceEvents) {\n        keyspaceEvents = this._queue.keyspaces[event.keyspace] = { events: [] };\n      }\n      if (event.cqlObject === undefined) {\n        // a full refresh of the keyspace, supersedes all child keyspace events\n        keyspaceEvents.mainEvent = event;\n      }\n      keyspaceEvents.events.push(event);\n      this._slideDelay(delay);\n    });\n  }\n\n  /**\n   * @param {Number} delay\n   * @private\n   * */\n  _slideDelay(delay) {\n    const self = this;\n    function process() {\n      const q = self._queue;\n      self._queue = null;\n      self._timeout = null;\n      processQueue(q);\n    }\n    if (delay === 0) {\n      // no delay, process immediately\n      if (this._timeout) {\n        clearTimeout(this._timeout);\n      }\n      return process();\n    }\n    const previousTimeout = this._timeout;\n    // Add the new timeout before removing the previous one performs better\n    this._timeout = setTimeout(process, delay);\n    if (previousTimeout) {\n      clearTimeout(previousTimeout);\n    }\n  }\n\n  /**\n   * Clears the timeout and invokes all pending callback.\n   */\n  shutdown() {\n    if (!this._queue) {\n      return;\n    }\n    this._queue.callbacks.forEach(function (cb) {\n      cb();\n    });\n    this._queue = null;\n    clearTimeout(this._timeout);\n    this._timeout = null;\n  }\n}\n\n/**\n * @param {{callbacks: Array, keyspaces: Object, mainEvent: Object}} q\n * @private\n */\nfunction processQueue (q) {\n  if (q.mainEvent) {\n    // refresh all by invoking 1 handler and invoke all pending callbacks\n    return promiseUtils.toCallback(q.mainEvent.handler(), (err) => {\n      for (let i = 0; i < q.callbacks.length; i++) {\n        q.callbacks[i](err);\n      }\n    });\n  }\n\n  utils.each(Object.keys(q.keyspaces), function eachKeyspace(name, next) {\n    const keyspaceEvents = q.keyspaces[name];\n    if (keyspaceEvents.mainEvent) {\n      // refresh a keyspace\n      return promiseUtils.toCallback(keyspaceEvents.mainEvent.handler(), function mainEventCallback(err) {\n        for (let i = 0; i < keyspaceEvents.events.length; i++) {\n          keyspaceEvents.events[i].callback(err);\n        }\n\n        next();\n      });\n    }\n\n    // deal with individual handlers and callbacks\n    keyspaceEvents.events.forEach(event => {\n      // sync handlers\n      event.handler();\n      event.callback();\n    });\n\n    next();\n  });\n}\n\nmodule.exports = EventDebouncer;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst events = require('events');\nconst util = require('util');\nconst net = require('net');\nconst dns = require('dns');\n\nconst errors = require('./errors');\nconst { Host, HostMap } = require('./host');\nconst Metadata = require('./metadata');\nconst EventDebouncer = require('./metadata/event-debouncer');\nconst Connection = require('./connection');\nconst requests = require('./requests');\nconst utils = require('./utils');\nconst types = require('./types');\nconst promiseUtils = require('./promise-utils');\nconst f = util.format;\n\nconst selectPeers = \"SELECT * FROM system.peers\";\nconst selectLocal = \"SELECT * FROM system.local WHERE key='local'\";\nconst newNodeDelay = 1000;\nconst metadataQueryAbortTimeout = 2000;\nconst schemaChangeTypes = {\n  created: 'CREATED',\n  updated: 'UPDATED',\n  dropped: 'DROPPED'\n};\nconst supportedProductTypeKey = 'PRODUCT_TYPE';\nconst supportedDbaas = 'DATASTAX_APOLLO';\n\n/**\n * Represents a connection used by the driver to receive events and to check the status of the cluster.\n * <p>It uses an existing connection from the hosts' connection pool to maintain the driver metadata up-to-date.</p>\n */\nclass ControlConnection extends events.EventEmitter {\n\n  /**\n   * Creates a new instance of <code>ControlConnection</code>.\n   * @param {Object} options\n   * @param {ProfileManager} profileManager\n   * @param {{borrowHostConnection: function, createConnection: function}} [context] An object containing methods to\n   * allow dependency injection.\n   */\n  constructor(options, profileManager, context) {\n    super();\n\n    this.protocolVersion = null;\n    this.hosts = new HostMap();\n    this.setMaxListeners(0);\n    this.log = utils.log;\n    Object.defineProperty(this, \"options\", { value: options, enumerable: false, writable: false});\n\n    /**\n     * Cluster metadata that is going to be shared between the Client and ControlConnection\n     */\n    this.metadata = new Metadata(this.options, this);\n    this.initialized = false;\n\n    /**\n     * Host used by the control connection\n     * @type {Host|null}\n     */\n    this.host = null;\n\n    /**\n     * Connection used to retrieve metadata and subscribed to events\n     * @type {Connection|null}\n     */\n    this.connection = null;\n\n    this._addressTranslator = this.options.policies.addressResolution;\n    this._reconnectionPolicy = this.options.policies.reconnection;\n    this._reconnectionSchedule = this._reconnectionPolicy.newSchedule();\n    this._isShuttingDown = false;\n\n    // Reference to the encoder of the last valid connection\n    this._encoder = null;\n    this._debouncer = new EventDebouncer(options.refreshSchemaDelay, this.log.bind(this));\n    this._profileManager = profileManager;\n    this._triedHosts = null;\n    this._resolvedContactPoints = new Map();\n    this._contactPoints = new Set();\n\n    // Timeout used for delayed handling of topology changes\n    this._topologyChangeTimeout = null;\n    // Timeout used for delayed handling of node status changes\n    this._nodeStatusChangeTimeout = null;\n\n    if (context && context.borrowHostConnection) {\n      this._borrowHostConnection = context.borrowHostConnection;\n    }\n\n    if (context && context.createConnection) {\n      this._createConnection = context.createConnection;\n    }\n  }\n\n  /**\n   * Stores the contact point information and what it resolved to.\n   * @param {String|null} address\n   * @param {String} port\n   * @param {String} name\n   * @param {Boolean} isIPv6\n   */\n  _addContactPoint(address, port, name, isIPv6) {\n    if (address === null) {\n      // Contact point could not be resolved, store that the resolution came back empty\n      this._resolvedContactPoints.set(name, utils.emptyArray);\n      return;\n    }\n\n    const portNumber = parseInt(port, 10) || this.options.protocolOptions.port;\n    const endpoint = `${address}:${portNumber}`;\n    this._contactPoints.add(endpoint);\n\n    // Use RFC 3986 for IPv4 and IPv6\n    const standardEndpoint = !isIPv6 ? endpoint : `[${address}]:${portNumber}`;\n\n    let resolvedAddressedByName = this._resolvedContactPoints.get(name);\n\n    // NODEJS-646\n    //\n    // We might have a frozen empty array if DNS resolution wasn't working when this name was\n    // initially added, and if that's the case we can't add anything.  Detect that case and\n    // reset to a mutable array.\n    if (resolvedAddressedByName === undefined || resolvedAddressedByName === utils.emptyArray) {\n      resolvedAddressedByName = [];\n      this._resolvedContactPoints.set(name, resolvedAddressedByName);\n    }\n\n    resolvedAddressedByName.push(standardEndpoint);\n  }\n\n  async _parseContactPoint(name) {\n    let addressOrName = name;\n    let port = null;\n\n    if (name.indexOf('[') === 0 && name.indexOf(']:') > 1) {\n      // IPv6 host notation [ip]:port (RFC 3986 section 3.2.2)\n      const index = name.lastIndexOf(']:');\n      addressOrName = name.substr(1, index - 1);\n      port = name.substr(index + 2);\n    } else if (name.indexOf(':') > 0) {\n      // IPv4 or host name with port notation\n      const parts = name.split(':');\n      if (parts.length === 2) {\n        addressOrName = parts[0];\n        port = parts[1];\n      }\n    }\n\n    if (net.isIP(addressOrName)) {\n      this._addContactPoint(addressOrName, port, name, net.isIPv6(addressOrName));\n      return;\n    }\n\n    const addresses = await this._resolveAll(addressOrName);\n    if (addresses.length > 0) {\n      addresses.forEach(addressInfo => this._addContactPoint(addressInfo.address, port, name, addressInfo.isIPv6));\n    } else {\n      // Store that we attempted resolving the name but was not found\n      this._addContactPoint(null, null, name, false);\n    }\n  }\n\n  /**\n   * Initializes the control connection by establishing a Connection using a suitable protocol\n   * version to be used and retrieving cluster metadata.\n   */\n  async init() {\n    if (this.initialized) {\n      // Prevent multiple serial initializations\n      return;\n    }\n\n    if (!this.options.sni) {\n      // Parse and resolve contact points\n      await Promise.all(this.options.contactPoints.map(name => this._parseContactPoint(name)));\n    } else {\n      this.options.contactPoints.forEach(cp => this._contactPoints.add(cp));\n      const address = this.options.sni.address;\n      const separatorIndex = address.lastIndexOf(':');\n\n      if (separatorIndex === -1) {\n        throw new new errors.DriverInternalError('The SNI endpoint address should contain ip/name and port');\n      }\n\n      const nameOrIp = address.substr(0, separatorIndex);\n      this.options.sni.port = address.substr(separatorIndex + 1);\n      this.options.sni.addressResolver = new utils.AddressResolver({ nameOrIp, dns });\n      await this.options.sni.addressResolver.init();\n    }\n\n    if (this._contactPoints.size === 0) {\n      throw new errors.NoHostAvailableError({}, 'No host could be resolved');\n    }\n\n    await this._initializeConnection();\n  }\n\n  _setHealthListeners(host, connection) {\n    const self = this;\n    let wasRefreshCalled = 0;\n\n    function removeListeners() {\n      host.removeListener('down', downOrIgnoredHandler);\n      host.removeListener('ignore', downOrIgnoredHandler);\n      connection.removeListener('socketClose', socketClosedHandler);\n    }\n\n    function startReconnecting(hostDown) {\n      if (wasRefreshCalled++ !== 0) {\n        // Prevent multiple calls to reconnect\n        return;\n      }\n\n      removeListeners();\n\n      if (self._isShuttingDown) {\n        // Don't attempt to reconnect when the ControlConnection is being shutdown\n        return;\n      }\n\n      if (hostDown) {\n        self.log('warning',\n          `Host ${host.address} used by the ControlConnection DOWN, ` +\n          `connection to ${connection.endpointFriendlyName} will not longer be used`);\n      } else {\n        self.log('warning', `Connection to ${connection.endpointFriendlyName} used by the ControlConnection was closed`);\n      }\n\n      promiseUtils.toBackground(self._refresh());\n    }\n\n    function downOrIgnoredHandler() {\n      startReconnecting(true);\n    }\n\n    function socketClosedHandler() {\n      startReconnecting(false);\n    }\n\n    host.once('down', downOrIgnoredHandler);\n    host.once('ignore', downOrIgnoredHandler);\n    connection.once('socketClose', socketClosedHandler);\n  }\n\n  /**\n   * Iterates through the hostIterator and Gets the following open connection.\n   * @param {Iterator<Host>} hostIterator\n   * @returns {Connection!}\n   */\n  _borrowAConnection(hostIterator) {\n    let connection = null;\n\n    while (!connection) {\n      const item = hostIterator.next();\n      const host = item.value;\n\n      if (item.done) {\n        throw new errors.NoHostAvailableError(this._triedHosts);\n      }\n\n      // Only check distance once the load-balancing policies have been initialized\n      const distance = this._profileManager.getDistance(host);\n      if (!host.isUp() || distance === types.distance.ignored) {\n        continue;\n      }\n\n      try {\n        connection = this._borrowHostConnection(host);\n      } catch (err) {\n        this._triedHosts[host.address] = err;\n      }\n    }\n\n    return connection;\n  }\n\n  /**\n   * Iterates through the contact points and tries to open a connection.\n   * @param {Iterator<string>} contactPointsIterator\n   * @returns {Promise<void>}\n   */\n  async _borrowFirstConnection(contactPointsIterator) {\n    let connection = null;\n\n    while (!connection) {\n      const item = contactPointsIterator.next();\n      const contactPoint = item.value;\n\n      if (item.done) {\n        throw new errors.NoHostAvailableError(this._triedHosts);\n      }\n\n      try {\n        connection = await this._createConnection(contactPoint);\n      } catch (err) {\n        this._triedHosts[contactPoint] = err;\n      }\n    }\n\n    if (!connection) {\n      const err = new errors.NoHostAvailableError(this._triedHosts);\n      this.log('error', 'ControlConnection failed to acquire a connection');\n      throw err;\n    }\n\n    this.protocolVersion = connection.protocolVersion;\n    this._encoder = connection.encoder;\n    this.connection = connection;\n  }\n\n  /** Default implementation for borrowing connections, that can be injected at constructor level */\n  _borrowHostConnection(host) {\n    // Borrow any open connection, regardless of the keyspace\n    return host.borrowConnection();\n  }\n\n  /**\n   * Default implementation for creating initial connections, that can be injected at constructor level\n   * @param {String} contactPoint\n   */\n  async _createConnection(contactPoint) {\n    const c = new Connection(contactPoint, null, this.options);\n\n    try {\n      await c.openAsync();\n    } catch (err) {\n      promiseUtils.toBackground(c.closeAsync());\n      throw err;\n    }\n\n    return c;\n  }\n\n  /**\n   * Gets the info from local and peer metadata, reloads the keyspaces metadata and rebuilds tokens.\n   * <p>It throws an error when there's a failure or when reconnecting and there's no connection.</p>\n   * @param {Boolean} initializing Determines whether this function was called in order to initialize the control\n   * connection the first time\n   * @param {Boolean} isReconnecting Determines whether the refresh is being done because the ControlConnection is\n   * switching to use this connection to this host.\n   */\n  async _refreshHosts(initializing, isReconnecting) {\n    // Get a reference to the current connection as it might change from external events\n    const c = this.connection;\n\n    if (!c) {\n      if (isReconnecting) {\n        throw new errors.DriverInternalError('Connection reference has been lost when reconnecting');\n      }\n\n      // it's possible that this was called as a result of a topology change, but the connection was lost\n      // between scheduling time and now. This will be called again when there is a new connection.\n      return;\n    }\n\n    this.log('info', 'Refreshing local and peers info');\n\n    const rsLocal = await c.send(new requests.QueryRequest(selectLocal), null);\n    this._setLocalInfo(initializing, isReconnecting, c, rsLocal);\n\n    if (!this.host) {\n      throw new errors.DriverInternalError('Information from system.local could not be retrieved');\n    }\n\n    const rsPeers = await c.send(new requests.QueryRequest(selectPeers), null);\n    await this.setPeersInfo(initializing, rsPeers);\n\n    if (!this.initialized) {\n      // resolve protocol version from highest common version among hosts.\n      const highestCommon = types.protocolVersion.getHighestCommon(c, this.hosts);\n      const reconnect = highestCommon !== this.protocolVersion;\n\n      // set protocol version on each host.\n      this.protocolVersion = highestCommon;\n      this.hosts.forEach(h => h.setProtocolVersion(this.protocolVersion));\n\n      // if protocol version changed, reconnect the control connection with new version.\n      if (reconnect) {\n        this.log('info', `Reconnecting since the protocol version changed to 0x${highestCommon.toString(16)}`);\n        c.decreaseVersion(this.protocolVersion);\n        await c.closeAsync();\n\n        try {\n          await c.openAsync();\n        } catch (err) {\n          // Close in the background\n          promiseUtils.toBackground(c.closeAsync());\n\n          throw err;\n        }\n      }\n\n      // To acquire metadata we need to specify the cassandra version\n      this.metadata.setCassandraVersion(this.host.getCassandraVersion());\n      this.metadata.buildTokens(this.hosts);\n\n      if (!this.options.isMetadataSyncEnabled) {\n        this.metadata.initialized = true;\n        return;\n      }\n\n      await this.metadata.refreshKeyspacesInternal(false);\n      this.metadata.initialized = true;\n    }\n  }\n\n  async _refreshControlConnection(hostIterator) {\n\n    if (this.options.sni) {\n      this.connection = this._borrowAConnection(hostIterator);\n    }\n    else {\n      try { this.connection = this._borrowAConnection(hostIterator); }\n      catch(err) {\n\n        /* NODEJS-632: refresh nodes before getting hosts for reconnect since some hostnames may have\n         * shifted during the flight. */\n        this.log(\"info\", \"ControlConnection could not reconnect using existing connections.  Refreshing contact points and retrying\");\n        this._contactPoints.clear();\n        this._resolvedContactPoints.clear();\n        await Promise.all(this.options.contactPoints.map(name => this._parseContactPoint(name)));\n        const refreshedContactPoints = Array.from(this._contactPoints).join(',');\n        this.log('info', `Refreshed contact points: ${refreshedContactPoints}`);\n        await this._initializeConnection();\n      }\n    }\n  }\n\n  /**\n   * Acquires a new connection and refreshes topology and keyspace metadata.\n   * <p>When it fails obtaining a connection and there aren't any more hosts, it schedules reconnection.</p>\n   * <p>When it fails obtaining the metadata, it marks connection and/or host unusable and retries using the same\n   * iterator from query plan / host list</p>\n   * @param {Iterator<Host>} [hostIterator]\n   */\n  async _refresh(hostIterator) {\n    if (this._isShuttingDown) {\n      this.log('info', 'The ControlConnection will not be refreshed as the Client is being shutdown');\n      return;\n    }\n\n    // Reset host and connection\n    this.host = null;\n    this.connection = null;\n\n    try {\n      if (!hostIterator) {\n        this.log('info', 'Trying to acquire a connection to a new host');\n        this._triedHosts = {};\n        hostIterator = await promiseUtils.newQueryPlan(this._profileManager.getDefaultLoadBalancing(), null, null);\n      }\n\n      await this._refreshControlConnection(hostIterator);\n    } catch (err) {\n      // There was a failure obtaining a connection or during metadata retrieval\n      this.log('error', 'ControlConnection failed to acquire a connection', err);\n\n      if (!this._isShuttingDown) {\n        const delay = this._reconnectionSchedule.next().value;\n        this.log('warning', `ControlConnection could not reconnect, scheduling reconnection in ${delay}ms`);\n        setTimeout(() => this._refresh(), delay);\n        this.emit('newConnection', err);\n      }\n\n      return;\n    }\n\n    this.log('info',`ControlConnection connected to ${this.connection.endpointFriendlyName}`);\n\n    try {\n      await this._refreshHosts(false, true);\n\n      await this._registerToConnectionEvents();\n    } catch (err) {\n      this.log('error', 'ControlConnection failed to retrieve topology and keyspaces information', err);\n      this._triedHosts[this.connection.endpoint] = err;\n\n      if (err.isSocketError && this.host) {\n        this.host.removeFromPool(this.connection);\n      }\n\n      // Retry the whole thing with the same query plan\n      return await this._refresh(hostIterator);\n    }\n\n    this._reconnectionSchedule = this._reconnectionPolicy.newSchedule();\n    this._setHealthListeners(this.host, this.connection);\n    this.emit('newConnection', null, this.connection, this.host);\n\n    this.log('info', `ControlConnection connected to ${this.connection.endpointFriendlyName} and up to date`);\n  }\n\n  /**\n   * Acquires a connection and refreshes topology and keyspace metadata for the first time.\n   * @returns {Promise<void>}\n   */\n  async _initializeConnection() {\n    this.log('info', 'Getting first connection');\n\n    // Reset host and connection\n    this.host = null;\n    this.connection = null;\n    this._triedHosts = {};\n\n    // Randomize order of contact points resolved.\n    const contactPointsIterator = utils.shuffleArray(Array.from(this._contactPoints))[Symbol.iterator]();\n\n    while (true) {\n      await this._borrowFirstConnection(contactPointsIterator);\n\n      this.log('info', `ControlConnection using protocol version 0x${\n        this.protocolVersion.toString(16)}, connected to ${this.connection.endpointFriendlyName}`);\n\n      try {\n        await this._getSupportedOptions();\n        await this._refreshHosts(true, true);\n        await this._registerToConnectionEvents();\n\n        // We have a valid connection, leave the loop\n        break;\n\n      } catch (err) {\n        this.log('error', 'ControlConnection failed to retrieve topology and keyspaces information', err);\n        this._triedHosts[this.connection.endpoint] = err;\n      }\n    }\n\n    // The healthy connection used to initialize should be part of the Host pool\n    this.host.pool.addExistingConnection(this.connection);\n\n    this.initialized = true;\n    this._setHealthListeners(this.host, this.connection);\n    this.log('info', `ControlConnection connected to ${this.connection.endpointFriendlyName}`);\n  }\n\n  async _getSupportedOptions() {\n    const response = await this.connection.send(requests.options, null);\n\n    // response.supported is a string multi map, decoded as an Object.\n    const productType = response.supported && response.supported[supportedProductTypeKey];\n    if (Array.isArray(productType) && productType[0] === supportedDbaas) {\n      this.metadata.setProductTypeAsDbaas();\n    }\n  }\n\n  async _registerToConnectionEvents() {\n    this.connection.on('nodeTopologyChange', this._nodeTopologyChangeHandler.bind(this));\n    this.connection.on('nodeStatusChange', this._nodeStatusChangeHandler.bind(this));\n    this.connection.on('nodeSchemaChange', this._nodeSchemaChangeHandler.bind(this));\n    const request = new requests.RegisterRequest(['TOPOLOGY_CHANGE', 'STATUS_CHANGE', 'SCHEMA_CHANGE']);\n    await this.connection.send(request, null);\n  }\n\n  /**\n   * Handles a TOPOLOGY_CHANGE event\n   */\n  _nodeTopologyChangeHandler(event) {\n    this.log('info', 'Received topology change', event);\n\n    // all hosts information needs to be refreshed as tokens might have changed\n    clearTimeout(this._topologyChangeTimeout);\n\n    // Use an additional timer to make sure that the refresh hosts is executed only AFTER the delay\n    // In this case, the event debouncer doesn't help because it could not honor the sliding delay (ie: processNow)\n    this._topologyChangeTimeout = setTimeout(() =>\n      promiseUtils.toBackground(this._scheduleRefreshHosts()), newNodeDelay);\n  }\n\n  /**\n   * Handles a STATUS_CHANGE event\n   */\n  _nodeStatusChangeHandler(event) {\n    const self = this;\n    const addressToTranslate = event.inet.address.toString();\n    const port = this.options.protocolOptions.port;\n    this._addressTranslator.translate(addressToTranslate, port, function translateCallback(endPoint) {\n      const host = self.hosts.get(endPoint);\n      if (!host) {\n        self.log('warning', 'Received status change event but host was not found: ' + addressToTranslate);\n        return;\n      }\n      const distance = self._profileManager.getDistance(host);\n      if (event.up) {\n        if (distance === types.distance.ignored) {\n          return host.setUp(true);\n        }\n        clearTimeout(self._nodeStatusChangeTimeout);\n        // Waits a couple of seconds before marking it as UP\n        self._nodeStatusChangeTimeout = setTimeout(() => host.checkIsUp(), newNodeDelay);\n        return;\n      }\n      // marked as down\n      if (distance === types.distance.ignored) {\n        return host.setDown();\n      }\n      self.log('warning', 'Received status change to DOWN for host ' + host.address);\n    });\n  }\n\n  /**\n   * Handles a SCHEMA_CHANGE event\n   */\n  _nodeSchemaChangeHandler(event) {\n    this.log('info', 'Schema change', event);\n    if (!this.options.isMetadataSyncEnabled) {\n      return;\n    }\n\n    promiseUtils.toBackground(this.handleSchemaChange(event, false));\n  }\n\n  /**\n   * Schedules metadata refresh and callbacks when is refreshed.\n   * @param {{keyspace: string, isKeyspace: boolean, schemaChangeType, table, udt, functionName, aggregate}} event\n   * @param {Boolean} processNow\n   * @returns {Promise<void>}\n   */\n  handleSchemaChange(event, processNow) {\n    const self = this;\n    let handler, cqlObject;\n\n    if (event.isKeyspace) {\n      if (event.schemaChangeType === schemaChangeTypes.dropped) {\n        handler = function removeKeyspace() {\n          // if on the same event queue there is a creation, this handler is not going to be executed\n          // it is safe to remove the keyspace metadata\n          delete self.metadata.keyspaces[event.keyspace];\n        };\n\n        return this._scheduleObjectRefresh(handler, event.keyspace, null, processNow);\n      }\n\n      return this._scheduleKeyspaceRefresh(event.keyspace, processNow);\n    }\n\n    const ksInfo = this.metadata.keyspaces[event.keyspace];\n    if (!ksInfo) {\n      // it hasn't been loaded and it is not part of the metadata, don't mind\n      return Promise.resolve();\n    }\n\n    if (event.table) {\n      cqlObject = event.table;\n      handler = function clearTableState() {\n        delete ksInfo.tables[event.table];\n        delete ksInfo.views[event.table];\n      };\n    }\n    else if (event.udt) {\n      cqlObject = event.udt;\n      handler = function clearUdtState() {\n        delete ksInfo.udts[event.udt];\n      };\n    }\n    else if (event.functionName) {\n      cqlObject = event.functionName;\n      handler = function clearFunctionState() {\n        delete ksInfo.functions[event.functionName];\n      };\n    }\n    else if (event.aggregate) {\n      cqlObject = event.aggregate;\n      handler = function clearKeyspaceState() {\n        delete ksInfo.aggregates[event.aggregate];\n      };\n    }\n\n    if (!handler) {\n      // Forward compatibility\n      return Promise.resolve();\n    }\n\n    // It's a cql object change clean the internal cache\n    return this._scheduleObjectRefresh(handler, event.keyspace, cqlObject, processNow);\n  }\n\n  /**\n   * @param {Function} handler\n   * @param {String} keyspace\n   * @param {String} cqlObject\n   * @param {Boolean} processNow\n   * @returns {Promise<void>}\n   */\n  _scheduleObjectRefresh(handler, keyspace, cqlObject, processNow) {\n    return this._debouncer.eventReceived({ handler, keyspace, cqlObject }, processNow);\n  }\n\n  /**\n   * @param {String} keyspace\n   * @param {Boolean} processNow\n   * @returns {Promise<void>}\n   */\n  _scheduleKeyspaceRefresh(keyspace, processNow) {\n    return this._debouncer.eventReceived({\n      handler: () => this.metadata.refreshKeyspace(keyspace),\n      keyspace\n    }, processNow);\n  }\n\n  /** @returns {Promise<void>} */\n  _scheduleRefreshHosts() {\n    return this._debouncer.eventReceived({\n      handler: () => this._refreshHosts(false, false),\n      all: true\n    }, false);\n  }\n\n  /**\n   * Sets the information for the host used by the control connection.\n   * @param {Boolean} initializing\n   * @param {Connection} c\n   * @param {Boolean} setCurrentHost Determines if the host retrieved must be set as the current host\n   * @param result\n   */\n  _setLocalInfo(initializing, setCurrentHost, c, result) {\n    if (!result || !result.rows || !result.rows.length) {\n      this.log('warning', 'No local info could be obtained');\n      return;\n    }\n\n    const row = result.rows[0];\n\n    let localHost;\n\n    // Note that with SNI enabled, we can trust that rpc_address will contain a valid value.\n    const endpoint = !this.options.sni\n      ? c.endpoint\n      : `${row['rpc_address']}:${this.options.protocolOptions.port}`;\n\n    if (initializing) {\n      localHost = new Host(endpoint, this.protocolVersion, this.options, this.metadata);\n      this.hosts.set(endpoint, localHost);\n      this.log('info', `Adding host ${endpoint}`);\n    } else {\n      localHost = this.hosts.get(endpoint);\n\n      if (!localHost) {\n        this.log('error', 'Localhost could not be found');\n        return;\n      }\n    }\n\n    localHost.datacenter = row['data_center'];\n    localHost.rack = row['rack'];\n    localHost.tokens = row['tokens'];\n    localHost.hostId = row['host_id'];\n    localHost.cassandraVersion = row['release_version'];\n    setDseParameters(localHost, row);\n    this.metadata.setPartitioner(row['partitioner']);\n    this.log('info', 'Local info retrieved');\n\n    if (setCurrentHost) {\n      // Set the host as the one being used by the ControlConnection.\n      this.host = localHost;\n    }\n  }\n\n  /**\n   * @param {Boolean} initializing Determines whether this function was called in order to initialize the control\n   * connection the first time.\n   * @param {ResultSet} result\n   */\n  async setPeersInfo(initializing, result) {\n    if (!result || !result.rows) {\n      return;\n    }\n\n    // A map of peers, could useful for in case there are discrepancies\n    const peers = {};\n    const port = this.options.protocolOptions.port;\n    const foundDataCenters = new Set();\n\n    if (this.host && this.host.datacenter) {\n      foundDataCenters.add(this.host.datacenter);\n    }\n\n    for (const row of result.rows) {\n      const endpoint = await this.getAddressForPeerHost(row, port);\n\n      if (!endpoint) {\n        continue;\n      }\n\n      peers[endpoint] = true;\n      let host = this.hosts.get(endpoint);\n      let isNewHost = !host;\n\n      if (isNewHost) {\n        host = new Host(endpoint, this.protocolVersion, this.options, this.metadata);\n        this.log('info', `Adding host ${endpoint}`);\n        isNewHost = true;\n      }\n\n      host.datacenter = row['data_center'];\n      host.rack = row['rack'];\n      host.tokens = row['tokens'];\n      host.hostId = row['host_id'];\n      host.cassandraVersion = row['release_version'];\n      setDseParameters(host, row);\n\n      if (host.datacenter) {\n        foundDataCenters.add(host.datacenter);\n      }\n\n      if (isNewHost) {\n        // Add it to the map (and trigger events) after all the properties\n        // were set to avoid race conditions\n        this.hosts.set(endpoint, host);\n\n        if (!initializing) {\n          // Set the distance at Host level, that way the connection pool is created with the correct settings\n          this._profileManager.getDistance(host);\n\n          // When we are not initializing, we start with the node set as DOWN\n          host.setDown();\n        }\n      }\n    }\n\n    // Is there a difference in number between peers + local != hosts\n    if (this.hosts.length > result.rows.length + 1) {\n      // There are hosts in the current state that don't belong (nodes removed or wrong contactPoints)\n      this.log('info', 'Removing nodes from the pool');\n      const toRemove = [];\n\n      this.hosts.forEach(h => {\n        //It is not a peer and it is not local host\n        if (!peers[h.address] && h !== this.host) {\n          this.log('info', 'Removing host ' + h.address);\n          toRemove.push(h.address);\n          h.shutdown(true);\n        }\n      });\n\n      this.hosts.removeMultiple(toRemove);\n    }\n\n    if (initializing && this.options.localDataCenter) {\n      const localDc = this.options.localDataCenter;\n\n      if (!foundDataCenters.has(localDc)) {\n        throw new errors.ArgumentError(`localDataCenter was configured as '${\n          localDc}', but only found hosts in data centers: [${Array.from(foundDataCenters).join(', ')}]`);\n      }\n    }\n\n    this.log('info', 'Peers info retrieved');\n  }\n\n  /**\n   * Gets the address from a peers row and translates the address.\n   * @param {Object|Row} row\n   * @param {Number} defaultPort\n   * @returns {Promise<string>}\n   */\n  getAddressForPeerHost(row, defaultPort) {\n    return new Promise(resolve => {\n      let address = row['rpc_address'];\n      const peer = row['peer'];\n      const bindAllAddress = '0.0.0.0';\n\n      if (!address) {\n        this.log('error', f('No rpc_address found for host %s in %s\\'s peers system table. %s will be ignored.',\n          peer, this.host.address, peer));\n        return resolve(null);\n      }\n\n      if (address.toString() === bindAllAddress) {\n        this.log('warning', f('Found host with 0.0.0.0 as rpc_address, using listen_address (%s) to contact it instead.' +\n          ' If this is incorrect you should avoid the use of 0.0.0.0 server side.', peer));\n        address = peer;\n      }\n\n      this._addressTranslator.translate(address.toString(), defaultPort, resolve);\n    });\n  }\n\n  /**\n   * Uses the DNS protocol to resolve a IPv4 and IPv6 addresses (A and AAAA records) for the hostname.\n   * It returns an Array of addresses that can be empty and logs the error.\n   * @private\n   * @param name\n   */\n  async _resolveAll(name) {\n    const addresses = [];\n    const resolve4 = util.promisify(dns.resolve4);\n    const resolve6 = util.promisify(dns.resolve6);\n    const lookup = util.promisify(dns.lookup);\n\n    // Ignore errors for resolve calls\n    const ipv4Promise = resolve4(name).catch(() => {}).then(r => r || utils.emptyArray);\n    const ipv6Promise = resolve6(name).catch(() => {}).then(r => r || utils.emptyArray);\n\n    let arr;\n    arr = await ipv4Promise;\n    arr.forEach(address => addresses.push({address, isIPv6: false}));\n\n    arr = await ipv6Promise;\n    arr.forEach(address => addresses.push({address, isIPv6: true}));\n\n    if (addresses.length === 0) {\n      // In case dns.resolve*() methods don't yield a valid address for the host name\n      // Use system call getaddrinfo() that might resolve according to host system definitions\n      try {\n        arr = await lookup(name, { all: true });\n        arr.forEach(({address, family}) => addresses.push({address, isIPv6: family === 6}));\n      } catch (err) {\n        this.log('error', `Host with name ${name} could not be resolved`, err);\n      }\n    }\n\n    return addresses;\n  }\n\n  /**\n   * Waits for a connection to be available. If timeout expires before getting a connection it callbacks in error.\n   * @returns {Promise<void>}\n   */\n  _waitForReconnection() {\n    return new Promise((resolve, reject) => {\n      const callback = promiseUtils.getCallback(resolve, reject);\n\n      // eslint-disable-next-line prefer-const\n      let timeout;\n\n      function newConnectionListener(err) {\n        clearTimeout(timeout);\n        callback(err);\n      }\n\n      this.once('newConnection', newConnectionListener);\n\n      timeout = setTimeout(() => {\n        this.removeListener('newConnection', newConnectionListener);\n        callback(new errors.OperationTimedOutError('A connection could not be acquired before timeout.'));\n      }, metadataQueryAbortTimeout);\n    });\n  }\n\n  /**\n   * Executes a query using the active connection\n   * @param {String|Request} cqlQuery\n   * @param {Boolean} [waitReconnect] Determines if it should wait for reconnection in case the control connection is not\n   * connected at the moment. Default: true.\n   */\n  async query(cqlQuery, waitReconnect = true) {\n    const queryOnConnection = async () => {\n      if (!this.connection || this._isShuttingDown) {\n        throw new errors.NoHostAvailableError({}, 'ControlConnection is not connected at the time');\n      }\n\n      const request = typeof cqlQuery === 'string' ? new requests.QueryRequest(cqlQuery, null, null) : cqlQuery;\n      return await this.connection.send(request, null);\n    };\n\n    if (!this.connection && waitReconnect) {\n      // Wait until its reconnected (or timer elapses)\n      await this._waitForReconnection();\n    }\n\n    return await queryOnConnection();\n  }\n\n  /** @returns {Encoder} The encoder used by the current connection */\n  getEncoder() {\n    if (!this._encoder) {\n      throw new errors.DriverInternalError('Encoder is not defined');\n    }\n    return this._encoder;\n  }\n\n  /**\n   * Cancels all timers and shuts down synchronously.\n   */\n  shutdown() {\n    this._isShuttingDown = true;\n    this._debouncer.shutdown();\n    // Emit a \"newConnection\" event with Error, as it may clear timeouts that were waiting new connections\n    this.emit('newConnection', new errors.DriverError('ControlConnection is being shutdown'));\n    // Cancel timers\n    clearTimeout(this._topologyChangeTimeout);\n    clearTimeout(this._nodeStatusChangeTimeout);\n  }\n\n  /**\n   * Resets the Connection to its initial state.\n   */\n  async reset() {\n    // Reset the internal state of the ControlConnection for future initialization attempts\n    const currentHosts = this.hosts.clear();\n\n    // Set the shutting down flag temporarily to avoid reconnects.\n    this._isShuttingDown = true;\n\n    // Shutdown all individual pools, ignoring any shutdown error\n    await Promise.all(currentHosts.map(h => h.shutdown()));\n\n    this.initialized = false;\n    this._isShuttingDown = false;\n  }\n\n  /**\n   * Gets a Map containing the original contact points and the addresses that each one resolved to.\n   */\n  getResolvedContactPoints() {\n    return this._resolvedContactPoints;\n  }\n\n  /**\n   * Gets the local IP address to which the control connection socket is bound to.\n   * @returns {String|undefined}\n   */\n  getLocalAddress() {\n    if (!this.connection) {\n      return undefined;\n    }\n\n    return this.connection.getLocalAddress();\n  }\n\n  /**\n   * Gets the address and port of host the control connection is connected to.\n   * @returns {String|undefined}\n   */\n  getEndpoint() {\n    if (!this.connection) {\n      return undefined;\n    }\n\n    return this.connection.endpoint;\n  }\n}\n\n/**\n * Parses the DSE workload and assigns it to a host.\n * @param {Host} host\n * @param {Row} row\n * @private\n */\nfunction setDseParameters(host, row) {\n  if (row['workloads'] !== undefined) {\n    host.workloads = row['workloads'];\n  }\n  else if (row['workload']) {\n    host.workloads = [ row['workload'] ];\n  }\n  else {\n    host.workloads = utils.emptyArray;\n  }\n\n  if (row['dse_version'] !== undefined) {\n    host.dseVersion = row['dse_version'];\n  }\n}\n\nmodule.exports = ControlConnection;\n", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst errors = require('./errors');\nconst requests = require('./requests');\nconst retry = require('./policies/retry');\nconst types = require('./types');\nconst utils = require('./utils');\nconst promiseUtils = require('./promise-utils');\n\nconst retryOnCurrentHost = Object.freeze({\n  decision: retry.RetryPolicy.retryDecision.retry,\n  useCurrentHost: true,\n  consistency: undefined\n});\n\nconst rethrowDecision = Object.freeze({ decision: retry.RetryPolicy.retryDecision.rethrow });\n\n/**\n * An internal representation of an error that occurred during the execution of a request.\n */\nconst errorCodes = {\n  none: 0,\n  // Socket error\n  socketError: 1,\n  // Socket error before the request was written to the wire\n  socketErrorBeforeRequestWritten: 2,\n  // OperationTimedOutError\n  clientTimeout: 3,\n  // Response error \"unprepared\"\n  serverErrorUnprepared: 4,\n  // Response error \"overloaded\", \"is_bootstrapping\" and \"truncateError\":\n  serverErrorOverloaded: 5,\n  serverErrorReadTimeout: 6,\n  serverErrorUnavailable: 7,\n  serverErrorWriteTimeout: 8,\n  // Any other server error (different from the ones detailed above)\n  serverErrorOther: 9\n};\n\nconst metricsHandlers = new Map([\n  [ errorCodes.none, (metrics, err, latency) => metrics.onSuccessfulResponse(latency) ],\n  [ errorCodes.socketError, (metrics, err) => metrics.onConnectionError(err) ],\n  [ errorCodes.clientTimeout, (metrics, err) => metrics.onClientTimeoutError(err) ],\n  [ errorCodes.serverErrorOverloaded, (metrics, err) => metrics.onOtherError(err) ],\n  [ errorCodes.serverErrorReadTimeout, (metrics, err) => metrics.onReadTimeoutError(err) ],\n  [ errorCodes.serverErrorUnavailable, (metrics, err) => metrics.onUnavailableError(err) ],\n  [ errorCodes.serverErrorWriteTimeout, (metrics, err) => metrics.onWriteTimeoutError(err) ],\n  [ errorCodes.serverErrorOther, (metrics, err) => metrics.onOtherError(err) ]\n]);\n\nconst metricsRetryHandlers = new Map([\n  [ errorCodes.socketError, (metrics, err) => metrics.onOtherErrorRetry(err) ],\n  [ errorCodes.clientTimeout, (metrics, err) => metrics.onClientTimeoutRetry(err) ],\n  [ errorCodes.serverErrorOverloaded, (metrics, err) => metrics.onOtherErrorRetry(err) ],\n  [ errorCodes.serverErrorReadTimeout, (metrics, err) => metrics.onReadTimeoutRetry(err) ],\n  [ errorCodes.serverErrorUnavailable, (metrics, err) => metrics.onUnavailableRetry(err) ],\n  [ errorCodes.serverErrorWriteTimeout, (metrics, err) => metrics.onWriteTimeoutRetry(err) ],\n  [ errorCodes.serverErrorOther, (metrics, err) => metrics.onOtherErrorRetry(err) ]\n]);\n\nclass RequestExecution {\n  /**\n   * Encapsulates a single flow of execution against a coordinator, handling individual retries and failover.\n   * @param {RequestHandler!} parent\n   * @param {Host!} host\n   * @param {Connection!} connection\n   */\n  constructor(parent, host, connection) {\n    this._parent = parent;\n    /** @type {OperationState} */\n    this._operation = null;\n    this._host = host;\n    this._connection = connection;\n    this._cancelled = false;\n    this._startTime = null;\n    this._retryCount = 0;\n    // The streamId information is not included in the request.\n    // A pointer to the parent request can be used, except when changing the consistency level from the retry policy\n    this._request = this._parent.request;\n\n    // Mark that it launched a new execution\n    parent.speculativeExecutions++;\n  }\n\n  /**\n   * Sends the request using the active connection.\n   */\n  start() {\n    this._sendOnConnection();\n  }\n\n  /**\n   * Borrows the next connection available using the query plan and sends the request.\n   * @returns {Promise<void>}\n   */\n  async restart() {\n    try {\n      const { host, connection } = this._parent.getNextConnection();\n\n      this._connection = connection;\n      this._host = host;\n    } catch (err) {\n      return this._parent.handleNoHostAvailable(err, this);\n    }\n\n    // It could be a new connection from the pool, we should make sure it's in the correct keyspace.\n    const keyspace = this._parent.client.keyspace;\n    if (keyspace && keyspace !== this._connection.keyspace) {\n      try {\n        await this._connection.changeKeyspace(keyspace);\n      } catch (err) {\n        // When its a socket error, attempt to retry.\n        // Otherwise, rethrow the error to the user.\n        return this._handleError(err, RequestExecution._getErrorCode(err));\n      }\n    }\n\n    if (this._cancelled) {\n      // No need to send the request or invoke any callback\n      return;\n    }\n\n    this._sendOnConnection();\n  }\n\n  /**\n   * Sends the request using the active connection.\n   * @private\n   */\n  _sendOnConnection() {\n    this._startTime = process.hrtime();\n\n    this._operation =\n      this._connection.sendStream(this._request, this._parent.executionOptions, (err, response, length) => {\n        const errorCode = RequestExecution._getErrorCode(err);\n\n        this._trackResponse(process.hrtime(this._startTime), errorCode, err, length);\n\n        if (this._cancelled) {\n          // Avoid handling the response / err\n          return;\n        }\n\n        if (errorCode !== errorCodes.none) {\n          return this._handleError(errorCode, err);\n        }\n\n        if (response.schemaChange) {\n          return promiseUtils.toBackground(\n            this._parent.client\n              .handleSchemaAgreementAndRefresh(this._connection, response.schemaChange)\n              .then(agreement => {\n                if (this._cancelled) {\n                  // After the schema agreement method was started, this execution was cancelled\n                  return;\n                }\n\n                this._parent.setCompleted(null, this._getResultSet(response, agreement));\n              })\n          );\n        }\n\n        if (response.keyspaceSet) {\n          this._parent.client.keyspace = response.keyspaceSet;\n        }\n\n        if (response.meta && response.meta.newResultId && this._request.queryId) {\n          // Update the resultId on the existing prepared statement.\n          // Eventually would want to update the result metadata as well (NODEJS-433)\n          const info = this._parent.client.metadata.getPreparedById(this._request.queryId);\n          info.meta.resultId = response.meta.newResultId;\n        }\n\n        this._parent.setCompleted(null, this._getResultSet(response));\n      });\n  }\n\n  _trackResponse(latency, errorCode, err, length) {\n    // Record metrics\n    RequestExecution._invokeMetricsHandler(errorCode, this._parent.client.metrics, err, latency);\n\n    // Request tracker\n    const tracker = this._parent.client.options.requestTracker;\n\n    if (tracker === null) {\n      return;\n    }\n\n    // Avoid using instanceof as property check is faster\n    const query = this._request.query || this._request.queries;\n    const parameters = this._request.params;\n    const requestLength = this._request.length;\n\n    if (err) {\n      tracker.onError(this._host, query, parameters, this._parent.executionOptions, requestLength, err, latency);\n    } else {\n      tracker.onSuccess(this._host, query, parameters, this._parent.executionOptions, requestLength, length, latency);\n    }\n  }\n\n  _getResultSet(response, agreement) {\n    const rs = new types.ResultSet(response, this._host.address, this._parent.triedHosts, this._parent.speculativeExecutions,\n      this._request.consistency, agreement === undefined || agreement);\n\n    if (rs.rawPageState) {\n      rs.nextPageAsync = this._parent.getNextPageHandler();\n    }\n\n    return rs;\n  }\n\n  /**\n   * Gets the method of the {ClientMetrics} instance depending on the error code and invokes it.\n   * @param {Number} errorCode\n   * @param {ClientMetrics} metrics\n   * @param {Error} err\n   * @param {Array} latency\n   * @private\n   */\n  static _invokeMetricsHandler(errorCode, metrics, err, latency) {\n    const handler = metricsHandlers.get(errorCode);\n    if (handler !== undefined) {\n      handler(metrics, err, latency);\n    }\n\n    if (!err || err instanceof errors.ResponseError) {\n      metrics.onResponse(latency);\n    }\n  }\n\n  /**\n   * Gets the method of the {ClientMetrics} instance related to retry depending on the error code and invokes it.\n   * @param {Number} errorCode\n   * @param {ClientMetrics} metrics\n   * @param {Error} err\n   * @private\n   */\n  static _invokeMetricsHandlerForRetry(errorCode, metrics, err) {\n    const handler = metricsRetryHandlers.get(errorCode);\n\n    if (handler !== undefined) {\n      handler(metrics, err);\n    }\n  }\n\n  /**\n   * Allows the handler to cancel the current request.\n   * When the request has been already written, we can unset the callback and forget about it.\n   */\n  cancel() {\n    this._cancelled = true;\n\n    if (this._operation === null) {\n      return;\n    }\n\n    this._operation.cancel();\n  }\n\n  /**\n   * Determines if the current execution was cancelled.\n   */\n  wasCancelled() {\n    return this._cancelled;\n  }\n\n  _handleError(errorCode, err) {\n    this._parent.triedHosts[this._host.address] = err;\n    err['coordinator'] = this._host.address;\n\n    if (errorCode === errorCodes.serverErrorUnprepared) {\n      return this._prepareAndRetry(err.queryId);\n    }\n\n    if (errorCode === errorCodes.socketError || errorCode === errorCodes.socketErrorBeforeRequestWritten) {\n      this._host.removeFromPool(this._connection);\n    } else if (errorCode === errorCodes.clientTimeout) {\n      this._parent.log('warning', err.message);\n      this._host.checkHealth(this._connection);\n    }\n\n    const decisionInfo = this._getDecision(errorCode, err);\n\n    if (!decisionInfo || decisionInfo.decision === retry.RetryPolicy.retryDecision.rethrow) {\n      if (this._request instanceof requests.QueryRequest || this._request instanceof requests.ExecuteRequest) {\n        err['query'] = this._request.query;\n      }\n      return this._parent.setCompleted(err);\n    }\n\n    const metrics = this._parent.client.metrics;\n\n    if (decisionInfo.decision === retry.RetryPolicy.retryDecision.ignore) {\n      metrics.onIgnoreError(err);\n\n      // Return an empty ResultSet\n      return this._parent.setCompleted(null, this._getResultSet(utils.emptyObject));\n    }\n\n    RequestExecution._invokeMetricsHandlerForRetry(errorCode, metrics, err);\n\n    return this._retry(decisionInfo.consistency, decisionInfo.useCurrentHost);\n  }\n\n  /**\n   * Gets a decision whether or not to retry based on the error information.\n   * @param {Number} errorCode\n   * @param {Error} err\n   * @returns {{decision, useCurrentHost, consistency}}\n   */\n  _getDecision(errorCode, err) {\n    const operationInfo = {\n      query: this._request && this._request.query,\n      executionOptions: this._parent.executionOptions,\n      nbRetry: this._retryCount\n    };\n\n    const retryPolicy = operationInfo.executionOptions.getRetryPolicy();\n\n    switch (errorCode) {\n      case errorCodes.socketErrorBeforeRequestWritten:\n        // The request was definitely not applied, it's safe to retry.\n        // Retry on the current host as there might be other connections open, in case it fails to obtain a connection\n        // on the current host, the driver will immediately retry on the next host.\n        return retryOnCurrentHost;\n      case errorCodes.socketError:\n      case errorCodes.clientTimeout:\n      case errorCodes.serverErrorOverloaded:\n        if (operationInfo.executionOptions.isIdempotent()) {\n          return retryPolicy.onRequestError(operationInfo, this._request.consistency, err);\n        }\n        return rethrowDecision;\n      case errorCodes.serverErrorUnavailable:\n        return retryPolicy.onUnavailable(operationInfo, err.consistencies, err.required, err.alive);\n      case errorCodes.serverErrorReadTimeout:\n        return retryPolicy.onReadTimeout(\n          operationInfo, err.consistencies, err.received, err.blockFor, err.isDataPresent);\n      case errorCodes.serverErrorWriteTimeout:\n        if (operationInfo.executionOptions.isIdempotent()) {\n          return retryPolicy.onWriteTimeout(\n            operationInfo, err.consistencies, err.received, err.blockFor, err.writeType);\n        }\n        return rethrowDecision;\n      default:\n        return rethrowDecision;\n    }\n  }\n\n  static _getErrorCode(err) {\n    if (!err) {\n      return errorCodes.none;\n    }\n\n    if (err.isSocketError) {\n      if (err.requestNotWritten) {\n        return errorCodes.socketErrorBeforeRequestWritten;\n      }\n      return errorCodes.socketError;\n    }\n\n    if (err instanceof errors.OperationTimedOutError) {\n      return errorCodes.clientTimeout;\n    }\n\n    if (err instanceof errors.ResponseError) {\n      switch (err.code) {\n        case types.responseErrorCodes.overloaded:\n        case types.responseErrorCodes.isBootstrapping:\n        case types.responseErrorCodes.truncateError:\n          return errorCodes.serverErrorOverloaded;\n        case types.responseErrorCodes.unavailableException:\n          return errorCodes.serverErrorUnavailable;\n        case types.responseErrorCodes.readTimeout:\n          return errorCodes.serverErrorReadTimeout;\n        case types.responseErrorCodes.writeTimeout:\n          return errorCodes.serverErrorWriteTimeout;\n        case types.responseErrorCodes.unprepared:\n          return errorCodes.serverErrorUnprepared;\n      }\n    }\n\n    return errorCodes.serverErrorOther;\n  }\n\n  /**\n   * @param {Number|undefined} consistency\n   * @param {Boolean} useCurrentHost\n   * @param {Object} [meta]\n   * @private\n   */\n  _retry(consistency, useCurrentHost, meta) {\n    if (this._cancelled) {\n      // No point in retrying\n      return;\n    }\n\n    this._parent.log('info', 'Retrying request');\n    this._retryCount++;\n\n    if (meta || (typeof consistency === 'number' && this._request.consistency !== consistency)) {\n      this._request = this._request.clone();\n      if (typeof consistency === 'number') {\n        this._request.consistency = consistency;\n      }\n      // possible that we are retrying because we had to reprepare.  In this case it is also possible\n      // that our known metadata had changed, therefore we update it on the request.\n      if (meta) {\n        this._request.meta = meta;\n      }\n    }\n\n    if (useCurrentHost !== false) {\n      // Reusing the existing connection is suitable for the most common scenarios, like server read timeouts that\n      // will be fixed with a new request.\n      // To cover all scenarios (e.g., where a different connection to the same host might mean something different),\n      // we obtain a new connection from the host pool.\n      // When there was a socket error, the connection provided was already removed from the pool earlier.\n      try {\n        this._connection = this._host.borrowConnection(this._connection);\n      } catch (err) {\n        // All connections are busy (`BusyConnectionError`) or there isn't a ready connection in the pool (`Error`)\n        // The retry policy declared the intention to retry on the current host but its not available anymore.\n        // Use the next host\n        return promiseUtils.toBackground(this.restart());\n      }\n\n      return this._sendOnConnection();\n    }\n\n    // Use the next host in the query plan to send the request in the background\n    promiseUtils.toBackground(this.restart());\n  }\n\n  /**\n   * Issues a PREPARE request on the current connection.\n   * If there's a socket or timeout issue, it moves to next host and executes the original request.\n   * @param {Buffer} queryId\n   * @private\n   */\n  _prepareAndRetry(queryId) {\n    const connection = this._connection;\n\n    this._parent.log('info',\n      `Query 0x${queryId.toString('hex')} not prepared on` +\n      ` host ${connection.endpointFriendlyName}, preparing and retrying`);\n\n    const info = this._parent.client.metadata.getPreparedById(queryId);\n\n    if (!info) {\n      return this._parent.setCompleted(new errors.DriverInternalError(\n        `Unprepared response invalid, id: 0x${queryId.toString('hex')}`));\n    }\n\n    const version = this._connection.protocolVersion;\n\n    if (!types.protocolVersion.supportsKeyspaceInRequest(version) && info.keyspace && info.keyspace !== connection.keyspace) {\n      return this._parent.setCompleted(\n        new Error(`Query was prepared on keyspace ${info.keyspace}, can't execute it on ${connection.keyspace} (${info.query})`));\n    }\n\n    const self = this;\n    this._connection.prepareOnce(info.query, info.keyspace, function (err, result) {\n      if (err) {\n        if (!err.isSocketError && err instanceof errors.OperationTimedOutError) {\n          self._parent.log('warning',\n            `Unexpected timeout error when re-preparing query on host ${connection.endpointFriendlyName}`);\n        }\n\n        // There was a failure re-preparing on this connection.\n        // Execute the original request on the next connection and forget about the PREPARE-UNPREPARE flow.\n        return self._retry(undefined, false);\n      }\n\n      // It's possible that when re-preparing we got new metadata (i.e. if schema changed), update cache.\n      info.meta = result.meta;\n      // pass the metadata so it can be used in retry.\n      self._retry(undefined, true, result.meta);\n    });\n  }\n}\n\nmodule.exports = RequestExecution;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst util = require('util');\n\nconst errors = require('./errors');\nconst types = require('./types');\nconst utils = require('./utils');\nconst RequestExecution = require('./request-execution');\nconst promiseUtils = require('./promise-utils');\n\n/**\n * Handles a BATCH, QUERY and EXECUTE request to the server, dealing with host fail-over and retries on error\n */\nclass RequestHandler {\n  /**\n   * Creates a new instance of RequestHandler.\n   * @param {Request} request\n   * @param {ExecutionOptions} execOptions\n   * @param {Client} client Client instance used to retrieve and set the keyspace.\n   */\n  constructor(request, execOptions, client) {\n    this.client = client;\n    this._speculativeExecutionPlan = client.options.policies.speculativeExecution.newPlan(\n      client.keyspace, request.query || request.queries);\n    this.logEmitter = client.options.logEmitter;\n    this.log = utils.log;\n    this.request = request;\n    this.executionOptions = execOptions;\n    this.stackContainer = null;\n    this.triedHosts = {};\n    // start at -1 as first request does not count.\n    this.speculativeExecutions = -1;\n    this._hostIterator = null;\n    this._resolveCallback = null;\n    this._rejectCallback = null;\n    this._newExecutionTimeout = null;\n    /** @type {RequestExecution[]} */\n    this._executions = [];\n  }\n\n  /**\n   * Sends a new BATCH, QUERY or EXECUTE request.\n   * @param {Request} request\n   * @param {ExecutionOptions} execOptions\n   * @param {Client} client Client instance used to retrieve and set the keyspace.\n   * @returns {Promise<ResultSet>}\n   */\n  static send(request, execOptions, client) {\n    const instance = new RequestHandler(request, execOptions, client);\n    return instance.send();\n  }\n\n  /**\n   * Gets a connection from the next host according to the query plan or throws a NoHostAvailableError.\n   * @returns {{host, connection}}\n   * @throws {NoHostAvailableError}\n   */\n  getNextConnection() {\n    let host;\n    let connection;\n    const iterator = this._hostIterator;\n\n    // Get a host that is UP in a sync loop\n    while (true) {\n      const item = iterator.next();\n      if (item.done) {\n        throw new errors.NoHostAvailableError(this.triedHosts);\n      }\n\n      host = item.value;\n\n      // Set the distance relative to the client first\n      const distance = this.client.profileManager.getDistance(host);\n      if (distance === types.distance.ignored) {\n        //If its marked as ignore by the load balancing policy, move on.\n        continue;\n      }\n\n      if (!host.isUp()) {\n        this.triedHosts[host.address] = 'Host considered as DOWN';\n        continue;\n      }\n\n      try {\n        connection = host.borrowConnection();\n        this.triedHosts[host.address] = null;\n        break;\n      } catch (err) {\n        this.triedHosts[host.address] = err;\n      }\n    }\n\n    return { connection, host };\n  }\n\n  /**\n   * Gets an available connection and sends the request\n   * @returns {Promise<ResultSet>}\n   */\n  send() {\n    if (this.executionOptions.getCaptureStackTrace()) {\n      Error.captureStackTrace(this.stackContainer = {});\n    }\n\n    return new Promise((resolve, reject) => {\n      this._resolveCallback = resolve;\n      this._rejectCallback = reject;\n\n      const lbp = this.executionOptions.getLoadBalancingPolicy();\n      const fixedHost = this.executionOptions.getFixedHost();\n\n      if (fixedHost) {\n        // if host is configured bypass load balancing policy and use\n        // a single host plan.\n        this._hostIterator = utils.arrayIterator([fixedHost]);\n        promiseUtils.toBackground(this._startNewExecution());\n      } else {\n        lbp.newQueryPlan(this.client.keyspace, this.executionOptions, (err, iterator) => {\n          if (err) {\n            return reject(err);\n          }\n\n          this._hostIterator = iterator;\n          promiseUtils.toBackground(this._startNewExecution());\n        });\n      }\n    });\n  }\n\n  /**\n   * Starts a new execution on the next host of the query plan.\n   * @param {Boolean} [isSpecExec]\n   * @returns {Promise<void>}\n   * @private\n   */\n  async _startNewExecution(isSpecExec) {\n    if (isSpecExec) {\n      this.client.metrics.onSpeculativeExecution();\n    }\n\n    let host;\n    let connection;\n\n    try {\n      ({ host, connection } = this.getNextConnection());\n    } catch (err) {\n      return this.handleNoHostAvailable(err, null);\n    }\n\n    if (isSpecExec && this._executions.length >= 0 && this._executions[0].wasCancelled()) {\n      // This method was called on the next tick and could not be cleared, the previous execution was cancelled so\n      // there's no point in launching a new execution.\n      return;\n    }\n\n    if (this.client.keyspace && this.client.keyspace !== connection.keyspace) {\n      try {\n        await connection.changeKeyspace(this.client.keyspace);\n      } catch (err) {\n        this.triedHosts[host.address] = err;\n        // The error occurred asynchronously\n        // We can blindly re-try to obtain a different host/connection.\n        return this._startNewExecution(isSpecExec);\n      }\n    }\n\n    const execution = new RequestExecution(this, host, connection);\n    this._executions.push(execution);\n    execution.start();\n\n    if (this.executionOptions.isIdempotent()) {\n      this._scheduleSpeculativeExecution(host);\n    }\n  }\n\n  /**\n   * Schedules next speculative execution, if any.\n   * @param {Host!} host\n   * @private\n   */\n  _scheduleSpeculativeExecution(host) {\n    const delay = this._speculativeExecutionPlan.nextExecution(host);\n    if (typeof delay !== 'number' || delay < 0) {\n      return;\n    }\n\n    if (delay === 0) {\n      // Parallel speculative execution\n      return process.nextTick(() => {\n        promiseUtils.toBackground(this._startNewExecution(true));\n      });\n    }\n\n    // Create timer for speculative execution\n    this._newExecutionTimeout = setTimeout(() =>\n      promiseUtils.toBackground(this._startNewExecution(true)), delay);\n  }\n\n  /**\n   * Sets the keyspace in any connection that is already opened.\n   * @param {Client} client\n   * @returns {Promise}\n   */\n  static setKeyspace(client) {\n    let connection;\n\n    for (const host of client.hosts.values()) {\n      connection = host.getActiveConnection();\n      if (connection) {\n        break;\n      }\n    }\n\n    if (!connection) {\n      throw new errors.DriverInternalError('No active connection found');\n    }\n\n    return connection.changeKeyspace(client.keyspace);\n  }\n\n  /**\n   * @param {Error} err\n   * @param {ResultSet} [result]\n   */\n  setCompleted(err, result) {\n    if (this._newExecutionTimeout !== null) {\n      clearTimeout(this._newExecutionTimeout);\n    }\n\n    // Mark all executions as cancelled\n    for (const execution of this._executions) {\n      execution.cancel();\n    }\n\n    if (err) {\n      if (this.executionOptions.getCaptureStackTrace()) {\n        utils.fixStack(this.stackContainer.stack, err);\n      }\n\n      // Reject the promise\n      return this._rejectCallback(err);\n    }\n\n    if (result.info.warnings) {\n      // Log the warnings from the response\n      result.info.warnings.forEach(function (message, i, warnings) {\n        this.log('warning', util.format(\n          'Received warning (%d of %d) \"%s\" for \"%s\"',\n          i + 1,\n          warnings.length,\n          message,\n          this.request.query || 'batch'));\n      }, this);\n    }\n\n    // We used to invoke the callback on next tick to allow stack unwinding and prevent the optimizing compiler to\n    // optimize read and write functions together.\n    // As we are resolving a Promise then() and catch() are always scheduled in the microtask queue\n    // We can invoke the resolve method directly.\n    this._resolveCallback(result);\n  }\n\n  /**\n   * @param {NoHostAvailableError} err\n   * @param {RequestExecution|null} execution\n   */\n  handleNoHostAvailable(err, execution) {\n    if (execution !== null) {\n      // Remove the execution\n      const index = this._executions.indexOf(execution);\n      this._executions.splice(index, 1);\n    }\n\n    if (this._executions.length === 0) {\n      // There aren't any other executions, we should report back to the user that there isn't\n      // a host available for executing the request\n      this.setCompleted(err);\n    }\n  }\n\n  /**\n   * Gets a long lived closure that can fetch the next page.\n   * @returns {Function}\n   */\n  getNextPageHandler() {\n    const request = this.request;\n    const execOptions = this.executionOptions;\n    const client = this.client;\n\n    return function nextPageHandler(pageState) {\n      execOptions.setPageState(pageState);\n      return new RequestHandler(request, execOptions, client).send();\n    };\n  }\n}\n\nmodule.exports = RequestHandler;\n", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst os = require('os');\nconst path = require('path');\nconst fs = require('fs');\nconst utils = require('./utils');\nconst promiseUtils = require('./promise-utils');\nconst types = require('./types');\nconst requests = require('./requests');\nconst { ExecutionOptions } = require('./execution-options');\nconst packageInfo = require('../package.json');\nconst VersionNumber = require('./types/version-number');\nconst { NoAuthProvider } = require('./auth');\n\nlet kerberosModule;\n\ntry {\n  // eslint-disable-next-line\n  kerberosModule = require('kerberos');\n}\ncatch (err) {\n  // Kerberos is an optional dependency\n}\n\nconst minDse6Version = new VersionNumber(6, 0, 5);\nconst minDse51Version = new VersionNumber(5, 1, 13);\nconst dse600Version = new VersionNumber(6, 0, 0);\nconst rpc = \"CALL InsightsRpc.reportInsight(?)\";\nconst maxStatusErrorLogs = 5;\n\n/**\n * Contains methods and functionality to send events to DSE Insights.\n */\nclass InsightsClient {\n\n  /**\n   * Creates a new instance of the {@link InsightsClient} using the driver {@link Client}.\n   * @param {Client} client\n   * @param {Object} [options]\n   * @param {Number} [options.statusEventDelay]\n   * @param {Function} [options.errorCallback]\n   */\n  constructor(client, options) {\n    this._client = client;\n    this._sessionId = types.Uuid.random().toString();\n    this._enabled = false;\n    this._closed = false;\n    this._firstTimeout = null;\n    this._recurrentTimeout = null;\n    this._statusErrorLogs = 0;\n\n    options = options || {};\n\n    this._statusEventDelay = options.statusEventDelay || 300000;\n    this._errorCallback = options.errorCallback || utils.noop;\n  }\n\n  /**\n   * Initializes the insights client in the background by sending the startup event and scheduling status events at\n   * regular intervals.\n   * @returns {undefined}\n   */\n  init() {\n    this._enabled = this._client.options.monitorReporting.enabled && this._dseSupportsInsights();\n    if (!this._enabled) {\n      return;\n    }\n\n    promiseUtils.toBackground(this._init());\n  }\n\n  async _init() {\n    try {\n      await this._sendStartupEvent();\n\n      if (this._closed) {\n        // The client was shutdown\n        return;\n      }\n\n      // Send the status event the first time with a delay containing some random portion\n      // Initial delay should be statusEventDelay - (0 to 10%)\n      const firstDelay = Math.floor(this._statusEventDelay - 0.1 * this._statusEventDelay * Math.random());\n      // Schedule the first timer\n      this._firstTimeout = setTimeout(() => {\n        // Send the first status event, the promise will never be rejected\n        this._sendStatusEvent();\n        // The following status events are sent at regular intervals\n        this._recurrentTimeout = setInterval(() => this._sendStatusEvent(), this._statusEventDelay);\n      }, firstDelay);\n    } catch (err) {\n      if (this._closed) {\n        // Sending failed because the Client was shutdown\n        return;\n      }\n      // We shouldn't try to recover\n      this._client.log('verbose', `Insights startup message could not be sent (${err})`, err);\n      this._errorCallback(err);\n    }\n  }\n\n  /**\n   * Sends the startup event.\n   * @returns {Promise}\n   * @private\n   */\n  async _sendStartupEvent() {\n    const message = await this._getStartupMessage();\n    const request = new requests.QueryRequest(rpc, [message], ExecutionOptions.empty());\n    await this._client.controlConnection.query(request, false);\n  }\n\n  /**\n   * Sends the status event.\n   * @returns {Promise} A promise that is never rejected.\n   * @private\n   */\n  async _sendStatusEvent() {\n    const request = new requests.QueryRequest(rpc, [ this._getStatusEvent() ], ExecutionOptions.empty());\n\n    try {\n      await this._client.controlConnection.query(request, false);\n    } catch (err) {\n      if (this._closed) {\n        // Sending failed because the Client was shutdown\n        return;\n      }\n\n      if (this._statusErrorLogs < maxStatusErrorLogs) {\n        this._client.log('warning', `Insights status message could not be sent (${err})`, err);\n        this._statusErrorLogs++;\n      }\n\n      this._errorCallback(err);\n    }\n  }\n\n  /**\n   * Validates the minimum server version for all nodes in the cluster.\n   * @private\n   */\n  _dseSupportsInsights() {\n    if (this._client.hosts.length === 0) {\n      return false;\n    }\n\n    return this._client.hosts.values().reduce((acc, host) => {\n      if (!acc) {\n        return acc;\n      }\n\n      const versionArr = host.getDseVersion();\n\n      if (versionArr.length === 0) {\n        return false;\n      }\n\n      const version = new VersionNumber(...versionArr);\n\n      return version.compare(minDse6Version) >= 0 ||\n        (version.compare(dse600Version) < 0 && version.compare(minDse51Version) >= 0);\n\n    }, true);\n  }\n\n  /**\n   * @returns {Promise<String>} Returns a json string with the startup message.\n   * @private\n   */\n  async _getStartupMessage() {\n    const cc = this._client.controlConnection;\n    const options = this._client.options;\n\n\n    const appInfo = await this._getAppInfo(options);\n    const message = {\n      metadata: {\n        name: 'driver.startup',\n        insightMappingId: 'v1',\n        insightType: 'EVENT',\n        timestamp: Date.now(),\n        tags: { language: 'nodejs' }\n      },\n      data: {\n        driverName: packageInfo.description,\n        driverVersion: packageInfo.version,\n        clientId: options.id,\n        sessionId: this._sessionId,\n        applicationName: appInfo.applicationName,\n        applicationVersion: appInfo.applicationVersion,\n        applicationNameWasGenerated: appInfo.applicationNameWasGenerated,\n        contactPoints: mapToObject(cc.getResolvedContactPoints()),\n        dataCenters: this._getDataCenters(),\n        initialControlConnection: cc.host ? cc.host.address : undefined,\n        protocolVersion: cc.protocolVersion,\n        localAddress: cc.getLocalAddress(),\n        hostName: os.hostname(),\n        executionProfiles: getExecutionProfiles(this._client),\n        poolSizeByHostDistance: {\n          local: options.pooling.coreConnectionsPerHost[types.distance.local],\n          remote: options.pooling.coreConnectionsPerHost[types.distance.remote]\n        },\n        heartbeatInterval: options.pooling.heartBeatInterval,\n        compression: 'NONE',\n        reconnectionPolicy: getPolicyInfo(options.policies.reconnection),\n        ssl: {\n          enabled: !!options.sslOptions,\n          certValidation: options.sslOptions ? !!options.sslOptions.rejectUnauthorized : undefined\n        },\n        authProvider: {\n          type: !(options.authProvider instanceof NoAuthProvider) ? getConstructor(options.authProvider) : undefined,\n        },\n        otherOptions: {\n          coalescingThreshold: options.socketOptions.coalescingThreshold,\n        },\n        platformInfo: {\n          os: {\n            name: os.platform(),\n            version: os.release(),\n            arch: os.arch()\n          },\n          cpus: {\n            length: os.cpus().length,\n            model: os.cpus()[0].model\n          },\n          runtime: {\n            node: process.versions['node'],\n            v8: process.versions['v8'],\n            uv: process.versions['uv'],\n            openssl: process.versions['openssl'],\n            kerberos: kerberosModule ? kerberosModule.version : undefined\n          }\n        },\n        configAntiPatterns: this._getConfigAntiPatterns(),\n        periodicStatusInterval: Math.floor(this._statusEventDelay / 1000)\n      }\n    };\n\n    return JSON.stringify(message);\n  }\n\n  _getConfigAntiPatterns() {\n    const options = this._client.options;\n    const result = {};\n\n    if (options.sslOptions && !options.sslOptions.rejectUnauthorized) {\n      result.sslWithoutCertValidation =\n        'Client-to-node encryption is enabled but server certificate validation is disabled';\n    }\n\n    return result;\n  }\n\n  /**\n   * Gets an array of data centers the driver connects to.\n   * Whether the driver connects to a certain host is determined by the host distance (local and remote hosts)\n   * and the pooling options (whether connection length for remote hosts is greater than 0).\n   * @returns {Array}\n   * @private\n   */\n  _getDataCenters() {\n    const remoteConnectionsLength = this._client.options.pooling.coreConnectionsPerHost[types.distance.remote];\n    const dataCenters = new Set();\n\n    this._client.hosts.values().forEach(h => {\n      const distance = this._client.profileManager.getDistance(h);\n      if (distance === types.distance.local || (distance === types.distance.remote && remoteConnectionsLength > 0)) {\n        dataCenters.add(h.datacenter);\n      }\n    });\n\n    return Array.from(dataCenters);\n  }\n\n  /**\n   * Tries to obtain the application name and version from\n   * @param {DseClientOptions} options\n   * @returns {Promise}\n   * @private\n   */\n  async _getAppInfo(options) {\n    if (typeof options.applicationName === 'string') {\n      return Promise.resolve({\n        applicationName: options.applicationName,\n        applicationVersion: options.applicationVersion,\n        applicationNameWasGenerated: false\n      });\n    }\n\n    let readPromise = Promise.resolve();\n\n    if (require.main && require.main.filename) {\n      const packageInfoPath = path.dirname(require.main.filename);\n      readPromise = this._readPackageInfoFile(packageInfoPath);\n    }\n\n    const text = await readPromise;\n    let applicationName = 'Default Node.js Application';\n    let applicationVersion;\n\n    if (text) {\n      try {\n        const packageInfo = JSON.parse(text);\n        if (packageInfo.name) {\n          applicationName = packageInfo.name;\n          applicationVersion = packageInfo.version;\n        }\n      }\n      catch (err) {\n        // The package.json file could not be parsed\n        // Use the default name\n      }\n    }\n\n    return {\n      applicationName,\n      applicationVersion,\n      applicationNameWasGenerated: true\n    };\n  }\n\n  /**\n   * @private\n   * @returns {Promise<string>} A Promise that will never be rejected\n   */\n  _readPackageInfoFile(packageInfoPath) {\n    return new Promise(resolve => {\n      fs.readFile(path.join(packageInfoPath, 'package.json'), 'utf8', (err, data) => {\n        // Swallow error\n        resolve(data);\n      });\n    });\n  }\n\n  /**\n   * @returns {String} Returns a json string with the startup message.\n   * @private\n   */\n  _getStatusEvent() {\n    const cc = this._client.controlConnection;\n    const options = this._client.options;\n    const state = this._client.getState();\n    const connectedNodes = {};\n\n    state.getConnectedHosts().forEach(h => {\n      connectedNodes[h.address] = {\n        connections: state.getOpenConnections(h),\n        inFlightQueries: state.getInFlightQueries(h)\n      };\n    });\n\n    const message = {\n      metadata: {\n        name: 'driver.status',\n        insightMappingId: 'v1',\n        insightType: 'EVENT',\n        timestamp: Date.now(),\n        tags: { language: 'nodejs' }\n      },\n      data: {\n        clientId: options.id,\n        sessionId: this._sessionId,\n        controlConnection: cc.host ? cc.host.address : undefined,\n        connectedNodes\n      }\n    };\n\n    return JSON.stringify(message);\n  }\n\n  /**\n   * Cleans any timer used internally and sets the client as closed.\n   */\n  shutdown() {\n    if (!this._enabled) {\n      return;\n    }\n\n    this._closed = true;\n\n    if (this._firstTimeout !== null) {\n      clearTimeout(this._firstTimeout);\n    }\n\n    if (this._recurrentTimeout !== null) {\n      clearInterval(this._recurrentTimeout);\n    }\n  }\n}\n\nmodule.exports = InsightsClient;\n\nfunction mapToObject(map) {\n  const result = {};\n  map.forEach((value, key) => result[key] = value);\n  return result;\n}\n\nfunction getPolicyInfo(policy) {\n  if (!policy) {\n    return undefined;\n  }\n\n  const options = policy.getOptions && policy.getOptions();\n\n  return {\n    type: policy.constructor.name,\n    options: (options instanceof Map) ? mapToObject(options) : utils.emptyObject\n  };\n}\n\nfunction getConsistencyString(c) {\n  if (typeof c !== 'number') {\n    return undefined;\n  }\n\n  return types.consistencyToString[c];\n}\n\nfunction getConstructor(instance) {\n  return instance ? instance.constructor.name : undefined;\n}\n\nfunction getExecutionProfiles(client) {\n  const executionProfiles = {};\n\n  const defaultProfile = client.profileManager.getDefault();\n  setExecutionProfileProperties(client, executionProfiles, defaultProfile, defaultProfile);\n\n  client.profileManager.getAll()\n    .filter(p => p !== defaultProfile)\n    .forEach(profile => setExecutionProfileProperties(client, executionProfiles, profile, defaultProfile));\n\n  return executionProfiles;\n}\n\nfunction setExecutionProfileProperties(client, parent, profile, defaultProfile) {\n  const output = parent[profile.name] = {};\n  setExecutionProfileItem(output, profile, defaultProfile, 'readTimeout');\n  setExecutionProfileItem(output, profile, defaultProfile, 'loadBalancing', getPolicyInfo);\n  setExecutionProfileItem(output, profile, defaultProfile, 'retry', getPolicyInfo);\n  setExecutionProfileItem(output, profile, defaultProfile, 'consistency', getConsistencyString);\n  setExecutionProfileItem(output, profile, defaultProfile, 'serialConsistency', getConsistencyString);\n\n  if (profile === defaultProfile) {\n    // Speculative execution policy is included in the profiles as some drivers support\n    // different spec exec policy per profile, in this case is fixed for all profiles\n    output.speculativeExecution = getPolicyInfo(client.options.policies.speculativeExecution);\n  }\n\n  if (profile.graphOptions) {\n    output.graphOptions = {};\n    const defaultGraphOptions = defaultProfile.graphOptions || utils.emptyObject;\n    setExecutionProfileItem(output.graphOptions, profile.graphOptions, defaultGraphOptions, 'language');\n    setExecutionProfileItem(output.graphOptions, profile.graphOptions, defaultGraphOptions, 'name');\n    setExecutionProfileItem(output.graphOptions, profile.graphOptions, defaultGraphOptions, 'readConsistency',\n      getConsistencyString);\n    setExecutionProfileItem(output.graphOptions, profile.graphOptions, defaultGraphOptions, 'source');\n    setExecutionProfileItem(output.graphOptions, profile.graphOptions, defaultGraphOptions, 'writeConsistency',\n      getConsistencyString);\n\n    if (Object.keys(output.graphOptions).length === 0) {\n      // Properties that are undefined will not be included in the JSON\n      output.graphOptions = undefined;\n    }\n  }\n}\n\nfunction setExecutionProfileItem(output, profile, defaultProfile, prop, valueGetter) {\n  const value = profile[prop];\n  valueGetter = valueGetter || (x => x);\n\n  if ((profile === defaultProfile && value !== undefined) || value !== defaultProfile[prop]) {\n    output[prop] = valueGetter(value);\n  }\n}", "module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"https\" has been externalized for browser compatibility. Cannot access \"https.${key}\" in client code. See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "module.exports = {\n    /* The local file header */\n    LOCHDR           : 30, // LOC header size\n    LOCSIG           : 0x04034b50, // \"PK\\003\\004\"\n    LOCVER           : 4,\t// version needed to extract\n    LOCFLG           : 6, // general purpose bit flag\n    LOCHOW           : 8, // compression method\n    LOCTIM           : 10, // modification time (2 bytes time, 2 bytes date)\n    LOCCRC           : 14, // uncompressed file crc-32 value\n    LOCSIZ           : 18, // compressed size\n    LOCLEN           : 22, // uncompressed size\n    LOCNAM           : 26, // filename length\n    LOCEXT           : 28, // extra field length\n\n    /* The Data descriptor */\n    EXTSIG           : 0x08074b50, // \"PK\\007\\008\"\n    EXTHDR           : 16, // EXT header size\n    EXTCRC           : 4, // uncompressed file crc-32 value\n    EXTSIZ           : 8, // compressed size\n    EXTLEN           : 12, // uncompressed size\n\n    /* The central directory file header */\n    CENHDR           : 46, // CEN header size\n    CENSIG           : 0x02014b50, // \"PK\\001\\002\"\n    CENVEM           : 4, // version made by\n    CENVER           : 6, // version needed to extract\n    CENFLG           : 8, // encrypt, decrypt flags\n    CENHOW           : 10, // compression method\n    CENTIM           : 12, // modification time (2 bytes time, 2 bytes date)\n    CENCRC           : 16, // uncompressed file crc-32 value\n    CENSIZ           : 20, // compressed size\n    CENLEN           : 24, // uncompressed size\n    CENNAM           : 28, // filename length\n    CENEXT           : 30, // extra field length\n    CENCOM           : 32, // file comment length\n    CENDSK           : 34, // volume number start\n    CENATT           : 36, // internal file attributes\n    CENATX           : 38, // external file attributes (host system dependent)\n    CENOFF           : 42, // LOC header offset\n\n    /* The entries in the end of central directory */\n    ENDHDR           : 22, // END header size\n    ENDSIG           : 0x06054b50, // \"PK\\005\\006\"\n    ENDSUB           : 8, // number of entries on this disk\n    ENDTOT           : 10, // total number of entries\n    ENDSIZ           : 12, // central directory size in bytes\n    ENDOFF           : 16, // offset of first CEN header\n    ENDCOM           : 20, // zip file comment length\n\n    END64HDR         : 20, // zip64 END header size\n    END64SIG         : 0x07064b50, // zip64 Locator signature, \"PK\\006\\007\"\n    END64START       : 4, // number of the disk with the start of the zip64\n    END64OFF         : 8, // relative offset of the zip64 end of central directory\n    END64NUMDISKS    : 16, // total number of disks\n\n    ZIP64SIG         : 0x06064b50, // zip64 signature, \"PK\\006\\006\"\n    ZIP64HDR         : 56, // zip64 record minimum size\n    ZIP64LEAD        : 12, // leading bytes at the start of the record, not counted by the value stored in ZIP64SIZE\n    ZIP64SIZE        : 4, // zip64 size of the central directory record\n    ZIP64VEM         : 12, // zip64 version made by\n    ZIP64VER         : 14, // zip64 version needed to extract\n    ZIP64DSK         : 16, // zip64 number of this disk\n    ZIP64DSKDIR      : 20, // number of the disk with the start of the record directory\n    ZIP64SUB         : 24, // number of entries on this disk\n    ZIP64TOT         : 32, // total number of entries\n    ZIP64SIZB        : 40, // zip64 central directory size in bytes\n    ZIP64OFF         : 48, // offset of start of central directory with respect to the starting disk number\n    ZIP64EXTRA       : 56, // extensible data sector\n\n    /* Compression methods */\n    STORED           : 0, // no compression\n    SHRUNK           : 1, // shrunk\n    REDUCED1         : 2, // reduced with compression factor 1\n    REDUCED2         : 3, // reduced with compression factor 2\n    REDUCED3         : 4, // reduced with compression factor 3\n    REDUCED4         : 5, // reduced with compression factor 4\n    IMPLODED         : 6, // imploded\n    // 7 reserved for Tokenizing compression algorithm\n    DEFLATED         : 8, // deflated\n    ENHANCED_DEFLATED: 9, // enhanced deflated\n    PKWARE           : 10,// PKWare DCL imploded\n    // 11 reserved by PKWARE\n    BZIP2            : 12, //  compressed using BZIP2\n    // 13 reserved by PKWARE\n    LZMA             : 14, // LZMA\n    // 15-17 reserved by PKWARE\n    IBM_TERSE        : 18, // compressed using IBM TERSE\n    IBM_LZ77         : 19, // IBM LZ77 z\n    AES_ENCRYPT      : 99, // WinZIP AES encryption method\n\n    /* General purpose bit flag */\n    // values can obtained with expression 2**bitnr\n    FLG_ENC          : 1,    // Bit 0: encrypted file\n    FLG_COMP1        : 2,    // Bit 1, compression option\n    FLG_COMP2        : 4,    // Bit 2, compression option\n    FLG_DESC         : 8,    // Bit 3, data descriptor\n    FLG_ENH          : 16,   // Bit 4, enhanced deflating\n    FLG_PATCH        : 32,   // Bit 5, indicates that the file is compressed patched data.\n    FLG_STR          : 64,   // Bit 6, strong encryption (patented)\n                             // Bits 7-10: Currently unused.\n    FLG_EFS          : 2048, // Bit 11: Language encoding flag (EFS)\n                             // Bit 12: Reserved by PKWARE for enhanced compression.\n                             // Bit 13: encrypted the Central Directory (patented).\n                             // Bits 14-15: Reserved by PKWARE.\n    FLG_MSK          : 4096, // mask header values\n\n    /* Load type */\n    FILE             : 2,\n    BUFFER           : 1,\n    NONE             : 0,\n\n    /* 4.5 Extensible data fields */\n    EF_ID            : 0,\n    EF_SIZE          : 2,\n\n    /* Header IDs */\n    ID_ZIP64         : 0x0001,\n    ID_AVINFO        : 0x0007,\n    ID_PFS           : 0x0008,\n    ID_OS2           : 0x0009,\n    ID_NTFS          : 0x000a,\n    ID_OPENVMS       : 0x000c,\n    ID_UNIX          : 0x000d,\n    ID_FORK          : 0x000e,\n    ID_PATCH         : 0x000f,\n    ID_X509_PKCS7    : 0x0014,\n    ID_X509_CERTID_F : 0x0015,\n    ID_X509_CERTID_C : 0x0016,\n    ID_STRONGENC     : 0x0017,\n    ID_RECORD_MGT    : 0x0018,\n    ID_X509_PKCS7_RL : 0x0019,\n    ID_IBM1          : 0x0065,\n    ID_IBM2          : 0x0066,\n    ID_POSZIP        : 0x4690,\n\n    EF_ZIP64_OR_32   : 0xffffffff,\n    EF_ZIP64_OR_16   : 0xffff,\n    EF_ZIP64_SUNCOMP : 0,\n    EF_ZIP64_SCOMP   : 8,\n    EF_ZIP64_RHO     : 16,\n    EF_ZIP64_DSN     : 24\n};\n", "const errors = {\n    /* Header error messages */\n    INVALID_LOC: \"Invalid LOC header (bad signature)\",\n    INVALID_CEN: \"Invalid CEN header (bad signature)\",\n    INVALID_END: \"Invalid END header (bad signature)\",\n\n    /* Descriptor */\n    DESCRIPTOR_NOT_EXIST: \"No descriptor present\",\n    DESCRIPTOR_UNKNOWN: \"Unknown descriptor format\",\n    DESCRIPTOR_FAULTY: \"Descriptor data is malformed\",\n\n    /* ZipEntry error messages*/\n    NO_DATA: \"Nothing to decompress\",\n    BAD_CRC: \"CRC32 checksum failed {0}\",\n    FILE_IN_THE_WAY: \"There is a file in the way: {0}\",\n    UNKNOWN_METHOD: \"Invalid/unsupported compression method\",\n\n    /* Inflater error messages */\n    AVAIL_DATA: \"inflate::Available inflate data did not terminate\",\n    INVALID_DISTANCE: \"inflate::Invalid literal/length or distance code in fixed or dynamic block\",\n    TO_MANY_CODES: \"inflate::Dynamic block code description: too many length or distance codes\",\n    INVALID_REPEAT_LEN: \"inflate::Dynamic block code description: repeat more than specified lengths\",\n    INVALID_REPEAT_FIRST: \"inflate::Dynamic block code description: repeat lengths with no first length\",\n    INCOMPLETE_CODES: \"inflate::Dynamic block code description: code lengths codes incomplete\",\n    INVALID_DYN_DISTANCE: \"inflate::Dynamic block code description: invalid distance code lengths\",\n    INVALID_CODES_LEN: \"inflate::Dynamic block code description: invalid literal/length code lengths\",\n    INVALID_STORE_BLOCK: \"inflate::Stored block length did not match one's complement\",\n    INVALID_BLOCK_TYPE: \"inflate::Invalid block type (type == 3)\",\n\n    /* ADM-ZIP error messages */\n    CANT_EXTRACT_FILE: \"Could not extract the file\",\n    CANT_OVERRIDE: \"Target file already exists\",\n    DISK_ENTRY_TOO_LARGE: \"Number of disk entries is too large\",\n    NO_ZIP: \"No zip file was loaded\",\n    NO_ENTRY: \"Entry doesn't exist\",\n    DIRECTORY_CONTENT_ERROR: \"A directory cannot have content\",\n    FILE_NOT_FOUND: 'File not found: \"{0}\"',\n    NOT_IMPLEMENTED: \"Not implemented\",\n    INVALID_FILENAME: \"Invalid filename\",\n    INVALID_FORMAT: \"Invalid or unsupported zip format. No END header found\",\n    INVALID_PASS_PARAM: \"Incompatible password parameter\",\n    WRONG_PASSWORD: \"Wrong Password\",\n\n    /* ADM-ZIP */\n    COMMENT_TOO_LONG: \"Comment is too long\", // Comment can be max 65535 bytes long (NOTE: some non-US characters may take more space)\n    EXTRA_FIELD_PARSE_ERROR: \"Extra field parsing error\"\n};\n\n// template\nfunction E(message) {\n    return function (...args) {\n        if (args.length) { // Allow {0} .. {9} arguments in error message, based on argument number\n            message = message.replace(/\\{(\\d)\\}/g, (_, n) => args[n] || '');\n        }\n\n        return new Error('ADM-ZIP: ' + message);\n    };\n}\n\n// Init errors with template\nfor (const msg of Object.keys(errors)) {\n    exports[msg] = E(errors[msg]);\n}\n", "const fsystem = require(\"fs\");\nconst pth = require(\"path\");\nconst Constants = require(\"./constants\");\nconst Errors = require(\"./errors\");\nconst isWin = typeof process === \"object\" && \"win32\" === process.platform;\n\nconst is_Obj = (obj) => typeof obj === \"object\" && obj !== null;\n\n// generate CRC32 lookup table\nconst crcTable = new Uint32Array(256).map((t, c) => {\n    for (let k = 0; k < 8; k++) {\n        if ((c & 1) !== 0) {\n            c = 0xedb88320 ^ (c >>> 1);\n        } else {\n            c >>>= 1;\n        }\n    }\n    return c >>> 0;\n});\n\n// UTILS functions\n\nfunction Utils(opts) {\n    this.sep = pth.sep;\n    this.fs = fsystem;\n\n    if (is_Obj(opts)) {\n        // custom filesystem\n        if (is_Obj(opts.fs) && typeof opts.fs.statSync === \"function\") {\n            this.fs = opts.fs;\n        }\n    }\n}\n\nmodule.exports = Utils;\n\n// INSTANTIABLE functions\n\nUtils.prototype.makeDir = function (/*String*/ folder) {\n    const self = this;\n\n    // Sync - make directories tree\n    function mkdirSync(/*String*/ fpath) {\n        let resolvedPath = fpath.split(self.sep)[0];\n        fpath.split(self.sep).forEach(function (name) {\n            if (!name || name.substr(-1, 1) === \":\") return;\n            resolvedPath += self.sep + name;\n            var stat;\n            try {\n                stat = self.fs.statSync(resolvedPath);\n            } catch (e) {\n                self.fs.mkdirSync(resolvedPath);\n            }\n            if (stat && stat.isFile()) throw Errors.FILE_IN_THE_WAY(`\"${resolvedPath}\"`);\n        });\n    }\n\n    mkdirSync(folder);\n};\n\nUtils.prototype.writeFileTo = function (/*String*/ path, /*Buffer*/ content, /*Boolean*/ overwrite, /*Number*/ attr) {\n    const self = this;\n    if (self.fs.existsSync(path)) {\n        if (!overwrite) return false; // cannot overwrite\n\n        var stat = self.fs.statSync(path);\n        if (stat.isDirectory()) {\n            return false;\n        }\n    }\n    var folder = pth.dirname(path);\n    if (!self.fs.existsSync(folder)) {\n        self.makeDir(folder);\n    }\n\n    var fd;\n    try {\n        fd = self.fs.openSync(path, \"w\", 0o666); // 0666\n    } catch (e) {\n        self.fs.chmodSync(path, 0o666);\n        fd = self.fs.openSync(path, \"w\", 0o666);\n    }\n    if (fd) {\n        try {\n            self.fs.writeSync(fd, content, 0, content.length, 0);\n        } finally {\n            self.fs.closeSync(fd);\n        }\n    }\n    self.fs.chmodSync(path, attr || 0o666);\n    return true;\n};\n\nUtils.prototype.writeFileToAsync = function (/*String*/ path, /*Buffer*/ content, /*Boolean*/ overwrite, /*Number*/ attr, /*Function*/ callback) {\n    if (typeof attr === \"function\") {\n        callback = attr;\n        attr = undefined;\n    }\n\n    const self = this;\n\n    self.fs.exists(path, function (exist) {\n        if (exist && !overwrite) return callback(false);\n\n        self.fs.stat(path, function (err, stat) {\n            if (exist && stat.isDirectory()) {\n                return callback(false);\n            }\n\n            var folder = pth.dirname(path);\n            self.fs.exists(folder, function (exists) {\n                if (!exists) self.makeDir(folder);\n\n                self.fs.open(path, \"w\", 0o666, function (err, fd) {\n                    if (err) {\n                        self.fs.chmod(path, 0o666, function () {\n                            self.fs.open(path, \"w\", 0o666, function (err, fd) {\n                                self.fs.write(fd, content, 0, content.length, 0, function () {\n                                    self.fs.close(fd, function () {\n                                        self.fs.chmod(path, attr || 0o666, function () {\n                                            callback(true);\n                                        });\n                                    });\n                                });\n                            });\n                        });\n                    } else if (fd) {\n                        self.fs.write(fd, content, 0, content.length, 0, function () {\n                            self.fs.close(fd, function () {\n                                self.fs.chmod(path, attr || 0o666, function () {\n                                    callback(true);\n                                });\n                            });\n                        });\n                    } else {\n                        self.fs.chmod(path, attr || 0o666, function () {\n                            callback(true);\n                        });\n                    }\n                });\n            });\n        });\n    });\n};\n\nUtils.prototype.findFiles = function (/*String*/ path) {\n    const self = this;\n\n    function findSync(/*String*/ dir, /*RegExp*/ pattern, /*Boolean*/ recursive) {\n        if (typeof pattern === \"boolean\") {\n            recursive = pattern;\n            pattern = undefined;\n        }\n        let files = [];\n        self.fs.readdirSync(dir).forEach(function (file) {\n            const path = pth.join(dir, file);\n            const stat = self.fs.statSync(path);\n\n            if (!pattern || pattern.test(path)) {\n                files.push(pth.normalize(path) + (stat.isDirectory() ? self.sep : \"\"));\n            }\n\n            if (stat.isDirectory() && recursive) files = files.concat(findSync(path, pattern, recursive));\n        });\n        return files;\n    }\n\n    return findSync(path, undefined, true);\n};\n\n/**\n * Callback for showing if everything was done.\n *\n * @callback filelistCallback\n * @param {Error} err - Error object\n * @param {string[]} list - was request fully completed\n */\n\n/**\n *\n * @param {string} dir\n * @param {filelistCallback} cb\n */\nUtils.prototype.findFilesAsync = function (dir, cb) {\n    const self = this;\n    let results = [];\n    self.fs.readdir(dir, function (err, list) {\n        if (err) return cb(err);\n        let list_length = list.length;\n        if (!list_length) return cb(null, results);\n        list.forEach(function (file) {\n            file = pth.join(dir, file);\n            self.fs.stat(file, function (err, stat) {\n                if (err) return cb(err);\n                if (stat) {\n                    results.push(pth.normalize(file) + (stat.isDirectory() ? self.sep : \"\"));\n                    if (stat.isDirectory()) {\n                        self.findFilesAsync(file, function (err, res) {\n                            if (err) return cb(err);\n                            results = results.concat(res);\n                            if (!--list_length) cb(null, results);\n                        });\n                    } else {\n                        if (!--list_length) cb(null, results);\n                    }\n                }\n            });\n        });\n    });\n};\n\nUtils.prototype.getAttributes = function () {};\n\nUtils.prototype.setAttributes = function () {};\n\n// STATIC functions\n\n// crc32 single update (it is part of crc32)\nUtils.crc32update = function (crc, byte) {\n    return crcTable[(crc ^ byte) & 0xff] ^ (crc >>> 8);\n};\n\nUtils.crc32 = function (buf) {\n    if (typeof buf === \"string\") {\n        buf = Buffer.from(buf, \"utf8\");\n    }\n\n    let len = buf.length;\n    let crc = ~0;\n    for (let off = 0; off < len; ) crc = Utils.crc32update(crc, buf[off++]);\n    // xor and cast as uint32 number\n    return ~crc >>> 0;\n};\n\nUtils.methodToString = function (/*Number*/ method) {\n    switch (method) {\n        case Constants.STORED:\n            return \"STORED (\" + method + \")\";\n        case Constants.DEFLATED:\n            return \"DEFLATED (\" + method + \")\";\n        default:\n            return \"UNSUPPORTED (\" + method + \")\";\n    }\n};\n\n/**\n * removes \"..\" style path elements\n * @param {string} path - fixable path\n * @returns string - fixed filepath\n */\nUtils.canonical = function (/*string*/ path) {\n    if (!path) return \"\";\n    // trick normalize think path is absolute\n    const safeSuffix = pth.posix.normalize(\"/\" + path.split(\"\\\\\").join(\"/\"));\n    return pth.join(\".\", safeSuffix);\n};\n\n/**\n * fix file names in achive\n * @param {string} path - fixable path\n * @returns string - fixed filepath\n */\n\nUtils.zipnamefix = function (path) {\n    if (!path) return \"\";\n    // trick normalize think path is absolute\n    const safeSuffix = pth.posix.normalize(\"/\" + path.split(\"\\\\\").join(\"/\"));\n    return pth.posix.join(\".\", safeSuffix);\n};\n\n/**\n *\n * @param {Array} arr\n * @param {function} callback\n * @returns\n */\nUtils.findLast = function (arr, callback) {\n    if (!Array.isArray(arr)) throw new TypeError(\"arr is not array\");\n\n    const len = arr.length >>> 0;\n    for (let i = len - 1; i >= 0; i--) {\n        if (callback(arr[i], i, arr)) {\n            return arr[i];\n        }\n    }\n    return void 0;\n};\n\n// make abolute paths taking prefix as root folder\nUtils.sanitize = function (/*string*/ prefix, /*string*/ name) {\n    prefix = pth.resolve(pth.normalize(prefix));\n    var parts = name.split(\"/\");\n    for (var i = 0, l = parts.length; i < l; i++) {\n        var path = pth.normalize(pth.join(prefix, parts.slice(i, l).join(pth.sep)));\n        if (path.indexOf(prefix) === 0) {\n            return path;\n        }\n    }\n    return pth.normalize(pth.join(prefix, pth.basename(name)));\n};\n\n// converts buffer, Uint8Array, string types to buffer\nUtils.toBuffer = function toBuffer(/*buffer, Uint8Array, string*/ input, /* function */ encoder) {\n    if (Buffer.isBuffer(input)) {\n        return input;\n    } else if (input instanceof Uint8Array) {\n        return Buffer.from(input);\n    } else {\n        // expect string all other values are invalid and return empty buffer\n        return typeof input === \"string\" ? encoder(input) : Buffer.alloc(0);\n    }\n};\n\nUtils.readBigUInt64LE = function (/*Buffer*/ buffer, /*int*/ index) {\n    var slice = Buffer.from(buffer.slice(index, index + 8));\n    slice.swap64();\n\n    return parseInt(`0x${slice.toString(\"hex\")}`);\n};\n\nUtils.fromDOS2Date = function (val) {\n    return new Date(((val >> 25) & 0x7f) + 1980, Math.max(((val >> 21) & 0x0f) - 1, 0), Math.max((val >> 16) & 0x1f, 1), (val >> 11) & 0x1f, (val >> 5) & 0x3f, (val & 0x1f) << 1);\n};\n\nUtils.fromDate2DOS = function (val) {\n    let date = 0;\n    let time = 0;\n    if (val.getFullYear() > 1979) {\n        date = (((val.getFullYear() - 1980) & 0x7f) << 9) | ((val.getMonth() + 1) << 5) | val.getDate();\n        time = (val.getHours() << 11) | (val.getMinutes() << 5) | (val.getSeconds() >> 1);\n    }\n    return (date << 16) | time;\n};\n\nUtils.isWin = isWin; // Do we have windows system\nUtils.crcTable = crcTable;\n", "const pth = require(\"path\");\n\nmodule.exports = function (/*String*/ path, /*Utils object*/ { fs }) {\n    var _path = path || \"\",\n        _obj = newAttr(),\n        _stat = null;\n\n    function newAttr() {\n        return {\n            directory: false,\n            readonly: false,\n            hidden: false,\n            executable: false,\n            mtime: 0,\n            atime: 0\n        };\n    }\n\n    if (_path && fs.existsSync(_path)) {\n        _stat = fs.statSync(_path);\n        _obj.directory = _stat.isDirectory();\n        _obj.mtime = _stat.mtime;\n        _obj.atime = _stat.atime;\n        _obj.executable = (0o111 & _stat.mode) !== 0; // file is executable who ever har right not just owner\n        _obj.readonly = (0o200 & _stat.mode) === 0; // readonly if owner has no write right\n        _obj.hidden = pth.basename(_path)[0] === \".\";\n    } else {\n        console.warn(\"Invalid path: \" + _path);\n    }\n\n    return {\n        get directory() {\n            return _obj.directory;\n        },\n\n        get readOnly() {\n            return _obj.readonly;\n        },\n\n        get hidden() {\n            return _obj.hidden;\n        },\n\n        get mtime() {\n            return _obj.mtime;\n        },\n\n        get atime() {\n            return _obj.atime;\n        },\n\n        get executable() {\n            return _obj.executable;\n        },\n\n        decodeAttributes: function () {},\n\n        encodeAttributes: function () {},\n\n        toJSON: function () {\n            return {\n                path: _path,\n                isDirectory: _obj.directory,\n                isReadOnly: _obj.readonly,\n                isHidden: _obj.hidden,\n                isExecutable: _obj.executable,\n                mTime: _obj.mtime,\n                aTime: _obj.atime\n            };\n        },\n\n        toString: function () {\n            return JSON.stringify(this.toJSON(), null, \"\\t\");\n        }\n    };\n};\n", "module.exports = {\n    efs: true,\n    encode: (data) => Buffer.from(data, \"utf8\"),\n    decode: (data) => data.toString(\"utf8\")\n};\n", "module.exports = require(\"./utils\");\nmodule.exports.Constants = require(\"./constants\");\nmodule.exports.Errors = require(\"./errors\");\nmodule.exports.FileAttr = require(\"./fattr\");\nmodule.exports.decoder = require(\"./decoder\");\n", "var Utils = require(\"../util\"),\n    Constants = Utils.Constants;\n\n/* The central directory file header */\nmodule.exports = function () {\n    var _verMade = 20, // v2.0\n        _version = 10, // v1.0\n        _flags = 0,\n        _method = 0,\n        _time = 0,\n        _crc = 0,\n        _compressedSize = 0,\n        _size = 0,\n        _fnameLen = 0,\n        _extraLen = 0,\n        _comLen = 0,\n        _diskStart = 0,\n        _inattr = 0,\n        _attr = 0,\n        _offset = 0;\n\n    _verMade |= Utils.isWin ? 0x0a00 : 0x0300;\n\n    // Set EFS flag since filename and comment fields are all by default encoded using UTF-8.\n    // Without it file names may be corrupted for other apps when file names use unicode chars\n    _flags |= Constants.FLG_EFS;\n\n    const _localHeader = {\n        extraLen: 0\n    };\n\n    // casting\n    const uint32 = (val) => Math.max(0, val) >>> 0;\n    const uint16 = (val) => Math.max(0, val) & 0xffff;\n    const uint8 = (val) => Math.max(0, val) & 0xff;\n\n    _time = Utils.fromDate2DOS(new Date());\n\n    return {\n        get made() {\n            return _verMade;\n        },\n        set made(val) {\n            _verMade = val;\n        },\n\n        get version() {\n            return _version;\n        },\n        set version(val) {\n            _version = val;\n        },\n\n        get flags() {\n            return _flags;\n        },\n        set flags(val) {\n            _flags = val;\n        },\n\n        get flags_efs() {\n            return (_flags & Constants.FLG_EFS) > 0;\n        },\n        set flags_efs(val) {\n            if (val) {\n                _flags |= Constants.FLG_EFS;\n            } else {\n                _flags &= ~Constants.FLG_EFS;\n            }\n        },\n\n        get flags_desc() {\n            return (_flags & Constants.FLG_DESC) > 0;\n        },\n        set flags_desc(val) {\n            if (val) {\n                _flags |= Constants.FLG_DESC;\n            } else {\n                _flags &= ~Constants.FLG_DESC;\n            }\n        },\n\n        get method() {\n            return _method;\n        },\n        set method(val) {\n            switch (val) {\n                case Constants.STORED:\n                    this.version = 10;\n                case Constants.DEFLATED:\n                default:\n                    this.version = 20;\n            }\n            _method = val;\n        },\n\n        get time() {\n            return Utils.fromDOS2Date(this.timeval);\n        },\n        set time(val) {\n            this.timeval = Utils.fromDate2DOS(val);\n        },\n\n        get timeval() {\n            return _time;\n        },\n        set timeval(val) {\n            _time = uint32(val);\n        },\n\n        get timeHighByte() {\n            return uint8(_time >>> 8);\n        },\n        get crc() {\n            return _crc;\n        },\n        set crc(val) {\n            _crc = uint32(val);\n        },\n\n        get compressedSize() {\n            return _compressedSize;\n        },\n        set compressedSize(val) {\n            _compressedSize = uint32(val);\n        },\n\n        get size() {\n            return _size;\n        },\n        set size(val) {\n            _size = uint32(val);\n        },\n\n        get fileNameLength() {\n            return _fnameLen;\n        },\n        set fileNameLength(val) {\n            _fnameLen = val;\n        },\n\n        get extraLength() {\n            return _extraLen;\n        },\n        set extraLength(val) {\n            _extraLen = val;\n        },\n\n        get extraLocalLength() {\n            return _localHeader.extraLen;\n        },\n        set extraLocalLength(val) {\n            _localHeader.extraLen = val;\n        },\n\n        get commentLength() {\n            return _comLen;\n        },\n        set commentLength(val) {\n            _comLen = val;\n        },\n\n        get diskNumStart() {\n            return _diskStart;\n        },\n        set diskNumStart(val) {\n            _diskStart = uint32(val);\n        },\n\n        get inAttr() {\n            return _inattr;\n        },\n        set inAttr(val) {\n            _inattr = uint32(val);\n        },\n\n        get attr() {\n            return _attr;\n        },\n        set attr(val) {\n            _attr = uint32(val);\n        },\n\n        // get Unix file permissions\n        get fileAttr() {\n            return (_attr || 0) >> 16 & 0xfff;\n        },\n\n        get offset() {\n            return _offset;\n        },\n        set offset(val) {\n            _offset = uint32(val);\n        },\n\n        get encrypted() {\n            return (_flags & Constants.FLG_ENC) === Constants.FLG_ENC;\n        },\n\n        get centralHeaderSize() {\n            return Constants.CENHDR + _fnameLen + _extraLen + _comLen;\n        },\n\n        get realDataOffset() {\n            return _offset + Constants.LOCHDR + _localHeader.fnameLen + _localHeader.extraLen;\n        },\n\n        get localHeader() {\n            return _localHeader;\n        },\n\n        loadLocalHeaderFromBinary: function (/*Buffer*/ input) {\n            var data = input.slice(_offset, _offset + Constants.LOCHDR);\n            // 30 bytes and should start with \"PK\\003\\004\"\n            if (data.readUInt32LE(0) !== Constants.LOCSIG) {\n                throw Utils.Errors.INVALID_LOC();\n            }\n\n            // version needed to extract\n            _localHeader.version = data.readUInt16LE(Constants.LOCVER);\n            // general purpose bit flag\n            _localHeader.flags = data.readUInt16LE(Constants.LOCFLG);\n            // compression method\n            _localHeader.method = data.readUInt16LE(Constants.LOCHOW);\n            // modification time (2 bytes time, 2 bytes date)\n            _localHeader.time = data.readUInt32LE(Constants.LOCTIM);\n            // uncompressed file crc-32 valu\n            _localHeader.crc = data.readUInt32LE(Constants.LOCCRC);\n            // compressed size\n            _localHeader.compressedSize = data.readUInt32LE(Constants.LOCSIZ);\n            // uncompressed size\n            _localHeader.size = data.readUInt32LE(Constants.LOCLEN);\n            // filename length\n            _localHeader.fnameLen = data.readUInt16LE(Constants.LOCNAM);\n            // extra field length\n            _localHeader.extraLen = data.readUInt16LE(Constants.LOCEXT);\n\n            // read extra data\n            const extraStart = _offset + Constants.LOCHDR + _localHeader.fnameLen;\n            const extraEnd = extraStart + _localHeader.extraLen;\n            return input.slice(extraStart, extraEnd);\n        },\n\n        loadFromBinary: function (/*Buffer*/ data) {\n            // data should be 46 bytes and start with \"PK 01 02\"\n            if (data.length !== Constants.CENHDR || data.readUInt32LE(0) !== Constants.CENSIG) {\n                throw Utils.Errors.INVALID_CEN();\n            }\n            // version made by\n            _verMade = data.readUInt16LE(Constants.CENVEM);\n            // version needed to extract\n            _version = data.readUInt16LE(Constants.CENVER);\n            // encrypt, decrypt flags\n            _flags = data.readUInt16LE(Constants.CENFLG);\n            // compression method\n            _method = data.readUInt16LE(Constants.CENHOW);\n            // modification time (2 bytes time, 2 bytes date)\n            _time = data.readUInt32LE(Constants.CENTIM);\n            // uncompressed file crc-32 value\n            _crc = data.readUInt32LE(Constants.CENCRC);\n            // compressed size\n            _compressedSize = data.readUInt32LE(Constants.CENSIZ);\n            // uncompressed size\n            _size = data.readUInt32LE(Constants.CENLEN);\n            // filename length\n            _fnameLen = data.readUInt16LE(Constants.CENNAM);\n            // extra field length\n            _extraLen = data.readUInt16LE(Constants.CENEXT);\n            // file comment length\n            _comLen = data.readUInt16LE(Constants.CENCOM);\n            // volume number start\n            _diskStart = data.readUInt16LE(Constants.CENDSK);\n            // internal file attributes\n            _inattr = data.readUInt16LE(Constants.CENATT);\n            // external file attributes\n            _attr = data.readUInt32LE(Constants.CENATX);\n            // LOC header offset\n            _offset = data.readUInt32LE(Constants.CENOFF);\n        },\n\n        localHeaderToBinary: function () {\n            // LOC header size (30 bytes)\n            var data = Buffer.alloc(Constants.LOCHDR);\n            // \"PK\\003\\004\"\n            data.writeUInt32LE(Constants.LOCSIG, 0);\n            // version needed to extract\n            data.writeUInt16LE(_version, Constants.LOCVER);\n            // general purpose bit flag\n            data.writeUInt16LE(_flags, Constants.LOCFLG);\n            // compression method\n            data.writeUInt16LE(_method, Constants.LOCHOW);\n            // modification time (2 bytes time, 2 bytes date)\n            data.writeUInt32LE(_time, Constants.LOCTIM);\n            // uncompressed file crc-32 value\n            data.writeUInt32LE(_crc, Constants.LOCCRC);\n            // compressed size\n            data.writeUInt32LE(_compressedSize, Constants.LOCSIZ);\n            // uncompressed size\n            data.writeUInt32LE(_size, Constants.LOCLEN);\n            // filename length\n            data.writeUInt16LE(_fnameLen, Constants.LOCNAM);\n            // extra field length\n            data.writeUInt16LE(_localHeader.extraLen, Constants.LOCEXT);\n            return data;\n        },\n\n        centralHeaderToBinary: function () {\n            // CEN header size (46 bytes)\n            var data = Buffer.alloc(Constants.CENHDR + _fnameLen + _extraLen + _comLen);\n            // \"PK\\001\\002\"\n            data.writeUInt32LE(Constants.CENSIG, 0);\n            // version made by\n            data.writeUInt16LE(_verMade, Constants.CENVEM);\n            // version needed to extract\n            data.writeUInt16LE(_version, Constants.CENVER);\n            // encrypt, decrypt flags\n            data.writeUInt16LE(_flags, Constants.CENFLG);\n            // compression method\n            data.writeUInt16LE(_method, Constants.CENHOW);\n            // modification time (2 bytes time, 2 bytes date)\n            data.writeUInt32LE(_time, Constants.CENTIM);\n            // uncompressed file crc-32 value\n            data.writeUInt32LE(_crc, Constants.CENCRC);\n            // compressed size\n            data.writeUInt32LE(_compressedSize, Constants.CENSIZ);\n            // uncompressed size\n            data.writeUInt32LE(_size, Constants.CENLEN);\n            // filename length\n            data.writeUInt16LE(_fnameLen, Constants.CENNAM);\n            // extra field length\n            data.writeUInt16LE(_extraLen, Constants.CENEXT);\n            // file comment length\n            data.writeUInt16LE(_comLen, Constants.CENCOM);\n            // volume number start\n            data.writeUInt16LE(_diskStart, Constants.CENDSK);\n            // internal file attributes\n            data.writeUInt16LE(_inattr, Constants.CENATT);\n            // external file attributes\n            data.writeUInt32LE(_attr, Constants.CENATX);\n            // LOC header offset\n            data.writeUInt32LE(_offset, Constants.CENOFF);\n            return data;\n        },\n\n        toJSON: function () {\n            const bytes = function (nr) {\n                return nr + \" bytes\";\n            };\n\n            return {\n                made: _verMade,\n                version: _version,\n                flags: _flags,\n                method: Utils.methodToString(_method),\n                time: this.time,\n                crc: \"0x\" + _crc.toString(16).toUpperCase(),\n                compressedSize: bytes(_compressedSize),\n                size: bytes(_size),\n                fileNameLength: bytes(_fnameLen),\n                extraLength: bytes(_extraLen),\n                commentLength: bytes(_comLen),\n                diskNumStart: _diskStart,\n                inAttr: _inattr,\n                attr: _attr,\n                offset: _offset,\n                centralHeaderSize: bytes(Constants.CENHDR + _fnameLen + _extraLen + _comLen)\n            };\n        },\n\n        toString: function () {\n            return JSON.stringify(this.toJSON(), null, \"\\t\");\n        }\n    };\n};\n", "var Utils = require(\"../util\"),\n    Constants = Utils.Constants;\n\n/* The entries in the end of central directory */\nmodule.exports = function () {\n    var _volumeEntries = 0,\n        _totalEntries = 0,\n        _size = 0,\n        _offset = 0,\n        _commentLength = 0;\n\n    return {\n        get diskEntries() {\n            return _volumeEntries;\n        },\n        set diskEntries(/*Number*/ val) {\n            _volumeEntries = _totalEntries = val;\n        },\n\n        get totalEntries() {\n            return _totalEntries;\n        },\n        set totalEntries(/*Number*/ val) {\n            _totalEntries = _volumeEntries = val;\n        },\n\n        get size() {\n            return _size;\n        },\n        set size(/*Number*/ val) {\n            _size = val;\n        },\n\n        get offset() {\n            return _offset;\n        },\n        set offset(/*Number*/ val) {\n            _offset = val;\n        },\n\n        get commentLength() {\n            return _commentLength;\n        },\n        set commentLength(/*Number*/ val) {\n            _commentLength = val;\n        },\n\n        get mainHeaderSize() {\n            return Constants.ENDHDR + _commentLength;\n        },\n\n        loadFromBinary: function (/*Buffer*/ data) {\n            // data should be 22 bytes and start with \"PK 05 06\"\n            // or be 56+ bytes and start with \"PK 06 06\" for Zip64\n            if (\n                (data.length !== Constants.ENDHDR || data.readUInt32LE(0) !== Constants.ENDSIG) &&\n                (data.length < Constants.ZIP64HDR || data.readUInt32LE(0) !== Constants.ZIP64SIG)\n            ) {\n                throw Utils.Errors.INVALID_END();\n            }\n\n            if (data.readUInt32LE(0) === Constants.ENDSIG) {\n                // number of entries on this volume\n                _volumeEntries = data.readUInt16LE(Constants.ENDSUB);\n                // total number of entries\n                _totalEntries = data.readUInt16LE(Constants.ENDTOT);\n                // central directory size in bytes\n                _size = data.readUInt32LE(Constants.ENDSIZ);\n                // offset of first CEN header\n                _offset = data.readUInt32LE(Constants.ENDOFF);\n                // zip file comment length\n                _commentLength = data.readUInt16LE(Constants.ENDCOM);\n            } else {\n                // number of entries on this volume\n                _volumeEntries = Utils.readBigUInt64LE(data, Constants.ZIP64SUB);\n                // total number of entries\n                _totalEntries = Utils.readBigUInt64LE(data, Constants.ZIP64TOT);\n                // central directory size in bytes\n                _size = Utils.readBigUInt64LE(data, Constants.ZIP64SIZE);\n                // offset of first CEN header\n                _offset = Utils.readBigUInt64LE(data, Constants.ZIP64OFF);\n\n                _commentLength = 0;\n            }\n        },\n\n        toBinary: function () {\n            var b = Buffer.alloc(Constants.ENDHDR + _commentLength);\n            // \"PK 05 06\" signature\n            b.writeUInt32LE(Constants.ENDSIG, 0);\n            b.writeUInt32LE(0, 4);\n            // number of entries on this volume\n            b.writeUInt16LE(_volumeEntries, Constants.ENDSUB);\n            // total number of entries\n            b.writeUInt16LE(_totalEntries, Constants.ENDTOT);\n            // central directory size in bytes\n            b.writeUInt32LE(_size, Constants.ENDSIZ);\n            // offset of first CEN header\n            b.writeUInt32LE(_offset, Constants.ENDOFF);\n            // zip file comment length\n            b.writeUInt16LE(_commentLength, Constants.ENDCOM);\n            // fill comment memory with spaces so no garbage is left there\n            b.fill(\" \", Constants.ENDHDR);\n\n            return b;\n        },\n\n        toJSON: function () {\n            // creates 0x0000 style output\n            const offset = function (nr, len) {\n                let offs = nr.toString(16).toUpperCase();\n                while (offs.length < len) offs = \"0\" + offs;\n                return \"0x\" + offs;\n            };\n\n            return {\n                diskEntries: _volumeEntries,\n                totalEntries: _totalEntries,\n                size: _size + \" bytes\",\n                offset: offset(_offset, 4),\n                commentLength: _commentLength\n            };\n        },\n\n        toString: function () {\n            return JSON.stringify(this.toJSON(), null, \"\\t\");\n        }\n    };\n};\n// Misspelled\n", "exports.EntryHeader = require(\"./entryHeader\");\nexports.MainHeader = require(\"./mainHeader\");\n", "module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"zlib\" has been externalized for browser compatibility. Cannot access \"zlib.${key}\" in client code. See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "module.exports = function (/*Buffer*/ inbuf) {\n    var zlib = require(\"zlib\");\n\n    var opts = { chunkSize: (parseInt(inbuf.length / 1024) + 1) * 1024 };\n\n    return {\n        deflate: function () {\n            return zlib.deflateRawSync(inbuf, opts);\n        },\n\n        deflateAsync: function (/*Function*/ callback) {\n            var tmp = zlib.createDeflateRaw(opts),\n                parts = [],\n                total = 0;\n            tmp.on(\"data\", function (data) {\n                parts.push(data);\n                total += data.length;\n            });\n            tmp.on(\"end\", function () {\n                var buf = Buffer.alloc(total),\n                    written = 0;\n                buf.fill(0);\n                for (var i = 0; i < parts.length; i++) {\n                    var part = parts[i];\n                    part.copy(buf, written);\n                    written += part.length;\n                }\n                callback && callback(buf);\n            });\n            tmp.end(inbuf);\n        }\n    };\n};\n", "const version = +(process.versions ? process.versions.node : \"\").split(\".\")[0] || 0;\n\nmodule.exports = function (/*Buffer*/ inbuf, /*number*/ expectedLength) {\n    var zlib = require(\"zlib\");\n    const option = version >= 15 && expectedLength > 0 ? { maxOutputLength: expectedLength } : {};\n\n    return {\n        inflate: function () {\n            return zlib.inflateRawSync(inbuf, option);\n        },\n\n        inflateAsync: function (/*Function*/ callback) {\n            var tmp = zlib.createInflateRaw(option),\n                parts = [],\n                total = 0;\n            tmp.on(\"data\", function (data) {\n                parts.push(data);\n                total += data.length;\n            });\n            tmp.on(\"end\", function () {\n                var buf = Buffer.alloc(total),\n                    written = 0;\n                buf.fill(0);\n                for (var i = 0; i < parts.length; i++) {\n                    var part = parts[i];\n                    part.copy(buf, written);\n                    written += part.length;\n                }\n                callback && callback(buf);\n            });\n            tmp.end(inbuf);\n        }\n    };\n};\n", "\"use strict\";\n\n// node crypt, we use it for generate salt\n// eslint-disable-next-line node/no-unsupported-features/node-builtins\nconst { randomFillSync } = require(\"crypto\");\nconst Errors = require(\"../util/errors\");\n\n// generate CRC32 lookup table\nconst crctable = new Uint32Array(256).map((t, crc) => {\n    for (let j = 0; j < 8; j++) {\n        if (0 !== (crc & 1)) {\n            crc = (crc >>> 1) ^ 0xedb88320;\n        } else {\n            crc >>>= 1;\n        }\n    }\n    return crc >>> 0;\n});\n\n// C-style uInt32 Multiply (discards higher bits, when JS multiply discards lower bits)\nconst uMul = (a, b) => Math.imul(a, b) >>> 0;\n\n// crc32 byte single update (actually same function is part of utils.crc32 function :) )\nconst crc32update = (pCrc32, bval) => {\n    return crctable[(pCrc32 ^ bval) & 0xff] ^ (pCrc32 >>> 8);\n};\n\n// function for generating salt for encrytion header\nconst genSalt = () => {\n    if (\"function\" === typeof randomFillSync) {\n        return randomFillSync(Buffer.alloc(12));\n    } else {\n        // fallback if function is not defined\n        return genSalt.node();\n    }\n};\n\n// salt generation with node random function (mainly as fallback)\ngenSalt.node = () => {\n    const salt = Buffer.alloc(12);\n    const len = salt.length;\n    for (let i = 0; i < len; i++) salt[i] = (Math.random() * 256) & 0xff;\n    return salt;\n};\n\n// general config\nconst config = {\n    genSalt\n};\n\n// Class Initkeys handles same basic ops with keys\nfunction Initkeys(pw) {\n    const pass = Buffer.isBuffer(pw) ? pw : Buffer.from(pw);\n    this.keys = new Uint32Array([0x12345678, 0x23456789, 0x34567890]);\n    for (let i = 0; i < pass.length; i++) {\n        this.updateKeys(pass[i]);\n    }\n}\n\nInitkeys.prototype.updateKeys = function (byteValue) {\n    const keys = this.keys;\n    keys[0] = crc32update(keys[0], byteValue);\n    keys[1] += keys[0] & 0xff;\n    keys[1] = uMul(keys[1], 134775813) + 1;\n    keys[2] = crc32update(keys[2], keys[1] >>> 24);\n    return byteValue;\n};\n\nInitkeys.prototype.next = function () {\n    const k = (this.keys[2] | 2) >>> 0; // key\n    return (uMul(k, k ^ 1) >> 8) & 0xff; // decode\n};\n\nfunction make_decrypter(/*Buffer*/ pwd) {\n    // 1. Stage initialize key\n    const keys = new Initkeys(pwd);\n\n    // return decrypter function\n    return function (/*Buffer*/ data) {\n        // result - we create new Buffer for results\n        const result = Buffer.alloc(data.length);\n        let pos = 0;\n        // process input data\n        for (let c of data) {\n            //c ^= keys.next();\n            //result[pos++] = c; // decode & Save Value\n            result[pos++] = keys.updateKeys(c ^ keys.next()); // update keys with decoded byte\n        }\n        return result;\n    };\n}\n\nfunction make_encrypter(/*Buffer*/ pwd) {\n    // 1. Stage initialize key\n    const keys = new Initkeys(pwd);\n\n    // return encrypting function, result and pos is here so we dont have to merge buffers later\n    return function (/*Buffer*/ data, /*Buffer*/ result, /* Number */ pos = 0) {\n        // result - we create new Buffer for results\n        if (!result) result = Buffer.alloc(data.length);\n        // process input data\n        for (let c of data) {\n            const k = keys.next(); // save key byte\n            result[pos++] = c ^ k; // save val\n            keys.updateKeys(c); // update keys with decoded byte\n        }\n        return result;\n    };\n}\n\nfunction decrypt(/*Buffer*/ data, /*Object*/ header, /*String, Buffer*/ pwd) {\n    if (!data || !Buffer.isBuffer(data) || data.length < 12) {\n        return Buffer.alloc(0);\n    }\n\n    // 1. We Initialize and generate decrypting function\n    const decrypter = make_decrypter(pwd);\n\n    // 2. decrypt salt what is always 12 bytes and is a part of file content\n    const salt = decrypter(data.slice(0, 12));\n\n    // if bit 3 (0x08) of the general-purpose flags field is set, check salt[11] with the high byte of the header time\n    // 2 byte data block (as per Info-Zip spec), otherwise check with the high byte of the header entry\n    const verifyByte = (header.flags & 0x8) === 0x8 ? header.timeHighByte : header.crc >>> 24;\n\n    //3. does password meet expectations\n    if (salt[11] !== verifyByte) {\n        throw Errors.WRONG_PASSWORD();\n    }\n\n    // 4. decode content\n    return decrypter(data.slice(12));\n}\n\n// lets add way to populate salt, NOT RECOMMENDED for production but maybe useful for testing general functionality\nfunction _salter(data) {\n    if (Buffer.isBuffer(data) && data.length >= 12) {\n        // be aware - currently salting buffer data is modified\n        config.genSalt = function () {\n            return data.slice(0, 12);\n        };\n    } else if (data === \"node\") {\n        // test salt generation with node random function\n        config.genSalt = genSalt.node;\n    } else {\n        // if value is not acceptable config gets reset.\n        config.genSalt = genSalt;\n    }\n}\n\nfunction encrypt(/*Buffer*/ data, /*Object*/ header, /*String, Buffer*/ pwd, /*Boolean*/ oldlike = false) {\n    // 1. test data if data is not Buffer we make buffer from it\n    if (data == null) data = Buffer.alloc(0);\n    // if data is not buffer be make buffer from it\n    if (!Buffer.isBuffer(data)) data = Buffer.from(data.toString());\n\n    // 2. We Initialize and generate encrypting function\n    const encrypter = make_encrypter(pwd);\n\n    // 3. generate salt (12-bytes of random data)\n    const salt = config.genSalt();\n    salt[11] = (header.crc >>> 24) & 0xff;\n\n    // old implementations (before PKZip 2.04g) used two byte check\n    if (oldlike) salt[10] = (header.crc >>> 16) & 0xff;\n\n    // 4. create output\n    const result = Buffer.alloc(data.length + 12);\n    encrypter(salt, result);\n\n    // finally encode content\n    return encrypter(data, result, 12);\n}\n\nmodule.exports = { decrypt, encrypt, _salter };\n", "exports.Deflater = require(\"./deflater\");\nexports.Inflater = require(\"./inflater\");\nexports.ZipCrypto = require(\"./zipcrypto\");\n", "var Utils = require(\"./util\"),\n    Headers = require(\"./headers\"),\n    Constants = Utils.Constants,\n    Methods = require(\"./methods\");\n\nmodule.exports = function (/** object */ options, /*Buffer*/ input) {\n    var _centralHeader = new Headers.EntryHeader(),\n        _entryName = Buffer.alloc(0),\n        _comment = Buffer.alloc(0),\n        _isDirectory = false,\n        uncompressedData = null,\n        _extra = Buffer.alloc(0),\n        _extralocal = Buffer.alloc(0),\n        _efs = true;\n\n    // assign options\n    const opts = options;\n\n    const decoder = typeof opts.decoder === \"object\" ? opts.decoder : Utils.decoder;\n    _efs = decoder.hasOwnProperty(\"efs\") ? decoder.efs : false;\n\n    function getCompressedDataFromZip() {\n        //if (!input || !Buffer.isBuffer(input)) {\n        if (!input || !(input instanceof Uint8Array)) {\n            return Buffer.alloc(0);\n        }\n        _extralocal = _centralHeader.loadLocalHeaderFromBinary(input);\n        return input.slice(_centralHeader.realDataOffset, _centralHeader.realDataOffset + _centralHeader.compressedSize);\n    }\n\n    function crc32OK(data) {\n        // if bit 3 (0x08) of the general-purpose flags field is set, then the CRC-32 and file sizes are not known when the local header is written\n        if (!_centralHeader.flags_desc) {\n            if (Utils.crc32(data) !== _centralHeader.localHeader.crc) {\n                return false;\n            }\n        } else {\n            const descriptor = {};\n            const dataEndOffset = _centralHeader.realDataOffset + _centralHeader.compressedSize;\n            // no descriptor after compressed data, instead new local header\n            if (input.readUInt32LE(dataEndOffset) == Constants.LOCSIG || input.readUInt32LE(dataEndOffset) == Constants.CENSIG) {\n                throw Utils.Errors.DESCRIPTOR_NOT_EXIST();\n            }\n\n            // get decriptor data\n            if (input.readUInt32LE(dataEndOffset) == Constants.EXTSIG) {\n                // descriptor with signature\n                descriptor.crc = input.readUInt32LE(dataEndOffset + Constants.EXTCRC);\n                descriptor.compressedSize = input.readUInt32LE(dataEndOffset + Constants.EXTSIZ);\n                descriptor.size = input.readUInt32LE(dataEndOffset + Constants.EXTLEN);\n            } else if (input.readUInt16LE(dataEndOffset + 12) === 0x4b50) {\n                // descriptor without signature (we check is new header starting where we expect)\n                descriptor.crc = input.readUInt32LE(dataEndOffset + Constants.EXTCRC - 4);\n                descriptor.compressedSize = input.readUInt32LE(dataEndOffset + Constants.EXTSIZ - 4);\n                descriptor.size = input.readUInt32LE(dataEndOffset + Constants.EXTLEN - 4);\n            } else {\n                throw Utils.Errors.DESCRIPTOR_UNKNOWN();\n            }\n\n            // check data integrity\n            if (descriptor.compressedSize !== _centralHeader.compressedSize || descriptor.size !== _centralHeader.size || descriptor.crc !== _centralHeader.crc) {\n                throw Utils.Errors.DESCRIPTOR_FAULTY();\n            }\n            if (Utils.crc32(data) !== descriptor.crc) {\n                return false;\n            }\n\n            // @TODO: zip64 bit descriptor fields\n            // if bit 3 is set and any value in local header \"zip64 Extended information\" extra field are set 0 (place holder)\n            // then 64-bit descriptor format is used instead of 32-bit\n            // central header - \"zip64 Extended information\" extra field should store real values and not place holders\n        }\n        return true;\n    }\n\n    function decompress(/*Boolean*/ async, /*Function*/ callback, /*String, Buffer*/ pass) {\n        if (typeof callback === \"undefined\" && typeof async === \"string\") {\n            pass = async;\n            async = void 0;\n        }\n        if (_isDirectory) {\n            if (async && callback) {\n                callback(Buffer.alloc(0), Utils.Errors.DIRECTORY_CONTENT_ERROR()); //si added error.\n            }\n            return Buffer.alloc(0);\n        }\n\n        var compressedData = getCompressedDataFromZip();\n\n        if (compressedData.length === 0) {\n            // File is empty, nothing to decompress.\n            if (async && callback) callback(compressedData);\n            return compressedData;\n        }\n\n        if (_centralHeader.encrypted) {\n            if (\"string\" !== typeof pass && !Buffer.isBuffer(pass)) {\n                throw Utils.Errors.INVALID_PASS_PARAM();\n            }\n            compressedData = Methods.ZipCrypto.decrypt(compressedData, _centralHeader, pass);\n        }\n\n        var data = Buffer.alloc(_centralHeader.size);\n\n        switch (_centralHeader.method) {\n            case Utils.Constants.STORED:\n                compressedData.copy(data);\n                if (!crc32OK(data)) {\n                    if (async && callback) callback(data, Utils.Errors.BAD_CRC()); //si added error\n                    throw Utils.Errors.BAD_CRC();\n                } else {\n                    //si added otherwise did not seem to return data.\n                    if (async && callback) callback(data);\n                    return data;\n                }\n            case Utils.Constants.DEFLATED:\n                var inflater = new Methods.Inflater(compressedData, _centralHeader.size);\n                if (!async) {\n                    const result = inflater.inflate(data);\n                    result.copy(data, 0);\n                    if (!crc32OK(data)) {\n                        throw Utils.Errors.BAD_CRC(`\"${decoder.decode(_entryName)}\"`);\n                    }\n                    return data;\n                } else {\n                    inflater.inflateAsync(function (result) {\n                        result.copy(result, 0);\n                        if (callback) {\n                            if (!crc32OK(result)) {\n                                callback(result, Utils.Errors.BAD_CRC()); //si added error\n                            } else {\n                                callback(result);\n                            }\n                        }\n                    });\n                }\n                break;\n            default:\n                if (async && callback) callback(Buffer.alloc(0), Utils.Errors.UNKNOWN_METHOD());\n                throw Utils.Errors.UNKNOWN_METHOD();\n        }\n    }\n\n    function compress(/*Boolean*/ async, /*Function*/ callback) {\n        if ((!uncompressedData || !uncompressedData.length) && Buffer.isBuffer(input)) {\n            // no data set or the data wasn't changed to require recompression\n            if (async && callback) callback(getCompressedDataFromZip());\n            return getCompressedDataFromZip();\n        }\n\n        if (uncompressedData.length && !_isDirectory) {\n            var compressedData;\n            // Local file header\n            switch (_centralHeader.method) {\n                case Utils.Constants.STORED:\n                    _centralHeader.compressedSize = _centralHeader.size;\n\n                    compressedData = Buffer.alloc(uncompressedData.length);\n                    uncompressedData.copy(compressedData);\n\n                    if (async && callback) callback(compressedData);\n                    return compressedData;\n                default:\n                case Utils.Constants.DEFLATED:\n                    var deflater = new Methods.Deflater(uncompressedData);\n                    if (!async) {\n                        var deflated = deflater.deflate();\n                        _centralHeader.compressedSize = deflated.length;\n                        return deflated;\n                    } else {\n                        deflater.deflateAsync(function (data) {\n                            compressedData = Buffer.alloc(data.length);\n                            _centralHeader.compressedSize = data.length;\n                            data.copy(compressedData);\n                            callback && callback(compressedData);\n                        });\n                    }\n                    deflater = null;\n                    break;\n            }\n        } else if (async && callback) {\n            callback(Buffer.alloc(0));\n        } else {\n            return Buffer.alloc(0);\n        }\n    }\n\n    function readUInt64LE(buffer, offset) {\n        return (buffer.readUInt32LE(offset + 4) << 4) + buffer.readUInt32LE(offset);\n    }\n\n    function parseExtra(data) {\n        try {\n            var offset = 0;\n            var signature, size, part;\n            while (offset + 4 < data.length) {\n                signature = data.readUInt16LE(offset);\n                offset += 2;\n                size = data.readUInt16LE(offset);\n                offset += 2;\n                part = data.slice(offset, offset + size);\n                offset += size;\n                if (Constants.ID_ZIP64 === signature) {\n                    parseZip64ExtendedInformation(part);\n                }\n            }\n        } catch (error) {\n            throw Utils.Errors.EXTRA_FIELD_PARSE_ERROR();\n        }\n    }\n\n    //Override header field values with values from the ZIP64 extra field\n    function parseZip64ExtendedInformation(data) {\n        var size, compressedSize, offset, diskNumStart;\n\n        if (data.length >= Constants.EF_ZIP64_SCOMP) {\n            size = readUInt64LE(data, Constants.EF_ZIP64_SUNCOMP);\n            if (_centralHeader.size === Constants.EF_ZIP64_OR_32) {\n                _centralHeader.size = size;\n            }\n        }\n        if (data.length >= Constants.EF_ZIP64_RHO) {\n            compressedSize = readUInt64LE(data, Constants.EF_ZIP64_SCOMP);\n            if (_centralHeader.compressedSize === Constants.EF_ZIP64_OR_32) {\n                _centralHeader.compressedSize = compressedSize;\n            }\n        }\n        if (data.length >= Constants.EF_ZIP64_DSN) {\n            offset = readUInt64LE(data, Constants.EF_ZIP64_RHO);\n            if (_centralHeader.offset === Constants.EF_ZIP64_OR_32) {\n                _centralHeader.offset = offset;\n            }\n        }\n        if (data.length >= Constants.EF_ZIP64_DSN + 4) {\n            diskNumStart = data.readUInt32LE(Constants.EF_ZIP64_DSN);\n            if (_centralHeader.diskNumStart === Constants.EF_ZIP64_OR_16) {\n                _centralHeader.diskNumStart = diskNumStart;\n            }\n        }\n    }\n\n    return {\n        get entryName() {\n            return decoder.decode(_entryName);\n        },\n        get rawEntryName() {\n            return _entryName;\n        },\n        set entryName(val) {\n            _entryName = Utils.toBuffer(val, decoder.encode);\n            var lastChar = _entryName[_entryName.length - 1];\n            _isDirectory = lastChar === 47 || lastChar === 92;\n            _centralHeader.fileNameLength = _entryName.length;\n        },\n\n        get efs() {\n            if (typeof _efs === \"function\") {\n                return _efs(this.entryName);\n            } else {\n                return _efs;\n            }\n        },\n\n        get extra() {\n            return _extra;\n        },\n        set extra(val) {\n            _extra = val;\n            _centralHeader.extraLength = val.length;\n            parseExtra(val);\n        },\n\n        get comment() {\n            return decoder.decode(_comment);\n        },\n        set comment(val) {\n            _comment = Utils.toBuffer(val, decoder.encode);\n            _centralHeader.commentLength = _comment.length;\n            if (_comment.length > 0xffff) throw Utils.Errors.COMMENT_TOO_LONG();\n        },\n\n        get name() {\n            var n = decoder.decode(_entryName);\n            return _isDirectory\n                ? n\n                      .substr(n.length - 1)\n                      .split(\"/\")\n                      .pop()\n                : n.split(\"/\").pop();\n        },\n        get isDirectory() {\n            return _isDirectory;\n        },\n\n        getCompressedData: function () {\n            return compress(false, null);\n        },\n\n        getCompressedDataAsync: function (/*Function*/ callback) {\n            compress(true, callback);\n        },\n\n        setData: function (value) {\n            uncompressedData = Utils.toBuffer(value, Utils.decoder.encode);\n            if (!_isDirectory && uncompressedData.length) {\n                _centralHeader.size = uncompressedData.length;\n                _centralHeader.method = Utils.Constants.DEFLATED;\n                _centralHeader.crc = Utils.crc32(value);\n                _centralHeader.changed = true;\n            } else {\n                // folders and blank files should be stored\n                _centralHeader.method = Utils.Constants.STORED;\n            }\n        },\n\n        getData: function (pass) {\n            if (_centralHeader.changed) {\n                return uncompressedData;\n            } else {\n                return decompress(false, null, pass);\n            }\n        },\n\n        getDataAsync: function (/*Function*/ callback, pass) {\n            if (_centralHeader.changed) {\n                callback(uncompressedData);\n            } else {\n                decompress(true, callback, pass);\n            }\n        },\n\n        set attr(attr) {\n            _centralHeader.attr = attr;\n        },\n        get attr() {\n            return _centralHeader.attr;\n        },\n\n        set header(/*Buffer*/ data) {\n            _centralHeader.loadFromBinary(data);\n        },\n\n        get header() {\n            return _centralHeader;\n        },\n\n        packCentralHeader: function () {\n            _centralHeader.flags_efs = this.efs;\n            _centralHeader.extraLength = _extra.length;\n            // 1. create header (buffer)\n            var header = _centralHeader.centralHeaderToBinary();\n            var addpos = Utils.Constants.CENHDR;\n            // 2. add file name\n            _entryName.copy(header, addpos);\n            addpos += _entryName.length;\n            // 3. add extra data\n            _extra.copy(header, addpos);\n            addpos += _centralHeader.extraLength;\n            // 4. add file comment\n            _comment.copy(header, addpos);\n            return header;\n        },\n\n        packLocalHeader: function () {\n            let addpos = 0;\n            _centralHeader.flags_efs = this.efs;\n            _centralHeader.extraLocalLength = _extralocal.length;\n            // 1. construct local header Buffer\n            const localHeaderBuf = _centralHeader.localHeaderToBinary();\n            // 2. localHeader - crate header buffer\n            const localHeader = Buffer.alloc(localHeaderBuf.length + _entryName.length + _centralHeader.extraLocalLength);\n            // 2.1 add localheader\n            localHeaderBuf.copy(localHeader, addpos);\n            addpos += localHeaderBuf.length;\n            // 2.2 add file name\n            _entryName.copy(localHeader, addpos);\n            addpos += _entryName.length;\n            // 2.3 add extra field\n            _extralocal.copy(localHeader, addpos);\n            addpos += _extralocal.length;\n\n            return localHeader;\n        },\n\n        toJSON: function () {\n            const bytes = function (nr) {\n                return \"<\" + ((nr && nr.length + \" bytes buffer\") || \"null\") + \">\";\n            };\n\n            return {\n                entryName: this.entryName,\n                name: this.name,\n                comment: this.comment,\n                isDirectory: this.isDirectory,\n                header: _centralHeader.toJSON(),\n                compressedData: bytes(input),\n                data: bytes(uncompressedData)\n            };\n        },\n\n        toString: function () {\n            return JSON.stringify(this.toJSON(), null, \"\\t\");\n        }\n    };\n};\n", "const ZipEntry = require(\"./zipEntry\");\nconst Headers = require(\"./headers\");\nconst Utils = require(\"./util\");\n\nmodule.exports = function (/*Buffer|null*/ inBuffer, /** object */ options) {\n    var entryList = [],\n        entryTable = {},\n        _comment = Buffer.alloc(0),\n        mainHeader = new Headers.MainHeader(),\n        loadedEntries = false;\n    var password = null;\n    const temporary = new Set();\n\n    // assign options\n    const opts = options;\n\n    const { noSort, decoder } = opts;\n\n    if (inBuffer) {\n        // is a memory buffer\n        readMainHeader(opts.readEntries);\n    } else {\n        // none. is a new file\n        loadedEntries = true;\n    }\n\n    function makeTemporaryFolders() {\n        const foldersList = new Set();\n\n        // Make list of all folders in file\n        for (const elem of Object.keys(entryTable)) {\n            const elements = elem.split(\"/\");\n            elements.pop(); // filename\n            if (!elements.length) continue; // no folders\n            for (let i = 0; i < elements.length; i++) {\n                const sub = elements.slice(0, i + 1).join(\"/\") + \"/\";\n                foldersList.add(sub);\n            }\n        }\n\n        // create missing folders as temporary\n        for (const elem of foldersList) {\n            if (!(elem in entryTable)) {\n                const tempfolder = new ZipEntry(opts);\n                tempfolder.entryName = elem;\n                tempfolder.attr = 0x10;\n                tempfolder.temporary = true;\n                entryList.push(tempfolder);\n                entryTable[tempfolder.entryName] = tempfolder;\n                temporary.add(tempfolder);\n            }\n        }\n    }\n\n    function readEntries() {\n        loadedEntries = true;\n        entryTable = {};\n        if (mainHeader.diskEntries > (inBuffer.length - mainHeader.offset) / Utils.Constants.CENHDR) {\n            throw Utils.Errors.DISK_ENTRY_TOO_LARGE();\n        }\n        entryList = new Array(mainHeader.diskEntries); // total number of entries\n        var index = mainHeader.offset; // offset of first CEN header\n        for (var i = 0; i < entryList.length; i++) {\n            var tmp = index,\n                entry = new ZipEntry(opts, inBuffer);\n            entry.header = inBuffer.slice(tmp, (tmp += Utils.Constants.CENHDR));\n\n            entry.entryName = inBuffer.slice(tmp, (tmp += entry.header.fileNameLength));\n\n            if (entry.header.extraLength) {\n                entry.extra = inBuffer.slice(tmp, (tmp += entry.header.extraLength));\n            }\n\n            if (entry.header.commentLength) entry.comment = inBuffer.slice(tmp, tmp + entry.header.commentLength);\n\n            index += entry.header.centralHeaderSize;\n\n            entryList[i] = entry;\n            entryTable[entry.entryName] = entry;\n        }\n        temporary.clear();\n        makeTemporaryFolders();\n    }\n\n    function readMainHeader(/*Boolean*/ readNow) {\n        var i = inBuffer.length - Utils.Constants.ENDHDR, // END header size\n            max = Math.max(0, i - 0xffff), // 0xFFFF is the max zip file comment length\n            n = max,\n            endStart = inBuffer.length,\n            endOffset = -1, // Start offset of the END header\n            commentEnd = 0;\n\n        // option to search header form entire file\n        const trailingSpace = typeof opts.trailingSpace === \"boolean\" ? opts.trailingSpace : false;\n        if (trailingSpace) max = 0;\n\n        for (i; i >= n; i--) {\n            if (inBuffer[i] !== 0x50) continue; // quick check that the byte is 'P'\n            if (inBuffer.readUInt32LE(i) === Utils.Constants.ENDSIG) {\n                // \"PK\\005\\006\"\n                endOffset = i;\n                commentEnd = i;\n                endStart = i + Utils.Constants.ENDHDR;\n                // We already found a regular signature, let's look just a bit further to check if there's any zip64 signature\n                n = i - Utils.Constants.END64HDR;\n                continue;\n            }\n\n            if (inBuffer.readUInt32LE(i) === Utils.Constants.END64SIG) {\n                // Found a zip64 signature, let's continue reading the whole zip64 record\n                n = max;\n                continue;\n            }\n\n            if (inBuffer.readUInt32LE(i) === Utils.Constants.ZIP64SIG) {\n                // Found the zip64 record, let's determine it's size\n                endOffset = i;\n                endStart = i + Utils.readBigUInt64LE(inBuffer, i + Utils.Constants.ZIP64SIZE) + Utils.Constants.ZIP64LEAD;\n                break;\n            }\n        }\n\n        if (endOffset == -1) throw Utils.Errors.INVALID_FORMAT();\n\n        mainHeader.loadFromBinary(inBuffer.slice(endOffset, endStart));\n        if (mainHeader.commentLength) {\n            _comment = inBuffer.slice(commentEnd + Utils.Constants.ENDHDR);\n        }\n        if (readNow) readEntries();\n    }\n\n    function sortEntries() {\n        if (entryList.length > 1 && !noSort) {\n            entryList.sort((a, b) => a.entryName.toLowerCase().localeCompare(b.entryName.toLowerCase()));\n        }\n    }\n\n    return {\n        /**\n         * Returns an array of ZipEntry objects existent in the current opened archive\n         * @return Array\n         */\n        get entries() {\n            if (!loadedEntries) {\n                readEntries();\n            }\n            return entryList.filter((e) => !temporary.has(e));\n        },\n\n        /**\n         * Archive comment\n         * @return {String}\n         */\n        get comment() {\n            return decoder.decode(_comment);\n        },\n        set comment(val) {\n            _comment = Utils.toBuffer(val, decoder.encode);\n            mainHeader.commentLength = _comment.length;\n        },\n\n        getEntryCount: function () {\n            if (!loadedEntries) {\n                return mainHeader.diskEntries;\n            }\n\n            return entryList.length;\n        },\n\n        forEach: function (callback) {\n            this.entries.forEach(callback);\n        },\n\n        /**\n         * Returns a reference to the entry with the given name or null if entry is inexistent\n         *\n         * @param entryName\n         * @return ZipEntry\n         */\n        getEntry: function (/*String*/ entryName) {\n            if (!loadedEntries) {\n                readEntries();\n            }\n            return entryTable[entryName] || null;\n        },\n\n        /**\n         * Adds the given entry to the entry list\n         *\n         * @param entry\n         */\n        setEntry: function (/*ZipEntry*/ entry) {\n            if (!loadedEntries) {\n                readEntries();\n            }\n            entryList.push(entry);\n            entryTable[entry.entryName] = entry;\n            mainHeader.totalEntries = entryList.length;\n        },\n\n        /**\n         * Removes the file with the given name from the entry list.\n         *\n         * If the entry is a directory, then all nested files and directories will be removed\n         * @param entryName\n         * @returns {void}\n         */\n        deleteFile: function (/*String*/ entryName, withsubfolders = true) {\n            if (!loadedEntries) {\n                readEntries();\n            }\n            const entry = entryTable[entryName];\n            const list = this.getEntryChildren(entry, withsubfolders).map((child) => child.entryName);\n\n            list.forEach(this.deleteEntry);\n        },\n\n        /**\n         * Removes the entry with the given name from the entry list.\n         *\n         * @param {string} entryName\n         * @returns {void}\n         */\n        deleteEntry: function (/*String*/ entryName) {\n            if (!loadedEntries) {\n                readEntries();\n            }\n            const entry = entryTable[entryName];\n            const index = entryList.indexOf(entry);\n            if (index >= 0) {\n                entryList.splice(index, 1);\n                delete entryTable[entryName];\n                mainHeader.totalEntries = entryList.length;\n            }\n        },\n\n        /**\n         *  Iterates and returns all nested files and directories of the given entry\n         *\n         * @param entry\n         * @return Array\n         */\n        getEntryChildren: function (/*ZipEntry*/ entry, subfolders = true) {\n            if (!loadedEntries) {\n                readEntries();\n            }\n            if (typeof entry === \"object\") {\n                if (entry.isDirectory && subfolders) {\n                    const list = [];\n                    const name = entry.entryName;\n\n                    for (const zipEntry of entryList) {\n                        if (zipEntry.entryName.startsWith(name)) {\n                            list.push(zipEntry);\n                        }\n                    }\n                    return list;\n                } else {\n                    return [entry];\n                }\n            }\n            return [];\n        },\n\n        /**\n         *  How many child elements entry has\n         *\n         * @param {ZipEntry} entry\n         * @return {integer}\n         */\n        getChildCount: function (entry) {\n            if (entry && entry.isDirectory) {\n                const list = this.getEntryChildren(entry);\n                return list.includes(entry) ? list.length - 1 : list.length;\n            }\n            return 0;\n        },\n\n        /**\n         * Returns the zip file\n         *\n         * @return Buffer\n         */\n        compressToBuffer: function () {\n            if (!loadedEntries) {\n                readEntries();\n            }\n            sortEntries();\n\n            const dataBlock = [];\n            const headerBlocks = [];\n            let totalSize = 0;\n            let dindex = 0;\n\n            mainHeader.size = 0;\n            mainHeader.offset = 0;\n            let totalEntries = 0;\n\n            for (const entry of this.entries) {\n                // compress data and set local and entry header accordingly. Reason why is called first\n                const compressedData = entry.getCompressedData();\n                entry.header.offset = dindex;\n\n                // 1. construct local header\n                const localHeader = entry.packLocalHeader();\n\n                // 2. offsets\n                const dataLength = localHeader.length + compressedData.length;\n                dindex += dataLength;\n\n                // 3. store values in sequence\n                dataBlock.push(localHeader);\n                dataBlock.push(compressedData);\n\n                // 4. construct central header\n                const centralHeader = entry.packCentralHeader();\n                headerBlocks.push(centralHeader);\n                // 5. update main header\n                mainHeader.size += centralHeader.length;\n                totalSize += dataLength + centralHeader.length;\n                totalEntries++;\n            }\n\n            totalSize += mainHeader.mainHeaderSize; // also includes zip file comment length\n            // point to end of data and beginning of central directory first record\n            mainHeader.offset = dindex;\n            mainHeader.totalEntries = totalEntries;\n\n            dindex = 0;\n            const outBuffer = Buffer.alloc(totalSize);\n            // write data blocks\n            for (const content of dataBlock) {\n                content.copy(outBuffer, dindex);\n                dindex += content.length;\n            }\n\n            // write central directory entries\n            for (const content of headerBlocks) {\n                content.copy(outBuffer, dindex);\n                dindex += content.length;\n            }\n\n            // write main header\n            const mh = mainHeader.toBinary();\n            if (_comment) {\n                _comment.copy(mh, Utils.Constants.ENDHDR); // add zip file comment\n            }\n            mh.copy(outBuffer, dindex);\n\n            // Since we update entry and main header offsets,\n            // they are no longer valid and we have to reset content\n            // (Issue 64)\n\n            inBuffer = outBuffer;\n            loadedEntries = false;\n\n            return outBuffer;\n        },\n\n        toAsyncBuffer: function (/*Function*/ onSuccess, /*Function*/ onFail, /*Function*/ onItemStart, /*Function*/ onItemEnd) {\n            try {\n                if (!loadedEntries) {\n                    readEntries();\n                }\n                sortEntries();\n\n                const dataBlock = [];\n                const centralHeaders = [];\n                let totalSize = 0;\n                let dindex = 0;\n                let totalEntries = 0;\n\n                mainHeader.size = 0;\n                mainHeader.offset = 0;\n\n                const compress2Buffer = function (entryLists) {\n                    if (entryLists.length > 0) {\n                        const entry = entryLists.shift();\n                        const name = entry.entryName + entry.extra.toString();\n                        if (onItemStart) onItemStart(name);\n                        entry.getCompressedDataAsync(function (compressedData) {\n                            if (onItemEnd) onItemEnd(name);\n                            entry.header.offset = dindex;\n\n                            // 1. construct local header\n                            const localHeader = entry.packLocalHeader();\n\n                            // 2. offsets\n                            const dataLength = localHeader.length + compressedData.length;\n                            dindex += dataLength;\n\n                            // 3. store values in sequence\n                            dataBlock.push(localHeader);\n                            dataBlock.push(compressedData);\n\n                            // central header\n                            const centalHeader = entry.packCentralHeader();\n                            centralHeaders.push(centalHeader);\n                            mainHeader.size += centalHeader.length;\n                            totalSize += dataLength + centalHeader.length;\n                            totalEntries++;\n\n                            compress2Buffer(entryLists);\n                        });\n                    } else {\n                        totalSize += mainHeader.mainHeaderSize; // also includes zip file comment length\n                        // point to end of data and beginning of central directory first record\n                        mainHeader.offset = dindex;\n                        mainHeader.totalEntries = totalEntries;\n\n                        dindex = 0;\n                        const outBuffer = Buffer.alloc(totalSize);\n                        dataBlock.forEach(function (content) {\n                            content.copy(outBuffer, dindex); // write data blocks\n                            dindex += content.length;\n                        });\n                        centralHeaders.forEach(function (content) {\n                            content.copy(outBuffer, dindex); // write central directory entries\n                            dindex += content.length;\n                        });\n\n                        const mh = mainHeader.toBinary();\n                        if (_comment) {\n                            _comment.copy(mh, Utils.Constants.ENDHDR); // add zip file comment\n                        }\n\n                        mh.copy(outBuffer, dindex); // write main header\n\n                        // Since we update entry and main header offsets, they are no\n                        // longer valid and we have to reset content using our new buffer\n                        // (Issue 64)\n\n                        inBuffer = outBuffer;\n                        loadedEntries = false;\n\n                        onSuccess(outBuffer);\n                    }\n                };\n\n                compress2Buffer(Array.from(this.entries));\n            } catch (e) {\n                onFail(e);\n            }\n        }\n    };\n};\n", "const Utils = require(\"./util\");\nconst pth = require(\"path\");\nconst ZipEntry = require(\"./zipEntry\");\nconst ZipFile = require(\"./zipFile\");\n\nconst get_Bool = (...val) => Utils.findLast(val, (c) => typeof c === \"boolean\");\nconst get_Str = (...val) => Utils.findLast(val, (c) => typeof c === \"string\");\nconst get_Fun = (...val) => Utils.findLast(val, (c) => typeof c === \"function\");\n\nconst defaultOptions = {\n    // option \"noSort\" : if true it disables files sorting\n    noSort: false,\n    // read entries during load (initial loading may be slower)\n    readEntries: false,\n    // default method is none\n    method: Utils.Constants.NONE,\n    // file system\n    fs: null\n};\n\nmodule.exports = function (/**String*/ input, /** object */ options) {\n    let inBuffer = null;\n\n    // create object based default options, allowing them to be overwritten\n    const opts = Object.assign(Object.create(null), defaultOptions);\n\n    // test input variable\n    if (input && \"object\" === typeof input) {\n        // if value is not buffer we accept it to be object with options\n        if (!(input instanceof Uint8Array)) {\n            Object.assign(opts, input);\n            input = opts.input ? opts.input : undefined;\n            if (opts.input) delete opts.input;\n        }\n\n        // if input is buffer\n        if (Buffer.isBuffer(input)) {\n            inBuffer = input;\n            opts.method = Utils.Constants.BUFFER;\n            input = undefined;\n        }\n    }\n\n    // assign options\n    Object.assign(opts, options);\n\n    // instanciate utils filesystem\n    const filetools = new Utils(opts);\n\n    if (typeof opts.decoder !== \"object\" || typeof opts.decoder.encode !== \"function\" || typeof opts.decoder.decode !== \"function\") {\n        opts.decoder = Utils.decoder;\n    }\n\n    // if input is file name we retrieve its content\n    if (input && \"string\" === typeof input) {\n        // load zip file\n        if (filetools.fs.existsSync(input)) {\n            opts.method = Utils.Constants.FILE;\n            opts.filename = input;\n            inBuffer = filetools.fs.readFileSync(input);\n        } else {\n            throw Utils.Errors.INVALID_FILENAME();\n        }\n    }\n\n    // create variable\n    const _zip = new ZipFile(inBuffer, opts);\n\n    const { canonical, sanitize, zipnamefix } = Utils;\n\n    function getEntry(/**Object*/ entry) {\n        if (entry && _zip) {\n            var item;\n            // If entry was given as a file name\n            if (typeof entry === \"string\") item = _zip.getEntry(pth.posix.normalize(entry));\n            // if entry was given as a ZipEntry object\n            if (typeof entry === \"object\" && typeof entry.entryName !== \"undefined\" && typeof entry.header !== \"undefined\") item = _zip.getEntry(entry.entryName);\n\n            if (item) {\n                return item;\n            }\n        }\n        return null;\n    }\n\n    function fixPath(zipPath) {\n        const { join, normalize, sep } = pth.posix;\n        // convert windows file separators and normalize\n        return join(\".\", normalize(sep + zipPath.split(\"\\\\\").join(sep) + sep));\n    }\n\n    function filenameFilter(filterfn) {\n        if (filterfn instanceof RegExp) {\n            // if filter is RegExp wrap it\n            return (function (rx) {\n                return function (filename) {\n                    return rx.test(filename);\n                };\n            })(filterfn);\n        } else if (\"function\" !== typeof filterfn) {\n            // if filter is not function we will replace it\n            return () => true;\n        }\n        return filterfn;\n    }\n\n    // keep last character on folders\n    const relativePath = (local, entry) => {\n        let lastChar = entry.slice(-1);\n        lastChar = lastChar === filetools.sep ? filetools.sep : \"\";\n        return pth.relative(local, entry) + lastChar;\n    };\n\n    return {\n        /**\n         * Extracts the given entry from the archive and returns the content as a Buffer object\n         * @param {ZipEntry|string} entry ZipEntry object or String with the full path of the entry\n         * @param {Buffer|string} [pass] - password\n         * @return Buffer or Null in case of error\n         */\n        readFile: function (entry, pass) {\n            var item = getEntry(entry);\n            return (item && item.getData(pass)) || null;\n        },\n\n        /**\n         * Returns how many child elements has on entry (directories) on files it is always 0\n         * @param {ZipEntry|string} entry ZipEntry object or String with the full path of the entry\n         * @returns {integer}\n         */\n        childCount: function (entry) {\n            const item = getEntry(entry);\n            if (item) {\n                return _zip.getChildCount(item);\n            }\n        },\n\n        /**\n         * Asynchronous readFile\n         * @param {ZipEntry|string} entry ZipEntry object or String with the full path of the entry\n         * @param {callback} callback\n         *\n         * @return Buffer or Null in case of error\n         */\n        readFileAsync: function (entry, callback) {\n            var item = getEntry(entry);\n            if (item) {\n                item.getDataAsync(callback);\n            } else {\n                callback(null, \"getEntry failed for:\" + entry);\n            }\n        },\n\n        /**\n         * Extracts the given entry from the archive and returns the content as plain text in the given encoding\n         * @param {ZipEntry|string} entry - ZipEntry object or String with the full path of the entry\n         * @param {string} encoding - Optional. If no encoding is specified utf8 is used\n         *\n         * @return String\n         */\n        readAsText: function (entry, encoding) {\n            var item = getEntry(entry);\n            if (item) {\n                var data = item.getData();\n                if (data && data.length) {\n                    return data.toString(encoding || \"utf8\");\n                }\n            }\n            return \"\";\n        },\n\n        /**\n         * Asynchronous readAsText\n         * @param {ZipEntry|string} entry ZipEntry object or String with the full path of the entry\n         * @param {callback} callback\n         * @param {string} [encoding] - Optional. If no encoding is specified utf8 is used\n         *\n         * @return String\n         */\n        readAsTextAsync: function (entry, callback, encoding) {\n            var item = getEntry(entry);\n            if (item) {\n                item.getDataAsync(function (data, err) {\n                    if (err) {\n                        callback(data, err);\n                        return;\n                    }\n\n                    if (data && data.length) {\n                        callback(data.toString(encoding || \"utf8\"));\n                    } else {\n                        callback(\"\");\n                    }\n                });\n            } else {\n                callback(\"\");\n            }\n        },\n\n        /**\n         * Remove the entry from the file or the entry and all it's nested directories and files if the given entry is a directory\n         *\n         * @param {ZipEntry|string} entry\n         * @returns {void}\n         */\n        deleteFile: function (entry, withsubfolders = true) {\n            // @TODO: test deleteFile\n            var item = getEntry(entry);\n            if (item) {\n                _zip.deleteFile(item.entryName, withsubfolders);\n            }\n        },\n\n        /**\n         * Remove the entry from the file or directory without affecting any nested entries\n         *\n         * @param {ZipEntry|string} entry\n         * @returns {void}\n         */\n        deleteEntry: function (entry) {\n            // @TODO: test deleteEntry\n            var item = getEntry(entry);\n            if (item) {\n                _zip.deleteEntry(item.entryName);\n            }\n        },\n\n        /**\n         * Adds a comment to the zip. The zip must be rewritten after adding the comment.\n         *\n         * @param {string} comment\n         */\n        addZipComment: function (comment) {\n            // @TODO: test addZipComment\n            _zip.comment = comment;\n        },\n\n        /**\n         * Returns the zip comment\n         *\n         * @return String\n         */\n        getZipComment: function () {\n            return _zip.comment || \"\";\n        },\n\n        /**\n         * Adds a comment to a specified zipEntry. The zip must be rewritten after adding the comment\n         * The comment cannot exceed 65535 characters in length\n         *\n         * @param {ZipEntry} entry\n         * @param {string} comment\n         */\n        addZipEntryComment: function (entry, comment) {\n            var item = getEntry(entry);\n            if (item) {\n                item.comment = comment;\n            }\n        },\n\n        /**\n         * Returns the comment of the specified entry\n         *\n         * @param {ZipEntry} entry\n         * @return String\n         */\n        getZipEntryComment: function (entry) {\n            var item = getEntry(entry);\n            if (item) {\n                return item.comment || \"\";\n            }\n            return \"\";\n        },\n\n        /**\n         * Updates the content of an existing entry inside the archive. The zip must be rewritten after updating the content\n         *\n         * @param {ZipEntry} entry\n         * @param {Buffer} content\n         */\n        updateFile: function (entry, content) {\n            var item = getEntry(entry);\n            if (item) {\n                item.setData(content);\n            }\n        },\n\n        /**\n         * Adds a file from the disk to the archive\n         *\n         * @param {string} localPath File to add to zip\n         * @param {string} [zipPath] Optional path inside the zip\n         * @param {string} [zipName] Optional name for the file\n         * @param {string} [comment] Optional file comment\n         */\n        addLocalFile: function (localPath, zipPath, zipName, comment) {\n            if (filetools.fs.existsSync(localPath)) {\n                // fix ZipPath\n                zipPath = zipPath ? fixPath(zipPath) : \"\";\n\n                // p - local file name\n                const p = pth.win32.basename(pth.win32.normalize(localPath));\n\n                // add file name into zippath\n                zipPath += zipName ? zipName : p;\n\n                // read file attributes\n                const _attr = filetools.fs.statSync(localPath);\n\n                // get file content\n                const data = _attr.isFile() ? filetools.fs.readFileSync(localPath) : Buffer.alloc(0);\n\n                // if folder\n                if (_attr.isDirectory()) zipPath += filetools.sep;\n\n                // add file into zip file\n                this.addFile(zipPath, data, comment, _attr);\n            } else {\n                throw Utils.Errors.FILE_NOT_FOUND(localPath);\n            }\n        },\n\n        /**\n         * Callback for showing if everything was done.\n         *\n         * @callback doneCallback\n         * @param {Error} err - Error object\n         * @param {boolean} done - was request fully completed\n         */\n\n        /**\n         * Adds a file from the disk to the archive\n         *\n         * @param {(object|string)} options - options object, if it is string it us used as localPath.\n         * @param {string} options.localPath - Local path to the file.\n         * @param {string} [options.comment] - Optional file comment.\n         * @param {string} [options.zipPath] - Optional path inside the zip\n         * @param {string} [options.zipName] - Optional name for the file\n         * @param {doneCallback} callback - The callback that handles the response.\n         */\n        addLocalFileAsync: function (options, callback) {\n            options = typeof options === \"object\" ? options : { localPath: options };\n            const localPath = pth.resolve(options.localPath);\n            const { comment } = options;\n            let { zipPath, zipName } = options;\n            const self = this;\n\n            filetools.fs.stat(localPath, function (err, stats) {\n                if (err) return callback(err, false);\n                // fix ZipPath\n                zipPath = zipPath ? fixPath(zipPath) : \"\";\n                // p - local file name\n                const p = pth.win32.basename(pth.win32.normalize(localPath));\n                // add file name into zippath\n                zipPath += zipName ? zipName : p;\n\n                if (stats.isFile()) {\n                    filetools.fs.readFile(localPath, function (err, data) {\n                        if (err) return callback(err, false);\n                        self.addFile(zipPath, data, comment, stats);\n                        return setImmediate(callback, undefined, true);\n                    });\n                } else if (stats.isDirectory()) {\n                    zipPath += filetools.sep;\n                    self.addFile(zipPath, Buffer.alloc(0), comment, stats);\n                    return setImmediate(callback, undefined, true);\n                }\n            });\n        },\n\n        /**\n         * Adds a local directory and all its nested files and directories to the archive\n         *\n         * @param {string} localPath - local path to the folder\n         * @param {string} [zipPath] - optional path inside zip\n         * @param {(RegExp|function)} [filter] - optional RegExp or Function if files match will be included.\n         */\n        addLocalFolder: function (localPath, zipPath, filter) {\n            // Prepare filter\n            filter = filenameFilter(filter);\n\n            // fix ZipPath\n            zipPath = zipPath ? fixPath(zipPath) : \"\";\n\n            // normalize the path first\n            localPath = pth.normalize(localPath);\n\n            if (filetools.fs.existsSync(localPath)) {\n                const items = filetools.findFiles(localPath);\n                const self = this;\n\n                if (items.length) {\n                    for (const filepath of items) {\n                        const p = pth.join(zipPath, relativePath(localPath, filepath));\n                        if (filter(p)) {\n                            self.addLocalFile(filepath, pth.dirname(p));\n                        }\n                    }\n                }\n            } else {\n                throw Utils.Errors.FILE_NOT_FOUND(localPath);\n            }\n        },\n\n        /**\n         * Asynchronous addLocalFolder\n         * @param {string} localPath\n         * @param {callback} callback\n         * @param {string} [zipPath] optional path inside zip\n         * @param {RegExp|function} [filter] optional RegExp or Function if files match will\n         *               be included.\n         */\n        addLocalFolderAsync: function (localPath, callback, zipPath, filter) {\n            // Prepare filter\n            filter = filenameFilter(filter);\n\n            // fix ZipPath\n            zipPath = zipPath ? fixPath(zipPath) : \"\";\n\n            // normalize the path first\n            localPath = pth.normalize(localPath);\n\n            var self = this;\n            filetools.fs.open(localPath, \"r\", function (err) {\n                if (err && err.code === \"ENOENT\") {\n                    callback(undefined, Utils.Errors.FILE_NOT_FOUND(localPath));\n                } else if (err) {\n                    callback(undefined, err);\n                } else {\n                    var items = filetools.findFiles(localPath);\n                    var i = -1;\n\n                    var next = function () {\n                        i += 1;\n                        if (i < items.length) {\n                            var filepath = items[i];\n                            var p = relativePath(localPath, filepath).split(\"\\\\\").join(\"/\"); //windows fix\n                            p = p\n                                .normalize(\"NFD\")\n                                .replace(/[\\u0300-\\u036f]/g, \"\")\n                                .replace(/[^\\x20-\\x7E]/g, \"\"); // accent fix\n                            if (filter(p)) {\n                                filetools.fs.stat(filepath, function (er0, stats) {\n                                    if (er0) callback(undefined, er0);\n                                    if (stats.isFile()) {\n                                        filetools.fs.readFile(filepath, function (er1, data) {\n                                            if (er1) {\n                                                callback(undefined, er1);\n                                            } else {\n                                                self.addFile(zipPath + p, data, \"\", stats);\n                                                next();\n                                            }\n                                        });\n                                    } else {\n                                        self.addFile(zipPath + p + \"/\", Buffer.alloc(0), \"\", stats);\n                                        next();\n                                    }\n                                });\n                            } else {\n                                process.nextTick(() => {\n                                    next();\n                                });\n                            }\n                        } else {\n                            callback(true, undefined);\n                        }\n                    };\n\n                    next();\n                }\n            });\n        },\n\n        /**\n         * Adds a local directory and all its nested files and directories to the archive\n         *\n         * @param {object | string} options - options object, if it is string it us used as localPath.\n         * @param {string} options.localPath - Local path to the folder.\n         * @param {string} [options.zipPath] - optional path inside zip.\n         * @param {RegExp|function} [options.filter] - optional RegExp or Function if files match will be included.\n         * @param {function|string} [options.namefix] - optional function to help fix filename\n         * @param {doneCallback} callback - The callback that handles the response.\n         *\n         */\n        addLocalFolderAsync2: function (options, callback) {\n            const self = this;\n            options = typeof options === \"object\" ? options : { localPath: options };\n            localPath = pth.resolve(fixPath(options.localPath));\n            let { zipPath, filter, namefix } = options;\n\n            if (filter instanceof RegExp) {\n                filter = (function (rx) {\n                    return function (filename) {\n                        return rx.test(filename);\n                    };\n                })(filter);\n            } else if (\"function\" !== typeof filter) {\n                filter = function () {\n                    return true;\n                };\n            }\n\n            // fix ZipPath\n            zipPath = zipPath ? fixPath(zipPath) : \"\";\n\n            // Check Namefix function\n            if (namefix == \"latin1\") {\n                namefix = (str) =>\n                    str\n                        .normalize(\"NFD\")\n                        .replace(/[\\u0300-\\u036f]/g, \"\")\n                        .replace(/[^\\x20-\\x7E]/g, \"\"); // accent fix (latin1 characers only)\n            }\n\n            if (typeof namefix !== \"function\") namefix = (str) => str;\n\n            // internal, create relative path + fix the name\n            const relPathFix = (entry) => pth.join(zipPath, namefix(relativePath(localPath, entry)));\n            const fileNameFix = (entry) => pth.win32.basename(pth.win32.normalize(namefix(entry)));\n\n            filetools.fs.open(localPath, \"r\", function (err) {\n                if (err && err.code === \"ENOENT\") {\n                    callback(undefined, Utils.Errors.FILE_NOT_FOUND(localPath));\n                } else if (err) {\n                    callback(undefined, err);\n                } else {\n                    filetools.findFilesAsync(localPath, function (err, fileEntries) {\n                        if (err) return callback(err);\n                        fileEntries = fileEntries.filter((dir) => filter(relPathFix(dir)));\n                        if (!fileEntries.length) callback(undefined, false);\n\n                        setImmediate(\n                            fileEntries.reverse().reduce(function (next, entry) {\n                                return function (err, done) {\n                                    if (err || done === false) return setImmediate(next, err, false);\n\n                                    self.addLocalFileAsync(\n                                        {\n                                            localPath: entry,\n                                            zipPath: pth.dirname(relPathFix(entry)),\n                                            zipName: fileNameFix(entry)\n                                        },\n                                        next\n                                    );\n                                };\n                            }, callback)\n                        );\n                    });\n                }\n            });\n        },\n\n        /**\n         * Adds a local directory and all its nested files and directories to the archive\n         *\n         * @param {string} localPath - path where files will be extracted\n         * @param {object} props - optional properties\n         * @param {string} [props.zipPath] - optional path inside zip\n         * @param {RegExp|function} [props.filter] - optional RegExp or Function if files match will be included.\n         * @param {function|string} [props.namefix] - optional function to help fix filename\n         */\n        addLocalFolderPromise: function (localPath, props) {\n            return new Promise((resolve, reject) => {\n                this.addLocalFolderAsync2(Object.assign({ localPath }, props), (err, done) => {\n                    if (err) reject(err);\n                    if (done) resolve(this);\n                });\n            });\n        },\n\n        /**\n         * Allows you to create a entry (file or directory) in the zip file.\n         * If you want to create a directory the entryName must end in / and a null buffer should be provided.\n         * Comment and attributes are optional\n         *\n         * @param {string} entryName\n         * @param {Buffer | string} content - file content as buffer or utf8 coded string\n         * @param {string} [comment] - file comment\n         * @param {number | object} [attr] - number as unix file permissions, object as filesystem Stats object\n         */\n        addFile: function (entryName, content, comment, attr) {\n            entryName = zipnamefix(entryName);\n            let entry = getEntry(entryName);\n            const update = entry != null;\n\n            // prepare new entry\n            if (!update) {\n                entry = new ZipEntry(opts);\n                entry.entryName = entryName;\n            }\n            entry.comment = comment || \"\";\n\n            const isStat = \"object\" === typeof attr && attr instanceof filetools.fs.Stats;\n\n            // last modification time from file stats\n            if (isStat) {\n                entry.header.time = attr.mtime;\n            }\n\n            // Set file attribute\n            var fileattr = entry.isDirectory ? 0x10 : 0; // (MS-DOS directory flag)\n\n            // extended attributes field for Unix\n            // set file type either S_IFDIR / S_IFREG\n            let unix = entry.isDirectory ? 0x4000 : 0x8000;\n\n            if (isStat) {\n                // File attributes from file stats\n                unix |= 0xfff & attr.mode;\n            } else if (\"number\" === typeof attr) {\n                // attr from given attr values\n                unix |= 0xfff & attr;\n            } else {\n                // Default values:\n                unix |= entry.isDirectory ? 0o755 : 0o644; // permissions (drwxr-xr-x) or (-r-wr--r--)\n            }\n\n            fileattr = (fileattr | (unix << 16)) >>> 0; // add attributes\n\n            entry.attr = fileattr;\n\n            entry.setData(content);\n            if (!update) _zip.setEntry(entry);\n\n            return entry;\n        },\n\n        /**\n         * Returns an array of ZipEntry objects representing the files and folders inside the archive\n         *\n         * @param {string} [password]\n         * @returns Array\n         */\n        getEntries: function (password) {\n            _zip.password = password;\n            return _zip ? _zip.entries : [];\n        },\n\n        /**\n         * Returns a ZipEntry object representing the file or folder specified by ``name``.\n         *\n         * @param {string} name\n         * @return ZipEntry\n         */\n        getEntry: function (/**String*/ name) {\n            return getEntry(name);\n        },\n\n        getEntryCount: function () {\n            return _zip.getEntryCount();\n        },\n\n        forEach: function (callback) {\n            return _zip.forEach(callback);\n        },\n\n        /**\n         * Extracts the given entry to the given targetPath\n         * If the entry is a directory inside the archive, the entire directory and it's subdirectories will be extracted\n         *\n         * @param {string|ZipEntry} entry - ZipEntry object or String with the full path of the entry\n         * @param {string} targetPath - Target folder where to write the file\n         * @param {boolean} [maintainEntryPath=true] - If maintainEntryPath is true and the entry is inside a folder, the entry folder will be created in targetPath as well. Default is TRUE\n         * @param {boolean} [overwrite=false] - If the file already exists at the target path, the file will be overwriten if this is true.\n         * @param {boolean} [keepOriginalPermission=false] - The file will be set as the permission from the entry if this is true.\n         * @param {string} [outFileName] - String If set will override the filename of the extracted file (Only works if the entry is a file)\n         *\n         * @return Boolean\n         */\n        extractEntryTo: function (entry, targetPath, maintainEntryPath, overwrite, keepOriginalPermission, outFileName) {\n            overwrite = get_Bool(false, overwrite);\n            keepOriginalPermission = get_Bool(false, keepOriginalPermission);\n            maintainEntryPath = get_Bool(true, maintainEntryPath);\n            outFileName = get_Str(keepOriginalPermission, outFileName);\n\n            var item = getEntry(entry);\n            if (!item) {\n                throw Utils.Errors.NO_ENTRY();\n            }\n\n            var entryName = canonical(item.entryName);\n\n            var target = sanitize(targetPath, outFileName && !item.isDirectory ? outFileName : maintainEntryPath ? entryName : pth.basename(entryName));\n\n            if (item.isDirectory) {\n                var children = _zip.getEntryChildren(item);\n                children.forEach(function (child) {\n                    if (child.isDirectory) return;\n                    var content = child.getData();\n                    if (!content) {\n                        throw Utils.Errors.CANT_EXTRACT_FILE();\n                    }\n                    var name = canonical(child.entryName);\n                    var childName = sanitize(targetPath, maintainEntryPath ? name : pth.basename(name));\n                    // The reverse operation for attr depend on method addFile()\n                    const fileAttr = keepOriginalPermission ? child.header.fileAttr : undefined;\n                    filetools.writeFileTo(childName, content, overwrite, fileAttr);\n                });\n                return true;\n            }\n\n            var content = item.getData(_zip.password);\n            if (!content) throw Utils.Errors.CANT_EXTRACT_FILE();\n\n            if (filetools.fs.existsSync(target) && !overwrite) {\n                throw Utils.Errors.CANT_OVERRIDE();\n            }\n            // The reverse operation for attr depend on method addFile()\n            const fileAttr = keepOriginalPermission ? entry.header.fileAttr : undefined;\n            filetools.writeFileTo(target, content, overwrite, fileAttr);\n\n            return true;\n        },\n\n        /**\n         * Test the archive\n         * @param {string} [pass]\n         */\n        test: function (pass) {\n            if (!_zip) {\n                return false;\n            }\n\n            for (var entry in _zip.entries) {\n                try {\n                    if (entry.isDirectory) {\n                        continue;\n                    }\n                    var content = _zip.entries[entry].getData(pass);\n                    if (!content) {\n                        return false;\n                    }\n                } catch (err) {\n                    return false;\n                }\n            }\n            return true;\n        },\n\n        /**\n         * Extracts the entire archive to the given location\n         *\n         * @param {string} targetPath Target location\n         * @param {boolean} [overwrite=false] If the file already exists at the target path, the file will be overwriten if this is true.\n         *                  Default is FALSE\n         * @param {boolean} [keepOriginalPermission=false] The file will be set as the permission from the entry if this is true.\n         *                  Default is FALSE\n         * @param {string|Buffer} [pass] password\n         */\n        extractAllTo: function (targetPath, overwrite, keepOriginalPermission, pass) {\n            keepOriginalPermission = get_Bool(false, keepOriginalPermission);\n            pass = get_Str(keepOriginalPermission, pass);\n            overwrite = get_Bool(false, overwrite);\n            if (!_zip) throw Utils.Errors.NO_ZIP();\n\n            _zip.entries.forEach(function (entry) {\n                var entryName = sanitize(targetPath, canonical(entry.entryName));\n                if (entry.isDirectory) {\n                    filetools.makeDir(entryName);\n                    return;\n                }\n                var content = entry.getData(pass);\n                if (!content) {\n                    throw Utils.Errors.CANT_EXTRACT_FILE();\n                }\n                // The reverse operation for attr depend on method addFile()\n                const fileAttr = keepOriginalPermission ? entry.header.fileAttr : undefined;\n                filetools.writeFileTo(entryName, content, overwrite, fileAttr);\n                try {\n                    filetools.fs.utimesSync(entryName, entry.header.time, entry.header.time);\n                } catch (err) {\n                    throw Utils.Errors.CANT_EXTRACT_FILE();\n                }\n            });\n        },\n\n        /**\n         * Asynchronous extractAllTo\n         *\n         * @param {string} targetPath Target location\n         * @param {boolean} [overwrite=false] If the file already exists at the target path, the file will be overwriten if this is true.\n         *                  Default is FALSE\n         * @param {boolean} [keepOriginalPermission=false] The file will be set as the permission from the entry if this is true.\n         *                  Default is FALSE\n         * @param {function} callback The callback will be executed when all entries are extracted successfully or any error is thrown.\n         */\n        extractAllToAsync: function (targetPath, overwrite, keepOriginalPermission, callback) {\n            callback = get_Fun(overwrite, keepOriginalPermission, callback);\n            keepOriginalPermission = get_Bool(false, keepOriginalPermission);\n            overwrite = get_Bool(false, overwrite);\n            if (!callback) {\n                return new Promise((resolve, reject) => {\n                    this.extractAllToAsync(targetPath, overwrite, keepOriginalPermission, function (err) {\n                        if (err) {\n                            reject(err);\n                        } else {\n                            resolve(this);\n                        }\n                    });\n                });\n            }\n            if (!_zip) {\n                callback(Utils.Errors.NO_ZIP());\n                return;\n            }\n\n            targetPath = pth.resolve(targetPath);\n            // convert entryName to\n            const getPath = (entry) => sanitize(targetPath, pth.normalize(canonical(entry.entryName)));\n            const getError = (msg, file) => new Error(msg + ': \"' + file + '\"');\n\n            // separate directories from files\n            const dirEntries = [];\n            const fileEntries = [];\n            _zip.entries.forEach((e) => {\n                if (e.isDirectory) {\n                    dirEntries.push(e);\n                } else {\n                    fileEntries.push(e);\n                }\n            });\n\n            // Create directory entries first synchronously\n            // this prevents race condition and assures folders are there before writing files\n            for (const entry of dirEntries) {\n                const dirPath = getPath(entry);\n                // The reverse operation for attr depend on method addFile()\n                const dirAttr = keepOriginalPermission ? entry.header.fileAttr : undefined;\n                try {\n                    filetools.makeDir(dirPath);\n                    if (dirAttr) filetools.fs.chmodSync(dirPath, dirAttr);\n                    // in unix timestamp will change if files are later added to folder, but still\n                    filetools.fs.utimesSync(dirPath, entry.header.time, entry.header.time);\n                } catch (er) {\n                    callback(getError(\"Unable to create folder\", dirPath));\n                }\n            }\n\n            fileEntries.reverse().reduce(function (next, entry) {\n                return function (err) {\n                    if (err) {\n                        next(err);\n                    } else {\n                        const entryName = pth.normalize(canonical(entry.entryName));\n                        const filePath = sanitize(targetPath, entryName);\n                        entry.getDataAsync(function (content, err_1) {\n                            if (err_1) {\n                                next(err_1);\n                            } else if (!content) {\n                                next(Utils.Errors.CANT_EXTRACT_FILE());\n                            } else {\n                                // The reverse operation for attr depend on method addFile()\n                                const fileAttr = keepOriginalPermission ? entry.header.fileAttr : undefined;\n                                filetools.writeFileToAsync(filePath, content, overwrite, fileAttr, function (succ) {\n                                    if (!succ) {\n                                        next(getError(\"Unable to write file\", filePath));\n                                    }\n                                    filetools.fs.utimes(filePath, entry.header.time, entry.header.time, function (err_2) {\n                                        if (err_2) {\n                                            next(getError(\"Unable to set times\", filePath));\n                                        } else {\n                                            next();\n                                        }\n                                    });\n                                });\n                            }\n                        });\n                    }\n                };\n            }, callback)();\n        },\n\n        /**\n         * Writes the newly created zip file to disk at the specified location or if a zip was opened and no ``targetFileName`` is provided, it will overwrite the opened zip\n         *\n         * @param {string} targetFileName\n         * @param {function} callback\n         */\n        writeZip: function (targetFileName, callback) {\n            if (arguments.length === 1) {\n                if (typeof targetFileName === \"function\") {\n                    callback = targetFileName;\n                    targetFileName = \"\";\n                }\n            }\n\n            if (!targetFileName && opts.filename) {\n                targetFileName = opts.filename;\n            }\n            if (!targetFileName) return;\n\n            var zipData = _zip.compressToBuffer();\n            if (zipData) {\n                var ok = filetools.writeFileTo(targetFileName, zipData, true);\n                if (typeof callback === \"function\") callback(!ok ? new Error(\"failed\") : null, \"\");\n            }\n        },\n\n        /**\n         *\n         * @param {string} targetFileName\n         * @param {object} [props]\n         * @param {boolean} [props.overwrite=true] If the file already exists at the target path, the file will be overwriten if this is true.\n         * @param {boolean} [props.perm] The file will be set as the permission from the entry if this is true.\n\n         * @returns {Promise<void>}\n         */\n        writeZipPromise: function (/**String*/ targetFileName, /* object */ props) {\n            const { overwrite, perm } = Object.assign({ overwrite: true }, props);\n\n            return new Promise((resolve, reject) => {\n                // find file name\n                if (!targetFileName && opts.filename) targetFileName = opts.filename;\n                if (!targetFileName) reject(\"ADM-ZIP: ZIP File Name Missing\");\n\n                this.toBufferPromise().then((zipData) => {\n                    const ret = (done) => (done ? resolve(done) : reject(\"ADM-ZIP: Wasn't able to write zip file\"));\n                    filetools.writeFileToAsync(targetFileName, zipData, overwrite, perm, ret);\n                }, reject);\n            });\n        },\n\n        /**\n         * @returns {Promise<Buffer>} A promise to the Buffer.\n         */\n        toBufferPromise: function () {\n            return new Promise((resolve, reject) => {\n                _zip.toAsyncBuffer(resolve, reject);\n            });\n        },\n\n        /**\n         * Returns the content of the entire zip file as a Buffer object\n         *\n         * @prop {function} [onSuccess]\n         * @prop {function} [onFail]\n         * @prop {function} [onItemStart]\n         * @prop {function} [onItemEnd]\n         * @returns {Buffer}\n         */\n        toBuffer: function (onSuccess, onFail, onItemStart, onItemEnd) {\n            if (typeof onSuccess === \"function\") {\n                _zip.toAsyncBuffer(onSuccess, onFail, onItemStart, onItemEnd);\n                return null;\n            }\n            return _zip.compressToBuffer();\n        }\n    };\n};\n", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst https = require('https');\nconst fs = require('fs');\nconst util = require('util');\nconst AdmZip = require('adm-zip');\nconst { URL } = require('url');\n\nconst errors = require('../../errors');\nconst utils = require('../../utils');\nconst { DsePlainTextAuthProvider, NoAuthProvider } = require('../../auth');\n\n// Use the callback-based method fs.readFile() instead of fs.promises as we have to support Node.js 8+\nconst readFile = util.promisify(fs.readFile);\n\n/**\n * When the user sets the cloud options, it uses the secure bundle or endpoint to access the metadata service and\n * setting the connection options\n * @param {ClientOptions} options\n * @returns {Promise<void>}\n */\nasync function init(options) {\n  if (!options.cloud) {\n    return;\n  }\n\n  const cloudOptions = new CloudOptions(options);\n  await parseZipFile(cloudOptions);\n  await getMetadataServiceInfoAsync(cloudOptions);\n\n  if (!cloudOptions.clientOptions.sslOptions.checkServerIdentity) {\n    // With SNI enabled, hostname (uuid) and CN will not match\n    // Use a custom validation function to validate against the proxy address.\n    // Note: this function is only called if the certificate passed all other checks, like CA validation.\n    cloudOptions.clientOptions.sslOptions.checkServerIdentity = (_, cert) =>\n      checkServerIdentity(cert, cloudOptions.clientOptions.sni.address);\n  }\n}\n\nclass CloudOptions {\n  constructor(clientOptions) {\n    this.clientOptions = clientOptions;\n\n    if (clientOptions.cloud.secureConnectBundle) {\n      this.secureConnectBundle = clientOptions.cloud.secureConnectBundle;\n      this.serviceUrl = null;\n    } else {\n      this.serviceUrl = clientOptions.cloud.endpoint;\n    }\n    // Include a log emitter to enable logging within the cloud connection logic\n    this.logEmitter = clientOptions.logEmitter;\n\n    this.contactPoints = null;\n    this.localDataCenter = null;\n  }\n\n  /**\n   * The sslOptions in the client options from a given map.\n   * @param {Map<String, Buffer>} zipEntries\n   */\n  setSslOptions(zipEntries) {\n    this.clientOptions.sslOptions = Object.assign({\n      ca: [zipEntries.get('ca.crt') ],\n      cert: zipEntries.get('cert'),\n      key: zipEntries.get('key'),\n      rejectUnauthorized: true\n    }, this.clientOptions.sslOptions);\n  }\n\n  /**\n   *\n   * @param username\n   * @param password\n   */\n  setAuthProvider(username, password) {\n    if (!username || !password) {\n      return;\n    }\n\n    if (this.clientOptions.authProvider && !(this.clientOptions.authProvider instanceof NoAuthProvider)) {\n      // There is an auth provider set by the user\n      return;\n    }\n\n    this.clientOptions.authProvider = new DsePlainTextAuthProvider(username, password);\n  }\n}\n\n/**\n * @param {CloudOptions} cloudOptions\n * @returns {Promise<void>}\n */\nasync function parseZipFile(cloudOptions) {\n  if (cloudOptions.serviceUrl) {\n    // Service url already was provided\n    return;\n  }\n\n  if (!cloudOptions.secureConnectBundle) {\n    throw new TypeError('secureConnectBundle must be provided');\n  }\n\n  const data = await readFile(cloudOptions.secureConnectBundle);\n  const zip = new AdmZip(data);\n  const zipEntries = new Map(zip.getEntries().map(e => [e.entryName, e.getData()]));\n\n  if (!zipEntries.get('config.json')) {\n    throw new TypeError('Config file must be contained in secure bundle');\n  }\n\n  const config = JSON.parse(zipEntries.get('config.json').toString('utf8'));\n  if (!config['host'] || !config['port']) {\n    throw new TypeError('Config file must include host and port information');\n  }\n\n  cloudOptions.serviceUrl = `${config['host']}:${config['port']}/metadata`;\n  cloudOptions.setSslOptions(zipEntries);\n  cloudOptions.setAuthProvider(config.username, config.password);\n}\n\n/**\n * Gets the information retrieved from the metadata service.\n * Invokes the callback with {proxyAddress, localDataCenter, contactPoints} as result\n * @param {CloudOptions} cloudOptions\n * @param {Function} callback\n */\nfunction getMetadataServiceInfo(cloudOptions, callback) {\n  const regex = /^(.+?):(\\d+)(.*)$/;\n  const matches = regex.exec(cloudOptions.serviceUrl);\n  callback = utils.callbackOnce(callback);\n\n  if (!matches || matches.length !== 4) {\n    throw new TypeError('url should be composed of host, port number and path, without scheme');\n  }\n\n  const requestOptions = Object.assign({\n    hostname: matches[1],\n    port: matches[2],\n    path: matches[3] || undefined,\n    timeout: cloudOptions.clientOptions.socketOptions.connectTimeout\n  }, cloudOptions.clientOptions.sslOptions);\n\n  const req = https.get(requestOptions, res => {\n    let data = '';\n\n    utils.log('verbose', `Connected to metadata service with SSL/TLS protocol ${res.socket.getProtocol()}`, {}, cloudOptions);\n\n    res\n      .on('data', chunk => data += chunk.toString())\n      .on('end', () => {\n        if (res.statusCode !== 200) {\n          return callback(getServiceRequestError(new Error(`Obtained http status ${res.statusCode}`), requestOptions));\n        }\n\n        let message;\n\n        try {\n          message = JSON.parse(data);\n\n          if (!message || !message['contact_info']) {\n            throw new TypeError('contact_info should be defined in response');\n          }\n\n        } catch (err) {\n          return callback(getServiceRequestError(err, requestOptions, true));\n        }\n\n        const contactInfo = message['contact_info'];\n\n        // Set the connect options\n        cloudOptions.clientOptions.contactPoints = contactInfo['contact_points'];\n        cloudOptions.clientOptions.localDataCenter = contactInfo['local_dc'];\n        cloudOptions.clientOptions.sni = { address: contactInfo['sni_proxy_address'] };\n\n        callback();\n      });\n  });\n\n  req.on('error', err => callback(getServiceRequestError(err, requestOptions)));\n\n  // We need to both set the timeout in the requestOptions and invoke ClientRequest#setTimeout()\n  // to handle all possible scenarios, for some reason... (tested with one OR the other and didn't fully work)\n  // Setting the also the timeout handler, aborting will emit 'error' and close\n  req.setTimeout(cloudOptions.clientOptions.socketOptions.connectTimeout, () => req.abort());\n}\n\nconst getMetadataServiceInfoAsync = util.promisify(getMetadataServiceInfo);\n\n/**\n * Returns an Error that wraps the inner error obtained while fetching metadata information.\n * @private\n */\nfunction getServiceRequestError(err, requestOptions, isParsingError) {\n  const message = isParsingError\n    ? 'There was an error while parsing the metadata service information'\n    : 'There was an error fetching the metadata information';\n\n  const url = `${requestOptions.hostname}:${requestOptions.port}${(requestOptions.path) ? requestOptions.path : '/'}`;\n  return new errors.NoHostAvailableError({ [url] : err }, message);\n}\n\n/**\n * @param {{subject: {CN: string}, subjectaltname: string?}} cert A certificate object as defined by\n * TLS module https://nodejs.org/docs/latest-v12.x/api/tls.html#tls_certificate_object\n * @param {string} sniAddress\n * @returns {Error|undefined} Similar to tls.checkServerIdentity() returns an Error object, populating it with reason,\n * host, and cert on failure. Otherwise, it returns undefined.\n * @internal\n * @ignore\n */\nfunction checkServerIdentity(cert, sniAddress) {\n  // Based on logic defined by the Node.js Core module\n  // https://github.com/nodejs/node/blob/ff48009fefcecedfee2c6ff1719e5be3f6969049/lib/tls.js#L212-L290\n\n  // SNI address is composed by hostname and port\n  const hostName = sniAddress.split(':')[0];\n  const altNames = cert.subjectaltname;\n  const cn = cert.subject.CN;\n\n  if (hostName === cn) {\n    // quick check based on common name\n    return undefined;\n  }\n\n  const parsedAltNames = [];\n  if (altNames) {\n    for (const name of altNames.split(', ')) {\n      if (name.startsWith('DNS:')) {\n        parsedAltNames.push(name.slice(4));\n      } else if (name.startsWith('URI:')) {\n        parsedAltNames.push(new URL(name.slice(4)).hostname);\n      }\n    }\n  }\n\n  const hostParts = hostName.split('.');\n  const wildcard = (pattern) => checkParts(hostParts, pattern);\n\n  let valid;\n  if (parsedAltNames.length > 0) {\n    valid = parsedAltNames.some(wildcard);\n  } else {\n    // Use the common name\n    valid = wildcard(cn);\n  }\n\n  if (!valid) {\n    const error = new Error(`Host: ${hostName} is not cert's CN/altnames: ${cn} / ${altNames}`);\n    error.reason = error.message;\n    error.host = hostName;\n    error.cert = cert;\n    return error;\n  }\n}\n\n/**\n * Simplified version of Node.js tls core lib check() function\n * https://github.com/nodejs/node/blob/ff48009fefcecedfee2c6ff1719e5be3f6969049/lib/tls.js#L148-L209\n * @private\n * @returns {boolean}\n */\nfunction checkParts(hostParts, pattern) {\n  // Empty strings, null, undefined, etc. never match.\n  if (!pattern) {\n    return false;\n  }\n\n  const patternParts = pattern.split('.');\n\n  if (hostParts.length !== patternParts.length) {\n    return false;\n  }\n\n  // Check host parts from right to left first.\n  for (let i = hostParts.length - 1; i > 0; i -= 1) {\n    if (hostParts[i] !== patternParts[i]) {\n      return false;\n    }\n  }\n\n  const hostSubdomain = hostParts[0];\n  const patternSubdomain = patternParts[0];\n  const patternSubdomainParts = patternSubdomain.split('*');\n\n  // Short-circuit when the subdomain does not contain a wildcard.\n  // RFC 6125 does not allow wildcard substitution for components\n  // containing IDNA A-labels (Punycode) so match those verbatim.\n  if (patternSubdomainParts.length === 1 || patternSubdomain.includes('xn--')) {\n    return hostSubdomain === patternSubdomain;\n  }\n\n  // More than one wildcard is always wrong.\n  if (patternSubdomainParts.length > 2) {\n    return false;\n  }\n\n  // *.tld wildcards are not allowed.\n  if (patternParts.length <= 2) {\n    return false;\n  }\n\n  const [prefix, suffix] = patternSubdomainParts;\n\n  if (prefix.length + suffix.length > hostSubdomain.length) {\n    return false;\n  }\n\n  if (!hostSubdomain.startsWith(prefix)) {\n    return false;\n  }\n\n  if (!hostSubdomain.endsWith(suffix)) {\n    return false;\n  }\n\n  return true;\n}\n\nmodule.exports = {\n  checkServerIdentity,\n  init\n};", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst utils = require('../../utils');\n\n/**\n * Creates a new instance of <code>GraphResultSet</code>.\n * @class\n * @classdesc\n * Represents the result set of a [graph query execution]{@link Client#executeGraph} containing vertices, edges or\n * scalar values depending on the query.\n * <p>\n * It allows iteration of the items using <code>for..of</code> statements under ES2015 and exposes\n * <code>forEach()</code>, <code>first()</code> and <code>toArray()</code> to access the underlying items.\n * </p>\n * @example\n * for (let vertex of result} { ... }\n * @example\n * const arr = result.toArray();\n * @example\n * const vertex = result.first();\n * @param {ResultSet} result\n * @param {Function} [rowParser]\n * @alias module:datastax/graph~GraphResultSet\n * @constructor\n */\nfunction GraphResultSet(result, rowParser) {\n  /**\n   * Information on the execution of a successful query:\n   * @member {Object}\n   * @property {Number} achievedConsistency The consistency level that has been actually achieved by the query.\n   * @property {String} queriedHost The Cassandra host that coordinated this query.\n   * @property {Object} triedHosts Gets the associative array of host that were queried before getting a valid response,\n   * being the last host the one that replied correctly.\n   * @property {Uuid} traceId Identifier of the trace session.\n   * @property {Array.<string>} warnings Warning messages generated by the server when executing the query.\n   */\n  this.info = result.info;\n  const rows = result.rows;\n  rowParser = rowParser || parsePlainJsonRow;\n\n  /**\n   * This property has been deprecated because it may return a lower value than the actual length of the results.\n   * Use <code>toArray()</code> instead.\n   * <p>Gets the length of the result.</p>\n   * @deprecated Use <code>toArray()</code> instead. This property will be removed in the following major version.\n   * @member {Number}\n   */\n  this.length = result.rowLength;\n\n  /**\n   * A string token representing the current page state of query. It can be used in the following executions to\n   * continue paging and retrieve the remained of the result for the query.\n   * @member {String}\n   */\n  this.pageState = result.pageState;\n\n  /**\n   * Returns the first element of the result or null if the result is empty.\n   * @returns {Object}\n   */\n  this.first = function first() {\n    const iterator = this.values();\n    const item = iterator.next();\n    if (item.done) {\n      return null;\n    }\n\n    return item.value;\n  };\n\n  /**\n   * Executes a provided function once per result element.\n   * @param {Function} callback Function to execute for each element, taking two arguments: currentValue and index.\n   * @param {Object} [thisArg] Value to use as <code>this</code> when executing callback.\n   */\n  this.forEach = function forEach(callback, thisArg) {\n    if (!rows.length) {\n      return;\n    }\n    const iterator = this.values();\n    let item = iterator.next();\n    let index = 0;\n    while (!item.done) {\n      callback.call(thisArg || this, item.value, index++);\n      item = iterator.next();\n    }\n  };\n\n  /**\n   * Results an Array of graph result elements (vertex, edge, scalar).\n   * @returns {Array}\n   */\n  this.toArray = function toArray() {\n    if (!rows.length) {\n      return utils.emptyArray;\n    }\n    return utils.iteratorToArray(this.values());\n  };\n\n  /**\n   * Returns a new Iterator object that contains the values for each index in the result.\n   * @returns {Iterator}\n   */\n  this.values = function* values() {\n    for (const traverser of this.getTraversers()) {\n      const bulk = traverser.bulk || 1;\n\n      for (let j = 0; j < bulk; j++) {\n        yield traverser.object;\n      }\n    }\n  };\n\n  /**\n   * Gets the traversers represented contained in the result set.\n   * @returns {Iterator}\n   */\n  this.getTraversers = function* () {\n    for (const row of rows) {\n      yield rowParser(row);\n    }\n  };\n}\n\nif (typeof Symbol !== 'undefined' && typeof Symbol.iterator === 'symbol') {\n  // Make iterable\n  GraphResultSet.prototype[Symbol.iterator] = function getIterator() {\n    return this.values();\n  };\n}\n\n/**\n * @param {Row} row\n * @private\n */\nfunction parsePlainJsonRow(row) {\n  const parsed = JSON.parse(row['gremlin']);\n  return { object: parsed.result, bulk: parsed.bulk || 1 };\n}\n\nmodule.exports = GraphResultSet;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst types = require('../../types');\nconst { dataTypes } = types;\n\n/**\n * Internal representation of a value with additional type information.\n * @internal\n * @ignore\n */\nclass GraphTypeWrapper {\n  constructor(value, typeInfo) {\n    this.value = value;\n    this.typeInfo = typeof typeInfo === 'number' ? { code: typeInfo } : typeInfo;\n  }\n}\n\n\n/**\n * Internal representation of user-defined type with the metadata.\n * @internal\n * @ignore\n */\nclass UdtGraphWrapper {\n  constructor(value, udtInfo) {\n    this.value = value;\n\n    if (!udtInfo || !udtInfo.name || !udtInfo.keyspace || !udtInfo.fields) {\n      throw new TypeError(`udtInfo must be an object with name, keyspace and field properties defined`);\n    }\n\n    this.udtInfo = udtInfo;\n  }\n}\n\n/**\n * Wraps a number or null value to hint the client driver that the data type of the value is an int\n * @memberOf module:datastax/graph\n */\nfunction asInt(value) { return new GraphTypeWrapper(value, dataTypes.int); }\n\n/**\n * Wraps a number or null value to hint the client driver that the data type of the value is a double\n * @memberOf module:datastax/graph\n */\nfunction asDouble(value) { return new GraphTypeWrapper(value, dataTypes.double); }\n\n/**\n * Wraps a number or null value to hint the client driver that the data type of the value is a double\n * @memberOf module:datastax/graph\n */\nfunction asFloat(value) { return new GraphTypeWrapper(value, dataTypes.float); }\n\n/**\n * Wraps a Date or null value to hint the client driver that the data type of the value is a timestamp\n * @memberOf module:datastax/graph\n */\nfunction asTimestamp(value) { return new GraphTypeWrapper(value, dataTypes.timestamp); }\n\n/**\n * Wraps an Object or null value to hint the client driver that the data type of the value is a user-defined type.\n * @memberOf module:datastax/graph\n * @param {object} value The object representing the UDT.\n * @param {{name: string, keyspace: string, fields: Array}} udtInfo The UDT metadata as defined by the driver.\n */\nfunction asUdt(value, udtInfo) { return new UdtGraphWrapper(value, udtInfo); }\n\nmodule.exports = { asInt, asDouble, asFloat, asTimestamp, asUdt, UdtGraphWrapper, GraphTypeWrapper };", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst { GraphTypeWrapper, UdtGraphWrapper } = require('./wrappers');\nconst types = require('../../types');\nconst Encoder = require('../../encoder');\nconst { dataTypes } = types;\n\nfunction getTypeDefinitionByValue(value) {\n  if (value instanceof types.Tuple) {\n    return {\n      'cqlType': 'tuple',\n      'definition': value.elements.map(getTypeDefinitionByValue)\n    };\n  }\n\n  if (value instanceof Map) {\n    // Try to guess the types of the key and value based on the first element\n    const result = { 'cqlType': 'map' };\n    if (value.size > 0) {\n      const first = value.entries().next().value;\n      result['definition'] = first.map(getTypeDefinitionByValue);\n    }\n\n    return result;\n  }\n\n  if (value instanceof UdtGraphWrapper) {\n    return getUdtTypeDefinitionByValue(value);\n  }\n\n  let type;\n  if (value instanceof GraphTypeWrapper) {\n    type = value.typeInfo;\n  } else {\n    type = Encoder.guessDataType(value);\n  }\n\n  if (!type) {\n    return null;\n  }\n\n  return getDefinitionByType(type);\n}\n\nfunction getDefinitionByType(type) {\n  if (type.code === dataTypes.udt) {\n    return getUdtTypeDefinition(type.info);\n  }\n\n  if (type.code === dataTypes.tuple || type.code === dataTypes.map) {\n    return {\n      'cqlType': types.getDataTypeNameByCode(type),\n      'definition': type.info.map(getDefinitionByType)\n    };\n  }\n\n  if (type.code === dataTypes.list || type.code === dataTypes.set) {\n    return {\n      'cqlType': type.code === dataTypes.list ? 'list' : 'set',\n      'definition': [ getDefinitionByType(type.info) ]\n    };\n  }\n\n  return { 'cqlType': types.getDataTypeNameByCode(type) };\n}\n\nfunction getUdtTypeDefinition(udtInfo) {\n  return {\n    'cqlType': 'udt',\n    'keyspace': udtInfo.keyspace,\n    'name': udtInfo.name,\n    'definition': udtInfo.fields.map(field =>\n      // fieldName should be the first property serialized\n      Object.assign({ 'fieldName': field.name }, getDefinitionByType(field.type))\n    ),\n  };\n}\n\nfunction getUdtTypeDefinitionByValue(wrappedValue) {\n  return getUdtTypeDefinition(wrappedValue.udtInfo);\n}\n\nmodule.exports = { getTypeDefinitionByValue, getUdtTypeDefinitionByValue };", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst util = require('util');\n\n/**\n * @classdesc\n * Represents a graph Element.\n * @param id\n * @param label\n * @abstract\n * @memberOf module:datastax/graph\n * @constructor\n */\nfunction Element(id, label) {\n  /**\n   * Gets the element id.\n   */\n  this.id = id;\n  /**\n   * Gets the element label.\n   * @type {String}\n   */\n  this.label = label;\n}\n\n/**\n * @classdesc\n * Represents a graph Vertex.\n * @param id\n * @param {String} label\n * @param {Object<string, Array>} properties\n * @extends {Element}\n * @memberOf module:datastax/graph\n * @constructor\n */\nfunction Vertex(id, label, properties) {\n  Element.call(this, id, label);\n  /**\n   * Gets the vertex properties.\n   * @type {Object<string, Array>}\n   */\n  this.properties = properties;\n}\n\nutil.inherits(Vertex, Element);\n\n/**\n * @classdesc\n * Represents a graph Edge.\n * @param id\n * @param outV\n * @param {outVLabel} outVLabel\n * @param {String} label\n * @param inV\n * @param {String} inVLabel\n * @param {Object<string, Property>} properties\n * @extends {Element}\n * @memberOf module:datastax/graph\n * @constructor\n */\nfunction Edge(id, outV, outVLabel, label, inV, inVLabel, properties) {\n  Element.call(this, id, label);\n  /**\n   * Gets the id of outgoing vertex of the edge.\n   */\n  this.outV = outV;\n  /**\n   * Gets the label of the outgoing vertex.\n   */\n  this.outVLabel = outVLabel;\n  /**\n   * Gets the id of the incoming vertex of the edge.\n   */\n  this.inV = inV;\n\n  /**\n   * Gets the label of the incoming vertex.\n   */\n  this.inVLabel = inVLabel;\n  /**\n   * Gets the properties of the edge as an associative array.\n   * @type {Object}\n   */\n  this.properties = {};\n  (function adaptProperties(self) {\n    if (properties) {\n      const keys = Object.keys(properties);\n      for (let i = 0; i < keys.length; i++) {\n        const k = keys[i];\n        self.properties[k] = properties[k].value;\n      }\n    }\n  })(this);\n}\n\nutil.inherits(Edge, Element);\n\n/**\n * @classdesc\n * Represents a graph vertex property.\n * @param id\n * @param {String} label\n * @param value\n * @param {Object} properties\n * @extends {Element}\n * @memberOf module:datastax/graph\n * @constructor\n */\nfunction VertexProperty(id, label, value, properties) {\n  Element.call(this, id, label);\n  this.value = value;\n  this.key = this.label;\n  this.properties = properties;\n}\n\nutil.inherits(VertexProperty, Element);\n\n/**\n * @classdesc\n * Represents a property.\n * @param key\n * @param value\n * @memberOf module:datastax/graph\n * @constructor\n */\nfunction Property(key, value) {\n  this.key = key;\n  this.value = value;\n}\n\n/**\n * @classdesc\n * Represents a walk through a graph as defined by a traversal.\n * @param {Array} labels\n * @param {Array} objects\n * @memberOf module:datastax/graph\n * @constructor\n */\nfunction Path(labels, objects) {\n  this.labels = labels;\n  this.objects = objects;\n}\n\nmodule.exports = {\n  Edge,\n  Element,\n  Path,\n  Property,\n  Vertex,\n  VertexProperty\n};", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst types = require('../../types');\nconst utils = require('../../utils');\nconst { getTypeDefinitionByValue, getUdtTypeDefinitionByValue } = require('./complex-type-helper');\nconst { Point, Polygon, LineString } = require('../../geometry');\nconst { Edge } = require('./structure');\nconst { GraphTypeWrapper, UdtGraphWrapper } = require('./wrappers');\nconst { Tuple, dataTypes } = types;\n\nconst typeKey = '@type';\nconst valueKey = '@value';\n\nclass EdgeDeserializer {\n  constructor() {\n    this.key = 'g:Edge';\n  }\n\n  deserialize(obj) {\n    const value = obj[valueKey];\n    return new Edge(this.reader.read(value['id']), this.reader.read(value['outV']), value['outVLabel'], value['label'], this.reader.read(value['inV']), value['inVLabel'], this.reader.read(value['properties']));\n  }\n}\n\n/**\n * Uses toString() instance method and fromString() static method to serialize and deserialize the value.\n * @abstract\n * @private\n */\nclass StringBasedTypeSerializer {\n\n  /**\n   * Creates a new instance of the deserializer.\n   * @param {String} key\n   * @param {Function} targetType\n   */\n  constructor(key, targetType) {\n    if (!key) {\n      throw new Error('Deserializer must provide a type key');\n    }\n    if (!targetType) {\n      throw new Error('Deserializer must provide a target type');\n    }\n    this.key = key;\n    this.targetType = targetType;\n  }\n\n  deserialize(obj) {\n    let value = obj[valueKey];\n    if (typeof value !== 'string') {\n      value = value.toString();\n    }\n    return this.targetType.fromString(value);\n  }\n\n  serialize(value) {\n    return {\n      [typeKey]: this.key,\n      [valueKey]: value.toString()\n    };\n  }\n\n  canBeUsedFor(value) {\n    return value instanceof this.targetType;\n  }\n}\n\nclass UuidSerializer extends StringBasedTypeSerializer {\n  constructor() {\n    super('g:UUID', types.Uuid);\n  }\n}\n\nclass LongSerializer extends StringBasedTypeSerializer {\n  constructor() {\n    super('g:Int64', types.Long);\n  }\n}\n\nclass BigDecimalSerializer extends StringBasedTypeSerializer {\n  constructor() {\n    super('gx:BigDecimal', types.BigDecimal);\n  }\n}\n\nclass BigIntegerSerializer extends StringBasedTypeSerializer {\n  constructor() {\n    super('gx:BigInteger', types.Integer);\n  }\n}\n\nclass InetAddressSerializer extends StringBasedTypeSerializer {\n  constructor() {\n    super('gx:InetAddress', types.InetAddress);\n  }\n}\n\nclass LocalDateSerializer extends StringBasedTypeSerializer {\n  constructor() {\n    super('gx:LocalDate', types.LocalDate);\n  }\n}\n\nclass LocalTimeSerializer extends StringBasedTypeSerializer {\n  constructor() {\n    super('gx:LocalTime', types.LocalTime);\n  }\n}\n\nclass InstantSerializer extends StringBasedTypeSerializer {\n  constructor() {\n    super('gx:Instant', Date);\n  }\n\n  serialize(item) {\n    return {\n      [typeKey]: this.key,\n      [valueKey]: item.toISOString()\n    };\n  }\n\n  deserialize(obj) {\n    return new Date(obj[valueKey]);\n  }\n}\n\nclass BlobSerializer extends StringBasedTypeSerializer {\n  constructor() {\n    super('dse:Blob', Buffer);\n  }\n\n  deserialize(obj) {\n    return utils.allocBufferFromString(obj[valueKey], 'base64');\n  }\n\n  serialize(item) {\n    return {\n      [typeKey]: this.key,\n      [valueKey]: item.toString('base64')\n    };\n  }\n}\n\nclass PointSerializer extends StringBasedTypeSerializer {\n  constructor() {\n    super('dse:Point', Point);\n  }\n}\n\nclass LineStringSerializer extends StringBasedTypeSerializer {\n  constructor() {\n    super('dse:LineString', LineString);\n  }\n}\n\nclass PolygonSerializer extends StringBasedTypeSerializer {\n  constructor() {\n    super('dse:Polygon', Polygon);\n  }\n}\n\nclass TupleSerializer {\n  constructor() {\n    this.key = 'dse:Tuple';\n  }\n\n  deserialize(obj) {\n    // Skip definitions and go to the value\n    const value = obj[valueKey]['value'];\n\n    if (!Array.isArray(value)) {\n      throw new Error('Expected Array, obtained: ' + value);\n    }\n\n    const result = [];\n\n    for (const element of value) {\n      result.push(this.reader.read(element));\n    }\n\n    return Tuple.fromArray(result);\n  }\n\n  /** @param {Tuple} tuple */\n  serialize(tuple) {\n    const result = {\n      'cqlType': 'tuple',\n      'definition': tuple.elements.map(getTypeDefinitionByValue),\n      'value': tuple.elements.map(e => this.writer.adaptObject(e))\n    };\n\n    return {\n      [typeKey]: this.key,\n      [valueKey]: result\n    };\n  }\n\n  canBeUsedFor(value) {\n    return value instanceof Tuple;\n  }\n}\n\nclass DurationSerializer {\n  constructor() {\n    this.key = 'dse:Duration';\n  }\n\n  deserialize(obj) {\n    // Skip definitions and go to the value\n    const value = obj[valueKey];\n\n    return new types.Duration(\n      this.reader.read(value['months']), this.reader.read(value['days']), this.reader.read(value['nanos']));\n  }\n\n  /** @param {Duration} value */\n  serialize(value) {\n    return {\n      [typeKey]: this.key,\n      [valueKey]: {\n        'months': value['months'],\n        'days': value['days'],\n        'nanos': value['nanoseconds'],\n      }\n    };\n  }\n\n  canBeUsedFor(value) {\n    return value instanceof types.Duration;\n  }\n}\n\nclass UdtSerializer {\n  constructor() {\n    this.key = 'dse:UDT';\n  }\n\n  deserialize(obj) {\n    // Skip definitions and go to the value\n    const valueRoot = obj[valueKey];\n    const result = {};\n    const value = valueRoot['value'];\n\n    valueRoot['definition'].forEach((definition, index) => {\n      result[definition.fieldName] = this.reader.read(value[index]);\n    });\n\n    return result;\n  }\n\n  serialize(udtWrapper) {\n    const serializedValue = getUdtTypeDefinitionByValue(udtWrapper);\n    // New properties can be added to the existing object without need to clone\n    // as getTypeDefinition() returns a new object each time\n    serializedValue['value'] = Object.entries(udtWrapper.value).map(([_, v]) => this.writer.adaptObject(v));\n\n    return {\n      [typeKey]: this.key,\n      [valueKey]: serializedValue\n    };\n  }\n\n  canBeUsedFor(value) {\n    return value instanceof UdtGraphWrapper;\n  }\n}\n\nclass InternalSerializer {\n  constructor(name, transformFn) {\n    this._name = name;\n    this._transformFn = transformFn || (x => x);\n  }\n\n  serialize(item) {\n    return {\n      [typeKey]: this._name,\n      [valueKey]: this._transformFn(item)\n    };\n  }\n}\n\n// Associative array of graph type name by CQL type code, used by the type wrapper\nconst graphSONSerializerByCqlType = {\n  [dataTypes.int]: new InternalSerializer('g:Int32'),\n  [dataTypes.bigint]: new InternalSerializer('g:Int64'),\n  [dataTypes.double]: new InternalSerializer('g:Double'),\n  [dataTypes.float]: new InternalSerializer('g:Float'),\n  [dataTypes.timestamp]: new InternalSerializer('g:Timestamp', x => x.getTime())\n};\n\nclass GraphTypeWrapperSerializer {\n  constructor() {\n    // Use a fixed name that doesn't conflict with TinkerPop and DS Graph\n    this.key = 'client:wrapper';\n  }\n\n  serialize(wrappedValue) {\n    const s = graphSONSerializerByCqlType[wrappedValue.typeInfo.code];\n\n    if (!s) {\n      throw new Error(`No serializer found for wrapped value ${wrappedValue}`);\n    }\n\n    return s.serialize(wrappedValue.value);\n  }\n\n  canBeUsedFor(value) {\n    return value instanceof GraphTypeWrapper;\n  }\n}\n\nconst serializersArray = [\n  EdgeDeserializer,\n  UuidSerializer,\n  LongSerializer,\n  BigDecimalSerializer,\n  BigIntegerSerializer,\n  InetAddressSerializer,\n  LocalDateSerializer,\n  LocalTimeSerializer,\n  InstantSerializer,\n  BlobSerializer,\n  PointSerializer,\n  LineStringSerializer,\n  PolygonSerializer,\n  TupleSerializer,\n  UdtSerializer,\n  GraphTypeWrapperSerializer,\n  DurationSerializer\n];\n\nfunction getCustomSerializers() {\n  const customSerializers = {};\n\n  serializersArray.forEach(sConstructor => {\n    const instance = new sConstructor();\n    if (!instance.key) {\n      throw new TypeError(`Key for ${sConstructor} instance not set`);\n    }\n\n    customSerializers[instance.key] = instance;\n  });\n\n  return customSerializers;\n}\n\nmodule.exports = getCustomSerializers;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\n/**\n * Graph module.\n * @module datastax/graph\n */\n\nconst GraphResultSet = require('./result-set');\nconst getCustomTypeSerializers = require('./custom-type-serializers');\nconst { asInt, asDouble, asFloat, asTimestamp, asUdt, UdtGraphWrapper, GraphTypeWrapper} = require('./wrappers');\nconst { Edge, Element, Path, Property, Vertex, VertexProperty } = require('./structure');\n\nclass EnumValue {\n  constructor(typeName, elementName) {\n    this.typeName = typeName;\n    this.elementName = elementName;\n  }\n\n  toString() {\n    return this.elementName;\n  }\n}\n\n/**\n * Represents a collection of tokens for more concise Traversal definitions.\n */\nconst t = {\n  id: new EnumValue('T', 'id'),\n  key: new EnumValue('T', 'key'),\n  label: new EnumValue('T', 'label'),\n  value: new EnumValue('T', 'value'),\n};\n\n/**\n * Represents the edge direction.\n */\nconst direction = {\n  'both': new EnumValue('Direction', 'BOTH'),\n  'in': new EnumValue('Direction', 'IN'),\n  'out': new EnumValue('Direction', 'OUT')\n};\n\n// `in` is a reserved keyword depending on the context\n// TinkerPop JavaScript GLV only exposes `in` but it can lead to issues for TypeScript users and others.\n// Expose an extra property to represent `Direction.IN`.\ndirection.in_ = direction.in;\n\nmodule.exports = {\n  Edge,\n  Element,\n  Path,\n  Property,\n  Vertex,\n  VertexProperty,\n\n  asInt,\n  asDouble,\n  asFloat,\n  asTimestamp,\n  asUdt,\n  direction,\n  getCustomTypeSerializers,\n  GraphResultSet,\n  GraphTypeWrapper,\n  t,\n  UdtGraphWrapper\n};", "/*\n *  Licensed to the Apache Software Foundation (ASF) under one\n *  or more contributor license agreements.  See the NOTICE file\n *  distributed with this work for additional information\n *  regarding copyright ownership.  The ASF licenses this file\n *  to you under the Apache License, Version 2.0 (the\n *  \"License\"); you may not use this file except in compliance\n *  with the License.  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing,\n *  software distributed under the License is distributed on an\n *  \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n *  KIND, either express or implied.  See the License for the\n *  specific language governing permissions and limitations\n *  under the License.\n */\n\n/**\n * @module datastax/graph/tinkerpop/typeSerializers\n * @ignore\n */\n\n/**\n * @author Jorge Bay Gondra\n */\n'use strict';\n\n// Replace dependencies to minimize code changes from Apache TinkerPop\nconst t = {\n  P: UnsupportedType, TextP: UnsupportedType, Traversal: UnsupportedType, Traverser: UnsupportedType,\n  EnumValue: UnsupportedType\n};\nconst ts = { TraversalStrategy: UnsupportedType };\nconst Bytecode = UnsupportedType;\nconst g = require('./index');\nconst utils = { Long: UnsupportedType };\nt.t = g.t;\nt.direction = g.direction;\n\nfunction UnsupportedType() { }\n\nconst valueKey = '@value';\nconst typeKey = '@type';\n\n/**\n * @abstract\n */\nclass TypeSerializer {\n  serialize() {\n    throw new Error('serialize() method not implemented for ' + this.constructor.name);\n  }\n\n  deserialize() {\n    throw new Error('deserialize() method not implemented for ' + this.constructor.name);\n  }\n\n  canBeUsedFor() {\n    throw new Error('canBeUsedFor() method not implemented for ' + this.constructor.name);\n  }\n}\n\nclass NumberSerializer extends TypeSerializer {\n  serialize(item) {\n    if (isNaN(item)) {\n      return {\n        [typeKey]: 'g:Double',\n        [valueKey]: 'NaN'\n      };\n    } else if (item === Number.POSITIVE_INFINITY) {\n      return {\n        [typeKey]: 'g:Double',\n        [valueKey]: 'Infinity'\n      };\n    } else if (item === Number.NEGATIVE_INFINITY) {\n      return {\n        [typeKey]: 'g:Double',\n        [valueKey]: '-Infinity'\n      };\n    } else {\n      return item;\n    }\n  }\n\n  deserialize(obj) {\n    var val = obj[valueKey];\n    if (val === 'NaN') {\n      return NaN;\n    } else if (val === 'Infinity') {\n      return Number.POSITIVE_INFINITY;\n    } else if (val === '-Infinity') {\n      return Number.NEGATIVE_INFINITY;\n    } else {\n      return parseFloat(val);\n    }\n  }\n\n  canBeUsedFor(value) {\n    return (typeof value === 'number');\n  }\n}\n\nclass DateSerializer extends TypeSerializer {\n  serialize(item) {\n    return {\n      [typeKey]: 'g:Date',\n      [valueKey]: item.getTime()\n    };\n  }\n\n  deserialize(obj) {\n    return new Date(obj[valueKey]);\n  }\n\n  canBeUsedFor(value) {\n    return (value instanceof Date);\n  }\n}\n\nclass LongSerializer extends TypeSerializer {\n  serialize(item) {\n    return {\n      [typeKey]: 'g:Int64',\n      [valueKey]: item.value\n    };\n  }\n\n  canBeUsedFor(value) {\n    return (value instanceof utils.Long);\n  }\n}\n\nclass BytecodeSerializer extends TypeSerializer {\n  serialize(item) {\n    let bytecode = item;\n    if (item instanceof t.Traversal) {\n      bytecode = item.getBytecode();\n    }\n    const result = {};\n    result[typeKey] = 'g:Bytecode';\n    const resultValue = result[valueKey] = {};\n    const sources = this._serializeInstructions(bytecode.sourceInstructions);\n    if (sources) {\n      resultValue['source'] = sources;\n    }\n    const steps = this._serializeInstructions(bytecode.stepInstructions);\n    if (steps) {\n      resultValue['step'] = steps;\n    }\n    return result;\n  }\n\n  _serializeInstructions(instructions) {\n    if (instructions.length === 0) {\n      return null;\n    }\n    const result = new Array(instructions.length);\n    result[0] = instructions[0];\n    for (let i = 0; i < instructions.length; i++) {\n      result[i] = instructions[i].map(item => this.writer.adaptObject(item));\n    }\n    return result;\n  }\n\n  canBeUsedFor(value) {\n    return (value instanceof Bytecode) || (value instanceof t.Traversal);\n  }\n}\n\nclass PSerializer extends TypeSerializer {\n  /** @param {P} item */\n  serialize(item) {\n    const result = {};\n    result[typeKey] = 'g:P';\n    const resultValue = result[valueKey] = {\n      'predicate': item.operator\n    };\n    if (item.other === undefined || item.other === null) {\n      resultValue['value'] = this.writer.adaptObject(item.value);\n    }\n    else {\n      resultValue['value'] = [ this.writer.adaptObject(item.value), this.writer.adaptObject(item.other) ];\n    }\n    return result;\n  }\n\n  canBeUsedFor(value) {\n    return (value instanceof t.P);\n  }\n}\n\nclass TextPSerializer extends TypeSerializer {\n  /** @param {TextP} item */\n  serialize(item) {\n    const result = {};\n    result[typeKey] = 'g:TextP';\n    const resultValue = result[valueKey] = {\n      'predicate': item.operator\n    };\n    if (item.other === undefined || item.other === null) {\n      resultValue['value'] = this.writer.adaptObject(item.value);\n    }\n    else {\n      resultValue['value'] = [ this.writer.adaptObject(item.value), this.writer.adaptObject(item.other) ];\n    }\n    return result;\n  }\n\n  canBeUsedFor(value) {\n    return (value instanceof t.TextP);\n  }\n}\n\nclass LambdaSerializer extends TypeSerializer {\n  /** @param {Function} item */\n  serialize(item) {\n    return {\n      [typeKey]: 'g:Lambda',\n      [valueKey]: {\n        'arguments': item.length,\n        'language': 'gremlin-javascript',\n        'script': item.toString()\n      }\n    };\n  }\n\n  canBeUsedFor(value) {\n    return (typeof value === 'function');\n  }\n}\n\nclass EnumSerializer extends TypeSerializer {\n  /** @param {EnumValue} item */\n  serialize(item) {\n    return {\n      [typeKey]: 'g:' + item.typeName,\n      [valueKey]: item.elementName\n    };\n  }\n\n  canBeUsedFor(value) {\n    return value && value.typeName && value instanceof t.EnumValue;\n  }\n}\n\nclass TraverserSerializer extends TypeSerializer {\n  /** @param {Traverser} item */\n  serialize(item) {\n    return {\n      [typeKey]: 'g:Traverser',\n      [valueKey]: {\n        'value': this.writer.adaptObject(item.object),\n        'bulk': this.writer.adaptObject(item.bulk)\n      }\n    };\n  }\n\n  deserialize(obj) {\n    const value = obj[valueKey];\n    return new t.Traverser(this.reader.read(value['value']), this.reader.read(value['bulk']));\n  }\n\n  canBeUsedFor(value) {\n    return (value instanceof t.Traverser);\n  }\n}\n\nclass TraversalStrategySerializer extends TypeSerializer {\n  /** @param {TraversalStrategy} item */\n  serialize(item) {\n    return {\n      [typeKey]: 'g:' + item.constructor.name,\n      [valueKey]: item.configuration\n    };\n  }\n\n  canBeUsedFor(value) {\n    return (value instanceof ts.TraversalStrategy);\n  }\n}\n\nclass VertexSerializer extends TypeSerializer {\n  deserialize(obj) {\n    const value = obj[valueKey];\n    return new g.Vertex(this.reader.read(value['id']), value['label'], this.reader.read(value['properties']));\n  }\n\n  /** @param {Vertex} item */\n  serialize(item) {\n    return {\n      [typeKey]: 'g:Vertex',\n      [valueKey]: {\n        'id': this.writer.adaptObject(item.id),\n        'label': item.label\n      }\n    };\n  }\n\n  canBeUsedFor(value) {\n    return (value instanceof g.Vertex);\n  }\n}\n\nclass VertexPropertySerializer extends TypeSerializer {\n  deserialize(obj) {\n    const value = obj[valueKey];\n    return new g.VertexProperty(\n      this.reader.read(value['id']),\n      value['label'],\n      this.reader.read(value['value']),\n      this.reader.read(value['properties'])\n    );\n  }\n}\n\nclass PropertySerializer extends TypeSerializer {\n  deserialize(obj) {\n    const value = obj[valueKey];\n    return new g.Property(\n      value['key'],\n      this.reader.read(value['value']));\n  }\n}\n\nclass EdgeSerializer extends TypeSerializer {\n  deserialize(obj) {\n    const value = obj[valueKey];\n    return new g.Edge(\n      this.reader.read(value['id']),\n      new g.Vertex(this.reader.read(value['outV']), this.reader.read(value['outVLabel'])),\n      value['label'],\n      new g.Vertex(this.reader.read(value['inV']), this.reader.read(value['inVLabel'])),\n      this.reader.read(value['properties'])\n    );\n  }\n\n  /** @param {Edge} item */\n  serialize(item) {\n    return {\n      [typeKey]: 'g:Edge',\n      [valueKey]: {\n        'id': this.writer.adaptObject(item.id),\n        'label': item.label,\n        'outV': this.writer.adaptObject(item.outV.id),\n        'outVLabel': item.outV.label,\n        'inV': this.writer.adaptObject(item.inV.id),\n        'inVLabel': item.inV.label\n      }\n    };\n  }\n\n  canBeUsedFor(value) {\n    return (value instanceof g.Edge);\n  }\n}\n\nclass PathSerializer extends TypeSerializer {\n  deserialize(obj) {\n    const value = obj[valueKey];\n    const objects = value['objects'].map(o => this.reader.read(o));\n    return new g.Path(this.reader.read(value['labels']), objects);\n  }\n}\n\nclass Path3Serializer extends TypeSerializer {\n  deserialize(obj) {\n    const value = obj[valueKey];\n    return new g.Path(this.reader.read(value['labels']), this.reader.read(value['objects']));\n  }\n}\n\nclass TSerializer extends TypeSerializer {\n  deserialize(obj) {\n    return t.t[obj[valueKey]];\n  }\n}\n\nclass DirectionSerializer extends TypeSerializer {\n    deserialize(obj) {\n        return t.direction[obj[valueKey].toLowerCase()];\n    }\n}\n\nclass ArraySerializer extends TypeSerializer {\n  constructor(typeKey) {\n    super();\n    this.typeKey = typeKey;\n  }\n\n  deserialize(obj) {\n    const value = obj[valueKey];\n    if (!Array.isArray(value)) {\n      throw new Error('Expected Array, obtained: ' + value);\n    }\n    return value.map(x => this.reader.read(x));\n  }\n\n  /** @param {Array} item */\n  serialize(item) {\n    return {\n      [typeKey]: this.typeKey,\n      [valueKey]: item.map(x => this.writer.adaptObject(x))\n    };\n  }\n\n  canBeUsedFor(value) {\n    return Array.isArray(value);\n  }\n}\n\nclass BulkSetSerializer extends TypeSerializer {\n  deserialize(obj) {\n      const value = obj[valueKey];\n      if (!Array.isArray(value)) {\n          throw new Error('Expected Array, obtained: ' + value);\n      }\n\n      // coerce the BulkSet to List. if the bulk exceeds the int space then we can't coerce to List anyway,\n      // so this query will be trouble. we'd need a legit BulkSet implementation here in js. this current\n      // implementation is here to replicate the previous functionality that existed on the server side in\n      // previous versions.\n      let result = [];\n      for (let ix = 0, iy = value.length; ix < iy; ix += 2) {\n        const pair = value.slice(ix, ix + 2);\n        result = result.concat(Array(this.reader.read(pair[1])).fill(this.reader.read(pair[0])));\n      }\n\n      return result;\n  }\n}\n\nclass MapSerializer extends TypeSerializer {\n  deserialize(obj) {\n    const value = obj[valueKey];\n    if (!Array.isArray(value)) {\n      throw new Error('Expected Array, obtained: ' + value);\n    }\n    const result = new Map();\n    for (let i = 0; i < value.length; i += 2) {\n      result.set(this.reader.read(value[i]), this.reader.read(value[i + 1]));\n    }\n    return result;\n  }\n\n  /** @param {Map} map */\n  serialize(map) {\n    const arr = [];\n    map.forEach((v, k) => {\n      arr.push(this.writer.adaptObject(k));\n      arr.push(this.writer.adaptObject(v));\n    });\n    return {\n      [typeKey]: 'g:Map',\n      [valueKey]: arr\n    };\n  }\n\n  canBeUsedFor(value) {\n    return value instanceof Map;\n  }\n}\n\nclass ListSerializer extends ArraySerializer {\n  constructor() {\n    super('g:List');\n  }\n}\n\nclass SetSerializer extends ArraySerializer {\n  constructor() {\n    super('g:Set');\n  }\n}\n\nmodule.exports = {\n  BulkSetSerializer,\n  BytecodeSerializer,\n  DateSerializer,\n  DirectionSerializer,\n  EdgeSerializer,\n  EnumSerializer,\n  LambdaSerializer,\n  ListSerializer,\n  LongSerializer,\n  MapSerializer,\n  NumberSerializer,\n  Path3Serializer,\n  PathSerializer,\n  PropertySerializer,\n  PSerializer,\n  TextPSerializer,\n  SetSerializer,\n  TSerializer,\n  TraverserSerializer,\n  TraversalStrategySerializer,\n  typeKey,\n  valueKey,\n  VertexPropertySerializer,\n  VertexSerializer\n};\n", "/*\n *  Licensed to the Apache Software Foundation (ASF) under one\n *  or more contributor license agreements.  See the NOTICE file\n *  distributed with this work for additional information\n *  regarding copyright ownership.  The ASF licenses this file\n *  to you under the Apache License, Version 2.0 (the\n *  \"License\"); you may not use this file except in compliance\n *  with the License.  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing,\n *  software distributed under the License is distributed on an\n *  \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n *  KIND, either express or implied.  See the License for the\n *  specific language governing permissions and limitations\n *  under the License.\n */\n\n/**\n * @module datastax/graph/tinkerpop/graphSerializers\n * @ignore\n */\n\n\n/**\n * @author Jorge Bay Gondra\n */\n'use strict';\n\nconst typeSerializers = require('./type-serializers');\n\n/**\n * GraphSON2 writer.\n */\nclass GraphSON2Writer {\n\n  /**\n   * @param {Object} [options]\n   * @param {Object} [options.serializers] An object used as an associative array with GraphSON 2 type name as keys and\n   * serializer instances as values, ie: { 'g:Int64': longSerializer }.\n   * @constructor\n   */\n  constructor(options) {\n    this._options = options || {};\n    // Create instance of the default serializers\n    this._serializers = this.getDefaultSerializers().map(serializerConstructor => {\n      const s = new serializerConstructor();\n      s.writer = this;\n      return s;\n    });\n\n    const customSerializers = this._options.serializers || {};\n\n    Object.keys(customSerializers).forEach(key => {\n      const s = customSerializers[key];\n      if (!s.serialize) {\n        return;\n      }\n      s.writer = this;\n      // Insert custom serializers first\n      this._serializers.unshift(s);\n    });\n  }\n\n  /**\n   * Gets the default serializers to be used.\n   * @returns {Array}\n   */\n  getDefaultSerializers() {\n    return graphSON2Serializers;\n  }\n\n  adaptObject(value) {\n    let s;\n\n    for (let i = 0; i < this._serializers.length; i++) {\n      const currentSerializer = this._serializers[i];\n      if (currentSerializer.canBeUsedFor && currentSerializer.canBeUsedFor(value)) {\n        s = currentSerializer;\n        break;\n      }\n    }\n\n    if (s) {\n      return s.serialize(value);\n    }\n\n    if (Array.isArray(value)) {\n      // We need to handle arrays when there is no serializer\n      // for older versions of GraphSON\n      return value.map(item => this.adaptObject(item));\n    }\n\n    // Default (strings / objects / ...)\n    return value;\n  }\n\n  /**\n   * Returns the GraphSON representation of the provided object instance.\n   * @param {Object} obj\n   * @returns {String}\n   */\n  write(obj) {\n    return JSON.stringify(this.adaptObject(obj));\n  }\n}\n\n/**\n * GraphSON3 writer.\n */\nclass GraphSON3Writer extends GraphSON2Writer {\n  getDefaultSerializers() {\n    return graphSON3Serializers;\n  }\n}\n\n/**\n * GraphSON2 reader.\n */\nclass GraphSON2Reader {\n  /**\n   * GraphSON Reader\n   * @param {Object} [options]\n   * @param {Object} [options.serializers] An object used as an associative array with GraphSON 2 type name as keys and\n   * deserializer instances as values, ie: { 'g:Int64': longSerializer }.\n   * @constructor\n   */\n  constructor(options) {\n    this._options = options || {};\n    this._deserializers = {};\n\n    const defaultDeserializers = this.getDefaultDeserializers();\n    Object.keys(defaultDeserializers).forEach(typeName => {\n      const serializerConstructor = defaultDeserializers[typeName];\n      const s = new serializerConstructor();\n      s.reader = this;\n      this._deserializers[typeName] = s;\n    });\n\n    if (this._options.serializers) {\n      const customSerializers = this._options.serializers || {};\n      Object.keys(customSerializers).forEach(key => {\n        const s = customSerializers[key];\n        if (!s.deserialize) {\n          return;\n        }\n        s.reader = this;\n        this._deserializers[key] = s;\n      });\n    }\n  }\n\n  /**\n   * Gets the default deserializers as an associative array.\n   * @returns {Object}\n   */\n  getDefaultDeserializers() {\n    return graphSON2Deserializers;\n  }\n\n  read(obj) {\n    if (obj === undefined) {\n      return undefined;\n    }\n    if (obj === null) {\n      return null;\n    }\n    if (Array.isArray(obj)) {\n      return obj.map(item => this.read(item));\n    }\n    const type = obj[typeSerializers.typeKey];\n    if (type) {\n      const d = this._deserializers[type];\n      if (d) {\n        // Use type serializer\n        return d.deserialize(obj);\n      }\n      return obj[typeSerializers.valueKey];\n    }\n    if (obj && typeof obj === 'object' && obj.constructor === Object) {\n      return this._deserializeObject(obj);\n    }\n    // Default (for boolean, number and other scalars)\n    return obj;\n  }\n\n  _deserializeObject(obj) {\n    const keys = Object.keys(obj);\n    const result = {};\n    for (let i = 0; i < keys.length; i++) {\n      result[keys[i]] = this.read(obj[keys[i]]);\n    }\n    return result;\n  }\n}\n\n/**\n * GraphSON3 reader.\n */\nclass GraphSON3Reader extends GraphSON2Reader {\n  getDefaultDeserializers() {\n    return graphSON3Deserializers;\n  }\n}\n\nconst graphSON2Deserializers = {\n  'g:Traverser': typeSerializers.TraverserSerializer,\n  'g:TraversalStrategy': typeSerializers.TraversalStrategySerializer,\n  'g:Int32':  typeSerializers.NumberSerializer,\n  'g:Int64':  typeSerializers.NumberSerializer,\n  'g:Float':  typeSerializers.NumberSerializer,\n  'g:Double': typeSerializers.NumberSerializer,\n  'g:Date': typeSerializers.DateSerializer,\n  'g:Direction': typeSerializers.DirectionSerializer,\n  'g:Vertex': typeSerializers.VertexSerializer,\n  'g:Edge': typeSerializers.EdgeSerializer,\n  'g:VertexProperty': typeSerializers.VertexPropertySerializer,\n  'g:Property': typeSerializers.PropertySerializer,\n  'g:Path': typeSerializers.Path3Serializer,\n  'g:TextP': typeSerializers.TextPSerializer,\n  'g:T': typeSerializers.TSerializer,\n  'g:BulkSet': typeSerializers.BulkSetSerializer\n};\n\nconst graphSON3Deserializers = Object.assign({}, graphSON2Deserializers, {\n  'g:List': typeSerializers.ListSerializer,\n  'g:Set': typeSerializers.SetSerializer,\n  'g:Map': typeSerializers.MapSerializer\n});\n\nconst graphSON2Serializers = [\n  typeSerializers.NumberSerializer,\n  typeSerializers.DateSerializer,\n  typeSerializers.BytecodeSerializer,\n  typeSerializers.TraverserSerializer,\n  typeSerializers.TraversalStrategySerializer,\n  typeSerializers.PSerializer,\n  typeSerializers.TextPSerializer,\n  typeSerializers.LambdaSerializer,\n  typeSerializers.EnumSerializer,\n  typeSerializers.VertexSerializer,\n  typeSerializers.EdgeSerializer,\n  typeSerializers.LongSerializer\n];\n\nconst graphSON3Serializers = graphSON2Serializers.concat([\n  typeSerializers.ListSerializer,\n  typeSerializers.SetSerializer,\n  typeSerializers.MapSerializer\n]);\n\nmodule.exports = {\n  GraphSON3Writer,\n  GraphSON3Reader,\n  GraphSON2Writer,\n  GraphSON2Reader,\n  GraphSONWriter: GraphSON3Writer,\n  GraphSONReader: GraphSON3Reader\n};", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst util = require('util');\nconst types = require('../../types');\nconst utils = require('../../utils');\nconst { DefaultExecutionOptions, proxyExecuteKey } = require('../../execution-options');\nconst Long = types.Long;\n\nlet consistencyNames;\n\nconst graphProtocol = Object.freeze({\n  graphson1: 'graphson-1.0',\n  graphson2: 'graphson-2.0',\n  graphson3: 'graphson-3.0'\n});\n\nconst payloadKeys = Object.freeze({\n  language :'graph-language',\n  source: 'graph-source',\n  name: 'graph-name',\n  results: 'graph-results',\n  writeConsistency: 'graph-write-consistency',\n  readConsistency: 'graph-read-consistency',\n  timeout: 'request-timeout'\n});\n\n/**\n * Graph options that extends {@link QueryOptions}.\n * <p>\n *   Consider using [execution profiles]{@link ExecutionProfile} if you plan to reuse options across different\n *   query executions.\n * </p>\n * @typedef {QueryOptions} module:datastax/graph~GraphQueryOptions\n * @property {String} [graphLanguage] The graph language to use in graph queries.\n * @property {String} [graphResults] The protocol to use for serializing and deserializing graph results.\n * <p>\n *   Note that this value should rarely be set by users and will otherwise be unset. When unset the server resolves\n *   the protocol based on the <code>graphLanguage</code> specified.\n * </p>\n * @property {String} [graphName] The graph name to be used in the query. You can use <code>null</code> to clear the\n * value from the <code>DseClientOptions</code> and execute a query without a default graph.\n * @property {Number} [graphReadConsistency] Specifies the\n * [consistency level]{@link module:types~consistencies}\n * to be used for the graph read queries in this execution.\n * <p>\n *   When defined, it overrides the consistency level only for the READ part of the graph query.\n * </p>\n * @property {String} [graphSource] The graph traversal source name to use in graph queries.\n * @property {Number} [graphWriteConsistency] Specifies the [consistency level]{@link module:types~consistencies} to\n * be used for the graph write queries in this execution.\n * <p>\n *   When defined, it overrides the consistency level only for the WRITE part of the graph query.\n * </p>\n * @property {RetryPolicy} [retry] Sets the retry policy to be used for the graph query execution.\n * <p>\n *   When not specified in the {@link GraphQueryOptions} or in the {@link ExecutionProfile}, it will use by default\n *   a retry policy that does not retry graph executions.\n * </p>\n */\n\n/**\n * Gets the default options with the custom payload for a given profile.\n * @param {ProfileManager} profileManager\n * @param baseOptions\n * @param {RetryPolicy|null} defaultRetryPolicy\n * @param {ExecutionProfile} profile\n * @returns {DseClientOptions}\n * @private\n */\nfunction getDefaultGraphOptions(profileManager, baseOptions, defaultRetryPolicy, profile) {\n  return profileManager.getOrCreateGraphOptions(profile, function createDefaultOptions() {\n    const profileOptions = profile.graphOptions || utils.emptyObject;\n    const defaultProfile = profileManager.getDefault();\n    const options = {\n      customPayload: {\n        [payloadKeys.language]: utils.allocBufferFromString(profileOptions.language || baseOptions.language),\n        [payloadKeys.source]: utils.allocBufferFromString(profileOptions.source || baseOptions.source)\n      },\n      graphLanguage: profileOptions.language || baseOptions.language,\n      graphResults: profileOptions.results || baseOptions.results,\n      graphSource: profileOptions.source || baseOptions.source,\n      graphName: utils.ifUndefined(profileOptions.name, baseOptions.name)\n    };\n\n    if (profile !== defaultProfile) {\n      options.retry = profile.retry || baseOptions.retry;\n    } else {\n      // Based on an implementation detail of the execution profiles, the retry policy for the default profile is\n      // always loaded (required), but that doesn't mean that it was specified by the user.\n      // If it wasn't specified by the user, use the default retry policy for graph statements.\n      options.retry = defaultRetryPolicy || baseOptions.retry;\n    }\n\n    if (baseOptions.executeAs) {\n      options.customPayload[proxyExecuteKey] = utils.allocBufferFromString(baseOptions.executeAs);\n    }\n\n    if (options.graphName) {\n      options.customPayload[payloadKeys.name] = utils.allocBufferFromString(options.graphName);\n    }\n\n    const graphResults = utils.ifUndefined(profileOptions.results, baseOptions.graphResults);\n    if (graphResults !== undefined) {\n      options.customPayload[payloadKeys.results] = utils.allocBufferFromString(graphResults);\n    }\n\n    const readConsistency = utils.ifUndefined(profileOptions.readConsistency, baseOptions.readConsistency);\n    if (readConsistency !== undefined) {\n      options.customPayload[payloadKeys.readConsistency] =\n        utils.allocBufferFromString(getConsistencyName(readConsistency));\n    }\n\n    const writeConsistency = utils.ifUndefined(profileOptions.writeConsistency, baseOptions.writeConsistency);\n    if (writeConsistency !== undefined) {\n      options.customPayload[payloadKeys.writeConsistency] =\n        utils.allocBufferFromString(getConsistencyName(writeConsistency));\n    }\n\n    options.readTimeout = utils.ifUndefined3(profile.readTimeout, defaultProfile.readTimeout, baseOptions.readTimeout);\n    if (options.readTimeout > 0) {\n      // Write the graph read timeout payload\n      options.customPayload[payloadKeys.timeout] = longBuffer(options.readTimeout);\n    }\n\n    return options;\n  });\n}\n\n/**\n * Sets the payload key. If the value is not provided, it uses the value from the default profile options.\n * @param {Object} payload\n * @param {QueryOptions} profileOptions\n * @param {String} key\n * @param {String|Number|null} value\n * @param {Function} [converter]\n * @private\n */\nfunction setPayloadKey(payload, profileOptions, key, value, converter) {\n  converter = converter || utils.allocBufferFromString;\n  if (value === null) {\n    // Use null to avoid set payload for a key\n    return;\n  }\n\n  if (value !== undefined) {\n    payload[key] = converter(value);\n    return;\n  }\n\n  if (profileOptions.customPayload[key]) {\n    payload[key] = profileOptions.customPayload[key];\n  }\n}\n\nfunction longBuffer(value) {\n  value = Long.fromNumber(value);\n  return Long.toBuffer(value);\n}\n\n/**\n * Gets the name in upper case of the consistency level.\n * @param {Number} consistency\n * @private\n */\nfunction getConsistencyName(consistency) {\n  // eslint-disable-next-line\n  if (consistency == undefined) {\n    //null or undefined => undefined\n    return undefined;\n  }\n  loadConsistencyNames();\n  const name = consistencyNames[consistency];\n  if (!name) {\n    throw new Error(util.format(\n      'Consistency %s not found, use values defined as properties in types.consistencies object', consistency\n    ));\n  }\n  return name;\n}\n\nfunction loadConsistencyNames() {\n  if (consistencyNames) {\n    return;\n  }\n  consistencyNames = {};\n  const propertyNames = Object.keys(types.consistencies);\n  for (let i = 0; i < propertyNames.length; i++) {\n    const name = propertyNames[i];\n    consistencyNames[types.consistencies[name]] = name.toUpperCase();\n  }\n  //Using java constants naming conventions\n  consistencyNames[types.consistencies.localQuorum] = 'LOCAL_QUORUM';\n  consistencyNames[types.consistencies.eachQuorum] = 'EACH_QUORUM';\n  consistencyNames[types.consistencies.localSerial] = 'LOCAL_SERIAL';\n  consistencyNames[types.consistencies.localOne] = 'LOCAL_ONE';\n}\n\n/**\n * Represents a wrapper around the options related to a graph execution.\n * @internal\n * @ignore\n */\nclass GraphExecutionOptions extends DefaultExecutionOptions {\n\n  /**\n   * Creates a new instance of GraphExecutionOptions.\n   * @param {GraphQueryOptions} queryOptions The user provided query options.\n   * @param {Client} client the client instance.\n   * @param graphBaseOptions The default graph base options.\n   * @param {RetryPolicy} defaultProfileRetryPolicy\n   */\n  constructor(queryOptions, client, graphBaseOptions, defaultProfileRetryPolicy) {\n\n    queryOptions = queryOptions || utils.emptyObject;\n    super(queryOptions, client, null);\n\n    this._defaultGraphOptions = getDefaultGraphOptions(\n      client.profileManager, graphBaseOptions, defaultProfileRetryPolicy, this.getProfile());\n\n    this._preferredHost = null;\n    this._graphSubProtocol = queryOptions.graphResults || this._defaultGraphOptions.graphResults;\n    this._graphLanguage = queryOptions.graphLanguage || this._defaultGraphOptions.graphLanguage;\n  }\n\n  setPreferredHost(host) {\n    this._preferredHost = host;\n  }\n\n  getPreferredHost() {\n    return this._preferredHost;\n  }\n\n  getGraphSource() {\n    return this.getRawQueryOptions().graphSource || this._defaultGraphOptions.graphSource;\n  }\n\n  getGraphLanguage() {\n    return this._graphLanguage;\n  }\n\n  setGraphLanguage(value) {\n    this._graphLanguage = value;\n  }\n\n  getGraphName() {\n    return utils.ifUndefined(this.getRawQueryOptions().graphName, this._defaultGraphOptions.graphName);\n  }\n\n  getGraphSubProtocol() {\n    return this._graphSubProtocol;\n  }\n\n  setGraphSubProtocol(protocol) {\n    this._graphSubProtocol = protocol;\n  }\n\n  /** Graph executions have a specific default read timeout */\n  getReadTimeout() {\n    return this.getRawQueryOptions().readTimeout || this._defaultGraphOptions.readTimeout;\n  }\n\n  /** Graph executions have a specific default retry policy */\n  getRetryPolicy() {\n    return this.getRawQueryOptions().retry || this._defaultGraphOptions.retry;\n  }\n\n  getRowParser() {\n    const factory = this.getRawQueryOptions().rowParserFactory;\n\n    if (!factory) {\n      return null;\n    }\n\n    return factory(this.getGraphSubProtocol());\n  }\n\n  getQueryWriter() {\n    const factory = this.getRawQueryOptions().queryWriterFactory;\n\n    if (!factory) {\n      return null;\n    }\n\n    return factory(this.getGraphSubProtocol());\n  }\n\n  setGraphPayload() {\n    const options = this.getRawQueryOptions();\n    const defaultOptions = this._defaultGraphOptions;\n\n    // Clone the existing custom payload (if any)\n    const payload = Object.assign({}, this.getCustomPayload());\n\n    // Override the payload for DSE Graph exclusive options\n    setPayloadKey(payload, defaultOptions, payloadKeys.language,\n      this.getGraphLanguage() !== this._defaultGraphOptions.graphLanguage ? this.getGraphLanguage() : undefined);\n    setPayloadKey(payload, defaultOptions, payloadKeys.source, options.graphSource);\n    setPayloadKey(payload, defaultOptions, payloadKeys.name, options.graphName);\n    setPayloadKey(payload, defaultOptions, payloadKeys.readConsistency,\n      getConsistencyName(options.graphReadConsistency));\n    setPayloadKey(payload, defaultOptions, payloadKeys.writeConsistency,\n      getConsistencyName(options.graphWriteConsistency));\n\n    // Use the read timeout defined by the user or the one default to graph executions\n    setPayloadKey(payload, defaultOptions, payloadKeys.timeout,\n      this.getReadTimeout() > 0 ? this.getReadTimeout() : null, longBuffer);\n\n    // Graph result is always set\n    payload[payloadKeys.results] = defaultOptions.graphResults === this.getGraphSubProtocol()\n      ? defaultOptions.customPayload[payloadKeys.results] : utils.allocBufferFromString(this.getGraphSubProtocol());\n\n    this.setCustomPayload(payload);\n  }\n}\n\nmodule.exports = {\n  GraphExecutionOptions,\n  graphProtocol,\n  payloadKeys\n};", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst utils = require('../../utils');\nconst policies = require('../../policies');\nconst GraphResultSet = require('./result-set');\nconst { GraphSON2Reader, GraphSON2Writer, GraphSON3Reader, GraphSON3Writer } = require('./graph-serializer');\nconst getCustomTypeSerializers = require('./custom-type-serializers');\nconst { GraphExecutionOptions, graphProtocol } = require('./options');\n\nconst graphLanguageGroovyString = 'gremlin-groovy';\nconst graphEngineCore = 'Core';\n\nconst graphSON2Reader = new GraphSON2Reader({ serializers: getCustomTypeSerializers() });\nconst graphSON2Writer = new GraphSON2Writer({ serializers: getCustomTypeSerializers() });\nconst graphSON3Reader = new GraphSON3Reader({ serializers: getCustomTypeSerializers() });\nconst graphSON3Writer = new GraphSON3Writer({ serializers: getCustomTypeSerializers() });\n\nconst rowParsers = new Map([\n  [ graphProtocol.graphson2, getRowParser(graphSON2Reader) ],\n  [ graphProtocol.graphson3, getRowParser(graphSON3Reader) ]\n]);\n\nconst defaultWriters = new Map([\n  [ graphProtocol.graphson1, x => JSON.stringify(x) ],\n  [ graphProtocol.graphson2, getDefaultWriter(graphSON2Writer) ],\n  [ graphProtocol.graphson3, getDefaultWriter(graphSON3Writer) ]\n]);\n\n/**\n * Internal class that contains the logic for executing a graph traversal.\n * @ignore\n */\nclass GraphExecutor {\n\n  /**\n   * Creates a new instance of GraphExecutor.\n   * @param {Client} client\n   * @param {ClientOptions} rawOptions\n   * @param {Function} handler\n   */\n  constructor(client, rawOptions, handler) {\n    this._client = client;\n    this._handler = handler;\n\n    // Retrieve the retry policy for the default profile to determine if it was specified\n    this._defaultProfileRetryPolicy = client.profileManager.getDefaultConfiguredRetryPolicy();\n\n    // Use graphBaseOptions as a way to gather all defaults that affect graph executions\n    this._graphBaseOptions = utils.extend({\n      executeAs: client.options.queryOptions.executeAs,\n      language: graphLanguageGroovyString,\n      source: 'g',\n      readTimeout: 0,\n      // As the default retry policy might retry non-idempotent queries\n      // we should use default retry policy for all graph queries that does not retry\n      retry: new policies.retry.FallthroughRetryPolicy()\n    }, rawOptions.graphOptions, client.profileManager.getDefault().graphOptions);\n\n    if (this._graphBaseOptions.readTimeout === null) {\n      this._graphBaseOptions.readTimeout = client.options.socketOptions.readTimeout;\n    }\n  }\n\n  /**\n   * Executes the graph traversal.\n   * @param {String|Object} query\n   * @param {Object} parameters\n   * @param {GraphQueryOptions} options\n   */\n  async send(query, parameters, options) {\n    if (Array.isArray(parameters)) {\n      throw new TypeError('Parameters must be a Object instance as an associative array');\n    }\n\n    if (!query) {\n      throw new TypeError('Query must be defined');\n    }\n\n    const execOptions = new GraphExecutionOptions(\n      options, this._client, this._graphBaseOptions, this._defaultProfileRetryPolicy);\n\n    if (execOptions.getGraphSource() === 'a') {\n      const host = await this._getAnalyticsMaster();\n      execOptions.setPreferredHost(host);\n    }\n\n    // A query object that allows to plugin any executable thing\n    const isQueryObject = typeof query === 'object' && query.graphLanguage && query.value && query.queryWriterFactory;\n\n    if (isQueryObject) {\n      // Use the provided graph language to override the current\n      execOptions.setGraphLanguage(query.graphLanguage);\n    }\n\n    this._setGraphProtocol(execOptions);\n    execOptions.setGraphPayload();\n    parameters = GraphExecutor._buildGraphParameters(parameters, execOptions.getGraphSubProtocol());\n\n    if (typeof query !== 'string') {\n      // Its a traversal that needs to be converted\n      // Transforming the provided query into a traversal requires the protocol to be set first.\n      // Query writer factory can be defined in the options or in the query object\n      let queryWriter = execOptions.getQueryWriter();\n\n      if (isQueryObject) {\n        queryWriter = query.queryWriterFactory(execOptions.getGraphSubProtocol());\n      } else if (!queryWriter) {\n        queryWriter = GraphExecutor._writerFactory(execOptions.getGraphSubProtocol());\n      }\n\n      query = queryWriter(!isQueryObject ? query : query.value);\n    }\n\n    return await this._executeGraphQuery(query, parameters, execOptions);\n  }\n\n  /**\n   * Sends the graph traversal.\n   * @param {string} query\n   * @param {object} parameters\n   * @param {GraphExecutionOptions} execOptions\n   * @returns {Promise<GraphResultSet>}\n   * @private\n   */\n  async _executeGraphQuery(query, parameters, execOptions) {\n    const result = await this._handler.call(this._client, query, parameters, execOptions);\n\n    // Instances of rowParser transform Row instances into Traverser instances.\n    // Traverser instance is an object with the following form { object: any, bulk: number }\n    const rowParser = execOptions.getRowParser() || GraphExecutor._rowParserFactory(execOptions.getGraphSubProtocol());\n\n    return new GraphResultSet(result, rowParser);\n  }\n\n  /**\n   * Uses the RPC call to obtain the analytics master host.\n   * @returns {Promise<Host|null>}\n   * @private\n   */\n  async _getAnalyticsMaster() {\n    try {\n      const result = await this._client.execute('CALL DseClientTool.getAnalyticsGraphServer()', utils.emptyArray);\n\n      if (result.rows.length === 0) {\n        this._client.log('verbose',\n          'Empty response querying graph analytics server, query will not be routed optimally');\n        return null;\n      }\n\n      const resultField = result.rows[0]['result'];\n      if (!resultField || !resultField['location']) {\n        this._client.log('verbose',\n          'Unexpected response querying graph analytics server, query will not be routed optimally',\n          result.rows[0]);\n        return null;\n      }\n\n      const hostName = resultField['location'].substr(0, resultField['location'].lastIndexOf(':'));\n      const addressTranslator = this._client.options.policies.addressResolution;\n\n      return await new Promise(resolve => {\n        addressTranslator.translate(hostName, this._client.options.protocolOptions.port, (endpoint) =>\n          resolve(this._client.hosts.get(endpoint)));\n      });\n    } catch (err) {\n      this._client.log('verbose', 'Error querying graph analytics server, query will not be routed optimally', err);\n      return null;\n    }\n  }\n\n  /**\n   * Resolves what protocol should be used for decoding graph results for the given execution.\n   *\n   * <p>Resolution is done in the following manner if graphResults is not set:</p>\n   *\n   * <ul>\n   *   <li>If graph name is set, and associated keyspace's graph engine is set to \"Core\", use {@link\n    *       graphProtocol#graphson3}.\n   *   <li>Else, if the graph language is not 'gremlin-groovy', use {@link graphProtocol#graphson2}\n   *   <li>Otherwise, use {@link graphProtocol#graphson1}\n   * </ul>\n   * @param {GraphExecutionOptions} execOptions\n   */\n  _setGraphProtocol(execOptions) {\n    let protocol = execOptions.getGraphSubProtocol();\n\n    if (protocol) {\n      return;\n    }\n\n    if (execOptions.getGraphName()) {\n      const keyspace = this._client.metadata.keyspaces[execOptions.getGraphName()];\n      if (keyspace && keyspace.graphEngine === graphEngineCore) {\n        protocol = graphProtocol.graphson3;\n      }\n    }\n\n    if (!protocol) {\n      // Decide the minimal version supported by the graph language\n      if (execOptions.getGraphLanguage() === graphLanguageGroovyString) {\n        protocol = graphProtocol.graphson1;\n      } else {\n        protocol = graphProtocol.graphson2;\n      }\n    }\n\n    execOptions.setGraphSubProtocol(protocol);\n  }\n\n  /**\n   * Only GraphSON1 parameters are supported.\n   * @param {Array|function|null} parameters\n   * @param {string} protocol\n   * @returns {string[]|null}\n   * @private\n   */\n  static _buildGraphParameters(parameters, protocol) {\n    if (!parameters || typeof parameters !== 'object') {\n      return null;\n    }\n\n    const queryWriter = GraphExecutor._writerFactory(protocol);\n\n    return [\n      (protocol !== graphProtocol.graphson1 && protocol !== graphProtocol.graphson2)\n        ? queryWriter(new Map(Object.entries(parameters)))\n        : queryWriter(parameters)\n    ];\n  }\n\n  static _rowParserFactory(protocol) {\n    const handler = rowParsers.get(protocol);\n\n    if (!handler) {\n      // Default to no row parser\n      return null;\n    }\n\n    return handler;\n  }\n\n  static _writerFactory(protocol) {\n    const handler = defaultWriters.get(protocol);\n\n    if (!handler) {\n      throw new Error(`No writer defined for protocol ${protocol}`);\n    }\n\n    return handler;\n  }\n}\n\nfunction getRowParser(reader) {\n  return row => {\n    const item = reader.read(JSON.parse(row['gremlin']));\n    return { object: item['result'], bulk: item['bulk'] || 1 };\n  };\n}\n\nfunction getDefaultWriter(writer) {\n  return value => writer.write(value);\n}\n\nmodule.exports = GraphExecutor;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst events = require('events');\nconst util = require('util');\n\nconst utils = require('./utils.js');\nconst errors = require('./errors.js');\nconst types = require('./types');\nconst { ProfileManager } = require('./execution-profile');\nconst requests = require('./requests');\nconst clientOptions = require('./client-options');\nconst ClientState = require('./metadata/client-state');\nconst description = require('../package.json').description;\nconst { version } = require('../package.json');\nconst { DefaultExecutionOptions } = require('./execution-options');\nconst ControlConnection = require('./control-connection');\nconst RequestHandler = require('./request-handler');\nconst PrepareHandler = require('./prepare-handler');\nconst InsightsClient = require('./insights-client');\nconst cloud = require('./datastax/cloud');\nconst GraphExecutor = require('./datastax/graph/graph-executor');\nconst promiseUtils = require('./promise-utils');\n\n/**\n * Max amount of pools being warmup in parallel, when warmup is enabled\n * @private\n */\nconst warmupLimit = 32;\n\n/**\n * Client options.\n * <p>While the driver provides lots of extensibility points and configurability, few client options are required.</p>\n * <p>Default values for all settings are designed to be suitable for the majority of use cases, you should avoid\n * fine tuning it when not needed.</p>\n * <p>See [Client constructor]{@link Client} documentation for recommended options.</p>\n * @typedef {Object} ClientOptions\n * @property {Array.<string>} contactPoints\n * Array of addresses or host names of the nodes to add as contact points.\n * <p>\n *  Contact points are addresses of Cassandra nodes that the driver uses to discover the cluster topology.\n * </p>\n * <p>\n *  Only one contact point is required (the driver will retrieve the address of the other nodes automatically),\n *  but it is usually a good idea to provide more than one contact point, because if that single contact point is\n *  unavailable, the driver will not be able to initialize correctly.\n * </p>\n * @property {String} [localDataCenter] The local data center to use.\n * <p>\n *   If using DCAwareRoundRobinPolicy (default), this option is required and only hosts from this data center are\n *   connected to and used in query plans.\n * </p>\n * @property {String} [keyspace] The logged keyspace for all the connections created within the {@link Client} instance.\n * @property {Object} [credentials] An object containing the username and password for plain-text authentication.\n * It configures the authentication provider to be used against Apache Cassandra's PasswordAuthenticator or DSE's\n * DseAuthenticator, when default auth scheme is plain-text.\n * <p>\n *   Note that you should configure either <code>credentials</code> or <code>authProvider</code> to connect to an\n *   auth-enabled cluster, but not both.\n * </p>\n * @property {String} [credentials.username] The username to use for plain-text authentication.\n * @property {String} [credentials.password] The password to use for plain-text authentication.\n * @property {Uuid} [id] A unique identifier assigned to a {@link Client} object, that will be communicated to the\n * server (DSE 6.0+) to identify the client instance created with this options. When not defined, the driver will\n * generate a random identifier.\n * @property {String} [applicationName] An optional setting identifying the name of the application using\n * the {@link Client} instance.\n * <p>This value is passed to DSE and is useful as metadata for describing a client connection on the server side.</p>\n * @property {String} [applicationVersion] An optional setting identifying the version of the application using\n * the {@link Client} instance.\n * <p>This value is passed to DSE and is useful as metadata for describing a client connection on the server side.</p>\n * @property {Object} [monitorReporting] Options for reporting mechanism from the client to the DSE server, for\n * versions that support it.\n * @property {Boolean} [monitorReporting.enabled=true] Determines whether the reporting mechanism is enabled.\n * Defaults to <code>true</code>.\n * @property {Object} [cloud] The options to connect to a cloud instance.\n * @property {String|URL} cloud.secureConnectBundle Determines the file path for the credentials file bundle.\n * @property {Number} [refreshSchemaDelay] The default window size in milliseconds used to debounce node list and schema\n * refresh metadata requests. Default: 1000.\n * @property {Boolean} [isMetadataSyncEnabled] Determines whether client-side schema metadata retrieval and update is\n * enabled.\n * <p>Setting this value to <code>false</code> will cause keyspace information not to be automatically loaded, affecting\n * replica calculation per token in the different keyspaces. When disabling metadata synchronization, use\n * [Metadata.refreshKeyspaces()]{@link module:metadata~Metadata#refreshKeyspaces} to keep keyspace information up to\n * date or token-awareness will not work correctly.</p>\n * Default: <code>true</code>.\n * @property {Boolean} [prepareOnAllHosts] Determines if the driver should prepare queries on all hosts in the cluster.\n * Default: <code>true</code>.\n * @property {Boolean} [rePrepareOnUp] Determines if the driver should re-prepare all cached prepared queries on a\n * host when it marks it back up.\n * Default: <code>true</code>.\n * @property {Number} [maxPrepared] Determines the maximum amount of different prepared queries before evicting items\n * from the internal cache. Reaching a high threshold hints that the queries are not being reused, like when\n * hard-coding parameter values inside the queries.\n * Default: <code>500</code>.\n * @property {Object} [policies]\n * @property {LoadBalancingPolicy} [policies.loadBalancing] The load balancing policy instance to be used to determine\n * the coordinator per query.\n * @property {RetryPolicy} [policies.retry] The retry policy.\n * @property {ReconnectionPolicy} [policies.reconnection] The reconnection policy to be used.\n * @property {AddressTranslator} [policies.addressResolution] The address resolution policy.\n * @property {SpeculativeExecutionPolicy} [policies.speculativeExecution] The <code>SpeculativeExecutionPolicy</code>\n * instance to be used to determine if the client should send speculative queries when the selected host takes more\n * time than expected.\n * <p>\n *   Default: <code>[NoSpeculativeExecutionPolicy]{@link\n  *   module:policies/speculativeExecution~NoSpeculativeExecutionPolicy}</code>\n * </p>\n * @property {TimestampGenerator} [policies.timestampGeneration] The client-side\n * [query timestamp generator]{@link module:policies/timestampGeneration~TimestampGenerator}.\n * <p>\n *   Default: <code>[MonotonicTimestampGenerator]{@link module:policies/timestampGeneration~MonotonicTimestampGenerator}\n *   </code>\n * </p>\n * <p>Use <code>null</code> to disable client-side timestamp generation.</p>\n * @property {QueryOptions} [queryOptions] Default options for all queries.\n * @property {Object} [pooling] Pooling options.\n * @property {Number} [pooling.heartBeatInterval] The amount of idle time in milliseconds that has to pass before the\n * driver issues a request on an active connection to avoid idle time disconnections. Default: 30000.\n * @property {Object} [pooling.coreConnectionsPerHost] Associative array containing amount of connections per host\n * distance.\n * @property {Number} [pooling.maxRequestsPerConnection] The maximum number of requests per connection. The default\n * value is:\n * <ul>\n *   <li>For modern protocol versions (v3 and above): 2048</li>\n *   <li>For older protocol versions (v1 and v2): 128</li>\n * </ul>\n * @property {Boolean} [pooling.warmup] Determines if all connections to hosts in the local datacenter must be opened on\n * connect. Default: true.\n * @property {Object} [protocolOptions]\n * @property {Number} [protocolOptions.port] The port to use to connect to the Cassandra host. If not set through this\n * method, the default port (9042) will be used instead.\n * @property {Number} [protocolOptions.maxSchemaAgreementWaitSeconds] The maximum time in seconds to wait for schema\n * agreement between nodes before returning from a DDL query. Default: 10.\n * @property {Number} [protocolOptions.maxVersion] When set, it limits the maximum protocol version used to connect to\n * the nodes.\n * Useful for using the driver against a cluster that contains nodes with different major/minor versions of Cassandra.\n * @property {Boolean} [protocolOptions.noCompact] When set to true, enables the NO_COMPACT startup option.\n * <p>\n * When this option is supplied <code>SELECT</code>, <code>UPDATE</code>, <code>DELETE</code>, and <code>BATCH</code>\n * statements on <code>COMPACT STORAGE</code> tables function in \"compatibility\" mode which allows seeing these tables\n * as if they were \"regular\" CQL tables.\n * </p>\n * <p>\n * This option only effects interactions with interactions with tables using <code>COMPACT STORAGE</code> and is only\n * supported by C* 3.0.16+, 3.11.2+, 4.0+ and DSE 6.0+.\n * </p>\n * @property {Object} [socketOptions]\n * @property {Number} [socketOptions.connectTimeout] Connection timeout in milliseconds. Default: 5000.\n * @property {Number} [socketOptions.defunctReadTimeoutThreshold] Determines the amount of requests that simultaneously\n * have to timeout before closing the connection. Default: 64.\n * @property {Boolean} [socketOptions.keepAlive] Whether to enable TCP keep-alive on the socket. Default: true.\n * @property {Number} [socketOptions.keepAliveDelay] TCP keep-alive delay in milliseconds. Default: 0.\n * @property {Number} [socketOptions.readTimeout] Per-host read timeout in milliseconds.\n * <p>\n *   Please note that this is not the maximum time a call to {@link Client#execute} may have to wait;\n *   this is the maximum time that call will wait for one particular Cassandra host, but other hosts will be tried if\n *   one of them timeout. In other words, a {@link Client#execute} call may theoretically wait up to\n *   <code>readTimeout * number_of_cassandra_hosts</code> (though the total number of hosts tried for a given query also\n *   depends on the LoadBalancingPolicy in use).\n * <p>When setting this value, keep in mind the following:</p>\n * <ul>\n *   <li>the timeout settings used on the Cassandra side (*_request_timeout_in_ms in cassandra.yaml) should be taken\n *   into account when picking a value for this read timeout. You should pick a value a couple of seconds greater than\n *   the Cassandra timeout settings.\n *   </li>\n *   <li>\n *     the read timeout is only approximate and only control the timeout to one Cassandra host, not the full query.\n *   </li>\n * </ul>\n * Setting a value of 0 disables read timeouts. Default: <code>12000</code>.\n * @property {Boolean} [socketOptions.tcpNoDelay] When set to true, it disables the Nagle algorithm. Default: true.\n * @property {Number} [socketOptions.coalescingThreshold] Buffer length in bytes use by the write queue before flushing\n * the frames. Default: 8000.\n * @property {AuthProvider} [authProvider] Provider to be used to authenticate to an auth-enabled cluster.\n * @property {RequestTracker} [requestTracker] The instance of RequestTracker used to monitor or log requests executed\n * with this instance.\n * @property {Object} [sslOptions] Client-to-node ssl options. When set the driver will use the secure layer.\n * You can specify cert, ca, ... options named after the Node.js <code>tls.connect()</code> options.\n * <p>\n *   It uses the same default values as Node.js <code>tls.connect()</code> except for <code>rejectUnauthorized</code>\n *   which is set to <code>false</code> by default (for historical reasons). This setting is likely to change\n *   in upcoming versions to enable validation by default.\n * </p>\n * @property {Object} [encoding] Encoding options.\n * @property {Function} [encoding.map] Map constructor to use for Cassandra map<k,v> type encoding and decoding.\n * If not set, it will default to Javascript Object with map keys as property names.\n * @property {Function} [encoding.set] Set constructor to use for Cassandra set<k> type encoding and decoding.\n * If not set, it will default to Javascript Array.\n * @property {Boolean} [encoding.copyBuffer] Determines if the network buffer should be copied for buffer based data\n * types (blob, uuid, timeuuid and inet).\n * <p>\n *   Setting it to true will cause that the network buffer is copied for each row value of those types,\n *   causing additional allocations but freeing the network buffer to be reused.\n *   Setting it to true is a good choice for cases where the Row and ResultSet returned by the queries are long-lived\n *   objects.\n * </p>\n * <p>\n *  Setting it to false will cause less overhead and the reference of the network buffer to be maintained until the row\n *  / result set are de-referenced.\n *  Default: true.\n * </p>\n * @property {Boolean} [encoding.useUndefinedAsUnset] Valid for Cassandra 2.2 and above. Determines that, if a parameter\n * is set to\n * <code>undefined</code> it should be encoded as <code>unset</code>.\n * <p>\n *  By default, ECMAScript <code>undefined</code> is encoded as <code>null</code> in the driver. Cassandra 2.2\n *  introduced the concept of unset.\n *  At driver level, you can set a parameter to unset using the field <code>types.unset</code>. Setting this flag to\n *  true allows you to use ECMAScript undefined as Cassandra <code>unset</code>.\n * </p>\n * <p>\n *   Default: true.\n * </p>\n * @property {Boolean} [encoding.useBigIntAsLong] Use [BigInt ECMAScript type](https://tc39.github.io/proposal-bigint/)\n * to represent CQL bigint and counter data types.\n * @property {Boolean} [encoding.useBigIntAsVarint] Use [BigInt ECMAScript\n * type](https://tc39.github.io/proposal-bigint/) to represent CQL varint data type.\n * @property {Array.<ExecutionProfile>} [profiles] The array of [execution profiles]{@link ExecutionProfile}.\n * @property {Function} [promiseFactory] Function to be used to create a <code>Promise</code> from a\n * callback-style function.\n * <p>\n *   Promise libraries often provide different methods to create a promise. For example, you can use Bluebird's\n *   <code>Promise.fromCallback()</code> method.\n * </p>\n * <p>\n *   By default, the driver will use the\n *   [Promise constructor]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise}.\n * </p>\n */\n\n/**\n * Query options\n * @typedef {Object} QueryOptions\n * @property {Boolean} [autoPage] Determines if the driver must retrieve the following result pages automatically.\n * <p>\n *   This setting is only considered by the [Client#eachRow()]{@link Client#eachRow} method. For more information,\n *   check the\n *   [paging results documentation]{@link https://docs.datastax.com/en/developer/nodejs-driver/latest/features/paging/}.\n * </p>\n * @property {Boolean} [captureStackTrace] Determines if the stack trace before the query execution should be\n * maintained.\n * <p>\n *   Useful for debugging purposes, it should be set to <code>false</code> under production environment as it adds an\n *   unnecessary overhead to each execution.\n * </p>\n * Default: false.\n * @property {Number} [consistency] [Consistency level]{@link module:types~consistencies}.\n * <p>\n *   Defaults to <code>localOne</code> for Apache Cassandra and DSE deployments.\n *   For DataStax Astra, it defaults to <code>localQuorum</code>.\n * </p>\n * @property {Object} [customPayload] Key-value payload to be passed to the server. On the Cassandra side,\n * implementations of QueryHandler can use this data.\n * @property {String} [executeAs] The user or role name to act as when executing this statement.\n * <p>When set, it executes as a different user/role than the one currently authenticated (a.k.a. proxy execution).</p>\n * <p>This feature is only available in DSE 5.1+.</p>\n * @property {String|ExecutionProfile} [executionProfile] Name or instance of the [profile]{@link ExecutionProfile} to\n * be used for this execution. If not set, it will the use \"default\" execution profile.\n * @property {Number} [fetchSize] Amount of rows to retrieve per page.\n * @property {Array|Array<Array>} [hints] Type hints for parameters given in the query, ordered as for the parameters.\n * <p>For batch queries, an array of such arrays, ordered as with the queries in the batch.</p>\n * @property {Host} [host] The host that should handle the query.\n * <p>\n *   Use of this option is <em>heavily discouraged</em> and should only be used in the following cases:\n * </p>\n * <ol>\n *   <li>\n *     Querying node-local tables, such as tables in the <code>system</code> and <code>system_views</code>\n *     keyspaces.\n *   </li>\n *   <li>\n *     Applying a series of schema changes, where it may be advantageous to execute schema changes in sequence on the\n *     same node.\n *   </li>\n * </ol>\n * <p>\n *   Configuring a specific host causes the configured\n *   [LoadBalancingPolicy]{@link module:policies/loadBalancing~LoadBalancingPolicy} to be completely bypassed.\n *   However, if the load balancing policy dictates that the host is at a\n *   [distance of ignored]{@link module:types~distance} or there is no active connectivity to the host, the request will\n *   fail with a [NoHostAvailableError]{@link module:errors~NoHostAvailableError}.\n * </p>\n * @property {Boolean} [isIdempotent] Defines whether the query can be applied multiple times without changing the result\n * beyond the initial application.\n * <p>\n *   The query execution idempotence can be used at [RetryPolicy]{@link module:policies/retry~RetryPolicy} level to\n *   determine if an statement can be retried in case of request error or write timeout.\n * </p>\n * <p>Default: <code>false</code>.</p>\n * @property {String} [keyspace] Specifies the keyspace for the query. It is used for the following:\n * <ol>\n * <li>To indicate what keyspace the statement is applicable to (protocol V5+ only).  This is useful when the\n * query does not provide an explicit keyspace and you want to override the current {@link Client#keyspace}.</li>\n * <li>For query routing when the query operates on a different keyspace than the current {@link Client#keyspace}.</li>\n * </ol>\n * @property {Boolean} [logged] Determines if the batch should be written to the batchlog. Only valid for\n * [Client#batch()]{@link Client#batch}, it will be ignored by other methods. Default: true.\n * @property {Boolean} [counter] Determines if its a counter batch. Only valid for\n * [Client#batch()]{@link Client#batch}, it will be ignored by other methods. Default: false.\n * @property {Buffer|String} [pageState] Buffer or string token representing the paging state.\n * <p>Useful for manual paging, if provided, the query will be executed starting from a given paging state.</p>\n * @property {Boolean} [prepare] Determines if the query must be executed as a prepared statement.\n * @property {Number} [readTimeout] When defined, it overrides the default read timeout\n * (<code>socketOptions.readTimeout</code>) in milliseconds for this execution per coordinator.\n * <p>\n *   Suitable for statements for which the coordinator may allow a longer server-side timeout, for example aggregation\n *   queries.\n * </p>\n * <p>\n *   A value of <code>0</code> disables client side read timeout for the execution. Default: <code>undefined</code>.\n * </p>\n * @property {RetryPolicy} [retry] Retry policy for the query.\n * <p>\n *   This property can be used to specify a different [retry policy]{@link module:policies/retry} to the one specified\n *   in the {@link ClientOptions}.policies.\n * </p>\n * @property {Array} [routingIndexes] Index of the parameters that are part of the partition key to determine\n * the routing.\n * @property {Buffer|Array} [routingKey] Partition key(s) to determine which coordinator should be used for the query.\n * @property {Array} [routingNames] Array of the parameters names that are part of the partition key to determine the\n * routing. Only valid for non-prepared requests, it's recommended that you use the prepare flag instead.\n * @property {Number} [serialConsistency] Serial consistency is the consistency level for the serial phase of\n * conditional updates.\n * This option will be ignored for anything else that a conditional update/insert.\n * @property {Number|Long} [timestamp] The default timestamp for the query in microseconds from the unix epoch\n * (00:00:00, January 1st, 1970).\n * <p>If provided, this will replace the server side assigned timestamp as default timestamp.</p>\n * <p>Use [generateTimestamp()]{@link module:types~generateTimestamp} utility method to generate a valid timestamp\n * based on a Date and microseconds parts.</p>\n * @property {Boolean} [traceQuery] Enable query tracing for the execution. Use query tracing to diagnose performance\n * problems related to query executions. Default: false.\n * <p>To retrieve trace, you can call [Metadata.getTrace()]{@link module:metadata~Metadata#getTrace} method.</p>\n * @property {Object} [graphOptions] Default options for graph query executions.\n * <p>\n *   These options are meant to provide defaults for all graph query executions. Consider using\n *   [execution profiles]{@link ExecutionProfile} if you plan to reuse different set of options across different\n *   query executions.\n * </p>\n * @property {String} [graphOptions.language] The graph language to use in graph queries. Default:\n * <code>'gremlin-groovy'</code>.\n * @property {String} [graphOptions.name] The graph name to be used in all graph queries.\n * <p>\n * This property is required but there is no default value for it. This value can be overridden at query level.\n * </p>\n * @property {Number} [graphOptions.readConsistency] Overrides the\n * [consistency level]{@link module:types~consistencies}\n * defined in the query options for graph read queries.\n * @property {Number} [graphOptions.readTimeout] Overrides the default per-host read timeout (in milliseconds) for all\n * graph queries. Default: <code>0</code>.\n * <p>\n *   Use <code>null</code> to reset the value and use the default on <code>socketOptions.readTimeout</code> .\n * </p>\n * @property {String} [graphOptions.source] The graph traversal source name to use in graph queries. Default:\n * <code>'g'</code>.\n * @property {Number} [graphOptions.writeConsistency] Overrides the [consistency\n * level]{@link module:types~consistencies} defined in the query options for graph write queries.\n */\n\n/**\n * Creates a new instance of {@link Client}.\n * @classdesc\n * Represents a database client that maintains multiple connections to the cluster nodes, providing methods to\n * execute CQL statements.\n * <p>\n * The <code>Client</code> uses [policies]{@link module:policies} to decide which nodes to connect to, which node\n * to use per each query execution, when it should retry failed or timed-out executions and how reconnection to down\n * nodes should be made.\n * </p>\n * @extends EventEmitter\n * @param {ClientOptions} options The options for this instance.\n * @example <caption>Creating a new client instance</caption>\n * const client = new Client({\n *   contactPoints: ['10.0.1.101', '10.0.1.102'],\n *   localDataCenter: 'datacenter1'\n * });\n * @example <caption>Executing a query</caption>\n * const result = await client.connect();\n * console.log(`Connected to ${client.hosts.length} nodes in the cluster: ${client.hosts.keys().join(', ')}`);\n * @example <caption>Executing a query</caption>\n * const result = await client.execute('SELECT key FROM system.local');\n * const row = result.first();\n * console.log(row['key']);\n * @constructor\n */\nfunction Client(options) {\n  events.EventEmitter.call(this);\n  this.options = clientOptions.extend({ logEmitter: this.emit.bind(this), id: types.Uuid.random() }, options);\n  Object.defineProperty(this, 'profileManager', { value: new ProfileManager(this.options) });\n  Object.defineProperty(this, 'controlConnection', {\n    value: new ControlConnection(this.options, this.profileManager), writable: true }\n  );\n  Object.defineProperty(this, 'insightsClient', { value: new InsightsClient(this)});\n\n  //Unlimited amount of listeners for internal event queues by default\n  this.setMaxListeners(0);\n  this.connected = false;\n  this.isShuttingDown = false;\n  /**\n   * Gets the name of the active keyspace.\n   * @type {String}\n   */\n  this.keyspace = options.keyspace;\n  /**\n   * Gets the schema and cluster metadata information.\n   * @type {Metadata}\n   */\n  this.metadata = this.controlConnection.metadata;\n  /**\n   * Gets an associative array of cluster hosts.\n   * @type {HostMap}\n   */\n  this.hosts = this.controlConnection.hosts;\n\n  /**\n   * The [ClientMetrics]{@link module:metrics~ClientMetrics} instance used to expose measurements of its internal\n   * behavior and of the server as seen from the driver side.\n   * <p>By default, a [DefaultMetrics]{@link module:metrics~DefaultMetrics} instance is used.</p>\n   * @type {ClientMetrics}\n   */\n  this.metrics = this.options.metrics;\n\n  this._graphExecutor = new GraphExecutor(this, options, this._execute);\n}\n\nutil.inherits(Client, events.EventEmitter);\n\n/**\n * Emitted when a new host is added to the cluster.\n * <ul>\n *   <li>{@link Host} The host being added.</li>\n * </ul>\n * @event Client#hostAdd\n */\n/**\n * Emitted when a host is removed from the cluster\n * <ul>\n *   <li>{@link Host} The host being removed.</li>\n * </ul>\n * @event Client#hostRemove\n */\n/**\n * Emitted when a host in the cluster changed status from down to up.\n * <ul>\n *   <li>{@link Host host} The host that changed the status.</li>\n * </ul>\n * @event Client#hostUp\n */\n/**\n * Emitted when a host in the cluster changed status from up to down.\n * <ul>\n *   <li>{@link Host host} The host that changed the status.</li>\n * </ul>\n * @event Client#hostDown\n */\n\n/**\n * Attempts to connect to one of the [contactPoints]{@link ClientOptions} and discovers the rest the nodes of the\n * cluster.\n * <p>When the {@link Client} is already connected, it resolves immediately.</p>\n * <p>It returns a <code>Promise</code> when a <code>callback</code> is not provided.</p>\n * @param {function} [callback] The optional callback that is invoked when the pool is connected or it failed to\n * connect.\n * @example <caption>Usage example</caption>\n * await client.connect();\n */\nClient.prototype.connect = function (callback) {\n  if (this.connected && callback) {\n    // Avoid creating Promise to immediately resolve them\n    return callback();\n  }\n\n  return promiseUtils.optionalCallback(this._connect(), callback);\n};\n\n/**\n * Async-only version of {@link Client#connect()}.\n * @private\n */\nClient.prototype._connect = async function () {\n  if (this.connected) {\n    return;\n  }\n\n  if (this.isShuttingDown) {\n    //it is being shutdown, don't allow further calls to connect()\n    throw new errors.NoHostAvailableError(null, 'Connecting after shutdown is not supported');\n  }\n\n  if (this.connecting) {\n    return promiseUtils.fromEvent(this, 'connected');\n  }\n\n  this.connecting = true;\n  this.log('info', util.format(\"Connecting to cluster using '%s' version %s\", description, version));\n\n  try {\n    await cloud.init(this.options);\n    await this.controlConnection.init();\n    this.hosts = this.controlConnection.hosts;\n    await this.profileManager.init(this, this.hosts);\n\n    if (this.keyspace) {\n      await RequestHandler.setKeyspace(this);\n    }\n\n    clientOptions.setMetadataDependent(this);\n\n    await this._warmup();\n\n  } catch (err) {\n    // We should close the pools (if any) and reset the state to allow successive calls to connect()\n    await this.controlConnection.reset();\n    this.connected = false;\n    this.connecting = false;\n    this.emit('connected', err);\n    throw err;\n  }\n\n  this._setHostListeners();\n\n  // Set the distance of the control connection host relatively to this instance\n  this.profileManager.getDistance(this.controlConnection.host);\n  this.insightsClient.init();\n  this.connected = true;\n  this.connecting = false;\n  this.emit('connected');\n};\n\n/**\n * Executes a query on an available connection.\n * <p>The query can be prepared (recommended) or not depending on the [prepare]{@linkcode QueryOptions} flag.</p>\n * <p>\n *   Some execution failures can be handled transparently by the driver, according to the\n *   [RetryPolicy]{@linkcode module:policies/retry~RetryPolicy} or the\n *   [SpeculativeExecutionPolicy]{@linkcode module:policies/speculativeExecution} used.\n * </p>\n * <p>It returns a <code>Promise</code> when a <code>callback</code> is not provided.</p>\n * @param {String} query The query to execute.\n * @param {Array|Object} [params] Array of parameter values or an associative array (object) containing parameter names\n * as keys and its value.\n * @param {QueryOptions} [options] The query options for the execution.\n * @param {ResultCallback} [callback] Executes callback(err, result) when execution completed. When not defined, the\n * method will return a promise.\n * @example <caption>Promise-based API, using async/await</caption>\n * const query = 'SELECT name, email FROM users WHERE id = ?';\n * const result = await client.execute(query, [ id ], { prepare: true });\n * const row = result.first();\n * console.log('%s: %s', row['name'], row['email']);\n * @example <caption>Callback-based API</caption>\n * const query = 'SELECT name, email FROM users WHERE id = ?';\n * client.execute(query, [ id ], { prepare: true }, function (err, result) {\n *   assert.ifError(err);\n *   const row = result.first();\n *   console.log('%s: %s', row['name'], row['email']);\n * });\n * @see {@link ExecutionProfile} to reuse a set of options across different query executions.\n */\nClient.prototype.execute = function (query, params, options, callback) {\n  // This method acts as a wrapper for the async method _execute()\n\n  if (!callback) {\n    // Set default argument values for optional parameters\n    if (typeof options === 'function') {\n      callback = options;\n      options = null;\n    } else if (typeof params === 'function') {\n      callback = params;\n      params = null;\n    }\n  }\n\n  try {\n    const execOptions = DefaultExecutionOptions.create(options, this);\n    return promiseUtils.optionalCallback(this._execute(query, params, execOptions), callback);\n  }\n  catch (err) {\n    // There was an error when parsing the user options\n    if (callback) {\n      return callback(err);\n    }\n\n    return Promise.reject(err);\n  }\n};\n\n/**\n * Executes a graph query.\n * <p>It returns a <code>Promise</code> when a <code>callback</code> is not provided.</p>\n * @param {String} query The gremlin query.\n * @param {Object|null} [parameters] An associative array containing the key and values of the parameters.\n * @param {GraphQueryOptions|null} [options] The graph query options.\n * @param {Function} [callback] Function to execute when the response is retrieved, taking two arguments:\n * <code>err</code> and <code>result</code>. When not defined, the method will return a promise.\n * @example <caption>Promise-based API, using async/await</caption>\n * const result = await client.executeGraph('g.V()');\n * // Get the first item (vertex, edge, scalar value, ...)\n * const vertex = result.first();\n * console.log(vertex.label);\n * @example <caption>Callback-based API</caption>\n * client.executeGraph('g.V()', (err, result) => {\n *   const vertex = result.first();\n *   console.log(vertex.label);\n * });\n * @example <caption>Iterating through the results</caption>\n * const result = await client.executeGraph('g.E()');\n * for (let edge of result) {\n *   console.log(edge.label); // created\n * });\n * @example <caption>Using result.forEach()</caption>\n * const result = await client.executeGraph('g.V().hasLabel(\"person\")');\n * result.forEach(function(vertex) {\n *   console.log(vertex.type); // vertex\n *   console.log(vertex.label); // person\n * });\n * @see {@link ExecutionProfile} to reuse a set of options across different query executions.\n */\nClient.prototype.executeGraph = function (query, parameters, options, callback) {\n  callback = callback || (options ? options : parameters);\n\n  if (typeof callback === 'function') {\n    parameters = typeof parameters !== 'function' ? parameters : null;\n    return promiseUtils.toCallback(this._graphExecutor.send(query, parameters, options), callback);\n  }\n\n  return this._graphExecutor.send(query, parameters, options);\n};\n\n/**\n * Executes the query and calls <code>rowCallback</code> for each row as soon as they are received. Calls the final\n * <code>callback</code> after all rows have been sent, or when there is an error.\n * <p>\n *   The query can be prepared (recommended) or not depending on the [prepare]{@linkcode QueryOptions} flag.\n * </p>\n * @param {String} query The query to execute\n * @param {Array|Object} [params] Array of parameter values or an associative array (object) containing parameter names\n * as keys and its value.\n * @param {QueryOptions} [options] The query options.\n * @param {function} rowCallback Executes <code>rowCallback(n, row)</code> per each row received, where n is the row\n * index and row is the current Row.\n * @param {function} [callback] Executes <code>callback(err, result)</code> after all rows have been received.\n * <p>\n *   When dealing with paged results, [ResultSet#nextPage()]{@link module:types~ResultSet#nextPage} method can be used\n *   to retrieve the following page. In that case, <code>rowCallback()</code> will be again called for each row and\n *   the final callback will be invoked when all rows in the following page has been retrieved.\n * </p>\n * @example <caption>Using per-row callback and arrow functions</caption>\n * client.eachRow(query, params, { prepare: true }, (n, row) => console.log(n, row), err => console.error(err));\n * @example <caption>Overloads</caption>\n * client.eachRow(query, rowCallback);\n * client.eachRow(query, params, rowCallback);\n * client.eachRow(query, params, options, rowCallback);\n * client.eachRow(query, params, rowCallback, callback);\n * client.eachRow(query, params, options, rowCallback, callback);\n */\nClient.prototype.eachRow = function (query, params, options, rowCallback, callback) {\n  if (!callback && rowCallback && typeof options === 'function') {\n    callback = utils.validateFn(rowCallback, 'rowCallback');\n    rowCallback = options;\n  } else {\n    callback = callback || utils.noop;\n    rowCallback = utils.validateFn(rowCallback || options || params, 'rowCallback');\n  }\n\n  params = typeof params !== 'function' ? params : null;\n\n  let execOptions;\n  try {\n    execOptions = DefaultExecutionOptions.create(options, this, rowCallback);\n  }\n  catch (e) {\n    return callback(e);\n  }\n\n  let rowLength = 0;\n\n  const nextPage = () => promiseUtils.toCallback(this._execute(query, params, execOptions), pageCallback);\n\n  function pageCallback (err, result) {\n    if (err) {\n      return callback(err);\n    }\n    // Next requests in case paging (auto or explicit) is used\n    rowLength += result.rowLength;\n\n    if (result.rawPageState !== undefined) {\n      // Use new page state as next request page state\n      execOptions.setPageState(result.rawPageState);\n      if (execOptions.isAutoPage()) {\n        // Issue next request for the next page\n        return nextPage();\n      }\n      // Allows for explicit (manual) paging, in case the caller needs it\n      result.nextPage = nextPage;\n    }\n\n    // Finished auto-paging\n    result.rowLength = rowLength;\n    callback(null, result);\n  }\n\n  promiseUtils.toCallback(this._execute(query, params, execOptions), pageCallback);\n};\n\n/**\n * Executes the query and pushes the rows to the result stream as soon as they received.\n * <p>\n * The stream is a [ReadableStream]{@linkcode https://nodejs.org/api/stream.html#stream_class_stream_readable} object\n *  that emits rows.\n *  It can be piped downstream and provides automatic pause/resume logic (it buffers when not read).\n * </p>\n * <p>\n *   The query can be prepared (recommended) or not depending on {@link QueryOptions}.prepare flag. Retries on multiple\n *   hosts if needed.\n * </p>\n * @param {String} query The query to prepare and execute.\n * @param {Array|Object} [params] Array of parameter values or an associative array (object) containing parameter names\n * as keys and its value\n * @param {QueryOptions} [options] The query options.\n * @param {function} [callback] executes callback(err) after all rows have been received or if there is an error\n * @returns {ResultStream}\n */\nClient.prototype.stream = function (query, params, options, callback) {\n  callback = callback || utils.noop;\n  // NOTE: the nodejs stream maintains yet another internal buffer\n  // we rely on the default stream implementation to keep memory\n  // usage reasonable.\n  const resultStream = new types.ResultStream({ objectMode: 1 });\n  function onFinish(err, result) {\n    if (err) {\n      resultStream.emit('error', err);\n    }\n    if (result && result.nextPage ) {\n      // allows for throttling as per the\n      // default nodejs stream implementation\n      resultStream._valve(function pageValve() {\n        try {\n          result.nextPage();\n        }\n        catch( ex ) {\n          resultStream.emit('error', ex );\n        }\n      });\n      return;\n    }\n    // Explicitly dropping the valve (closure)\n    resultStream._valve(null);\n    resultStream.add(null);\n    callback(err);\n  }\n  let sync = true;\n  this.eachRow(query, params, options, function rowCallback(n, row) {\n    resultStream.add(row);\n  }, function eachRowFinished(err, result) {\n    if (sync) {\n      // Prevent sync callback\n      return setImmediate(function eachRowFinishedImmediate() {\n        onFinish(err, result);\n      });\n    }\n    onFinish(err, result);\n  });\n  sync = false;\n  return resultStream;\n};\n\n/**\n * Executes batch of queries on an available connection to a host.\n * <p>It returns a <code>Promise</code> when a <code>callback</code> is not provided.</p>\n * @param {Array.<string>|Array.<{query, params}>} queries The queries to execute as an Array of strings or as an array\n * of object containing the query and params\n * @param {QueryOptions} [options] The query options.\n * @param {ResultCallback} [callback] Executes callback(err, result) when the batch was executed\n */\nClient.prototype.batch = function (queries, options, callback) {\n  if (!callback && typeof options === 'function') {\n    callback = options;\n    options = null;\n  }\n\n  return promiseUtils.optionalCallback(this._batch(queries, options), callback);\n};\n\n/**\n * Async-only version of {@link Client#batch()} .\n * @param {Array.<string>|Array.<{query, params}>}queries\n * @param {QueryOptions} options\n * @returns {Promise<ResultSet>}\n * @private\n */\nClient.prototype._batch = async function (queries, options) {\n  if (!Array.isArray(queries)) {\n    throw new errors.ArgumentError('Queries should be an Array');\n  }\n\n  if (queries.length === 0) {\n    throw new errors.ArgumentError('Queries array should not be empty');\n  }\n\n  await this._connect();\n\n  const execOptions = DefaultExecutionOptions.create(options, this);\n  let queryItems;\n\n  if (execOptions.isPrepared()) {\n    // use keyspace from query options if protocol supports per-query keyspace, otherwise use connection keyspace.\n    const version = this.controlConnection.protocolVersion;\n    const queryKeyspace = types.protocolVersion.supportsKeyspaceInRequest(version) && options.keyspace || this.keyspace;\n    queryItems = await PrepareHandler.getPreparedMultiple(\n      this, execOptions.getLoadBalancingPolicy(), queries, queryKeyspace);\n  } else {\n    queryItems = new Array(queries.length);\n\n    for (let i = 0; i < queries.length; i++) {\n      const item = queries[i];\n      if (!item) {\n        throw new errors.ArgumentError(`Invalid query at index ${i}`);\n      }\n\n      const query = typeof item === 'string' ? item : item.query;\n      if (!query) {\n        throw new errors.ArgumentError(`Invalid query at index ${i}`);\n      }\n\n      queryItems[i] = { query, params: item.params };\n    }\n  }\n\n  const request = await this._createBatchRequest(queryItems, execOptions);\n  return await RequestHandler.send(request, execOptions, this);\n};\n\n/**\n * Gets the host that are replicas of a given token.\n * @param {String} keyspace\n * @param {Buffer} token\n * @returns {Array<Host>}\n */\nClient.prototype.getReplicas = function (keyspace, token) {\n  return this.metadata.getReplicas(keyspace, token);\n};\n\n/**\n * Gets a snapshot containing information on the connections pools held by this Client at the current time.\n * <p>\n *   The information provided in the returned object only represents the state at the moment this method was called and\n *   it's not maintained in sync with the driver metadata.\n * </p>\n * @returns {ClientState} A [ClientState]{@linkcode module:metadata~ClientState} instance.\n */\nClient.prototype.getState = function () {\n  return ClientState.from(this);\n};\n\nClient.prototype.log = utils.log;\n\n/**\n * Closes all connections to all hosts.\n * <p>It returns a <code>Promise</code> when a <code>callback</code> is not provided.</p>\n * @param {Function} [callback] Optional callback to be invoked when finished closing all connections.\n */\nClient.prototype.shutdown = function (callback) {\n  return promiseUtils.optionalCallback(this._shutdown(), callback);\n};\n\n/** @private */\nClient.prototype._shutdown = async function () {\n  this.log('info', 'Shutting down');\n\n  if (!this.hosts || !this.connected) {\n    // not initialized\n    this.connected = false;\n    return;\n  }\n\n  if (this.connecting) {\n    this.log('warning', 'Shutting down while connecting');\n    // wait until finish connecting for easier troubleshooting\n    await promiseUtils.fromEvent(this, 'connected');\n  }\n\n  this.connected = false;\n  this.isShuttingDown = true;\n  const hosts = this.hosts.values();\n\n  this.insightsClient.shutdown();\n\n  // Shutdown the ControlConnection before shutting down the pools\n  this.controlConnection.shutdown();\n  this.options.policies.speculativeExecution.shutdown();\n\n  if (this.options.requestTracker) {\n    this.options.requestTracker.shutdown();\n  }\n\n  // go through all the host and shut down their pools\n  await Promise.all(hosts.map(h => h.shutdown(false)));\n};\n\n/**\n * Waits until that the schema version in all nodes is the same or the waiting time passed.\n * @param {Connection} connection\n * @returns {Promise<boolean>}\n * @ignore\n */\nClient.prototype._waitForSchemaAgreement = async function (connection) {\n  if (this.hosts.length === 1) {\n    return true;\n  }\n\n  const start = process.hrtime();\n  const maxWaitSeconds = this.options.protocolOptions.maxSchemaAgreementWaitSeconds;\n\n  this.log('info', 'Waiting for schema agreement');\n\n  let versionsMatch;\n\n  while (!versionsMatch && process.hrtime(start)[0] < maxWaitSeconds) {\n    versionsMatch = await this.metadata.compareSchemaVersions(connection);\n\n    if (versionsMatch) {\n      this.log('info', 'Schema versions match');\n      break;\n    }\n\n    // Let some time pass before the next check\n    await promiseUtils.delay(500);\n  }\n\n  return versionsMatch;\n};\n\n/**\n * Waits for schema agreements and schedules schema metadata refresh.\n * @param {Connection} connection\n * @param event\n * @returns {Promise<boolean>}\n * @ignore\n * @internal\n */\nClient.prototype.handleSchemaAgreementAndRefresh = async function (connection, event) {\n  let agreement = false;\n\n  try {\n    agreement = await this._waitForSchemaAgreement(connection);\n  } catch (err) {\n    //we issue a warning but we continue with the normal flow\n    this.log('warning', 'There was an error while waiting for the schema agreement between nodes', err);\n  }\n\n  if (!this.options.isMetadataSyncEnabled) {\n    return agreement;\n  }\n\n  // Refresh metadata immediately\n  try {\n    await this.controlConnection.handleSchemaChange(event, true);\n  } catch (err) {\n    this.log('warning', 'There was an error while handling schema change', err);\n  }\n\n  return agreement;\n};\n\n/**\n * Connects and handles the execution of prepared and simple statements.\n * @param {string} query\n * @param {Array} params\n * @param {ExecutionOptions} execOptions\n * @returns {Promise<ResultSet>}\n * @private\n */\nClient.prototype._execute = async function (query, params, execOptions) {\n  const version = this.controlConnection.protocolVersion;\n\n  if (!execOptions.isPrepared() && params && !Array.isArray(params) &&\n    !types.protocolVersion.supportsNamedParameters(version)) {\n    // Only Cassandra 2.1 and above supports named parameters\n    throw new errors.ArgumentError('Named parameters for simple statements are not supported, use prepare flag');\n  }\n\n  let request;\n\n  if (!this.connected) {\n    // Micro optimization to avoid an async execution for a simple check\n    await this._connect();\n  }\n\n  if (!execOptions.isPrepared()) {\n    request = await this._createQueryRequest(query, execOptions, params);\n  } else {\n    const lbp = execOptions.getLoadBalancingPolicy();\n\n    // Use keyspace from query options if protocol supports per-query keyspace, otherwise use connection keyspace.\n    const queryKeyspace = types.protocolVersion.supportsKeyspaceInRequest(version) &&\n      execOptions.getKeyspace() || this.keyspace;\n\n    const { queryId, meta } = await PrepareHandler.getPrepared(this, lbp, query, queryKeyspace);\n    request = await this._createExecuteRequest(query, queryId, execOptions, params, meta);\n  }\n\n  return await RequestHandler.send(request, execOptions, this);\n};\n\n/**\n * Sets the listeners for the nodes.\n * @private\n */\nClient.prototype._setHostListeners = function () {\n  function getHostUpListener(emitter, h) {\n    return () => emitter.emit('hostUp', h);\n  }\n\n  function getHostDownListener(emitter, h) {\n    return () => emitter.emit('hostDown', h);\n  }\n\n  const self = this;\n\n  // Add status listeners when new nodes are added and emit hostAdd\n  this.hosts.on('add', function hostAddedListener(h) {\n    h.on('up', getHostUpListener(self, h));\n    h.on('down', getHostDownListener(self, h));\n    self.emit('hostAdd', h);\n  });\n\n  // Remove all listeners and emit hostRemove\n  this.hosts.on('remove', function hostRemovedListener(h) {\n    h.removeAllListeners();\n    self.emit('hostRemove', h);\n  });\n\n  // Add status listeners for existing hosts\n  this.hosts.forEach(function (h) {\n    h.on('up', getHostUpListener(self, h));\n    h.on('down', getHostDownListener(self, h));\n  });\n};\n\n/**\n * Sets the distance to each host and when warmup is true, creates all connections to local hosts.\n * @returns {Promise}\n * @private\n */\nClient.prototype._warmup = function () {\n  const hosts = this.hosts.values();\n\n  return promiseUtils.times(hosts.length, warmupLimit, async (index) => {\n    const h = hosts[index];\n    const distance = this.profileManager.getDistance(h);\n\n    if (distance === types.distance.ignored) {\n      return;\n    }\n\n    if (this.options.pooling.warmup && distance === types.distance.local) {\n      try {\n        await h.warmupPool(this.keyspace);\n      } catch (err) {\n        // An error while trying to create a connection to one of the hosts.\n        // Warn the user and move on.\n        this.log('warning', `Connection pool to host ${h.address} could not be created: ${err}`, err);\n      }\n    } else {\n      h.initializePool();\n    }\n  });\n};\n\n/**\n * @returns {Encoder}\n * @private\n */\nClient.prototype._getEncoder = function () {\n  const encoder = this.controlConnection.getEncoder();\n  if (!encoder) {\n    throw new errors.DriverInternalError('Encoder is not defined');\n  }\n  return encoder;\n};\n\n/**\n * Returns a BatchRequest instance and fills the routing key information in the provided options.\n * @private\n */\nClient.prototype._createBatchRequest = async function (queryItems, info) {\n  const firstQuery = queryItems[0];\n  if (!firstQuery.meta) {\n    return new requests.BatchRequest(queryItems, info);\n  }\n\n  await this._setRoutingInfo(info, firstQuery.params, firstQuery.meta);\n  return new requests.BatchRequest(queryItems, info);\n};\n\n/**\n * Returns an ExecuteRequest instance and fills the routing key information in the provided options.\n * @private\n */\nClient.prototype._createExecuteRequest = async function(query, queryId, info, params, meta) {\n  params = utils.adaptNamedParamsPrepared(params, meta.columns);\n  await this._setRoutingInfo(info, params, meta);\n  return new requests.ExecuteRequest(query, queryId, params, info, meta);\n};\n\n/**\n * Returns a QueryRequest instance and fills the routing key information in the provided options.\n * @private\n */\nClient.prototype._createQueryRequest = async function (query, execOptions, params) {\n  await this.metadata.adaptUserHints(this.keyspace, execOptions.getHints());\n  const paramsInfo = utils.adaptNamedParamsWithHints(params, execOptions);\n  this._getEncoder().setRoutingKeyFromUser(paramsInfo.params, execOptions, paramsInfo.keyIndexes);\n\n  return new requests.QueryRequest(query, paramsInfo.params, execOptions, paramsInfo.namedParameters);\n};\n\n/**\n * Sets the routing key based on the parameter values or the provided routing key components.\n * @param {ExecutionOptions} execOptions\n * @param {Array} params\n * @param meta\n * @private\n */\nClient.prototype._setRoutingInfo = async function (execOptions, params, meta) {\n  const encoder = this._getEncoder();\n\n  if (!execOptions.getKeyspace() && meta.keyspace) {\n    execOptions.setKeyspace(meta.keyspace);\n  }\n  if (execOptions.getRoutingKey()) {\n    // Routing information provided by the user\n    return encoder.setRoutingKeyFromUser(params, execOptions);\n  }\n  if (Array.isArray(meta.partitionKeys)) {\n    // The partition keys are provided as part of the metadata for modern protocol versions\n    execOptions.setRoutingIndexes(meta.partitionKeys);\n    return encoder.setRoutingKeyFromMeta(meta, params, execOptions);\n  }\n\n  // Older versions of the protocol (v3 and below) don't provide routing information\n  try {\n    const tableInfo = await this.metadata.getTable(meta.keyspace, meta.table);\n\n    if (!tableInfo) {\n      // The schema data is not there, maybe it is being recreated, avoid setting the routing information\n      return;\n    }\n\n    execOptions.setRoutingIndexes(tableInfo.partitionKeys.map(c => meta.columnsByName[c.name]));\n    // Skip parsing metadata next time\n    meta.partitionKeys = execOptions.getRoutingIndexes();\n    encoder.setRoutingKeyFromMeta(meta, params, execOptions);\n  } catch (err) {\n    this.log('warning', util.format('Table %s.%s metadata could not be retrieved', meta.keyspace, meta.table));\n  }\n};\n\n/**\n * Callback used by execution methods.\n * @callback ResultCallback\n * @param {Error} err Error occurred in the execution of the query.\n * @param {ResultSet} [result] Result of the execution of the query.\n */\n\nmodule.exports = Client;\n", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst EventEmitter = require('events');\n\n/**\n * Represents a tree node where the key is composed by 1 or more strings.\n * @ignore\n */\nclass Node extends EventEmitter {\n  /**\n   * Creates a new instance of {@link Node}.\n   * @param {Array<String>} key\n   * @param {Object} value\n   * @param {Array} [edges]\n   */\n  constructor(key, value, edges) {\n    super();\n    this.key = key;\n    this.value = value;\n    this.edges = edges || [];\n  }\n}\n\n/**\n * A radix tree where each node contains a key, a value and edges.\n * @ignore\n */\nclass Tree extends Node {\n  constructor() {\n    super([], null);\n    this.length = 0;\n  }\n\n  /**\n   * Gets the existing item in the tree or creates a new one with the value provided by valueHandler\n   * @param {Iterator} keyIterator\n   * @param {Function} valueHandler\n   * @return {Object}\n   */\n  getOrCreate(keyIterator, valueHandler) {\n    if (typeof keyIterator.next !== 'function') {\n      keyIterator = keyIterator[Symbol.iterator]();\n    }\n    let node = this;\n    let isMatch = false;\n    let item = keyIterator.next();\n    while (true) {\n      let newBranch;\n      // Check node keys at position 1 and above\n      for (let i = 1; i < node.key.length; i++) {\n        if (item.done || node.key[i] !== item.value) {\n          // We should branch out\n          newBranch = this._createBranch(node, i, item.done, valueHandler);\n          break;\n        }\n        item = keyIterator.next();\n      }\n\n      if (item.done) {\n        isMatch = true;\n        break;\n      }\n\n      if (newBranch !== undefined) {\n        break;\n      }\n\n      const edges = node.edges;\n      let nextNode;\n      for (let i = 0; i < edges.length; i++) {\n        const e = edges[i];\n        if (e.key[0] === item.value) {\n          // its a match\n          nextNode = e;\n          item = keyIterator.next();\n          break;\n        }\n      }\n\n      if (nextNode === undefined) {\n        // Current node is the root for a new leaf\n        break;\n      }\n      else {\n        node = nextNode;\n      }\n    }\n\n    if (!isMatch) {\n      // Create using \"node\" as the root\n      const value = valueHandler();\n      node.edges.push(new Node(iteratorToArray(item.value, keyIterator), value));\n      this._onItemAdded();\n      return value;\n    }\n    if (node.value === null && node.edges.length > 0) {\n      node.value = valueHandler();\n    }\n    return node.value;\n  }\n\n  _createBranch(node, index, useNewValue, valueHandler) {\n    const newBranch = new Node(node.key.slice(index), node.value, node.edges);\n    node.key = node.key.slice(0, index);\n    node.edges = [ newBranch ];\n    if (useNewValue) {\n      // The previous node value has moved to a leaf\n      // The node containing the new leaf should use the new value\n      node.value = valueHandler();\n      this._onItemAdded();\n    }\n    else {\n      // Clear the value as it was copied in the branch\n      node.value = null;\n    }\n    return newBranch;\n  }\n\n  _onItemAdded() {\n    this.length++;\n    this.emit('add', this.length);\n  }\n}\n\nfunction iteratorToArray(value, iterator) {\n  const values = [ value ];\n  let item = iterator.next();\n  while (!item.done) {\n    values.push(item.value);\n    item = iterator.next();\n  }\n  return values;\n}\n\nmodule.exports = Tree;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst errors = require('../errors');\n\n/**\n * Represents a CQL query operator, like >=, IN, <, ...\n * @ignore\n */\nclass QueryOperator {\n  /**\n   * Creates a new instance of <code>QueryOperator</code>.\n   * @param {String} key\n   * @param value\n   * @param [hasChildValues]\n   * @param [isInOperator]\n   */\n  constructor(key, value, hasChildValues, isInOperator) {\n    /**\n     * The CQL key representing the operator\n     * @type {string}\n     */\n    this.key = key;\n\n    /**\n     * The value to be used as parameter.\n     */\n    this.value = value;\n\n    /**\n     * Determines whether a query operator can have child values or operators (AND, OR)\n     */\n    this.hasChildValues = hasChildValues;\n\n    /**\n     * Determines whether this instance represents CQL \"IN\" operator.\n     */\n    this.isInOperator = isInOperator;\n  }\n}\n\n/**\n * Represents a CQL assignment operation, like col = col + x.\n * @ignore\n */\nclass QueryAssignment {\n  constructor(sign, value, inverted) {\n    /**\n     * Gets the sign of the assignment operation.\n     */\n    this.sign = sign;\n\n    /**\n     * Gets the value to be assigned.\n     */\n    this.value = value;\n\n    /**\n     * Determines whether the assignment should be inverted (prepends), e.g: col = x + col\n     * @type {boolean}\n     */\n    this.inverted = !!inverted;\n  }\n}\n\n/**\n * Contains functions that represents operators in a query.\n * @alias module:mapping~q\n * @type {Object}\n * @property {function} in_ Represents the CQL operator \"IN\".\n * @property {function} gt Represents the CQL operator greater than \">\".\n * @property {function} gte Represents the CQL operator greater than or equals to \">=\" .\n * @property {function} lt Represents the CQL operator less than \"<\" .\n * @property {function} lte Represents the CQL operator less than or equals to \"<=\" .\n * @property {function} notEq Represents the CQL operator not equals to \"!=\" .\n * @property {function} and When applied to a property, it represents two CQL conditions on the same column separated\n * by the logical AND operator, e.g: \"col1 >= x col < y\"\n * @property {function} incr Represents the CQL increment assignment used for counters, e.g: \"col = col + x\"\n * @property {function} decr Represents the CQL decrement assignment used for counters, e.g: \"col = col - x\"\n * @property {function} append Represents the CQL append assignment used for collections, e.g: \"col = col + x\"\n * @property {function} prepend Represents the CQL prepend assignment used for lists, e.g: \"col = x + col\"\n * @property {function} remove Represents the CQL remove assignment used for collections, e.g: \"col = col - x\"\n */\nconst q = {\n  in_: function in_(arr) {\n    if (!Array.isArray(arr)) {\n      throw new errors.ArgumentError('IN operator supports only Array values');\n    }\n    return new QueryOperator('IN', arr, false, true);\n  },\n\n  gt: function gt(value) {\n    return new QueryOperator('>', value);\n  },\n\n  gte: function gte(value) {\n    return new QueryOperator('>=', value);\n  },\n\n  lt: function lt(value) {\n    return new QueryOperator('<', value);\n  },\n\n  lte: function lte(value) {\n    return new QueryOperator('<=', value);\n  },\n\n  notEq: function notEq(value) {\n    return new QueryOperator('!=', value);\n  },\n\n  and: function (condition1, condition2) {\n    return new QueryOperator('AND', [ condition1, condition2 ], true);\n  },\n\n  incr: function incr(value) {\n    return new QueryAssignment('+', value);\n  },\n\n  decr: function decr(value) {\n    return new QueryAssignment('-', value);\n  },\n\n  append: function append(value) {\n    return new QueryAssignment('+', value);\n  },\n\n  prepend: function prepend(value) {\n    return new QueryAssignment('+', value, true);\n  },\n\n  remove: function remove(value) {\n    return new QueryAssignment('-', value);\n  }\n};\n\nexports.q = q;\nexports.QueryAssignment = QueryAssignment;\nexports.QueryOperator = QueryOperator;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst qModule = require('./q');\nconst QueryOperator = qModule.QueryOperator;\nconst QueryAssignment = qModule.QueryAssignment;\n\n/**\n * Provides utility methods for obtaining a caching keys based on the specifics of the Mapper methods.\n * @ignore\n */\nclass Cache {\n  /**\n   * Gets an iterator of keys to uniquely identify a document shape for a select query.\n   * @param {Array<String>} docKeys\n   * @param {Object} doc\n   * @param {{fields, limit, orderBy}} docInfo\n   * @returns {Iterator}\n   */\n  static *getSelectKey(docKeys, doc, docInfo) {\n    yield* Cache._yieldKeyAndOperators(docKeys, doc);\n\n    yield* Cache._getSelectDocInfo(docInfo);\n  }\n  /**\n   * Gets an iterator of keys to uniquely identify a shape for a select all query.\n   * @param {{fields, limit, orderBy}} docInfo\n   * @returns {Iterator}\n   */\n  static *getSelectAllKey(docInfo) {\n    yield 'root';\n\n    yield* Cache._getSelectDocInfo(docInfo);\n  }\n\n  /**\n   * Gets the parts of the key for a select query related to the docInfo.\n   * @param {{fields, limit, orderBy}} docInfo\n   * @private\n   */\n  static *_getSelectDocInfo(docInfo) {\n    if (docInfo) {\n      if (docInfo.fields && docInfo.fields.length > 0) {\n        // Use a separator from properties\n        yield '|f|';\n        yield* docInfo.fields;\n      }\n\n      if (typeof docInfo.limit === 'number') {\n        yield '|l|';\n      }\n\n      if (docInfo.orderBy) {\n        yield '|o|';\n\n        // orderBy is uses property names as keys and 'asc'/'desc' as values\n        const keys = Object.keys(docInfo.orderBy);\n        for (let i = 0; i < keys.length; i++) {\n          const key = keys[i];\n          yield key;\n          yield docInfo.orderBy[key];\n        }\n      }\n    }\n  }\n\n  /**\n   * Gets an iterator of keys to uniquely identify a document shape for an insert query.\n   * @param {Array<String>} docKeys\n   * @param {{ifNotExists, ttl, fields}} docInfo\n   * @returns {Iterator}\n   */\n  static *getInsertKey(docKeys, docInfo) {\n    // No operator supported on INSERT values\n    yield* docKeys;\n\n    if (docInfo) {\n      if (docInfo.fields && docInfo.fields.length > 0) {\n        // Use a separator from properties\n        yield '|f|';\n        yield* docInfo.fields;\n      }\n\n      if (typeof docInfo.ttl === 'number') {\n        yield '|t|';\n      }\n\n      if (docInfo.ifNotExists) {\n        yield '|e|';\n      }\n    }\n  }\n\n  /**\n   * Gets an iterator of keys to uniquely identify a document shape for an UPDATE query.\n   * @param {Array<String>} docKeys\n   * @param {Object} doc\n   * @param {{ifExists, when, ttl, fields}} docInfo\n   */\n  static *getUpdateKey(docKeys, doc, docInfo) {\n    yield* Cache._yieldKeyAndAllQs(docKeys, doc);\n\n    if (docInfo) {\n      if (docInfo.fields && docInfo.fields.length > 0) {\n        // Use a separator from properties\n        yield '|f|';\n        yield* docInfo.fields;\n      }\n\n      if (typeof docInfo.ttl === 'number') {\n        yield '|t|';\n      }\n\n      if (docInfo.ifExists) {\n        yield '|e|';\n      }\n\n      if (docInfo.when) {\n        yield* Cache._yieldKeyAndOperators(Object.keys(docInfo.when), docInfo.when);\n      }\n    }\n  }\n\n  /**\n   * Gets an iterator of keys to uniquely identify a document shape for a DELETE query.\n   * @param {Array<String>} docKeys\n   * @param {Object} doc\n   * @param {{ifExists, when, fields, deleteOnlyColumns}} docInfo\n   * @returns {Iterator}\n   */\n  static *getRemoveKey(docKeys, doc, docInfo) {\n    yield* Cache._yieldKeyAndOperators(docKeys, doc);\n\n    if (docInfo) {\n      if (docInfo.fields && docInfo.fields.length > 0) {\n        // Use a separator from properties\n        yield '|f|';\n        yield* docInfo.fields;\n      }\n\n      if (docInfo.ifExists) {\n        yield '|e|';\n      }\n\n      if (docInfo.deleteOnlyColumns) {\n        yield '|dc|';\n      }\n\n      if (docInfo.when) {\n        yield* Cache._yieldKeyAndOperators(Object.keys(docInfo.when), docInfo.when);\n      }\n    }\n  }\n\n  static *_yieldKeyAndOperators(keys, obj) {\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      yield key;\n      yield* Cache._yieldOperators(obj[key]);\n    }\n  }\n\n  static *_yieldOperators(value) {\n    if (value !== null && value !== undefined && value instanceof QueryOperator) {\n      yield value.key;\n      if (value.hasChildValues) {\n        yield* Cache._yieldOperators(value.value[0]);\n        yield '|/|';\n        yield* Cache._yieldOperators(value.value[1]);\n      }\n    }\n  }\n\n  static *_yieldKeyAndAllQs(keys, obj) {\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      yield key;\n      const value = obj[key];\n      if (value !== null && value !== undefined) {\n        if (value instanceof QueryOperator) {\n          yield* Cache._yieldOperators(value);\n        }\n        else if (value instanceof QueryAssignment) {\n          yield value.sign;\n          yield value.inverted;\n        }\n      }\n    }\n  }\n}\n\nmodule.exports = Cache;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst Cache = require('./cache');\n\n/**\n * Represents a query or a set of queries used to perform a mutation in a batch.\n * @alias module:mapping~ModelBatchItem\n */\nclass ModelBatchItem {\n  /**\n   * @param {Object} doc\n   * @param {Object} docInfo\n   * @param {MappingHandler} handler\n   * @param {Tree} cache\n   */\n  constructor(doc, docInfo, handler, cache) {\n    this.doc = doc;\n    this.docInfo = docInfo;\n    this.handler = handler;\n    this.cache = cache;\n  }\n\n  /**\n   * @ignore\n   * @returns <Promise<Array>>\n   */\n  getQueries() {\n    const docKeys = Object.keys(this.doc);\n    const cacheItem = this.cache.getOrCreate(this.getCacheKey(docKeys), () => ({ queries: null }));\n\n    if (cacheItem.queries === null) {\n      cacheItem.queries = this.createQueries(docKeys);\n    }\n\n    return cacheItem.queries;\n  }\n\n  /**\n   * Gets the cache key for this item.\n   * @abstract\n   * @param {Array} docKeys\n   * @returns {Iterator}\n   */\n  getCacheKey(docKeys) {\n    throw new Error('getCacheKey must be implemented');\n  }\n\n  /**\n   * Gets the Promise to create the queries.\n   * @abstract\n   * @param {Array} docKeys\n   * @returns {Promise<Array>}\n   */\n  createQueries(docKeys) {\n    throw new Error('getCacheKey must be implemented');\n  }\n\n  /**\n   * Pushes the queries and parameters represented by this instance to the provided array.\n   * @internal\n   * @ignore\n   * @param {Array} arr\n   * @return {Promise<{isIdempotent, isCounter}>}\n   */\n  pushQueries(arr) {\n    let isIdempotent = true;\n    let isCounter;\n\n    return this.getQueries().then(queries => {\n      queries.forEach(q => {\n        // It's idempotent if all the queries contained are idempotent\n        isIdempotent = isIdempotent && q.isIdempotent;\n\n        // Either all queries are counter mutation or we let it fail at server level\n        isCounter = q.isCounter;\n\n        arr.push({ query: q.query, params: q.paramsGetter(this.doc, this.docInfo, this.getMappingInfo()) });\n      });\n\n      return { isIdempotent, isCounter };\n    });\n  }\n\n  /**\n   * Gets the mapping information for this batch item.\n   * @internal\n   * @ignore\n   */\n  getMappingInfo() {\n    return this.handler.info;\n  }\n}\n\n/**\n * Represents a single or a set of INSERT queries in a batch.\n * @ignore\n * @internal\n */\nclass InsertModelBatchItem extends ModelBatchItem {\n  /**\n   * @param {Object} doc\n   * @param {Object} docInfo\n   * @param {MappingHandler} handler\n   * @param {Tree} cache\n   */\n  constructor(doc, docInfo, handler, cache) {\n    super(doc, docInfo, handler, cache);\n  }\n\n  /** @override */\n  getCacheKey(docKeys) {\n    return Cache.getInsertKey(docKeys, this.docInfo);\n  }\n\n  /** @override */\n  createQueries(docKeys) {\n    return this.handler.createInsertQueries(docKeys, this.doc, this.docInfo);\n  }\n}\n\n/**\n * Represents a single or a set of UPDATE queries in a batch.\n * @ignore\n * @internal\n */\nclass UpdateModelBatchItem extends ModelBatchItem {\n  /**\n   * @param {Object} doc\n   * @param {Object} docInfo\n   * @param {MappingHandler} handler\n   * @param {Tree} cache\n   */\n  constructor(doc, docInfo, handler, cache) {\n    super(doc, docInfo, handler, cache);\n  }\n\n  /** @override */\n  getCacheKey(docKeys) {\n    return Cache.getUpdateKey(docKeys, this.doc, this.docInfo);\n  }\n\n  /** @override */\n  createQueries(docKeys) {\n    return this.handler.createUpdateQueries(docKeys, this.doc, this.docInfo);\n  }\n}\n\n/**\n * Represents a single or a set of DELETE queries in a batch.\n * @ignore\n * @internal\n */\nclass RemoveModelBatchItem extends ModelBatchItem {\n  /**\n   * @param {Object} doc\n   * @param {Object} docInfo\n   * @param {MappingHandler} handler\n   * @param {Tree} cache\n   */\n  constructor(doc, docInfo, handler, cache) {\n    super(doc, docInfo, handler, cache);\n  }\n\n  /** @override */\n  getCacheKey(docKeys) {\n    return Cache.getRemoveKey(docKeys, this.doc, this.docInfo);\n  }\n\n  /** @override */\n  createQueries(docKeys) {\n    return this.handler.createDeleteQueries(docKeys, this.doc, this.docInfo);\n  }\n}\n\nmodule.exports = { ModelBatchItem, InsertModelBatchItem, UpdateModelBatchItem, RemoveModelBatchItem };", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst Tree = require('./tree');\nconst moduleBatchItemModule = require('./model-batch-item');\nconst InsertModelBatchItem = moduleBatchItemModule.InsertModelBatchItem;\nconst UpdateModelBatchItem = moduleBatchItemModule.UpdateModelBatchItem;\nconst RemoveModelBatchItem = moduleBatchItemModule.RemoveModelBatchItem;\n\n/**\n * Provides utility methods to group multiple mutations on a single batch.\n * @alias module:mapping~ModelBatchMapper\n */\nclass ModelBatchMapper {\n  /**\n   * Creates a new instance of model batch mapper.\n   * <p>\n   *   An instance of this class is exposed as a singleton in the <code>batching</code> field of the\n   *   [ModelMapper]{@link module:mapping~ModelMapper}. Note that new instances should not be create with this\n   *   constructor.\n   * </p>\n   * @param {MappingHandler} handler\n   * @ignore\n   */\n  constructor(handler) {\n    this._handler = handler;\n    this._cache = {\n      insert: new Tree(),\n      update: new Tree(),\n      remove: new Tree()\n    };\n  }\n\n  /**\n   * Gets a [ModelBatchItem]{@link module:mapping~ModelBatchItem} containing the queries for the INSERT mutation to be\n   * used in a batch execution.\n   * @param {Object} doc An object containing the properties to insert.\n   * @param {Object} [docInfo] An object containing the additional document information.\n   * @param {Array<String>} [docInfo.fields] An Array containing the name of the properties that will be used in the\n   * INSERT cql statements generated. If specified, it must include the columns to insert and the primary keys.\n   * @param {Number} [docInfo.ttl] Specifies an optional Time To Live (in seconds) for the inserted values.\n   * @param {Boolean} [docInfo.ifNotExists] When set, it only inserts if the row does not exist prior to the insertion.\n   * <p>Please note that using IF NOT EXISTS will incur a non negligible performance cost so this should be used\n   * sparingly.</p>\n   * @returns {ModelBatchItem} A [ModelBatchItem]{@link module:mapping~ModelBatchItem} instance representing a query\n   * or a set of queries to be included in a batch.\n   */\n  insert(doc, docInfo) {\n    return new InsertModelBatchItem(doc, docInfo, this._handler, this._cache.insert);\n  }\n\n  /**\n   * Gets a [ModelBatchItem]{@link module:mapping~ModelBatchItem} containing the queries for the UPDATE mutation to be\n   * used in a batch execution.\n   * @param {Object} doc An object containing the properties to update.\n   * @param {Object} [docInfo] An object containing the additional document information.\n   * @param {Array<String>} [docInfo.fields] An Array containing the name of the properties that will be used in the\n   * UPDATE cql statements generated. If specified, it must include the columns to update and the primary keys.\n   * @param {Number} [docInfo.ttl] Specifies an optional Time To Live (in seconds) for the inserted values.\n   * @param {Boolean} [docInfo.ifExists] When set, it only updates if the row already exists on the server.\n   * <p>\n   *   Please note that using IF conditions will incur a non negligible performance cost on the server-side so this\n   *   should be used sparingly.\n   * </p>\n   * @param {Object} [docInfo.when] A document that act as the condition that has to be met for the UPDATE to occur.\n   * Use this property only in the case you want to specify a conditional clause for lightweight transactions (CAS).\n   * <p>\n   *   Please note that using IF conditions will incur a non negligible performance cost on the server-side so this\n   *   should be used sparingly.\n   * </p>\n   * @returns {ModelBatchItem} A [ModelBatchItem]{@link module:mapping~ModelBatchItem} instance representing a query\n   * or a set of queries to be included in a batch.\n   */\n  update(doc, docInfo) {\n    return new UpdateModelBatchItem(doc, docInfo, this._handler, this._cache.update);\n  }\n\n  /**\n   * Gets a [ModelBatchItem]{@link module:mapping~ModelBatchItem}  containing the queries for the DELETE mutation to be\n   * used in a batch execution.\n   * @param {Object} doc A document containing the primary keys values of the document to delete.\n   * @param {Object} [docInfo] An object containing the additional doc information.\n   * @param {Object} [docInfo.when] A document that act as the condition that has to be met for the DELETE to occur.\n   * Use this property only in the case you want to specify a conditional clause for lightweight transactions (CAS).\n   * When the CQL query is generated, this would be used to generate the `IF` clause.\n   * <p>\n   *   Please note that using IF conditions will incur a non negligible performance cost on the server-side so this\n   *   should be used sparingly.\n   * </p>\n   * @param {Boolean} [docInfo.ifExists] When set, it only issues the DELETE command if the row already exists on the\n   * server.\n   * <p>\n   *   Please note that using IF conditions will incur a non negligible performance cost on the server-side so this\n   *   should be used sparingly.\n   * </p>\n   * @param {Array<String>} [docInfo.fields] An Array containing the name of the properties that will be used in the\n   * DELETE cql statement generated. If specified, it must include the columns to delete and the primary keys.\n   * @param {Boolean} [docInfo.deleteOnlyColumns] Determines that, when more document properties are specified\n   * besides the primary keys, the generated DELETE statement should be used to delete some column values but leave\n   * the row. When this is enabled and more properties are specified, a DELETE statement will have the following form:\n   * \"DELETE col1, col2 FROM table1 WHERE pk1 = ? AND pk2 = ?\"\n   * @returns {ModelBatchItem} A [ModelBatchItem]{@link module:mapping~ModelBatchItem} instance representing a query\n   * or a set of queries to be included in a batch.\n   */\n  remove(doc, docInfo) {\n    return new RemoveModelBatchItem(doc, docInfo, this._handler, this._cache.update);\n  }\n}\n\nmodule.exports = ModelBatchMapper;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst ModelBatchMapper = require('./model-batch-mapper');\n\n/**\n * Represents an object mapper for a specific model.\n * @alias module:mapping~ModelMapper\n */\nclass ModelMapper {\n  constructor(name, handler) {\n    /**\n     * Gets the name identifier of the model.\n     * @type {String}\n     */\n    this.name = name;\n    this._handler = handler;\n    /**\n     * Gets a [ModelBatchMapper]{@link module:mapping~ModelBatchMapper} instance containing utility methods to group\n     * multiple doc mutations in a single batch.\n     * @type {ModelBatchMapper}\n     */\n    this.batching = new ModelBatchMapper(this._handler);\n  }\n\n  /**\n   * Gets the first document matching the provided filter or null when not found.\n   * <p>\n   *   Note that all partition and clustering keys must be defined in order to use this method.\n   * </p>\n   * @param {Object} doc The object containing the properties that map to the primary keys.\n   * @param {Object} [docInfo] An object containing the additional document information.\n   * @param {Array<String>} [docInfo.fields] An Array containing the name of the properties that will be used in the\n   * SELECT cql statement generated, in order to restrict the amount of columns retrieved.\n   * @param {Object|String} [executionOptions] An object containing the options to be used for the requests\n   * execution or a string representing the name of the execution profile.\n   * @param {String} [executionOptions.executionProfile] The name of the execution profile.\n   * @return {Promise<Object>}\n   * @example <caption>Get a video by id</caption>\n   * videoMapper.get({ id })\n   * @example <caption>Get a video by id, selecting specific columns</caption>\n   * videoMapper.get({ id }, fields: ['name', 'description'])\n   */\n  get(doc, docInfo, executionOptions) {\n    if (executionOptions === undefined && typeof docInfo === 'string') {\n      executionOptions = docInfo;\n      docInfo = null;\n    }\n\n    return this._handler.getSelectExecutor(doc, docInfo, true)\n      .then(executor => executor(doc, docInfo, executionOptions))\n      .then(result => result.first());\n  }\n\n  /**\n   * Executes a SELECT query based on the filter and returns the result as an iterable of documents.\n   * @param {Object} doc An object containing the properties that map to the primary keys to filter.\n   * @param {Object} [docInfo] An object containing the additional document information.\n   * @param {Array<String>} [docInfo.fields] An Array containing the name of the properties that will be used in the\n   * SELECT cql statement generated, in order to restrict the amount of columns retrieved.\n   * @param {Object<String, String>} [docInfo.orderBy] An associative array containing the column names as key and\n   * the order string (asc or desc) as value used to set the order of the results server-side.\n   * @param {Number} [docInfo.limit] Restricts the result of the query to a maximum number of rows on the\n   * server.\n   * @param {Object|String} [executionOptions] An object containing the options to be used for the requests\n   * execution or a string representing the name of the execution profile.\n   * @param {String} [executionOptions.executionProfile] The name of the execution profile.\n   * @param {Number} [executionOptions.fetchSize] The amount of rows to retrieve per page.\n   * @param {Number} [executionOptions.pageState] A Buffer instance or a string token representing the paging state.\n   * <p>When provided, the query will be executed starting from a given paging state.</p>\n   * @return {Promise<Result>} A Promise that resolves to a [Result]{@link module:mapping~Result} instance.\n   * @example <caption>Get user's videos</caption>\n   * const result = await videoMapper.find({ userId });\n   * for (let video of result) {\n   *   console.log(video.name);\n   * }\n   * @example <caption>Get user's videos from a certain date</caption>\n   * videoMapper.find({ userId, addedDate: q.gte(date)});\n   * @example <caption>Get user's videos in reverse order</caption>\n   * videoMapper.find({ userId }, { orderBy: { addedDate: 'desc' }});\n   */\n  find(doc, docInfo, executionOptions) {\n    if (executionOptions === undefined && typeof docInfo === 'string') {\n      executionOptions = docInfo;\n      docInfo = null;\n    }\n\n    return this._handler.getSelectExecutor(doc, docInfo, false)\n      .then(executor => executor(doc, docInfo, executionOptions));\n  }\n\n  /**\n   * Executes a SELECT query without a filter and returns the result as an iterable of documents.\n   * <p>\n   *   This is only recommended to be used for tables with a limited amount of results. Otherwise, breaking up the\n   *   token ranges on the client side should be used.\n   * </p>\n   * @param {Object} [docInfo] An object containing the additional document information.\n   * @param {Array<String>} [docInfo.fields] An Array containing the name of the properties that will be used in the\n   * SELECT cql statement generated, in order to restrict the amount of columns retrieved.\n   * @param {Object<String, String>} [docInfo.orderBy] An associative array containing the column names as key and\n   * the order string (asc or desc) as value used to set the order of the results server-side.\n   * @param {Number} [docInfo.limit] Restricts the result of the query to a maximum number of rows on the\n   * server.\n   * @param {Object|String} [executionOptions] An object containing the options to be used for the requests\n   * execution or a string representing the name of the execution profile.\n   * @param {String} [executionOptions.executionProfile] The name of the execution profile.\n   * @param {Number} [executionOptions.fetchSize] The mount of rows to retrieve per page.\n   * @param {Number} [executionOptions.pageState] A Buffer instance or a string token representing the paging state.\n   * <p>When provided, the query will be executed starting from a given paging state.</p>\n   * @return {Promise<Result>} A Promise that resolves to a [Result]{@link module:mapping~Result} instance.\n   */\n  findAll(docInfo, executionOptions) {\n    if (executionOptions === undefined && typeof docInfo === 'string') {\n      executionOptions = docInfo;\n      docInfo = null;\n    }\n\n    const executor = this._handler.getSelectAllExecutor(docInfo);\n    return executor(docInfo, executionOptions);\n  }\n\n  /**\n   * Inserts a document.\n   * <p>\n   *   When the model is mapped to multiple tables, it will insert a row in each table when all the primary keys\n   *   are specified.\n   * </p>\n   * @param {Object} doc An object containing the properties to insert.\n   * @param {Object} [docInfo] An object containing the additional document information.\n   * @param {Array<String>} [docInfo.fields] An Array containing the name of the properties that will be used in the\n   * INSERT cql statements generated. If specified, it must include the columns to insert and the primary keys.\n   * @param {Number} [docInfo.ttl] Specifies an optional Time To Live (in seconds) for the inserted values.\n   * @param {Boolean} [docInfo.ifNotExists] When set, it only inserts if the row does not exist prior to the insertion.\n   * <p>Please note that using IF NOT EXISTS will incur a non negligible performance cost so this should be used\n   * sparingly.</p>\n   * @param {Object|String} [executionOptions] An object containing the options to be used for the requests\n   * execution or a string representing the name of the execution profile.\n   * @param {String} [executionOptions.executionProfile] The name of the execution profile.\n   * @param {Boolean} [executionOptions.isIdempotent] Defines whether the query can be applied multiple times without\n   * changing the result beyond the initial application.\n   * <p>\n   *   By default all generated INSERT statements are considered idempotent, except in the case of lightweight\n   *   transactions. Lightweight transactions at client level with transparent retries can\n   *   break linearizability. If that is not an issue for your application, you can manually set this field to true.\n   * </p>\n   * @param {Number|Long} [executionOptions.timestamp] The default timestamp for the query in microseconds from the\n   * unix epoch (00:00:00, January 1st, 1970).\n   * <p>When provided, this will replace the client generated and the server side assigned timestamp.</p>\n   * @return {Promise<Result>} A Promise that resolves to a [Result]{@link module:mapping~Result} instance.\n   * @example <caption>Insert a video</caption>\n   * videoMapper.insert({ id, name });\n   */\n  insert(doc, docInfo, executionOptions) {\n    if (executionOptions === undefined && typeof docInfo === 'string') {\n      executionOptions = docInfo;\n      docInfo = null;\n    }\n\n    return this._handler.getInsertExecutor(doc, docInfo)\n      .then(executor => executor(doc, docInfo, executionOptions));\n  }\n\n  /**\n   * Updates a document.\n   * <p>\n   *   When the model is mapped to multiple tables, it will update a row in each table when all the primary keys\n   *   are specified.\n   * </p>\n   * @param {Object} doc An object containing the properties to update.\n   * @param {Object} [docInfo] An object containing the additional document information.\n   * @param {Array<String>} [docInfo.fields] An Array containing the name of the properties that will be used in the\n   * UPDATE cql statements generated. If specified, it must include the columns to update and the primary keys.\n   * @param {Number} [docInfo.ttl] Specifies an optional Time To Live (in seconds) for the inserted values.\n   * @param {Boolean} [docInfo.ifExists] When set, it only updates if the row already exists on the server.\n   * <p>\n   *   Please note that using IF conditions will incur a non negligible performance cost on the server-side so this\n   *   should be used sparingly.\n   * </p>\n   * @param {Object} [docInfo.when] A document that act as the condition that has to be met for the UPDATE to occur.\n   * Use this property only in the case you want to specify a conditional clause for lightweight transactions (CAS).\n   * <p>\n   *   Please note that using IF conditions will incur a non negligible performance cost on the server-side so this\n   *   should be used sparingly.\n   * </p>\n   * @param {Object|String} [executionOptions] An object containing the options to be used for the requests\n   * execution or a string representing the name of the execution profile.\n   * @param {String} [executionOptions.executionProfile] The name of the execution profile.\n   * @param {Boolean} [executionOptions.isIdempotent] Defines whether the query can be applied multiple times without\n   * changing the result beyond the initial application.\n   * <p>\n   *   The mapper uses the generated queries to determine the default value. When an UPDATE is generated with a\n   *   counter column or appending/prepending to a list column, the execution is marked as not idempotent.\n   * </p>\n   * <p>\n   *   Additionally, the mapper uses the safest approach for queries with lightweight transactions (Compare and\n   *   Set) by considering them as non-idempotent. Lightweight transactions at client level with transparent retries can\n   *   break linearizability. If that is not an issue for your application, you can manually set this field to true.\n   * </p>\n   * @param {Number|Long} [executionOptions.timestamp] The default timestamp for the query in microseconds from the\n   * unix epoch (00:00:00, January 1st, 1970).\n   * <p>When provided, this will replace the client generated and the server side assigned timestamp.</p>\n   * @return {Promise<Result>} A Promise that resolves to a [Result]{@link module:mapping~Result} instance.\n   * @example <caption>Update the name of a video</caption>\n   * videoMapper.update({ id, name });\n   */\n  update(doc, docInfo, executionOptions) {\n    if (executionOptions === undefined && typeof docInfo === 'string') {\n      executionOptions = docInfo;\n      docInfo = null;\n    }\n\n    return this._handler.getUpdateExecutor(doc, docInfo)\n      .then(executor => executor(doc, docInfo, executionOptions));\n  }\n\n  /**\n   * Deletes a document.\n   * @param {Object} doc A document containing the primary keys values of the document to delete.\n   * @param {Object} [docInfo] An object containing the additional doc information.\n   * @param {Object} [docInfo.when] A document that act as the condition that has to be met for the DELETE to occur.\n   * Use this property only in the case you want to specify a conditional clause for lightweight transactions (CAS).\n   * When the CQL query is generated, this would be used to generate the `IF` clause.\n   * <p>\n   *   Please note that using IF conditions will incur a non negligible performance cost on the server-side so this\n   *   should be used sparingly.\n   * </p>\n   * @param {Boolean} [docInfo.ifExists] When set, it only issues the DELETE command if the row already exists on the\n   * server.\n   * <p>\n   *   Please note that using IF conditions will incur a non negligible performance cost on the server-side so this\n   *   should be used sparingly.\n   * </p>\n   * @param {Array<String>} [docInfo.fields] An Array containing the name of the properties that will be used in the\n   * DELETE cql statement generated. If specified, it must include the columns to delete and the primary keys.\n   * @param {Boolean} [docInfo.deleteOnlyColumns] Determines that, when more document properties are specified\n   * besides the primary keys, the generated DELETE statement should be used to delete some column values but leave\n   * the row. When this is enabled and more properties are specified, a DELETE statement will have the following form:\n   * \"DELETE col1, col2 FROM table1 WHERE pk1 = ? AND pk2 = ?\"\n   * @param {Object|String} [executionOptions] An object containing the options to be used for the requests\n   * execution or a string representing the name of the execution profile.\n   * @param {String} [executionOptions.executionProfile] The name of the execution profile.\n   * @param {Boolean} [executionOptions.isIdempotent] Defines whether the query can be applied multiple times without\n   * changing the result beyond the initial application.\n   * <p>\n   *   By default all generated DELETE statements are considered idempotent, except in the case of lightweight\n   *   transactions. Lightweight transactions at client level with transparent retries can\n   *   break linearizability. If that is not an issue for your application, you can manually set this field to true.\n   * </p>\n   * @param {Number|Long} [executionOptions.timestamp] The default timestamp for the query in microseconds from the\n   * unix epoch (00:00:00, January 1st, 1970).\n   * <p>When provided, this will replace the client generated and the server side assigned timestamp.</p>\n   * @return {Promise<Result>} A Promise that resolves to a [Result]{@link module:mapping~Result} instance.\n   * @example <caption>Delete a video</caption>\n   * videoMapper.remove({ id });\n   */\n  remove(doc, docInfo, executionOptions) {\n    if (executionOptions === undefined && typeof docInfo === 'string') {\n      executionOptions = docInfo;\n      docInfo = null;\n    }\n\n    return this._handler.getDeleteExecutor(doc, docInfo)\n      .then(executor => executor(doc, docInfo, executionOptions));\n  }\n\n  /**\n   * Uses the provided query and param getter function to execute a query and map the results.\n   * Gets a function that takes the document, executes the query and returns the mapped results.\n   * @param {String} query The query to execute.\n   * @param {Function} paramsHandler The function to execute to extract the parameters of a document.\n   * @param {Object|String} [executionOptions] When provided, the options for all executions generated with this\n   * method will use the provided options and it will not consider the executionOptions per call.\n   * @param {String} [executionOptions.executionProfile] The name of the execution profile.\n   * @param {Number} [executionOptions.fetchSize] Amount of rows to retrieve per page.\n   * @param {Boolean} [executionOptions.isIdempotent] Defines whether the query can be applied multiple times\n   * without changing the result beyond the initial application.\n   * @param {Number} [executionOptions.pageState] Buffer or string token representing the paging state.\n   * <p>When provided, the query will be executed starting from a given paging state.</p>\n   * @param {Number|Long} [executionOptions.timestamp] The default timestamp for the query in microseconds from the\n   * unix epoch (00:00:00, January 1st, 1970).\n   * <p>When provided, this will replace the client generated and the server side assigned timestamp.</p>\n   * @return {Function} Returns a function that takes the document and execution options as parameters and returns a\n   * Promise the resolves to a [Result]{@link module:mapping~Result} instance.\n   */\n  mapWithQuery(query, paramsHandler, executionOptions) {\n    return this._handler.getExecutorFromQuery(query, paramsHandler, executionOptions);\n  }\n}\n\nmodule.exports = ModelMapper;", "module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"vm\" has been externalized for browser compatibility. Cannot access \"vm.${key}\" in client code. See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst vm = require('vm');\nconst qModule = require('./q');\nconst QueryOperator = qModule.QueryOperator;\nconst QueryAssignment = qModule.QueryAssignment;\nconst types = require('../types');\nconst dataTypes = types.dataTypes;\n\nconst vmFileName = 'gen-param-getter.js';\n\n/**\n * Provides methods to generate a query and parameter handlers.\n * @ignore\n */\nclass QueryGenerator {\n  /**\n   * Gets the SELECT query given the doc.\n   * @param {String} tableName\n   * @param {String} keyspace\n   * @param {Array} propertiesInfo\n   * @param {Array} fieldsInfo\n   * @param {Array} orderByColumns\n   * @param {Number|undefined} limit\n   * @return {string}\n   */\n  static getSelect(tableName, keyspace, propertiesInfo, fieldsInfo, orderByColumns, limit) {\n    let query = 'SELECT ';\n    query += fieldsInfo.length > 0 ? fieldsInfo.map(p => `\"${p.columnName}\"`).join(', ') : '*';\n    query += ` FROM ${keyspace}.${tableName}`;\n\n    if (propertiesInfo.length > 0) {\n      query += ' WHERE ';\n      query += QueryGenerator._getConditionWithOperators(propertiesInfo);\n    }\n\n    if (orderByColumns.length > 0) {\n      query += ' ORDER BY ';\n      query += orderByColumns.map(order => `\"${order[0]}\" ${order[1]}`).join(', ');\n    }\n\n    if (typeof limit === 'number') {\n      query += ' LIMIT ?';\n    }\n\n    return query;\n  }\n\n  static selectParamsGetter(propertiesInfo, limit) {\n    let scriptText = '(function getParametersSelect(doc, docInfo, mappingInfo) {\\n';\n    scriptText += '  return [';\n\n    scriptText += QueryGenerator._valueGetterExpression(propertiesInfo);\n\n    if (typeof limit === 'number') {\n      if (propertiesInfo.length > 0) {\n        scriptText += ', ';\n      }\n      scriptText += `docInfo['limit']`;\n    }\n\n    // Finish return statement\n    scriptText += '];\\n})';\n\n    const script = new vm.Script(scriptText, { filename: vmFileName });\n    return script.runInThisContext();\n  }\n\n  /**\n   * Gets the INSERT query and function to obtain the parameters, given the doc.\n   * @param {TableMetadata} table\n   * @param {String} keyspace\n   * @param {Array} propertiesInfo\n   * @param {Object} docInfo\n   * @param {Boolean|undefined} ifNotExists\n   * @return {{query: String, paramsGetter: Function, isIdempotent: Boolean}}\n   */\n  static getInsert(table, keyspace, propertiesInfo, docInfo, ifNotExists) {\n    const ttl = docInfo && docInfo.ttl;\n\n    // Not all columns are contained in the table\n    const filteredPropertiesInfo = propertiesInfo\n      .filter(pInfo => table.columnsByName[pInfo.columnName] !== undefined);\n\n    return ({\n      query: QueryGenerator._getInsertQuery(table.name, keyspace, filteredPropertiesInfo, ifNotExists, ttl),\n      paramsGetter: QueryGenerator._insertParamsGetter(filteredPropertiesInfo, docInfo),\n      isIdempotent: !ifNotExists\n    });\n  }\n\n  /**\n   * Gets the query for an insert statement.\n   * @param {String} tableName\n   * @param {String} keyspace\n   * @param {Array} propertiesInfo\n   * @param {Boolean} ifNotExists\n   * @param {Number|undefined} ttl\n   * @return {String}\n   */\n  static _getInsertQuery(tableName, keyspace, propertiesInfo, ifNotExists, ttl) {\n    let query = `INSERT INTO ${keyspace}.${tableName} (`;\n    query += propertiesInfo.map(pInfo => `\"${pInfo.columnName}\"`).join(', ');\n    query += ') VALUES (';\n    query += propertiesInfo.map(() => '?').join(', ');\n    query += ')';\n\n    if (ifNotExists === true) {\n      query += ' IF NOT EXISTS';\n    }\n\n    if (typeof ttl === 'number') {\n      query += ' USING TTL ?';\n    }\n    return query;\n  }\n\n  static _insertParamsGetter(propertiesInfo, docInfo) {\n    let scriptText = '(function getParametersInsert(doc, docInfo, mappingInfo) {\\n';\n    scriptText += '  return [';\n\n    scriptText += QueryGenerator._valueGetterExpression(propertiesInfo);\n\n    if (docInfo && typeof docInfo.ttl === 'number') {\n      scriptText += `, docInfo['ttl']`;\n    }\n\n    // Finish return statement\n    scriptText += '];\\n})';\n\n    const script = new vm.Script(scriptText, { filename: vmFileName });\n    return script.runInThisContext();\n  }\n\n  /**\n   * Gets the UPDATE query and function to obtain the parameters, given the doc.\n   * @param {TableMetadata} table\n   * @param {String} keyspace\n   * @param {Array} propertiesInfo\n   * @param {Object} docInfo\n   * @param {Array} when\n   * @param {Boolean|undefined} ifExists\n   * @return {{query: String, paramsGetter: Function, isIdempotent: Boolean, isCounter}}\n   */\n  static getUpdate(table, keyspace, propertiesInfo, docInfo, when, ifExists) {\n    const ttl = docInfo && docInfo.ttl;\n    const primaryKeys = new Set(table.partitionKeys.concat(table.clusteringKeys).map(c => c.name));\n    let isIdempotent = true;\n    let isCounter = false;\n\n    // Not all columns are contained in the table\n    const filteredPropertiesInfo = propertiesInfo.filter(pInfo => {\n      const column = table.columnsByName[pInfo.columnName];\n      if (column === undefined) {\n        return false;\n      }\n\n      if (column.type.code === dataTypes.list && pInfo.value instanceof QueryAssignment) {\n        // Its not idempotent when list append/prepend\n        isIdempotent = false;\n      } else if (column.type.code === dataTypes.counter) {\n        // Any update on a counter table is not idempotent\n        isIdempotent = false;\n        isCounter = true;\n      }\n\n      return true;\n    });\n\n    return {\n      query: QueryGenerator._getUpdateQuery(\n        table.name, keyspace, primaryKeys, filteredPropertiesInfo, when, ifExists, ttl),\n      isIdempotent: isIdempotent && when.length === 0 && !ifExists,\n      paramsGetter: QueryGenerator._updateParamsGetter(primaryKeys, filteredPropertiesInfo, when, ttl),\n      isCounter\n    };\n  }\n\n  /**\n   * Gets the query for an UPDATE statement.\n   * @param {String} tableName\n   * @param {String} keyspace\n   * @param {Set} primaryKeys\n   * @param {Array} propertiesInfo\n   * @param {Object} when\n   * @param {Boolean} ifExists\n   * @param {Number|undefined} ttl\n   */\n  static _getUpdateQuery(tableName, keyspace, primaryKeys, propertiesInfo, when, ifExists, ttl) {\n    let query = `UPDATE ${keyspace}.${tableName} `;\n\n    if (typeof ttl === 'number') {\n      query += 'USING TTL ? ';\n    }\n\n    query += 'SET ';\n\n    query += propertiesInfo\n      .filter(p => !primaryKeys.has(p.columnName))\n      .map(p => {\n        if (p.value instanceof QueryAssignment) {\n          if (p.value.inverted) {\n            // e.g: prepend \"col1 = ? + col1\"\n            return `\"${p.columnName}\" = ? ${p.value.sign} \"${p.columnName}\"`;\n          }\n          // e.g: increment \"col1 = col1 + ?\"\n          return `\"${p.columnName}\" = \"${p.columnName}\" ${p.value.sign} ?`;\n        }\n\n        return `\"${p.columnName}\" = ?`;\n      })\n      .join(', ');\n\n    query += ' WHERE ';\n    query += propertiesInfo.filter(p => primaryKeys.has(p.columnName)).map(p => `\"${p.columnName}\" = ?`).join(' AND ');\n\n    if (ifExists === true) {\n      query += ' IF EXISTS';\n    }\n    else if (when.length > 0) {\n      query += ' IF ' + QueryGenerator._getConditionWithOperators(when);\n    }\n\n    return query;\n  }\n\n  /**\n   * Returns a function to obtain the parameter values from a doc for an UPDATE statement.\n   * @param {Set} primaryKeys\n   * @param {Array} propertiesInfo\n   * @param {Array} when\n   * @param {Number|undefined} ttl\n   * @returns {Function}\n   */\n  static _updateParamsGetter(primaryKeys, propertiesInfo, when, ttl) {\n    let scriptText = '(function getParametersUpdate(doc, docInfo, mappingInfo) {\\n';\n    scriptText += '  return [';\n\n    if (typeof ttl === 'number') {\n      scriptText += `docInfo['ttl'], `;\n    }\n\n    // Assignment clause\n    scriptText += QueryGenerator._assignmentGetterExpression(propertiesInfo.filter(p => !primaryKeys.has(p.columnName)));\n    scriptText += ', ';\n\n    // Where clause\n    scriptText += QueryGenerator._valueGetterExpression(propertiesInfo.filter(p => primaryKeys.has(p.columnName)));\n\n    // Condition clause\n    if (when.length > 0) {\n      scriptText += ', ' + QueryGenerator._valueGetterExpression(when, 'docInfo.when');\n    }\n\n    // Finish return statement\n    scriptText += '];\\n})';\n\n    const script = new vm.Script(scriptText, { filename: vmFileName });\n    return script.runInThisContext();\n  }\n\n  /**\n   * Gets the DELETE query and function to obtain the parameters, given the doc.\n   * @param {TableMetadata} table\n   * @param {String} keyspace\n   * @param {Array} propertiesInfo\n   * @param {Object} docInfo\n   * @param {Array} when\n   * @param {Boolean|undefined} ifExists\n   * @return {{query: String, paramsGetter: Function, isIdempotent}}\n   */\n  static getDelete(table, keyspace, propertiesInfo, docInfo, when, ifExists) {\n    const deleteOnlyColumns = docInfo && docInfo.deleteOnlyColumns;\n    const primaryKeys = new Set(table.partitionKeys.concat(table.clusteringKeys).map(c => c.name));\n\n    const filteredPropertiesInfo = propertiesInfo\n      .filter(pInfo => table.columnsByName[pInfo.columnName] !== undefined);\n\n\n    return ({\n      query: QueryGenerator._getDeleteQuery(\n        table.name, keyspace, primaryKeys, filteredPropertiesInfo, when, ifExists, deleteOnlyColumns),\n      paramsGetter: QueryGenerator._deleteParamsGetter(primaryKeys, filteredPropertiesInfo, when),\n      isIdempotent: when.length === 0 && !ifExists\n    });\n  }\n\n  /**\n   * Gets the query for an UPDATE statement.\n   * @param {String} tableName\n   * @param {String} keyspace\n   * @param {Set} primaryKeys\n   * @param {Array} propertiesInfo\n   * @param {Array} when\n   * @param {Boolean} ifExists\n   * @param {Boolean} deleteOnlyColumns\n   * @private\n   * @return {String}\n   */\n  static _getDeleteQuery(tableName, keyspace, primaryKeys, propertiesInfo, when, ifExists, deleteOnlyColumns) {\n    let query = 'DELETE';\n\n    if (deleteOnlyColumns) {\n      const columnsToDelete = propertiesInfo.filter(p => !primaryKeys.has(p.columnName))\n        .map(p => `\"${p.columnName}\"`)\n        .join(', ');\n\n      if (columnsToDelete !== '') {\n        query += ' ' + columnsToDelete;\n      }\n    }\n\n    query += ` FROM ${keyspace}.${tableName} WHERE `;\n    query += propertiesInfo.filter(p => primaryKeys.has(p.columnName)).map(p => `\"${p.columnName}\" = ?`).join(' AND ');\n\n    if (ifExists === true) {\n      query += ' IF EXISTS';\n    }\n    else if (when.length > 0) {\n      query += ' IF ' + QueryGenerator._getConditionWithOperators(when);\n    }\n\n    return query;\n  }\n  /**\n   * Returns a function to obtain the parameter values from a doc for an UPDATE statement.\n   * @param {Set} primaryKeys\n   * @param {Array} propertiesInfo\n   * @param {Array} when\n   * @returns {Function}\n   */\n  static _deleteParamsGetter(primaryKeys, propertiesInfo, when) {\n    let scriptText = '(function getParametersDelete(doc, docInfo, mappingInfo) {\\n';\n    scriptText += '  return [';\n\n    // Where clause\n    scriptText += QueryGenerator._valueGetterExpression(propertiesInfo.filter(p => primaryKeys.has(p.columnName)));\n\n    // Condition clause\n    if (when.length > 0) {\n      scriptText += ', ' + QueryGenerator._valueGetterExpression(when, 'docInfo.when');\n    }\n\n    // Finish return statement\n    scriptText += '];\\n})';\n\n    const script = new vm.Script(scriptText, { filename: vmFileName });\n    return script.runInThisContext();\n  }\n\n  /**\n   * Gets a string containing the doc properties to get.\n   * @param {Array} propertiesInfo\n   * @param {String} [objectName='doc']\n   * @return {string}\n   * @private\n   */\n  static _valueGetterExpression(propertiesInfo, objectName) {\n    objectName = objectName || 'doc';\n\n    return propertiesInfo\n      .map(p =>\n        QueryGenerator._valueGetterSingle(`${objectName}['${p.propertyName}']`, p.propertyName, p.value, p.fromModel))\n      .join(', ');\n  }\n\n  static _valueGetterSingle(prefix, propName, value, fromModelFn) {\n    let valueGetter = prefix;\n\n    if (value instanceof QueryOperator) {\n      if (value.hasChildValues) {\n        return `${QueryGenerator._valueGetterSingle(`${prefix}.value[0]`, propName, value.value[0], fromModelFn)}` +\n          `, ${QueryGenerator._valueGetterSingle(`${prefix}.value[1]`, propName, value.value[1], fromModelFn)}`;\n      }\n\n      valueGetter = `${prefix}.value`;\n\n      if (value.isInOperator && fromModelFn) {\n        // Transform each individual value\n        return `${valueGetter}.map(v => ${QueryGenerator._getMappingFunctionCall(propName, 'v')})`;\n      }\n    }\n\n    return !fromModelFn ? valueGetter : QueryGenerator._getMappingFunctionCall(propName, valueGetter);\n  }\n\n  /**\n   * Gets a string containing the doc properties to SET, considering QueryAssignment instances.\n   * @param {Array} propertiesInfo\n   * @param {String} [prefix='doc']\n   * @return {string}\n   * @private\n   */\n  static _assignmentGetterExpression(propertiesInfo, prefix) {\n    prefix = prefix || 'doc';\n\n    return propertiesInfo\n      .map(p => {\n        const valueGetter = `${prefix}['${p.propertyName}']${p.value instanceof QueryAssignment ? '.value' : ''}`;\n        if (p.fromModel) {\n          return QueryGenerator._getMappingFunctionCall(p.propertyName, valueGetter);\n        }\n        return valueGetter;\n      })\n      .join(', ');\n  }\n\n  static _getConditionWithOperators(propertiesInfo) {\n    return propertiesInfo\n      .map(p => QueryGenerator._getSingleCondition(p.columnName, p.value))\n      .join(' AND ');\n  }\n\n  static _getMappingFunctionCall(propName, valueGetter) {\n    return `mappingInfo.getFromModelFn('${propName}')(${valueGetter})`;\n  }\n\n  static _getSingleCondition(columnName, value) {\n    if (value instanceof QueryOperator) {\n      if (value.hasChildValues) {\n        return `${QueryGenerator._getSingleCondition(columnName, value.value[0])}` +\n          ` ${value.key} ${QueryGenerator._getSingleCondition(columnName, value.value[1])}`;\n      }\n      return `\"${columnName}\" ${value.key} ?`;\n    }\n    return `\"${columnName}\" = ?`;\n  }\n}\n\nmodule.exports = QueryGenerator;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst vm = require('vm');\nconst utils = require('../utils');\nconst types = require('../types');\n\n/**\n * @ignore\n */\nclass ResultMapper {\n  /**\n   * Gets a generated function to adapt the row to a document.\n   * @param {ModelMappingInfo} info\n   * @param {ResultSet} rs\n   * @returns {Function}\n   */\n  static getSelectAdapter(info, rs) {\n    const columns = rs.columns;\n    if (!columns) {\n      throw new Error('Expected ROWS result obtained VOID');\n    }\n\n    let scriptText = '(function rowAdapter(row, info) {\\n' +\n      '  const item = info.newInstance();\\n';\n\n    for (const c of columns) {\n      scriptText += `  item['${info.getPropertyName(c.name)}'] = `;\n\n      if (!info.getToModelFn(c.name)) {\n        scriptText += `row['${c.name}'];\\n`;\n      } else {\n        scriptText += `info.getToModelFn('${c.name}')(row['${c.name}']);\\n`;\n      }\n    }\n\n    scriptText += '  return item;\\n})';\n\n    const script = new vm.Script(scriptText, { filename: 'gen-result-mapper.js'});\n    return script.runInThisContext();\n  }\n\n  /**\n   * Gets a function used to adapt VOID results or conditional updates.\n   * @param {ResultSet} rs\n   * @returns {Function}\n   */\n  static getMutationAdapter(rs) {\n    if (rs.columns === null) {\n      // VOID result\n      return utils.noop;\n    }\n\n    if (\n      rs.columns.length === 1 && rs.columns[0].name === '[applied]' &&\n      rs.columns[0].type.code === types.dataTypes.boolean) {\n      return utils.noop;\n    }\n\n    return ResultMapper._getConditionalRowAdapter(rs);\n  }\n\n  static _getConditionalRowAdapter(rs) {\n    return (function conditionalRowAdapter(row, info) {\n      const item = info.newInstance();\n\n      // Skip the first column (\"[applied]\")\n      for (let i = 1; i < rs.columns.length; i++) {\n        const c = rs.columns[i];\n        item[info.getPropertyName(c.name)] = row[c.name];\n      }\n\n      return item;\n    });\n  }\n\n  /**\n   * @param {ModelMappingInfo} info\n   * @param {ResultSet} rs\n   * @returns {{canCache: Boolean, fn: Function}}\n   */\n  static getCustomQueryAdapter(info, rs) {\n    if (rs.columns === null || rs.columns.length === 0) {\n      // VOID result\n      return { canCache: true, fn: utils.noop };\n    }\n\n    if (rs.columns[0].name === '[applied]' && rs.columns[0].type.code === types.dataTypes.boolean) {\n      // Conditional update results adapter functions should not be cached\n      return { canCache: false, fn: ResultMapper._getConditionalRowAdapter(rs) };\n    }\n\n    return { canCache: true, fn: ResultMapper.getSelectAdapter(info, rs) };\n  }\n}\n\nmodule.exports = ResultMapper;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst util = require('util');\nconst utils = require('../utils');\nconst inspectMethod = util.inspect.custom || 'inspect';\n\n/**\n * Represents the result of an execution as an iterable of objects in the Mapper.\n * @alias module:mapping~Result\n */\nclass Result {\n  /**\n   * Creates a new instance of Result.\n   * @param {ResultSet} rs\n   * @param {ModelMappingInfo} info\n   * @param {Function} rowAdapter\n   */\n  constructor(rs, info, rowAdapter) {\n    this._rs = rs;\n    this._info = info;\n    this._rowAdapter = rowAdapter;\n\n    /**\n     * When there is a single cell containing the result of the a LWT operation, hide the result from the user.\n     * @private\n     */\n    this._isEmptyLwt = (rs.columns !== null\n      && rs.columns.length === 1 && this._rs.rowLength === 1 && rs.columns[0].name === '[applied]');\n\n    /**\n     * Gets the amount of the documents contained in this Result instance.\n     * <p>\n     *   When the results are paged, it returns the length of the current paged results not the total amount of\n     *   rows in the table matching the query.\n     * </p>\n     * @type {Number}\n     */\n    this.length = this._isEmptyLwt ? 0 : (rs.rowLength || 0);\n\n    /**\n     * A string token representing the current page state of query.\n     * <p>\n     *   When provided, it can be used in the following executions to continue paging and retrieve the remained of the\n     *   result for the query.\n     * </p>\n     * @type {String}\n     * @default null\n     */\n    this.pageState = rs.pageState;\n  }\n\n  /**\n   * When this instance is the result of a conditional update query, it returns whether it was successful.\n   * Otherwise, it returns <code>true</code>.\n   * <p>\n   *   For consistency, this method always returns <code>true</code> for non-conditional queries (although there is\n   *   no reason to call the method in that case). This is also the case for conditional DDL statements\n   *   (CREATE KEYSPACE... IF NOT EXISTS, CREATE TABLE... IF NOT EXISTS), for which the server doesn't return\n   *   information whether it was applied or not.\n   * </p>\n   */\n  wasApplied() {\n    return this._rs.wasApplied();\n  }\n\n  /**\n   * Gets the first document in this result or null when the result is empty.\n   */\n  first() {\n    if (!this._rs.rowLength || this._isEmptyLwt) {\n      return null;\n    }\n    return this._rowAdapter(this._rs.rows[0], this._info);\n  }\n\n  /**\n   * Returns a new Iterator object that contains the document values.\n   */\n  *[Symbol.iterator]() {\n    if (this._isEmptyLwt) {\n      // Empty iterator\n      return;\n    }\n\n    for (let i = 0; i < this._rs.rows.length; i++) {\n      yield this._rowAdapter(this._rs.rows[i], this._info);\n    }\n  }\n\n  /**\n   * Converts the current instance to an Array of documents.\n   * @return {Array<Object>}\n   */\n  toArray() {\n    if (this._isEmptyLwt || !this._rs.rows) {\n      return utils.emptyArray;\n    }\n\n    return this._rs.rows.map(row => this._rowAdapter(row, this._info));\n  }\n\n  /**\n   * Executes a provided function once per result element.\n   * @param {Function} callback Function to execute for each element, taking two arguments: currentValue and index.\n   * @param {Object} [thisArg] Value to use as <code>this</code> when executing callback.\n   */\n  forEach(callback, thisArg) {\n    let index = 0;\n    thisArg = thisArg || this;\n    for (const doc of this) {\n      callback.call(thisArg, doc, index++);\n    }\n  }\n\n  [inspectMethod]() {\n    return this.toArray();\n  }\n}\n\nmodule.exports = Result;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst keyMatches = {\n  all: 1,\n  none: 0,\n  some: -1\n};\n\n/**\n * Provides utility methods to choose the correct tables and views that should be included in a statement.\n * @ignore\n */\nclass ObjectSelector {\n  /**\n   * Gets the table/view that should be used to execute the SELECT query.\n   * @param {Client} client\n   * @param {ModelMappingInfo} info\n   * @param {Boolean} allPKsDefined\n   * @param {Array} propertiesInfo\n   * @param {Array} fieldsInfo\n   * @param {Array<Array<String>>} orderByColumns\n   * @return {Promise<String>} A promise that resolves to a table names.\n   */\n  static getForSelect(client, info, allPKsDefined, propertiesInfo, fieldsInfo, orderByColumns) {\n    return Promise.all(\n      info.tables.map(t => {\n        if (t.isView) {\n          return client.metadata.getMaterializedView(info.keyspace, t.name);\n        }\n        return client.metadata.getTable(info.keyspace, t.name);\n      }))\n      .then(tables => {\n        for (let i = 0; i < tables.length; i++) {\n          const table = tables[i];\n          if (table === null) {\n            throw new Error(`Table \"${info.tables[i].name}\" could not be retrieved`);\n          }\n\n          if (keysAreIncluded(table.partitionKeys, propertiesInfo) !== keyMatches.all) {\n            // Not all the partition keys are covered\n            continue;\n          }\n\n\n          if (allPKsDefined) {\n            if (keysAreIncluded(table.clusteringKeys, propertiesInfo) !== keyMatches.all) {\n              // All clustering keys should be included as allPKsDefined flag is set\n              continue;\n            }\n          }\n\n          if (propertiesInfo.length > table.partitionKeys.length) {\n            // Check that the Where clause is composed by partition and clustering keys\n            const allPropertiesArePrimaryKeys = propertiesInfo\n              .reduce(\n                (acc, p) => acc && (\n                  contains(table.partitionKeys, c => c.name === p.columnName) ||\n                  contains(table.clusteringKeys, c => c.name === p.columnName)\n                ),\n                true);\n\n            if (!allPropertiesArePrimaryKeys) {\n              continue;\n            }\n          }\n\n          // All fields must be contained\n          const containsAllFields = fieldsInfo\n            .reduce((acc, p) => acc && table.columnsByName[p.columnName] !== undefined, true);\n\n          if (!containsAllFields) {\n            continue;\n          }\n\n          // CQL:\n          // - \"ORDER BY\" is currently only supported on the clustered columns of the PRIMARY KEY\n          // - \"ORDER BY\" currently only support the ordering of columns following their declared order in\n          //   the PRIMARY KEY\n          //\n          // In the mapper, we validate that the ORDER BY columns appear in the same order as in the clustering keys\n          const containsAllOrderByColumns = orderByColumns\n            .reduce((acc, order, index) => {\n              if (!acc) {\n                return false;\n              }\n\n              const ck = table.clusteringKeys[index];\n\n              return ck && ck.name === order[0];\n            }, true);\n\n          if (!containsAllOrderByColumns) {\n            continue;\n          }\n\n          return table.name;\n        }\n\n        let message = `No table matches the filter (${allPKsDefined ? 'all PKs have to be specified' : 'PKs'}): [${\n          propertiesInfo.map(p => p.columnName)}]`;\n\n        if (fieldsInfo.length > 0) {\n          message += `; fields: [${fieldsInfo.map(p => p.columnName)}]`;\n        }\n        if (orderByColumns.length > 0) {\n          message += `; orderBy: [${orderByColumns.map(item => item[0])}]`;\n        }\n\n        throw new Error(message);\n      });\n  }\n\n  /** Returns the name of the first table */\n  static getForSelectAll(info) {\n    return info.tables[0].name;\n  }\n\n  /**\n   * Gets the tables that should be used to execute the INSERT query.\n   * @param {Client} client\n   * @param {ModelMappingInfo} info\n   * @param {Array} propertiesInfo\n   * @return {Promise<Array<TableMetadata>>} A promise that resolves to an Array of tables.\n   */\n  static getForInsert(client, info, propertiesInfo) {\n    return Promise.all(info.tables.filter(t => !t.isView).map(t => client.metadata.getTable(info.keyspace, t.name)))\n      .then(tables => {\n        const filteredTables = tables\n          .filter((table, i) => {\n            if (table === null) {\n              throw new Error(`Table \"${info.tables[i].name}\" could not be retrieved`);\n            }\n\n            if (keysAreIncluded(table.partitionKeys, propertiesInfo) !== keyMatches.all) {\n              // Not all the partition keys are covered\n              return false;\n            }\n\n            const clusteringKeyMatches = keysAreIncluded(table.clusteringKeys, propertiesInfo);\n\n            // All clustering keys should be included or it can be inserting a static column value\n            if (clusteringKeyMatches === keyMatches.all) {\n              return true;\n            }\n\n            if (clusteringKeyMatches === keyMatches.some) {\n              return false;\n            }\n\n            const staticColumns = staticColumnCount(table);\n            return propertiesInfo.length === table.partitionKeys.length + staticColumns && staticColumns > 0;\n          });\n\n        if (filteredTables.length === 0) {\n          throw new Error(`No table matches (all PKs have to be specified) fields: [${\n            propertiesInfo.map(p => p.columnName)}]`);\n        }\n\n        return filteredTables;\n      });\n  }\n\n  /**\n   * Gets the tables that should be used to execute the UPDATE query.\n   * @param {Client} client\n   * @param {ModelMappingInfo} info\n   * @param {Array} propertiesInfo\n   * @param {Array} when\n   * @return {Promise<Array<TableMetadata>>} A promise that resolves to an Array of tables.\n   */\n  static getForUpdate(client, info, propertiesInfo, when) {\n    return Promise.all(info.tables.filter(t => !t.isView).map(t => client.metadata.getTable(info.keyspace, t.name)))\n      .then(tables => {\n        const filteredTables = tables\n          .filter((table, i) => {\n            if (table === null) {\n              throw new Error(`Table \"${info.tables[i].name}\" could not be retrieved`);\n            }\n\n            if (keysAreIncluded(table.partitionKeys, propertiesInfo) !== keyMatches.all) {\n              // Not all the partition keys are covered\n              return false;\n            }\n\n            const clusteringKeyMatches = keysAreIncluded(table.clusteringKeys, propertiesInfo);\n\n            // All clustering keys should be included or it can be updating a static column value\n            if (clusteringKeyMatches === keyMatches.some) {\n              return false;\n            }\n\n            if (clusteringKeyMatches === keyMatches.none && !hasStaticColumn(table)) {\n              return false;\n            }\n\n            const applicableColumns = propertiesInfo\n              .reduce((acc, p) => acc + (table.columnsByName[p.columnName] !== undefined ? 1 : 0), 0);\n\n            if (applicableColumns <= table.partitionKeys.length + table.clusteringKeys.length) {\n              if (!hasStaticColumn(table) || applicableColumns <= table.partitionKeys.length) {\n                // UPDATE statement does not contain columns to SET\n                return false;\n              }\n            }\n\n            // \"when\" conditions should be contained in the table\n            return when.reduce((acc, p) => acc && table.columnsByName[p.columnName] !== undefined, true);\n          });\n\n        if (filteredTables.length === 0) {\n          let message = `No table matches (all PKs and columns to set have to be specified) fields: [${\n            propertiesInfo.map(p => p.columnName)}]`;\n\n          if (when.length > 0) {\n            message += `; condition: [${when.map(p => p.columnName)}]`;\n          }\n\n          throw new Error(message);\n        }\n\n        return filteredTables;\n      });\n  }\n\n  /**\n   * Gets the tables that should be used to execute the DELETE query.\n   * @param {Client} client\n   * @param {ModelMappingInfo} info\n   * @param {Array} propertiesInfo\n   * @param {Array} when\n   * @return {Promise<Array<TableMetadata>>} A promise that resolves to an Array of tables.\n   */\n  static getForDelete(client, info, propertiesInfo, when) {\n    return Promise.all(info.tables.filter(t => !t.isView).map(t => client.metadata.getTable(info.keyspace, t.name)))\n      .then(tables => {\n        const filteredTables = tables\n          .filter((table, i) => {\n            if (table === null) {\n              throw new Error(`Table \"${info.tables[i].name}\" could not be retrieved`);\n            }\n\n            // All partition and clustering keys from the table should be included in the document\n            const keyNames = table.partitionKeys.concat(table.clusteringKeys).map(k => k.name);\n            const columns = propertiesInfo.map(p => p.columnName);\n\n            for (let i = 0; i < keyNames.length; i++) {\n              if (columns.indexOf(keyNames[i]) === -1) {\n                return false;\n              }\n            }\n\n            // \"when\" conditions should be contained in the table\n            return when.reduce((acc, p) => acc && table.columnsByName[p.columnName] !== undefined, true);\n          });\n\n        if (filteredTables.length === 0) {\n          let message = `No table matches (all PKs have to be specified) fields: [${\n            propertiesInfo.map(p => p.columnName)}]`;\n\n          if (when.length > 0) {\n            message += `; condition: [${when.map(p => p.columnName)}]`;\n          }\n\n          throw new Error(message);\n        }\n\n        return filteredTables;\n      });\n  }\n}\n\nfunction contains(arr, fn) {\n  return arr.filter(fn).length > 0;\n}\n\n/**\n * Returns the amount of matches for a given key\n * @private\n * @param {Array} keys\n * @param {Array} propertiesInfo\n */\nfunction keysAreIncluded(keys, propertiesInfo) {\n  if (keys.length === 0) {\n    return keyMatches.all;\n  }\n\n  // Filtering by name might look slow / ineffective to using hash maps\n  // but we expect `keys` and `propertiesInfo` to contain only few items\n  const matches = propertiesInfo.reduce((acc, p) => acc + (contains(keys, k => p.columnName === k.name) ? 1 : 0), 0);\n  if (matches === 0) {\n    return keyMatches.none;\n  }\n\n  return matches === keys.length ? keyMatches.all : keyMatches.some;\n}\n\nfunction hasStaticColumn(table) {\n  return staticColumnCount(table) > 0;\n}\n\nfunction staticColumnCount(table) {\n  return table.columns.reduce((acc, column) => acc + (column.isStatic ? 1 : 0), 0);\n}\n\nmodule.exports = ObjectSelector;\n", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst errors = require('../errors');\nconst utils = require('../utils');\n\n/**\n * Provides utility methods to adapt and map user provided docInfo and executionOptions to a predictable object format.\n * @ignore\n */\nclass DocInfoAdapter {\n  /**\n   * Returns an Array where each item contains the property name, the column name and the property value (to obtain\n   * the operator).\n   * When docInfo.fields is specified, it uses that array to obtain the information.\n   * @param {Array<String>} docKeys\n   * @param {null|{fields}} docInfo\n   * @param {Object} doc\n   * @param {ModelMappingInfo} mappingInfo\n   * @returns {Array}\n   */\n  static getPropertiesInfo(docKeys, docInfo, doc, mappingInfo) {\n    let propertyKeys = docKeys;\n    if (docInfo && docInfo.fields && docInfo.fields.length > 0) {\n      propertyKeys = docInfo.fields;\n    }\n\n    return propertyKeys.map(propertyName => ({\n      propertyName,\n      columnName: mappingInfo.getColumnName(propertyName),\n      value: doc[propertyName],\n      fromModel: mappingInfo.getFromModelFn(propertyName)\n    }));\n  }\n\n  /**\n   * @param {{orderBy}} docInfo\n   * @param {ModelMappingInfo} mappingInfo\n   * @returns {Array<String>}\n   */\n  static adaptOrderBy(docInfo, mappingInfo){\n    if (!docInfo || !docInfo.orderBy) {\n      return utils.emptyArray;\n    }\n    return Object.keys(docInfo.orderBy).map(key => {\n      const value = docInfo.orderBy[key];\n      const ordering = typeof value === 'string' ? value.toUpperCase() : value;\n      if (ordering !== 'ASC' && ordering !== 'DESC') {\n        throw new errors.ArgumentError('Order must be either \"ASC\" or \"DESC\", obtained: ' + value);\n      }\n      return [ mappingInfo.getColumnName(key), ordering ];\n    });\n  }\n\n  /**\n   * Returns the QueryOptions for an INSERT/UPDATE/DELETE statement.\n   * @param {Object|String|undefined} executionOptions\n   * @param {Boolean} isIdempotent\n   */\n  static adaptOptions(executionOptions, isIdempotent) {\n    const options = {\n      prepare: true,\n      executionProfile: undefined,\n      timestamp: undefined,\n      isIdempotent: isIdempotent\n    };\n\n    if (typeof executionOptions === 'string') {\n      options.executionProfile = executionOptions;\n    }\n    else if (executionOptions !== null && executionOptions !== undefined) {\n      options.executionProfile = executionOptions.executionProfile;\n      options.timestamp = executionOptions.timestamp;\n\n      if (executionOptions.isIdempotent !== undefined) {\n        options.isIdempotent = executionOptions.isIdempotent;\n      }\n    }\n    return options;\n  }\n\n  /**\n   * Returns the QueryOptions for a SELECT statement.\n   * @param {Object|String|undefined} executionOptions\n   * @param {Boolean} [overrideIdempotency]\n   */\n  static adaptAllOptions(executionOptions, overrideIdempotency) {\n    const options = {\n      prepare: true,\n      executionProfile: undefined,\n      fetchSize: undefined,\n      pageState: undefined,\n      timestamp: undefined,\n      isIdempotent: undefined\n    };\n\n    if (typeof executionOptions === 'string') {\n      options.executionProfile = executionOptions;\n    }\n    else if (executionOptions !== null && executionOptions !== undefined) {\n      options.executionProfile = executionOptions.executionProfile;\n      options.fetchSize = executionOptions.fetchSize;\n      options.pageState = executionOptions.pageState;\n      options.timestamp = executionOptions.timestamp;\n      options.isIdempotent = executionOptions.isIdempotent;\n    }\n\n    if (overrideIdempotency) {\n      options.isIdempotent = true;\n    }\n\n    return options;\n  }\n\n  /**\n   * Returns the QueryOptions for a batch statement.\n   * @param {Object|String|undefined} executionOptions\n   * @param {Boolean} isIdempotent\n   * @param {Boolean} isCounter\n   */\n  static adaptBatchOptions(executionOptions, isIdempotent, isCounter) {\n    const options = {\n      prepare: true,\n      executionProfile: undefined,\n      timestamp: undefined,\n      logged: undefined,\n      isIdempotent: isIdempotent,\n      counter: isCounter\n    };\n\n    if (typeof executionOptions === 'string') {\n      options.executionProfile = executionOptions;\n    }\n    else if (executionOptions !== null && executionOptions !== undefined) {\n      options.executionProfile = executionOptions.executionProfile;\n      options.timestamp = executionOptions.timestamp;\n      options.logged = executionOptions.logged !== false;\n\n      if (executionOptions.isIdempotent !== undefined) {\n        options.isIdempotent = executionOptions.isIdempotent;\n      }\n    }\n    return options;\n  }\n}\n\nmodule.exports = DocInfoAdapter;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst utils = require('../utils');\nconst QueryGenerator = require('./query-generator');\nconst ResultMapper = require('./result-mapper');\nconst Result = require('./result');\nconst Cache = require('./cache');\nconst Tree = require('./tree');\nconst ObjectSelector = require('./object-selector');\nconst DocInfoAdapter = require('./doc-info-adapter');\n\nconst cacheHighWaterMark = 100;\n\n/**\n * @ignore\n */\nclass MappingHandler {\n  /**\n   * @param {Client} client\n   * @param {ModelMappingInfo} mappingInfo\n   */\n  constructor(client, mappingInfo) {\n    this._client = client;\n    this._cache = {\n      select: new Tree().on('add', length => this._validateCacheLength(length)),\n      selectAll: new Tree().on('add', length => this._validateCacheLength(length)),\n      insert: new Tree().on('add', length => this._validateCacheLength(length)),\n      update: new Tree().on('add', length => this._validateCacheLength(length)),\n      remove: new Tree().on('add', length => this._validateCacheLength(length)),\n      customQueries: new Map()\n    };\n\n    /**\n     * Gets the mapping information of the document.\n     * @type {ModelMappingInfo}\n     */\n    this.info = mappingInfo;\n  }\n\n  /**\n   * Gets a function to be used to execute SELECT the query using the document.\n   * @param {Object} doc\n   * @param {{fields, orderBy, limit}} docInfo\n   * @param {Boolean} allPKsDefined Determines whether all primary keys must be defined in the doc for the query to\n   * be valid.\n   * @return {Promise<Function>}\n   */\n  getSelectExecutor(doc, docInfo, allPKsDefined) {\n    const docKeys = Object.keys(doc);\n    if (docKeys.length === 0) {\n      return Promise.reject(new Error('Expected object with keys'));\n    }\n\n    const cacheKey = Cache.getSelectKey(docKeys, doc, docInfo);\n    // Cache the executor and the result mapper under the same key\n    // That way, those can get evicted together\n    const cacheItem = this._cache.select.getOrCreate(cacheKey, () => ({ executor: null, resultAdapter: null }));\n\n    if (cacheItem.executor !== null) {\n      return Promise.resolve(cacheItem.executor);\n    }\n\n    const propertiesInfo = DocInfoAdapter.getPropertiesInfo(docKeys, null, doc, this.info);\n    const fieldsInfo = DocInfoAdapter.getPropertiesInfo(utils.emptyArray, docInfo, doc, this.info);\n    const orderByColumns = DocInfoAdapter.adaptOrderBy(docInfo, this.info);\n    const limit = docInfo && docInfo.limit;\n\n    return this._client.connect()\n      .then(() =>\n        ObjectSelector.getForSelect(this._client, this.info, allPKsDefined, propertiesInfo, fieldsInfo, orderByColumns))\n      .then(tableName => {\n        // Part of the closure\n        const query = QueryGenerator.getSelect(tableName, this.info.keyspace, propertiesInfo, fieldsInfo,\n          orderByColumns, limit);\n        const paramsGetter = QueryGenerator.selectParamsGetter(propertiesInfo, limit);\n        const self = this;\n\n        cacheItem.executor = function selectExecutor(doc, docInfo, executionOptions) {\n          return self._executeSelect(query, paramsGetter, doc, docInfo, executionOptions, cacheItem);\n        };\n\n        return cacheItem.executor;\n      });\n  }\n\n  getSelectAllExecutor(docInfo) {\n    const cacheKey = Cache.getSelectAllKey(docInfo);\n    const cacheItem = this._cache.selectAll.getOrCreate(cacheKey, () => ({ executor: null, resultAdapter: null }));\n\n    if (cacheItem.executor !== null) {\n      return cacheItem.executor;\n    }\n\n    const fieldsInfo = DocInfoAdapter.getPropertiesInfo(utils.emptyArray, docInfo, utils.emptyObject, this.info);\n    const orderByColumns = DocInfoAdapter.adaptOrderBy(docInfo, this.info);\n    const limit = docInfo && docInfo.limit;\n\n    const tableName = ObjectSelector.getForSelectAll(this.info);\n\n    // Part of the closure\n    const query = QueryGenerator.getSelect(\n      tableName, this.info.keyspace, utils.emptyArray, fieldsInfo, orderByColumns, limit);\n    const paramsGetter = QueryGenerator.selectParamsGetter(utils.emptyArray, limit);\n    const self = this;\n\n    cacheItem.executor = function selectAllExecutor(docInfo, executionOptions) {\n      return self._executeSelect(query, paramsGetter, null, docInfo, executionOptions, cacheItem);\n    };\n\n    return cacheItem.executor;\n  }\n\n  /**\n   * Executes a SELECT query and returns the adapted results.\n   * When a result adapter is not yet created, it gets a new one and caches it.\n   * @private\n   */\n  _executeSelect(query, paramsGetter, doc, docInfo, executionOptions, cacheItem) {\n    const options = DocInfoAdapter.adaptAllOptions(executionOptions, true);\n\n    return this._client.execute(query, paramsGetter(doc, docInfo, this.info), options)\n      .then(rs => {\n        if (cacheItem.resultAdapter === null) {\n          cacheItem.resultAdapter = ResultMapper.getSelectAdapter(this.info, rs);\n        }\n        return new Result(rs, this.info, cacheItem.resultAdapter);\n      });\n  }\n\n  /**\n   * Gets a function to be used to execute INSERT the query using the document.\n   * @param {Object} doc\n   * @param {{ifNotExists, ttl, fields}} docInfo\n   * @return {Promise<Function>}\n   */\n  getInsertExecutor(doc, docInfo) {\n    const docKeys = Object.keys(doc);\n    if (docKeys.length === 0) {\n      return Promise.reject(new Error('Expected object with keys'));\n    }\n\n    const cacheKey = Cache.getInsertKey(docKeys, docInfo);\n    const cacheItem = this._cache.insert.getOrCreate(cacheKey, () => ({ executor: null }));\n\n    if (cacheItem.executor !== null) {\n      return Promise.resolve(cacheItem.executor);\n    }\n\n    return this.createInsertQueries(docKeys, doc, docInfo)\n      .then(queries => {\n        if (queries.length === 1) {\n          return this._setSingleExecutor(cacheItem, queries[0]);\n        }\n\n        return this._setBatchExecutor(cacheItem, queries);\n      });\n  }\n\n  /**\n   * Creates an Array containing the query and the params getter function for each table affected by the INSERT.\n   * @param {Array<String>} docKeys\n   * @param {Object} doc\n   * @param {{ifNotExists, ttl, fields}} docInfo\n   * @returns {Promise<Array<{query, paramsGetter}>>}\n   */\n  createInsertQueries(docKeys, doc, docInfo) {\n    const propertiesInfo = DocInfoAdapter.getPropertiesInfo(docKeys, docInfo, doc, this.info);\n    const ifNotExists = docInfo && docInfo.ifNotExists;\n\n    // Get all the tables affected\n    return this._client.connect()\n      .then(() => ObjectSelector.getForInsert(this._client, this.info, propertiesInfo))\n      .then(tables => {\n\n        if (tables.length > 1 && ifNotExists) {\n          throw new Error('Batch with ifNotExists conditions cannot span multiple tables');\n        }\n\n        // For each tables affected, Generate query and parameter getters\n        return tables.map(table =>\n          QueryGenerator.getInsert(table, this.info.keyspace, propertiesInfo, docInfo,ifNotExists));\n      });\n  }\n\n  /**\n   * Gets a function to be used to execute the UPDATE queries with the provided document.\n   * @param {Object} doc\n   * @param {{ifExists, when, ttl, fields}} docInfo\n   * @return {Promise<Function>}\n   */\n  getUpdateExecutor(doc, docInfo) {\n    const docKeys = Object.keys(doc);\n    if (docKeys.length === 0) {\n      return Promise.reject(new Error('Expected object with keys'));\n    }\n\n    const cacheKey = Cache.getUpdateKey(docKeys, doc, docInfo);\n    const cacheItem = this._cache.update.getOrCreate(cacheKey, () => ({ executor: null }));\n\n    if (cacheItem.executor !== null) {\n      return Promise.resolve(cacheItem.executor);\n    }\n\n    return this.createUpdateQueries(docKeys, doc, docInfo)\n      .then(queries => {\n        if (queries.length === 1) {\n          return this._setSingleExecutor(cacheItem, queries[0]);\n        }\n\n        return this._setBatchExecutor(cacheItem, queries);\n      });\n  }\n\n  /**\n   * Creates an Array containing the query and the params getter function for each table affected by the UPDATE.\n   * @param {Array<String>} docKeys\n   * @param {Object} doc\n   * @param {Object} docInfo\n   * @returns {Promise<Array<{query, paramsGetter, isIdempotent}>>}\n   */\n  createUpdateQueries(docKeys, doc, docInfo) {\n    const propertiesInfo = DocInfoAdapter.getPropertiesInfo(docKeys, docInfo, doc, this.info);\n    const ifExists = docInfo && docInfo.ifExists;\n    const when = docInfo && docInfo.when\n      ? DocInfoAdapter.getPropertiesInfo(Object.keys(docInfo.when), null, docInfo.when, this.info)\n      : utils.emptyArray;\n\n    if (when.length > 0 && ifExists) {\n      throw new Error('Both when and ifExists conditions can not be applied to the same statement');\n    }\n\n    // Get all the tables affected\n    return this._client.connect()\n      .then(() => ObjectSelector.getForUpdate(this._client, this.info, propertiesInfo, when))\n      .then(tables => {\n\n        if (tables.length > 1 && (when.length > 0 || ifExists)) {\n          throw new Error('Batch with when or ifExists conditions cannot span multiple tables');\n        }\n\n        // For each table affected, Generate query and parameter getters\n        return tables.map(table =>\n          QueryGenerator.getUpdate(table, this.info.keyspace, propertiesInfo, docInfo, when, ifExists));\n      });\n  }\n\n  /**\n   * Gets a function to be used to execute the DELETE queries with the provided document.\n   * @param {Object} doc\n   * @param {{when, ifExists, fields, deleteOnlyColumns}} docInfo\n   * @return {Promise<Function>}\n   */\n  getDeleteExecutor(doc, docInfo) {\n    const docKeys = Object.keys(doc);\n    if (docKeys.length === 0) {\n      return Promise.reject(new Error('Expected object with keys'));\n    }\n\n    const cacheKey = Cache.getRemoveKey(docKeys, doc, docInfo);\n    const cacheItem = this._cache.remove.getOrCreate(cacheKey, () => ({ executor: null }));\n\n    if (cacheItem.executor !== null) {\n      return Promise.resolve(cacheItem.executor);\n    }\n\n    return this.createDeleteQueries(docKeys, doc, docInfo)\n      .then(queries => {\n        if (queries.length === 1) {\n          return this._setSingleExecutor(cacheItem, queries[0]);\n        }\n\n        return this._setBatchExecutor(cacheItem, queries);\n      });\n  }\n\n  /**\n   * Creates an Array containing the query and the params getter function for each table affected by the DELETE.\n   * @param {Array<String>} docKeys\n   * @param {Object} doc\n   * @param {{when, ifExists, fields, deleteOnlyColumns}} docInfo\n   * @returns {Promise<Array<{query, paramsGetter}>>}\n   */\n  createDeleteQueries(docKeys, doc, docInfo) {\n    const propertiesInfo = DocInfoAdapter.getPropertiesInfo(docKeys, docInfo, doc, this.info);\n    const ifExists = docInfo && docInfo.ifExists;\n    const when = docInfo && docInfo.when\n      ? DocInfoAdapter.getPropertiesInfo(Object.keys(docInfo.when), null, docInfo.when, this.info)\n      : utils.emptyArray;\n\n    if (when.length > 0 && ifExists) {\n      throw new Error('Both when and ifExists conditions can not be applied to the same statement');\n    }\n\n    // Get all the tables affected\n    return this._client.connect()\n      .then(() => ObjectSelector.getForDelete(this._client, this.info, propertiesInfo, when))\n      .then(tables => {\n\n        if (tables.length > 1 && (when.length > 0 || ifExists)) {\n          throw new Error('Batch with when or ifExists conditions cannot span multiple tables');\n        }\n\n        // For each tables affected, Generate query and parameter getters\n        return tables.map(table =>\n          QueryGenerator.getDelete(table, this.info.keyspace, propertiesInfo, docInfo, when, ifExists));\n      });\n  }\n\n  getExecutorFromQuery(query, paramsHandler, commonExecutionOptions) {\n    // Use the current instance in the closure\n    // as there is no guarantee of how the returned function will be invoked\n    const self = this;\n    const commonOptions = commonExecutionOptions ? DocInfoAdapter.adaptAllOptions(commonExecutionOptions) : null;\n\n    return (function queryMappedExecutor(doc, executionOptions) {\n      // When the executionOptions were already specified,\n      // use it and skip the ones provided in each invocation\n      const options = commonOptions\n        ? commonOptions\n        : DocInfoAdapter.adaptAllOptions(executionOptions);\n\n      return self._client.execute(query, paramsHandler(doc), options).then(rs => {\n        // Cache the resultAdapter based on the query\n        let resultAdapter = self._cache.customQueries.get(query);\n\n        if (resultAdapter === undefined) {\n          const resultAdapterInfo = ResultMapper.getCustomQueryAdapter(self.info, rs);\n          resultAdapter = resultAdapterInfo.fn;\n          if (resultAdapterInfo.canCache) {\n            // Avoid caching conditional updates results as the amount of columns change\n            // depending on the parameter values.\n            self._cache.customQueries.set(query, resultAdapter);\n\n            if (self._cache.customQueries.size === cacheHighWaterMark) {\n              self._client.log('warning',\n                `Custom queries cache reached ${cacheHighWaterMark} items, this could be caused by ` +\n                `hard-coding parameter values inside the query, which should be avoided`);\n            }\n          }\n        }\n\n        return new Result(rs, self.info, resultAdapter);\n      });\n    });\n  }\n\n  _setSingleExecutor(cacheItem, queryInfo) {\n    // Parameters and this instance are part of the closure\n    const self = this;\n\n    // Set the function to execute the request in the cache\n    cacheItem.executor = function singleExecutor(doc, docInfo, executionOptions) {\n      const options = DocInfoAdapter.adaptOptions(executionOptions, queryInfo.isIdempotent);\n\n      return self._client.execute(queryInfo.query, queryInfo.paramsGetter(doc, docInfo, self.info), options)\n        .then(rs => new Result(rs, self.info, ResultMapper.getMutationAdapter(rs)));\n    };\n\n    return cacheItem.executor;\n  }\n\n  _setBatchExecutor(cacheItem, queries) {\n    // Parameters and the following fields are part of the closure\n    const self = this;\n    const isIdempotent = queries.reduce((acc, q) => acc && q.isIdempotent, true);\n\n    // Set the function to execute the batch request in the cache\n    cacheItem.executor = function batchExecutor(doc, docInfo, executionOptions) {\n      // Use the params getter function to obtain the parameters each time\n      const queryAndParams = queries.map(q => ({\n        query: q.query,\n        params: q.paramsGetter(doc, docInfo, self.info)\n      }));\n\n      const options = DocInfoAdapter.adaptOptions(executionOptions, isIdempotent);\n\n      // Execute using a Batch\n      return self._client.batch(queryAndParams, options)\n        .then(rs => new Result(rs, self.info, ResultMapper.getMutationAdapter(rs)));\n    };\n\n    return cacheItem.executor;\n  }\n\n  _validateCacheLength(length) {\n    if (length !== cacheHighWaterMark) {\n      return;\n    }\n\n    this._client.log('warning', `ModelMapper cache reached ${cacheHighWaterMark} items, this could be caused by ` +\n      `building the object to map in different ways (with different shapes) each time. Use the same or few object ` +\n      `structures for a model and represent unset values with undefined or types.unset`);\n  }\n}\n\nmodule.exports = MappingHandler;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\n/**\n * Contains a set of methods to represent a row into a document and a document into a row.\n * @alias module:mapping~TableMappings\n * @interface\n */\nclass TableMappings {\n  /**\n   * Method that is called by the mapper to create the instance of the document.\n   * @return {Object}\n   */\n  newObjectInstance() {\n    return {};\n  }\n\n  /**\n   * Gets the name of the column based on the document property name.\n   * @param {String} propName The name of the property.\n   * @returns {String}\n   */\n  getColumnName(propName) {\n    return propName;\n  }\n\n  /**\n   * Gets the name of the document property based on the column name.\n   * @param {String} columnName The name of the column.\n   * @returns {String}\n   */\n  getPropertyName(columnName) {\n    return columnName;\n  }\n}\n\n/**\n * A [TableMappings]{@link module:mapping~TableMappings} implementation that converts CQL column names in all-lowercase\n * identifiers with underscores (snake case) to camel case (initial lowercase letter) property names.\n * <p>\n *   The conversion is performed without any checks for the source format, you should make sure that the source\n *   format is snake case for CQL identifiers and camel case for properties.\n * </p>\n * @alias module:mapping~UnderscoreCqlToCamelCaseMappings\n * @implements {module:mapping~TableMappings}\n */\nclass UnderscoreCqlToCamelCaseMappings extends TableMappings {\n  /**\n   * Creates a new instance of {@link UnderscoreCqlToCamelCaseMappings}\n   */\n  constructor() {\n    super();\n  }\n\n  /**\n   * Converts a property name in camel case to snake case.\n   * @param {String} propName Name of the property to convert to snake case.\n   * @return {String}\n   */\n  getColumnName(propName) {\n    return propName.replace(/[a-z][A-Z]/g, (match, offset) => match.charAt(0) + '_' + match.charAt(1)).toLowerCase();\n  }\n\n  /**\n   * Converts a column name in snake case to camel case.\n   * @param {String} columnName The column name to convert to camel case.\n   * @return {String}\n   */\n  getPropertyName(columnName) {\n    return columnName.replace(/_[a-z]/g, (match, offset) => ((offset === 0) ? match : match.substr(1).toUpperCase()));\n  }\n}\n\n/**\n * Default implementation of [TableMappings]{@link module:mapping~TableMappings} that doesn't perform any conversion.\n * @alias module:mapping~DefaultTableMappings\n * @implements {module:mapping~TableMappings}\n */\nclass DefaultTableMappings extends TableMappings {\n  /**\n   * Creates a new instance of {@link DefaultTableMappings}.\n   */\n  constructor() {\n    super();\n  }\n\n  /**  @override */\n  getColumnName(propName) {\n    return super.getColumnName(propName);\n  }\n\n  /** @override */\n  getPropertyName(columnName) {\n    return super.getPropertyName(columnName);\n  }\n\n  /**\n   * Creates a new object instance, using object initializer.\n   */\n  newObjectInstance() {\n    return super.newObjectInstance();\n  }\n}\n\nexports.TableMappings = TableMappings;\nexports.UnderscoreCqlToCamelCaseMappings = UnderscoreCqlToCamelCaseMappings;\nexports.DefaultTableMappings = DefaultTableMappings;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst tableMappingsModule = require('./table-mappings');\nconst TableMappings = tableMappingsModule.TableMappings;\nconst DefaultTableMappings = tableMappingsModule.DefaultTableMappings;\n\n/**\n * Represents the parsed user information of the table mappings of a model.\n * @ignore\n */\nclass ModelMappingInfo {\n  /**\n   * @param {String} keyspace\n   * @param {Array<{name, isView}>} tables\n   * @param {TableMappings} mappings\n   * @param {Map<String,ModelColumnInfo>} columns\n   */\n  constructor(keyspace, tables, mappings, columns) {\n    this.keyspace = keyspace;\n    this.tables = tables;\n    this._mappings = mappings;\n    this._columns = columns;\n\n    // Define a map of column information per property name\n    /** @type {Map<String, ModelColumnInfo>} */\n    this._documentProperties = new Map();\n    for (const modelColumnInfo of columns.values()) {\n      this._documentProperties.set(modelColumnInfo.propertyName, modelColumnInfo);\n    }\n  }\n\n  getColumnName(propName) {\n    const modelColumnInfo = this._documentProperties.get(propName);\n    if (modelColumnInfo !== undefined) {\n      // There is an specific name transformation between the column name and the property name\n      return modelColumnInfo.columnName;\n    }\n    // Rely on the TableMappings (i.e. maybe there is a convention defined for this property)\n    return this._mappings.getColumnName(propName);\n  }\n\n  getPropertyName(columnName) {\n    const modelColumnInfo = this._columns.get(columnName);\n    if (modelColumnInfo !== undefined) {\n      // There is an specific name transformation between the column name and the property name\n      return modelColumnInfo.propertyName;\n    }\n    // Rely on the TableMappings (i.e. maybe there is a convention defined for this column)\n    return this._mappings.getPropertyName(columnName);\n  }\n\n  getFromModelFn(propName) {\n    const modelColumnInfo = this._documentProperties.get(propName);\n    return modelColumnInfo !== undefined ? modelColumnInfo.fromModel : null;\n  }\n\n  getToModelFn(columnName) {\n    const modelColumnInfo = this._columns.get(columnName);\n    return modelColumnInfo !== undefined ? modelColumnInfo.toModel : null;\n  }\n\n  newInstance() {\n    return this._mappings.newObjectInstance();\n  }\n\n  /**\n   * Parses the user options into a map of model names and ModelMappingInfo.\n   * @param {MappingOptions} options\n   * @param {String} currentKeyspace\n   * @returns {Map<String, ModelMappingInfo>}\n   */\n  static parse(options, currentKeyspace) {\n    const result = new Map();\n    if (!options || !options.models) {\n      return result;\n    }\n\n    Object.keys(options.models).forEach(modelName => {\n      const modelOptions = options.models[modelName];\n      result.set(modelName, ModelMappingInfo._create(modelName, currentKeyspace, modelOptions));\n    });\n\n    return result;\n  }\n\n  static _create(modelName, currentKeyspace, modelOptions) {\n    if (!currentKeyspace && (!modelOptions || !modelOptions.keyspace)) {\n      throw new Error(\n        'You should specify the keyspace of the model in the MappingOptions when the Client is not using a keyspace');\n    }\n\n    if (!modelOptions) {\n      return ModelMappingInfo.createDefault(modelName, currentKeyspace);\n    }\n\n    let tables;\n\n    if (modelOptions.tables && modelOptions.tables.length > 0) {\n      tables = modelOptions.tables.map(item => {\n        const table = { name: null, isView: false };\n        if (typeof item === 'string') {\n          table.name = item;\n        } else if (item) {\n          table.name = item.name;\n          table.isView = !!item.isView;\n        }\n\n        if (!table.name) {\n          throw new Error(`Table name not specified for model '${modelName}'`);\n        }\n\n        return table;\n      });\n    } else {\n      tables = [ { name: modelName, isView: false }];\n    }\n\n    if (modelOptions.mappings && !(modelOptions.mappings instanceof TableMappings)) {\n      throw new Error('mappings should be an instance of TableMappings');\n    }\n\n    const columns = new Map();\n    if (modelOptions.columns !== null && typeof modelOptions.columns === 'object') {\n      Object.keys(modelOptions.columns).forEach(columnName => {\n        columns.set(columnName, ModelColumnInfo.parse(columnName, modelOptions.columns[columnName]));\n      });\n    }\n\n    return new ModelMappingInfo(\n      modelOptions.keyspace || currentKeyspace,\n      tables,\n      modelOptions.mappings || new DefaultTableMappings(),\n      columns\n    );\n  }\n\n  static createDefault(modelName, currentKeyspace) {\n    return new ModelMappingInfo(\n      currentKeyspace,\n      [ { name: modelName, isView: false }],\n      new DefaultTableMappings(),\n      new Map());\n  }\n}\n\nclass ModelColumnInfo {\n  constructor(columnName, propertyName, toModel, fromModel) {\n    this.columnName = columnName;\n    this.propertyName = propertyName;\n\n    if (toModel && typeof toModel !== 'function') {\n      throw new TypeError(`toModel type for property '${propertyName}' should be a function (obtained ${\n        typeof toModel})`);\n    }\n\n    if (fromModel && typeof fromModel !== 'function') {\n      throw new TypeError(`fromModel type for property '${propertyName}' should be a function (obtained ${\n        typeof fromModel})`);\n    }\n\n    this.toModel = toModel;\n    this.fromModel = fromModel;\n  }\n\n  static parse(columnName, value) {\n    if (!value) {\n      return new ModelColumnInfo(columnName, columnName);\n    }\n\n    if (typeof value === 'string') {\n      return new ModelColumnInfo(columnName, value);\n    }\n\n    return new ModelColumnInfo(columnName, value.name || columnName, value.toModel, value.fromModel);\n  }\n}\n\nmodule.exports = ModelMappingInfo;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst ModelMapper = require('./model-mapper');\nconst MappingHandler = require('./mapping-handler');\nconst DocInfoAdapter = require('./doc-info-adapter');\nconst errors = require('../errors');\nconst Result = require('./result');\nconst ResultMapper = require('./result-mapper');\nconst ModelMappingInfo = require('./model-mapping-info');\nconst { ModelBatchItem } = require('./model-batch-item');\n\n/**\n * Represents an object mapper for Apache Cassandra and DataStax Enterprise.\n * @alias module:mapping~Mapper\n * @example <caption>Creating a Mapper instance with some options for the model 'User'</caption>\n * const mappingOptions = {\n *   models: {\n *     'User': {\n *       tables: ['users'],\n *       mappings: new UnderscoreCqlToCamelCaseMappings(),\n *       columnNames: {\n *         'userid': 'id'\n *       }\n *     }\n *   }\n * };\n * const mapper = new Mapper(client, mappingOptions);\n * @example <caption>Creating a Mapper instance with other possible options for a model</caption>\n * const mappingOptions = {\n *   models: {\n *     'Video': {\n *       tables: ['videos', 'user_videos', 'latest_videos', { name: 'my_videos_view', isView: true }],\n *       mappings: new UnderscoreCqlToCamelCaseMappings(),\n *       columnNames: {\n *         'videoid': 'id'\n *       },\n *       keyspace: 'ks1'\n *     }\n *   }\n * };\n * const mapper = new Mapper(client, mappingOptions);\n */\nclass Mapper {\n  /**\n   * Creates a new instance of Mapper.\n   * @param {Client} client The Client instance to use to execute the queries and fetch the metadata.\n   * @param {MappingOptions} [options] The [MappingOptions]{@link module:mapping~MappingOptions} containing the\n   * information of the models and table mappings.\n   */\n  constructor(client, options) {\n    if (!client) {\n      throw new Error('client must be defined');\n    }\n\n    /**\n     * The Client instance used to create this Mapper instance.\n     * @type {Client}\n     */\n    this.client = client;\n\n    this._modelMappingInfos = ModelMappingInfo.parse(options, client.keyspace);\n    this._modelMappers = new Map();\n  }\n\n  /**\n   * Gets a [ModelMapper]{@link module:mapping~ModelMapper} that is able to map documents of a certain model into\n   * CQL rows.\n   * @param {String} name The name to identify the model. Note that the name is case-sensitive.\n   * @returns {ModelMapper} A [ModelMapper]{@link module:mapping~ModelMapper} instance.\n   */\n  forModel(name) {\n    let modelMapper = this._modelMappers.get(name);\n\n    if (modelMapper === undefined) {\n      let mappingInfo = this._modelMappingInfos.get(name);\n\n      if (mappingInfo === undefined) {\n        if (!this.client.keyspace) {\n          throw new Error(`No mapping information found for model '${name}'. ` +\n            `Mapper is unable to create default mappings without setting the keyspace`);\n        }\n\n        mappingInfo = ModelMappingInfo.createDefault(name, this.client.keyspace);\n        this.client.log('info', `Mapping information for model '${name}' not found, creating default mapping. ` +\n          `Keyspace: ${mappingInfo.keyspace}; Table: ${mappingInfo.tables[0].name}.`);\n      } else {\n        this.client.log('info', `Creating model mapper for '${name}' using mapping information. Keyspace: ${\n          mappingInfo.keyspace}; Table${mappingInfo.tables.length > 1? 's' : ''}: ${\n          mappingInfo.tables.map(t => t.name)}.`);\n      }\n\n      modelMapper = new ModelMapper(name, new MappingHandler(this.client, mappingInfo));\n      this._modelMappers.set(name, modelMapper);\n    }\n\n    return modelMapper;\n  }\n\n  /**\n   * Executes a batch of queries represented in the items.\n   * @param {Array<ModelBatchItem>} items\n   * @param {Object|String} [executionOptions] An object containing the options to be used for the requests\n   * execution or a string representing the name of the execution profile.\n   * @param {String} [executionOptions.executionProfile] The name of the execution profile.\n   * @param {Boolean} [executionOptions.isIdempotent] Defines whether the query can be applied multiple times without\n   * changing the result beyond the initial application.\n   * <p>\n   *   The mapper uses the generated queries to determine the default value. When an UPDATE is generated with a\n   *   counter column or appending/prepending to a list column, the execution is marked as not idempotent.\n   * </p>\n   * <p>\n   *   Additionally, the mapper uses the safest approach for queries with lightweight transactions (Compare and\n   *   Set) by considering them as non-idempotent. Lightweight transactions at client level with transparent retries can\n   *   break linearizability. If that is not an issue for your application, you can manually set this field to true.\n   * </p>\n   * @param {Boolean} [executionOptions.logged=true] Determines whether the batch should be written to the batchlog.\n   * @param {Number|Long} [executionOptions.timestamp] The default timestamp for the query in microseconds from the\n   * unix epoch (00:00:00, January 1st, 1970).\n   * @returns {Promise<Result>} A Promise that resolves to a [Result]{@link module:mapping~Result}.\n   */\n  batch(items, executionOptions) {\n    if (!Array.isArray(items) || !(items.length > 0)) {\n      return Promise.reject(\n        new errors.ArgumentError('First parameter items should be an Array with 1 or more ModelBatchItem instances'));\n    }\n\n    const queries = [];\n    let isIdempotent = true;\n    let isCounter;\n\n    return Promise\n      .all(items\n        .map(item => {\n          if (!(item instanceof ModelBatchItem)) {\n            return Promise.reject(new Error(\n              'Batch items must be instances of ModelBatchItem, use modelMapper.batching object to create each item'));\n          }\n\n          return item.pushQueries(queries)\n            .then(options => {\n              // The batch is idempotent when all the queries contained are idempotent\n              isIdempotent = isIdempotent && options.isIdempotent;\n\n              // Let it fail at server level when there is a mix of counter and normal mutations\n              isCounter = options.isCounter;\n            });\n        }))\n      .then(() =>\n        this.client.batch(queries, DocInfoAdapter.adaptBatchOptions(executionOptions, isIdempotent, isCounter)))\n      .then(rs => {\n        // Results should only be adapted when the batch contains LWT (single table)\n        const info = items[0].getMappingInfo();\n        return new Result(rs, info, ResultMapper.getMutationAdapter(rs));\n      });\n  }\n}\n\n/**\n * Represents the mapping options.\n * @typedef {Object} module:mapping~MappingOptions\n * @property {Object<String, ModelOptions>} models An associative array containing the\n * name of the model as key and the table and column information as value.\n */\n\n/**\n * Represents a set of options that applies to a certain model.\n * @typedef {Object} module:mapping~ModelOptions\n * @property {Array<String>|Array<{name, isView}>} tables An Array containing the name of the tables or An Array\n * containing the name and isView property to describe the table.\n * @property {TableMappings} mappings The TableMappings implementation instance that is used to convert from column\n * names to property names and the other way around.\n * @property {Object.<String, String>} [columnNames] An associative array containing the name of the columns and\n * properties that doesn't follow the convention defined in the <code>TableMappings</code>.\n * @property {String} [keyspace] The name of the keyspace. Only mandatory when the Client is not using a keyspace.\n */\n\nmodule.exports = Mapper;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\n/**\n * Module containing classes and fields related to the Mapper.\n * @module mapping\n */\n\nexports.Mapper = require('./mapper');\nexports.ModelMapper = require('./model-mapper');\nexports.ModelBatchMapper = require('./model-batch-mapper');\nexports.ModelBatchItem = require('./model-batch-item').ModelBatchItem;\nexports.Result = require('./result');\nconst tableMappingsModule = require('./table-mappings');\nexports.TableMappings = tableMappingsModule.TableMappings;\nexports.DefaultTableMappings = tableMappingsModule.DefaultTableMappings;\nexports.UnderscoreCqlToCamelCaseMappings = tableMappingsModule.UnderscoreCqlToCamelCaseMappings;\nexports.q = require('./q').q;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\nconst { Stream } = require('stream');\nconst utils = require('../utils');\n\n/**\n * Utilities for concurrent query execution with the DataStax Node.js Driver.\n * @module concurrent\n */\n\n/**\n * Executes multiple queries concurrently at the defined concurrency level.\n * @static\n * @param {Client} client The {@link Client} instance.\n * @param {String|Array<{query, params}>} query The query to execute per each parameter item.\n * @param {Array<Array>|Stream|Object} parameters An {@link Array} or a readable {@link Stream} composed of {@link Array}\n * items representing each individual set of parameters. Per each item in the {@link Array} or {@link Stream}, an\n * execution is going to be made.\n * @param {Object} [options] The execution options.\n * @param {String} [options.executionProfile] The execution profile to be used.\n * @param {Number} [options.concurrencyLevel=100] The concurrency level to determine the maximum amount of in-flight\n * operations at any given time\n * @param {Boolean} [options.raiseOnFirstError=true] Determines whether execution should stop after the first failed\n * execution and the corresponding exception will be raised.\n * @param {Boolean} [options.collectResults=false] Determines whether each individual\n * [ResultSet]{@link module:types~ResultSet} instance should be collected in the grouped result.\n * @param {Number} [options.maxErrors=100] The maximum amount of errors to be collected before ignoring the rest of\n * the error results.\n * @returns {Promise<ResultSetGroup>} A <code>Promise</code> of {@link ResultSetGroup} that is resolved when all the\n * executions completed and it's rejected when <code>raiseOnFirstError</code> is <code>true</code> and there is one\n * or more failures.\n * @example <caption>Using a fixed query and an Array of Arrays as parameters</caption>\n * const query = 'INSERT INTO table1 (id, value) VALUES (?, ?)';\n * const parameters = [[1, 'a'], [2, 'b'], [3, 'c'], ]; // ...\n * const result = await executeConcurrent(client, query, parameters);\n * @example <caption>Using a fixed query and a readable stream</caption>\n * const stream = csvStream.pipe(transformLineToArrayStream);\n * const result = await executeConcurrent(client, query, stream);\n * @example <caption>Using a different queries</caption>\n * const queryAndParameters = [\n *   { query: 'INSERT INTO videos (id, name, user_id) VALUES (?, ?, ?)',\n *     params: [ id, name, userId ] },\n *   { query: 'INSERT INTO user_videos (user_id, id, name) VALUES (?, ?, ?)',\n *     params: [ userId, id, name ] },\n *   { query: 'INSERT INTO latest_videos (id, name, user_id) VALUES (?, ?, ?)',\n *     params: [ id, name, userId ] },\n * ];\n *\n * const result = await executeConcurrent(client, queryAndParameters);\n */\nfunction executeConcurrent(client, query, parameters, options) {\n  if (!client) {\n    throw new TypeError('Client instance is not defined');\n  }\n\n  if (typeof query === 'string') {\n    if (Array.isArray(parameters)) {\n      return new ArrayBasedExecutor(client, query, parameters, options).execute();\n    }\n\n    if (parameters instanceof Stream) {\n      return new StreamBasedExecutor(client, query, parameters, options).execute();\n    }\n\n    throw new TypeError('parameters should be an Array or a Stream instance');\n  }\n\n  if (Array.isArray(query)) {\n    options = parameters;\n    return new ArrayBasedExecutor(client, null, query, options).execute();\n  }\n\n  throw new TypeError('A string query or query and parameters array should be provided');\n}\n\n/**\n * Wraps the functionality to execute given an Array.\n * @ignore\n */\nclass ArrayBasedExecutor {\n\n  /**\n   * @param {Client} client\n   * @param {String} query\n   * @param {Array<Array>|Array<{query, params}>} parameters\n   * @param {Object} [options] The execution options.\n   * @private\n   */\n  constructor(client, query, parameters, options) {\n    this._client = client;\n    this._query = query;\n    this._parameters = parameters;\n    options = options || utils.emptyObject;\n    this._raiseOnFirstError = options.raiseOnFirstError !== false;\n    this._concurrencyLevel = Math.min(options.concurrencyLevel || 100, this._parameters.length);\n    this._queryOptions = { prepare: true, executionProfile: options.executionProfile };\n    this._result = new ResultSetGroup(options);\n    this._stop = false;\n  }\n\n  execute() {\n    const promises = new Array(this._concurrencyLevel);\n\n    for (let i = 0; i < this._concurrencyLevel; i++) {\n      promises[i] = this._executeOneAtATime(i, 0);\n    }\n\n    return Promise.all(promises).then(() => this._result);\n  }\n\n  _executeOneAtATime(initialIndex, iteration) {\n    const index = initialIndex + this._concurrencyLevel * iteration;\n\n    if (index >= this._parameters.length || this._stop) {\n      return Promise.resolve();\n    }\n\n    const item = this._parameters[index];\n    let query;\n    let params;\n\n    if (this._query === null) {\n      query = item.query;\n      params = item.params;\n    } else {\n      query = this._query;\n      params = item;\n    }\n\n    return this._client.execute(query, params, this._queryOptions)\n      .then(rs => this._result.setResultItem(index, rs))\n      .catch(err => this._setError(index, err))\n      .then(() => this._executeOneAtATime(initialIndex, iteration + 1));\n  }\n\n  _setError(index, err) {\n    this._result.setError(index, err);\n\n    if (this._raiseOnFirstError) {\n      this._stop = true;\n      throw err;\n    }\n  }\n}\n\n/**\n * Wraps the functionality to execute given a Stream.\n * @ignore\n */\nclass StreamBasedExecutor {\n\n  /**\n   * @param {Client} client\n   * @param {String} query\n   * @param {Stream} stream\n   * @param {Object} [options] The execution options.\n   * @private\n   */\n  constructor(client, query, stream, options) {\n    this._client = client;\n    this._query = query;\n    this._stream = stream;\n    options = options || utils.emptyObject;\n    this._raiseOnFirstError = options.raiseOnFirstError !== false;\n    this._concurrencyLevel = options.concurrencyLevel || 100;\n    this._queryOptions = { prepare: true, executionProfile: options.executionProfile };\n    this._inFlight = 0;\n    this._index = 0;\n    this._result = new ResultSetGroup(options);\n    this._resolveCallback = null;\n    this._rejectCallback = null;\n    this._readEnded = false;\n  }\n\n  execute() {\n    return new Promise((resolve, reject) => {\n      this._resolveCallback = resolve;\n      this._rejectCallback = reject;\n\n      this._stream\n        .on('data', params => this._executeOne(params))\n        .on('error', err => this._setReadEnded(err))\n        .on('end', () => this._setReadEnded());\n    });\n  }\n\n  _executeOne(params) {\n    if (!Array.isArray(params)) {\n      return this._setReadEnded(new TypeError('Stream should be in objectMode and should emit Array instances'));\n    }\n\n    if (this._readEnded) {\n      // Read ended abruptly because of incorrect format or error event being emitted.\n      // We shouldn't consider additional items.\n      return;\n    }\n\n    const index = this._index++;\n    this._inFlight++;\n\n    this._client.execute(this._query, params, this._queryOptions)\n      .then(rs => {\n        this._result.setResultItem(index, rs);\n        this._inFlight--;\n      })\n      .catch(err => {\n        this._inFlight--;\n        this._setError(index, err);\n      })\n      .then(() => {\n        if (this._stream.isPaused()) {\n          this._stream.resume();\n        }\n\n        if (this._readEnded && this._inFlight === 0) {\n          // When read ended and there are no more in-flight requests\n          // We yield the result to the user.\n          // It could have ended prematurely when there is a read error\n          // or there was an execution error and raiseOnFirstError is true\n          // In that case, calling the resolve callback has no effect\n          this._resolveCallback(this._result);\n        }\n      });\n\n    if (this._inFlight >= this._concurrencyLevel) {\n      this._stream.pause();\n    }\n  }\n\n  /**\n   * Marks the stream read process as ended.\n   * @param {Error} [err] The stream read error.\n   * @private\n   */\n  _setReadEnded(err) {\n    if (!this._readEnded) {\n      this._readEnded = true;\n\n      if (err) {\n        // There was an error while reading from the input stream.\n        // This should be surfaced as a failure\n        this._rejectCallback(err);\n      } else if (this._inFlight === 0) {\n        // Ended signaled and there are no more pending messages.\n        this._resolveCallback(this._result);\n      }\n    }\n  }\n\n  _setError(index, err) {\n    this._result.setError(index, err);\n\n    if (this._raiseOnFirstError) {\n      this._readEnded = true;\n      this._rejectCallback(err);\n    }\n  }\n}\n\n/**\n * Represents results from different related executions.\n */\nclass ResultSetGroup {\n\n  /**\n   * Creates a new instance of {@link ResultSetGroup}.\n   * @ignore\n   */\n  constructor(options) {\n    this._collectResults = options.collectResults;\n    this._maxErrors = options.maxErrors || 100;\n    this.totalExecuted = 0;\n    this.errors = [];\n\n    if (this._collectResults) {\n      /**\n       * Gets an {@link Array} containing the [ResultSet]{@link module:types~ResultSet} instances from each execution.\n       * <p>\n       *   Note that when <code>collectResults</code> is set to <code>false</code>, accessing this property will\n       *   throw an error.\n       * </p>\n       * @type {Array}\n       */\n      this.resultItems = [];\n    } else {\n      Object.defineProperty(this, 'resultItems', { enumerable: false, get: () => {\n        throw new Error('Property resultItems can not be accessed when collectResults is set to false');\n      }});\n    }\n  }\n\n  /** @ignore */\n  setResultItem(index, rs) {\n    this.totalExecuted++;\n\n    if (this._collectResults) {\n      this.resultItems[index] = rs;\n    }\n  }\n\n  /**\n   * Internal method to set the error of an execution.\n   * @ignore\n   */\n  setError(index, err) {\n    this.totalExecuted++;\n\n    if (this.errors.length < this._maxErrors) {\n      this.errors.push(err);\n    }\n\n    if (this._collectResults) {\n      this.resultItems[index] = err;\n    }\n  }\n}\n\nexports.executeConcurrent = executeConcurrent;\nexports.ResultSetGroup = ResultSetGroup;", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\n/**\n * DataStax module.\n * <p>\n *   Contains modules and classes to represent functionality that is specific to DataStax products.\n * </p>\n * @module datastax\n */\n\nexports.graph = require('./graph');\nexports.search = require('./search');", "/*\n * Copyright DataStax, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\nconst clientOptions = require('./lib/client-options');\nexports.Client = require('./lib/client');\nexports.ExecutionProfile = require('./lib/execution-profile').ExecutionProfile;\nexports.ExecutionOptions = require('./lib/execution-options').ExecutionOptions;\nexports.types = require('./lib/types');\nexports.errors = require('./lib/errors');\nexports.policies = require('./lib/policies');\nexports.auth = require('./lib/auth');\nexports.mapping = require('./lib/mapping');\nexports.tracker = require('./lib/tracker');\nexports.metrics = require('./lib/metrics');\nexports.concurrent = require('./lib/concurrent');\n\nconst token = require('./lib/token');\nexports.token = {\n  Token: token.Token,\n  TokenRange: token.TokenRange\n};\nconst Metadata = require('./lib/metadata');\nexports.metadata = {\n  Metadata: Metadata\n};\nexports.Encoder = require('./lib/encoder');\nexports.geometry = require('./lib/geometry');\nexports.datastax = require('./lib/datastax');\n/**\n * Returns a new instance of the default [options]{@link ClientOptions} used by the driver.\n */\nexports.defaultOptions = function () {\n  return clientOptions.defaultOptions();\n};\nexports.version = require('./package.json').version;"],
  "mappings": "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",
  "names": ["exports", "Long", "times", "err", "uuid", "err", "options", "i", "endianness", "require_geometry", "info", "params", "types", "TypeError", "err", "h", "err", "token", "kind", "query", "types", "process", "packageInfo", "require_errors", "require_utils", "err", "fd", "path", "require_util", "localPath", "options", "err", "content", "fileAttr", "URL", "require_result_set", "typeKey", "version", "i", "doc", "docInfo"]
}
